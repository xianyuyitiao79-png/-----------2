var uX=Object.defineProperty;var fX=(t,e,n)=>e in t?uX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Li=(t,e,n)=>fX(t,typeof e!="symbol"?e+"":e,n);function hX(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Nh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y8={exports:{}},Ob={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dX=Symbol.for("react.transitional.element"),pX=Symbol.for("react.fragment");function _8(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:dX,type:t,key:i,ref:e!==void 0?e:null,props:n}}Ob.Fragment=pX;Ob.jsx=_8;Ob.jsxs=_8;y8.exports=Ob;var $=y8.exports,x8={exports:{}},Kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw=Symbol.for("react.transitional.element"),mX=Symbol.for("react.portal"),gX=Symbol.for("react.fragment"),vX=Symbol.for("react.strict_mode"),yX=Symbol.for("react.profiler"),_X=Symbol.for("react.consumer"),xX=Symbol.for("react.context"),bX=Symbol.for("react.forward_ref"),SX=Symbol.for("react.suspense"),EX=Symbol.for("react.memo"),b8=Symbol.for("react.lazy"),MX=Symbol.for("react.activity"),t5=Symbol.iterator;function TX(t){return t===null||typeof t!="object"?null:(t=t5&&t[t5]||t["@@iterator"],typeof t=="function"?t:null)}var S8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E8=Object.assign,M8={};function mm(t,e,n){this.props=t,this.context=e,this.refs=M8,this.updater=n||S8}mm.prototype.isReactComponent={};mm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function T8(){}T8.prototype=mm.prototype;function vw(t,e,n){this.props=t,this.context=e,this.refs=M8,this.updater=n||S8}var yw=vw.prototype=new T8;yw.constructor=vw;E8(yw,mm.prototype);yw.isPureReactComponent=!0;var n5=Array.isArray;function JM(){}var di={H:null,A:null,T:null,S:null},A8=Object.prototype.hasOwnProperty;function _w(t,e,n){var i=n.ref;return{$$typeof:gw,type:t,key:e,ref:i!==void 0?i:null,props:n}}function AX(t,e){return _w(t.type,e,t.props)}function xw(t){return typeof t=="object"&&t!==null&&t.$$typeof===gw}function wX(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var i5=/\/+/g;function G3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wX(""+t.key):e.toString(36)}function CX(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(JM,JM):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Zd(t,e,n,i,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case gw:case mX:s=!0;break;case b8:return s=t._init,Zd(s(t._payload),e,n,i,r)}}if(s)return r=r(t),s=i===""?"."+G3(t,0):i,n5(r)?(n="",s!=null&&(n=s.replace(i5,"$&/")+"/"),Zd(r,e,n,"",function(f){return f})):r!=null&&(xw(r)&&(r=AX(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(i5,"$&/")+"/")+s)),e.push(r)),1;s=0;var o=i===""?".":i+":";if(n5(t))for(var l=0;l<t.length;l++)i=t[l],a=o+G3(i,l),s+=Zd(i,e,n,a,r);else if(l=TX(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,a=o+G3(i,l++),s+=Zd(i,e,n,a,r);else if(a==="object"){if(typeof t.then=="function")return Zd(CX(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function V1(t,e,n){if(t==null)return t;var i=[],r=0;return Zd(t,i,"","",function(a){return e.call(n,a,r++)}),i}function RX(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var r5=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},DX={map:V1,forEach:function(t,e,n){V1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return V1(t,function(){e++}),e},toArray:function(t){return V1(t,function(e){return e})||[]},only:function(t){if(!xw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Kt.Activity=MX;Kt.Children=DX;Kt.Component=mm;Kt.Fragment=gX;Kt.Profiler=yX;Kt.PureComponent=vw;Kt.StrictMode=vX;Kt.Suspense=SX;Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=di;Kt.__COMPILER_RUNTIME={__proto__:null,c:function(t){return di.H.useMemoCache(t)}};Kt.cache=function(t){return function(){return t.apply(null,arguments)}};Kt.cacheSignal=function(){return null};Kt.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=E8({},t.props),r=t.key;if(e!=null)for(a in e.key!==void 0&&(r=""+e.key),e)!A8.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];i.children=s}return _w(t.type,r,i)};Kt.createContext=function(t){return t={$$typeof:xX,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:_X,_context:t},t};Kt.createElement=function(t,e,n){var i,r={},a=null;if(e!=null)for(i in e.key!==void 0&&(a=""+e.key),e)A8.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in s=t.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return _w(t,a,r)};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(t){return{$$typeof:bX,render:t}};Kt.isValidElement=xw;Kt.lazy=function(t){return{$$typeof:b8,_payload:{_status:-1,_result:t},_init:RX}};Kt.memo=function(t,e){return{$$typeof:EX,type:t,compare:e===void 0?null:e}};Kt.startTransition=function(t){var e=di.T,n={};di.T=n;try{var i=t(),r=di.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(JM,r5)}catch(a){r5(a)}finally{e!==null&&n.types!==null&&(e.types=n.types),di.T=e}};Kt.unstable_useCacheRefresh=function(){return di.H.useCacheRefresh()};Kt.use=function(t){return di.H.use(t)};Kt.useActionState=function(t,e,n){return di.H.useActionState(t,e,n)};Kt.useCallback=function(t,e){return di.H.useCallback(t,e)};Kt.useContext=function(t){return di.H.useContext(t)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(t,e){return di.H.useDeferredValue(t,e)};Kt.useEffect=function(t,e){return di.H.useEffect(t,e)};Kt.useEffectEvent=function(t){return di.H.useEffectEvent(t)};Kt.useId=function(){return di.H.useId()};Kt.useImperativeHandle=function(t,e,n){return di.H.useImperativeHandle(t,e,n)};Kt.useInsertionEffect=function(t,e){return di.H.useInsertionEffect(t,e)};Kt.useLayoutEffect=function(t,e){return di.H.useLayoutEffect(t,e)};Kt.useMemo=function(t,e){return di.H.useMemo(t,e)};Kt.useOptimistic=function(t,e){return di.H.useOptimistic(t,e)};Kt.useReducer=function(t,e,n){return di.H.useReducer(t,e,n)};Kt.useRef=function(t){return di.H.useRef(t)};Kt.useState=function(t){return di.H.useState(t)};Kt.useSyncExternalStore=function(t,e,n){return di.H.useSyncExternalStore(t,e,n)};Kt.useTransition=function(){return di.H.useTransition()};Kt.version="19.2.3";x8.exports=Kt;var O=x8.exports;const J=Nh(O),bw=hX({__proto__:null,default:J},[O]);var w8={exports:{}},Nb={},C8={exports:{}},R8={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var q=z.length;z.push(G);e:for(;0<q;){var se=q-1>>>1,le=z[se];if(0<r(le,G))z[se]=G,z[q]=le,q=se;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var G=z[0],q=z.pop();if(q!==G){z[0]=q;e:for(var se=0,le=z.length,me=le>>>1;se<me;){var Ae=2*(se+1)-1,Le=z[Ae],Ke=Ae+1,yt=z[Ke];if(0>r(Le,q))Ke<le&&0>r(yt,Le)?(z[se]=yt,z[Ke]=q,se=Ke):(z[se]=Le,z[Ae]=q,se=Ae);else if(Ke<le&&0>r(yt,q))z[se]=yt,z[Ke]=q,se=Ke;else break e}}return G}function r(z,G){var q=z.sortIndex-G.sortIndex;return q!==0?q:z.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],f=[],h=1,d=null,p=3,g=!1,y=!1,S=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function T(z){for(var G=n(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=z)i(f),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(f)}}function w(z){if(S=!1,T(z),!y)if(n(l)!==null)y=!0,R||(R=!0,X());else{var G=n(f);G!==null&&Z(w,G.startTime-z)}}var R=!1,N=-1,U=5,A=-1;function C(){return b?!0:!(t.unstable_now()-A<U)}function I(){if(b=!1,R){var z=t.unstable_now();A=z;var G=!0;try{e:{y=!1,S&&(S=!1,x(N),N=-1),g=!0;var q=p;try{t:{for(T(z),d=n(l);d!==null&&!(d.expirationTime>z&&C());){var se=d.callback;if(typeof se=="function"){d.callback=null,p=d.priorityLevel;var le=se(d.expirationTime<=z);if(z=t.unstable_now(),typeof le=="function"){d.callback=le,T(z),G=!0;break t}d===n(l)&&i(l),T(z)}else i(l);d=n(l)}if(d!==null)G=!0;else{var me=n(f);me!==null&&Z(w,me.startTime-z),G=!1}}break e}finally{d=null,p=q,g=!1}G=void 0}}finally{G?X():R=!1}}}var X;if(typeof E=="function")X=function(){E(I)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Y=j.port2;j.port1.onmessage=I,X=function(){Y.postMessage(null)}}else X=function(){v(I,0)};function Z(z,G){N=v(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var q=p;p=G;try{return z()}finally{p=q}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=p;p=z;try{return G()}finally{p=q}},t.unstable_scheduleCallback=function(z,G,q){var se=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,z){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=q+le,z={id:h++,callback:G,priorityLevel:z,startTime:q,expirationTime:le,sortIndex:-1},q>se?(z.sortIndex=q,e(f,z),n(l)===null&&z===n(f)&&(S?(x(N),N=-1):S=!0,Z(w,q-se))):(z.sortIndex=le,e(l,z),y||g||(y=!0,R||(R=!0,X()))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var G=p;return function(){var q=p;p=G;try{return z.apply(this,arguments)}finally{p=q}}}})(R8);C8.exports=R8;var OX=C8.exports,D8={exports:{}},_a={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NX=O;function O8(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Vc(){}var ma={d:{f:Vc,r:function(){throw Error(O8(522))},D:Vc,C:Vc,L:Vc,m:Vc,X:Vc,S:Vc,M:Vc},p:0,findDOMNode:null},UX=Symbol.for("react.portal");function LX(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:UX,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Q0=NX.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ub(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}_a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ma;_a.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(O8(299));return LX(t,e,null,n)};_a.flushSync=function(t){var e=Q0.T,n=ma.p;try{if(Q0.T=null,ma.p=2,t)return t()}finally{Q0.T=e,ma.p=n,ma.d.f()}};_a.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,ma.d.C(t,e))};_a.prefetchDNS=function(t){typeof t=="string"&&ma.d.D(t)};_a.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Ub(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?ma.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):n==="script"&&ma.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};_a.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ub(e.as,e.crossOrigin);ma.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&ma.d.M(t)};_a.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Ub(n,e.crossOrigin);ma.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};_a.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ub(e.as,e.crossOrigin);ma.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else ma.d.m(t)};_a.requestFormReset=function(t){ma.d.r(t)};_a.unstable_batchedUpdates=function(t,e){return t(e)};_a.useFormState=function(t,e,n){return Q0.H.useFormState(t,e,n)};_a.useFormStatus=function(){return Q0.H.useHostTransitionStatus()};_a.version="19.2.3";function N8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N8)}catch(t){console.error(t)}}N8(),D8.exports=_a;var Lb=D8.exports;const PX=Nh(Lb);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vr=OX,U8=O,IX=Lb;function Ne(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function L8(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sv(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P8(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I8(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function a5(t){if(Sv(t)!==t)throw Error(Ne(188))}function zX(t){var e=t.alternate;if(!e){if(e=Sv(t),e===null)throw Error(Ne(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return a5(r),t;if(a===i)return a5(r),e;a=a.sibling}throw Error(Ne(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,o=r.child;o;){if(o===n){s=!0,n=r,i=a;break}if(o===i){s=!0,i=r,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,i=r;break}if(o===i){s=!0,i=a,n=r;break}o=o.sibling}if(!s)throw Error(Ne(189))}}if(n.alternate!==i)throw Error(Ne(190))}if(n.tag!==3)throw Error(Ne(188));return n.stateNode.current===n?t:e}function z8(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=z8(t),e!==null)return e;t=t.sibling}return null}var gi=Object.assign,BX=Symbol.for("react.element"),G1=Symbol.for("react.transitional.element"),V0=Symbol.for("react.portal"),Jd=Symbol.for("react.fragment"),B8=Symbol.for("react.strict_mode"),eT=Symbol.for("react.profiler"),F8=Symbol.for("react.consumer"),Ql=Symbol.for("react.context"),Sw=Symbol.for("react.forward_ref"),tT=Symbol.for("react.suspense"),nT=Symbol.for("react.suspense_list"),Ew=Symbol.for("react.memo"),Qc=Symbol.for("react.lazy"),iT=Symbol.for("react.activity"),FX=Symbol.for("react.memo_cache_sentinel"),s5=Symbol.iterator;function h0(t){return t===null||typeof t!="object"?null:(t=s5&&t[s5]||t["@@iterator"],typeof t=="function"?t:null)}var HX=Symbol.for("react.client.reference");function rT(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===HX?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jd:return"Fragment";case eT:return"Profiler";case B8:return"StrictMode";case tT:return"Suspense";case nT:return"SuspenseList";case iT:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V0:return"Portal";case Ql:return t.displayName||"Context";case F8:return(t._context.displayName||"Context")+".Consumer";case Sw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ew:return e=t.displayName||null,e!==null?e:rT(t.type)||"Memo";case Qc:e=t._payload,t=t._init;try{return rT(t(e))}catch{}}return null}var G0=Array.isArray,Xt=U8.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Nn=IX.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rh={pending:!1,data:null,method:null,action:null},aT=[],ep=-1;function ml(t){return{current:t}}function Cr(t){0>ep||(t.current=aT[ep],aT[ep]=null,ep--)}function ri(t,e){ep++,aT[ep]=t.current,t.current=e}var ol=ml(null),Dg=ml(null),mu=ml(null),B_=ml(null);function F_(t,e){switch(ri(mu,e),ri(Dg,t),ri(ol,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?hN(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=hN(e),t=aB(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Cr(ol),ri(ol,t)}function Np(){Cr(ol),Cr(Dg),Cr(mu)}function sT(t){t.memoizedState!==null&&ri(B_,t);var e=ol.current,n=aB(e,t.type);e!==n&&(ri(Dg,t),ri(ol,n))}function H_(t){Dg.current===t&&(Cr(ol),Cr(Dg)),B_.current===t&&(Cr(B_),Vg._currentValue=rh)}var k3,o5;function Hf(t){if(k3===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);k3=e&&e[1]||"",o5=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+k3+t+o5}var j3=!1;function X3(t,e){if(!t||j3)return"";j3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(g){var p=g}Reflect.construct(t,[],d)}else{try{d.call()}catch(g){p=g}t.call(d.prototype)}}else{try{throw Error()}catch(g){p=g}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(g){if(g&&p&&typeof g.stack=="string")return[g.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split(`
`),f=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<f.length&&!f[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===f.length)for(i=l.length-1,r=f.length-1;1<=i&&0<=r&&l[i]!==f[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==f[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==f[r]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=r);break}}}finally{j3=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Hf(n):""}function VX(t,e){switch(t.tag){case 26:case 27:case 5:return Hf(t.type);case 16:return Hf("Lazy");case 13:return t.child!==e&&e!==null?Hf("Suspense Fallback"):Hf("Suspense");case 19:return Hf("SuspenseList");case 0:case 15:return X3(t.type,!1);case 11:return X3(t.type.render,!1);case 1:return X3(t.type,!0);case 31:return Hf("Activity");default:return""}}function l5(t){try{var e="",n=null;do e+=VX(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var oT=Object.prototype.hasOwnProperty,Mw=vr.unstable_scheduleCallback,W3=vr.unstable_cancelCallback,GX=vr.unstable_shouldYield,kX=vr.unstable_requestPaint,hs=vr.unstable_now,jX=vr.unstable_getCurrentPriorityLevel,H8=vr.unstable_ImmediatePriority,V8=vr.unstable_UserBlockingPriority,V_=vr.unstable_NormalPriority,XX=vr.unstable_LowPriority,G8=vr.unstable_IdlePriority,WX=vr.log,YX=vr.unstable_setDisableYieldValue,Ev=null,ds=null;function ou(t){if(typeof WX=="function"&&YX(t),ds&&typeof ds.setStrictMode=="function")try{ds.setStrictMode(Ev,t)}catch{}}var ps=Math.clz32?Math.clz32:$X,qX=Math.log,ZX=Math.LN2;function $X(t){return t>>>=0,t===0?32:31-(qX(t)/ZX|0)|0}var k1=256,j1=262144,X1=4194304;function Vf(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Pb(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,a=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~a,i!==0?r=Vf(i):(s&=o,s!==0?r=Vf(s):n||(n=o&~t,n!==0&&(r=Vf(n))))):(o=i&~a,o!==0?r=Vf(o):s!==0?r=Vf(s):n||(n=i&~t,n!==0&&(r=Vf(n)))),r===0?0:e!==0&&e!==r&&!(e&a)&&(a=r&-r,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:r}function Mv(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function KX(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k8(){var t=X1;return X1<<=1,!(X1&62914560)&&(X1=4194304),t}function Y3(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tv(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function QX(t,e,n,i,r,a){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,f=t.hiddenUpdates;for(n=s&~n;0<n;){var h=31-ps(n),d=1<<h;o[h]=0,l[h]=-1;var p=f[h];if(p!==null)for(f[h]=null,h=0;h<p.length;h++){var g=p[h];g!==null&&(g.lane&=-536870913)}n&=~d}i!==0&&j8(t,i,0),a!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=a&~(s&~e))}function j8(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-ps(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function X8(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ps(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function W8(t,e){var n=e&-e;return n=n&42?1:Tw(n),n&(t.suspendedLanes|e)?0:n}function Tw(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Aw(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Y8(){var t=Nn.p;return t!==0?t:(t=window.event,t===void 0?32:gB(t.type))}function c5(t,e){var n=Nn.p;try{return Nn.p=t,e()}finally{Nn.p=n}}var Yu=Math.random().toString(36).slice(2),Pr="__reactFiber$"+Yu,Ba="__reactProps$"+Yu,gm="__reactContainer$"+Yu,lT="__reactEvents$"+Yu,JX="__reactListeners$"+Yu,eW="__reactHandles$"+Yu,u5="__reactResources$"+Yu,Av="__reactMarker$"+Yu;function ww(t){delete t[Pr],delete t[Ba],delete t[lT],delete t[JX],delete t[eW]}function tp(t){var e=t[Pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gm]||n[Pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vN(t);t!==null;){if(n=t[Pr])return n;t=vN(t)}return e}t=n,n=t.parentNode}return null}function vm(t){if(t=t[Pr]||t[gm]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function k0(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(Ne(33))}function gp(t){var e=t[u5];return e||(e=t[u5]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function wr(t){t[Av]=!0}var q8=new Set,Z8={};function Uh(t,e){Up(t,e),Up(t+"Capture",e)}function Up(t,e){for(Z8[t]=e,t=0;t<e.length;t++)q8.add(e[t])}var tW=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),f5={},h5={};function nW(t){return oT.call(h5,t)?!0:oT.call(f5,t)?!1:tW.test(t)?h5[t]=!0:(f5[t]=!0,!1)}function f_(t,e,n){if(nW(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function W1(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Ol(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function qs(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $8(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iW(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,a=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cT(t){if(!t._valueTracker){var e=$8(t)?"checked":"value";t._valueTracker=iW(t,e,""+t[e])}}function K8(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=$8(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function G_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var rW=/[\n"\\]/g;function Js(t){return t.replace(rW,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function uT(t,e,n,i,r,a,s,o){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+qs(e)):t.value!==""+qs(e)&&(t.value=""+qs(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?fT(t,s,qs(e)):n!=null?fT(t,s,qs(n)):i!=null&&t.removeAttribute("value"),r==null&&a!=null&&(t.defaultChecked=!!a),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+qs(o):t.removeAttribute("name")}function Q8(t,e,n,i,r,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null)){cT(t);return}n=n!=null?""+qs(n):"",e=e!=null?""+qs(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s),cT(t)}function fT(t,e,n){e==="number"&&G_(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function vp(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+qs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function J8(t,e,n){if(e!=null&&(e=""+qs(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+qs(n):""}function eI(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(Ne(92));if(G0(i)){if(1<i.length)throw Error(Ne(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=qs(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),cT(t)}function Lp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var aW=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function d5(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||aW.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function tI(t,e,n){if(e!=null&&typeof e!="object")throw Error(Ne(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&d5(t,r,i)}else for(var a in e)e.hasOwnProperty(a)&&d5(t,a,e[a])}function Cw(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sW=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oW=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function h_(t){return oW.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Jl(){}var hT=null;function Rw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var np=null,yp=null;function p5(t){var e=vm(t);if(e&&(t=e.stateNode)){var n=t[Ba]||null;e:switch(t=e.stateNode,e.type){case"input":if(uT(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Js(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Ba]||null;if(!r)throw Error(Ne(90));uT(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&K8(i)}break e;case"textarea":J8(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&vp(t,!!n.multiple,e,!1)}}}var q3=!1;function nI(t,e,n){if(q3)return t(e,n);q3=!0;try{var i=t(e);return i}finally{if(q3=!1,(np!==null||yp!==null)&&(Yb(),np&&(e=np,t=yp,yp=np=null,p5(e),t)))for(e=0;e<t.length;e++)p5(t[e])}}function Og(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Ba]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ne(231,e,typeof n));return n}var uc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dT=!1;if(uc)try{var d0={};Object.defineProperty(d0,"passive",{get:function(){dT=!0}}),window.addEventListener("test",d0,d0),window.removeEventListener("test",d0,d0)}catch{dT=!1}var lu=null,Dw=null,d_=null;function iI(){if(d_)return d_;var t,e=Dw,n=e.length,i,r="value"in lu?lu.value:lu.textContent,a=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[a-i];i++);return d_=r.slice(t,1<i?1-i:void 0)}function p_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Y1(){return!0}function m5(){return!1}function Va(t){function e(n,i,r,a,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Y1:m5,this.isPropagationStopped=m5,this}return gi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Y1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Y1)},persist:function(){},isPersistent:Y1}),e}var Lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ib=Va(Lh),wv=gi({},Lh,{view:0,detail:0}),lW=Va(wv),Z3,$3,p0,zb=gi({},wv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ow,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==p0&&(p0&&t.type==="mousemove"?(Z3=t.screenX-p0.screenX,$3=t.screenY-p0.screenY):$3=Z3=0,p0=t),Z3)},movementY:function(t){return"movementY"in t?t.movementY:$3}}),g5=Va(zb),cW=gi({},zb,{dataTransfer:0}),uW=Va(cW),fW=gi({},wv,{relatedTarget:0}),K3=Va(fW),hW=gi({},Lh,{animationName:0,elapsedTime:0,pseudoElement:0}),dW=Va(hW),pW=gi({},Lh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mW=Va(pW),gW=gi({},Lh,{data:0}),v5=Va(gW),vW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_W={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_W[t])?!!e[t]:!1}function Ow(){return xW}var bW=gi({},wv,{key:function(t){if(t.key){var e=vW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=p_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ow,charCode:function(t){return t.type==="keypress"?p_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?p_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SW=Va(bW),EW=gi({},zb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y5=Va(EW),MW=gi({},wv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ow}),TW=Va(MW),AW=gi({},Lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),wW=Va(AW),CW=gi({},zb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RW=Va(CW),DW=gi({},Lh,{newState:0,oldState:0}),OW=Va(DW),NW=[9,13,27,32],Nw=uc&&"CompositionEvent"in window,J0=null;uc&&"documentMode"in document&&(J0=document.documentMode);var UW=uc&&"TextEvent"in window&&!J0,rI=uc&&(!Nw||J0&&8<J0&&11>=J0),_5=" ",x5=!1;function aI(t,e){switch(t){case"keyup":return NW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ip=!1;function LW(t,e){switch(t){case"compositionend":return sI(e);case"keypress":return e.which!==32?null:(x5=!0,_5);case"textInput":return t=e.data,t===_5&&x5?null:t;default:return null}}function PW(t,e){if(ip)return t==="compositionend"||!Nw&&aI(t,e)?(t=iI(),d_=Dw=lu=null,ip=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rI&&e.locale!=="ko"?null:e.data;default:return null}}var IW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IW[t.type]:e==="textarea"}function oI(t,e,n,i){np?yp?yp.push(i):yp=[i]:np=i,e=sx(e,"onChange"),0<e.length&&(n=new Ib("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var eg=null,Ng=null;function zW(t){nB(t,0)}function Bb(t){var e=k0(t);if(K8(e))return t}function S5(t,e){if(t==="change")return e}var lI=!1;if(uc){var Q3;if(uc){var J3="oninput"in document;if(!J3){var E5=document.createElement("div");E5.setAttribute("oninput","return;"),J3=typeof E5.oninput=="function"}Q3=J3}else Q3=!1;lI=Q3&&(!document.documentMode||9<document.documentMode)}function M5(){eg&&(eg.detachEvent("onpropertychange",cI),Ng=eg=null)}function cI(t){if(t.propertyName==="value"&&Bb(Ng)){var e=[];oI(e,Ng,t,Rw(t)),nI(zW,e)}}function BW(t,e,n){t==="focusin"?(M5(),eg=e,Ng=n,eg.attachEvent("onpropertychange",cI)):t==="focusout"&&M5()}function FW(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bb(Ng)}function HW(t,e){if(t==="click")return Bb(e)}function VW(t,e){if(t==="input"||t==="change")return Bb(e)}function GW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ss=typeof Object.is=="function"?Object.is:GW;function Ug(t,e){if(Ss(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!oT.call(e,r)||!Ss(t[r],e[r]))return!1}return!0}function T5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A5(t,e){var n=T5(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=T5(n)}}function uI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fI(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=G_(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=G_(t.document)}return e}function Uw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var kW=uc&&"documentMode"in document&&11>=document.documentMode,rp=null,pT=null,tg=null,mT=!1;function w5(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mT||rp==null||rp!==G_(i)||(i=rp,"selectionStart"in i&&Uw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),tg&&Ug(tg,i)||(tg=i,i=sx(pT,"onSelect"),0<i.length&&(e=new Ib("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=rp)))}function Ef(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ap={animationend:Ef("Animation","AnimationEnd"),animationiteration:Ef("Animation","AnimationIteration"),animationstart:Ef("Animation","AnimationStart"),transitionrun:Ef("Transition","TransitionRun"),transitionstart:Ef("Transition","TransitionStart"),transitioncancel:Ef("Transition","TransitionCancel"),transitionend:Ef("Transition","TransitionEnd")},eE={},hI={};uc&&(hI=document.createElement("div").style,"AnimationEvent"in window||(delete ap.animationend.animation,delete ap.animationiteration.animation,delete ap.animationstart.animation),"TransitionEvent"in window||delete ap.transitionend.transition);function Ph(t){if(eE[t])return eE[t];if(!ap[t])return t;var e=ap[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hI)return eE[t]=e[n];return t}var dI=Ph("animationend"),pI=Ph("animationiteration"),mI=Ph("animationstart"),jW=Ph("transitionrun"),XW=Ph("transitionstart"),WW=Ph("transitioncancel"),gI=Ph("transitionend"),vI=new Map,gT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gT.push("scrollEnd");function Po(t,e){vI.set(t,e),Uh(e,[t])}var k_=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ys=[],sp=0,Lw=0;function Fb(){for(var t=sp,e=Lw=sp=0;e<t;){var n=Ys[e];Ys[e++]=null;var i=Ys[e];Ys[e++]=null;var r=Ys[e];Ys[e++]=null;var a=Ys[e];if(Ys[e++]=null,i!==null&&r!==null){var s=i.pending;s===null?r.next=r:(r.next=s.next,s.next=r),i.pending=r}a!==0&&yI(n,r,a)}}function Hb(t,e,n,i){Ys[sp++]=t,Ys[sp++]=e,Ys[sp++]=n,Ys[sp++]=i,Lw|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Pw(t,e,n,i){return Hb(t,e,n,i),j_(t)}function Ih(t,e){return Hb(t,null,null,e),j_(t)}function yI(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,a=t.return;a!==null;)a.childLanes|=n,i=a.alternate,i!==null&&(i.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(r=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,r&&e!==null&&(r=31-ps(n),t=a.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),a):null}function j_(t){if(50<ug)throw ug=0,zT=null,Error(Ne(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var op={};function YW(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(t,e,n,i){return new YW(t,e,n,i)}function Iw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ic(t,e){var n=t.alternate;return n===null?(n=ls(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function _I(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function m_(t,e,n,i,r,a){var s=0;if(i=t,typeof t=="function")Iw(t)&&(s=1);else if(typeof t=="string")s=QY(t,n,ol.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case iT:return t=ls(31,n,e,r),t.elementType=iT,t.lanes=a,t;case Jd:return ah(n.children,r,a,e);case B8:s=8,r|=24;break;case eT:return t=ls(12,n,e,r|2),t.elementType=eT,t.lanes=a,t;case tT:return t=ls(13,n,e,r),t.elementType=tT,t.lanes=a,t;case nT:return t=ls(19,n,e,r),t.elementType=nT,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ql:s=10;break e;case F8:s=9;break e;case Sw:s=11;break e;case Ew:s=14;break e;case Qc:s=16,i=null;break e}s=29,n=Error(Ne(130,t===null?"null":typeof t,"")),i=null}return e=ls(s,n,e,r),e.elementType=t,e.type=i,e.lanes=a,e}function ah(t,e,n,i){return t=ls(7,t,i,e),t.lanes=n,t}function tE(t,e,n){return t=ls(6,t,null,e),t.lanes=n,t}function xI(t){var e=ls(18,null,null,0);return e.stateNode=t,e}function nE(t,e,n){return e=ls(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var C5=new WeakMap;function eo(t,e){if(typeof t=="object"&&t!==null){var n=C5.get(t);return n!==void 0?n:(e={value:t,source:e,stack:l5(e)},C5.set(t,e),e)}return{value:t,source:e,stack:l5(e)}}var lp=[],cp=0,X_=null,Lg=0,Zs=[],$s=0,Ou=null,tl=1,nl="";function jl(t,e){lp[cp++]=Lg,lp[cp++]=X_,X_=t,Lg=e}function bI(t,e,n){Zs[$s++]=tl,Zs[$s++]=nl,Zs[$s++]=Ou,Ou=t;var i=tl;t=nl;var r=32-ps(i)-1;i&=~(1<<r),n+=1;var a=32-ps(e)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,tl=1<<32-ps(e)+r|n<<r|i,nl=a+t}else tl=1<<a|n<<r|i,nl=t}function zw(t){t.return!==null&&(jl(t,1),bI(t,1,0))}function Bw(t){for(;t===X_;)X_=lp[--cp],lp[cp]=null,Lg=lp[--cp],lp[cp]=null;for(;t===Ou;)Ou=Zs[--$s],Zs[$s]=null,nl=Zs[--$s],Zs[$s]=null,tl=Zs[--$s],Zs[$s]=null}function SI(t,e){Zs[$s++]=tl,Zs[$s++]=nl,Zs[$s++]=Ou,tl=e.id,nl=e.overflow,Ou=t}var Ir=null,ui=null,_n=!1,gu=null,to=!1,vT=Error(Ne(519));function Nu(t){var e=Error(Ne(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pg(eo(e,t)),vT}function R5(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Pr]=t,e[Ba]=i,n){case"dialog":fn("cancel",e),fn("close",e);break;case"iframe":case"object":case"embed":fn("load",e);break;case"video":case"audio":for(n=0;n<Fg.length;n++)fn(Fg[n],e);break;case"source":fn("error",e);break;case"img":case"image":case"link":fn("error",e),fn("load",e);break;case"details":fn("toggle",e);break;case"input":fn("invalid",e),Q8(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":fn("invalid",e);break;case"textarea":fn("invalid",e),eI(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||rB(e.textContent,n)?(i.popover!=null&&(fn("beforetoggle",e),fn("toggle",e)),i.onScroll!=null&&fn("scroll",e),i.onScrollEnd!=null&&fn("scrollend",e),i.onClick!=null&&(e.onclick=Jl),e=!0):e=!1,e||Nu(t,!0)}function D5(t){for(Ir=t.return;Ir;)switch(Ir.tag){case 5:case 31:case 13:to=!1;return;case 27:case 3:to=!0;return;default:Ir=Ir.return}}function yd(t){if(t!==Ir)return!1;if(!_n)return D5(t),_n=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||GT(t.type,t.memoizedProps)),n=!n),n&&ui&&Nu(t),D5(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ne(317));ui=gN(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ne(317));ui=gN(t)}else e===27?(e=ui,qu(t.type)?(t=WT,WT=null,ui=t):ui=e):ui=Ir?so(t.stateNode.nextSibling):null;return!0}function ph(){ui=Ir=null,_n=!1}function iE(){var t=gu;return t!==null&&(Na===null?Na=t:Na.push.apply(Na,t),gu=null),t}function Pg(t){gu===null?gu=[t]:gu.push(t)}var yT=ml(null),zh=null,ec=null;function eu(t,e,n){ri(yT,e._currentValue),e._currentValue=n}function rc(t){t._currentValue=yT.current,Cr(yT)}function _T(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function xT(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){var s=r.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),_T(a.return,n,t),i||(s=null);break e}a=o.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(Ne(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),_T(s,n,t),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===t){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function ym(t,e,n,i){t=null;for(var r=e,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(Ne(387));if(s=s.memoizedProps,s!==null){var o=r.type;Ss(r.pendingProps.value,s.value)||(t!==null?t.push(o):t=[o])}}else if(r===B_.current){if(s=r.alternate,s===null)throw Error(Ne(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Vg):t=[Vg])}r=r.return}t!==null&&xT(e,t,n,i),e.flags|=262144}function W_(t){for(t=t.firstContext;t!==null;){if(!Ss(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function mh(t){zh=t,ec=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Br(t){return EI(zh,t)}function q1(t,e){return zh===null&&mh(t),EI(t,e)}function EI(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ec===null){if(t===null)throw Error(Ne(308));ec=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ec=ec.next=e;return n}var qW=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},ZW=vr.unstable_scheduleCallback,$W=vr.unstable_NormalPriority,ar={$$typeof:Ql,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fw(){return{controller:new qW,data:new Map,refCount:0}}function Cv(t){t.refCount--,t.refCount===0&&ZW($W,function(){t.controller.abort()})}var ng=null,bT=0,Pp=0,_p=null;function KW(t,e){if(ng===null){var n=ng=[];bT=0,Pp=u4(),_p={status:"pending",value:void 0,then:function(i){n.push(i)}}}return bT++,e.then(O5,O5),e}function O5(){if(--bT===0&&ng!==null){_p!==null&&(_p.status="fulfilled");var t=ng;ng=null,Pp=0,_p=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function QW(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var N5=Xt.S;Xt.S=function(t,e){zz=hs(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&KW(t,e),N5!==null&&N5(t,e)};var sh=ml(null);function Hw(){var t=sh.current;return t!==null?t:Qn.pooledCache}function g_(t,e){e===null?ri(sh,sh.current):ri(sh,e.pool)}function MI(){var t=Hw();return t===null?null:{parent:ar._currentValue,pool:t}}var _m=Error(Ne(460)),Vw=Error(Ne(474)),Vb=Error(Ne(542)),Y_={then:function(){}};function U5(t){return t=t.status,t==="fulfilled"||t==="rejected"}function TI(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Jl,Jl),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,P5(t),t;default:if(typeof e.status=="string")e.then(Jl,Jl);else{if(t=Qn,t!==null&&100<t.shellSuspendCounter)throw Error(Ne(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,P5(t),t}throw oh=e,_m}}function Gf(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(oh=n,_m):n}}var oh=null;function L5(){if(oh===null)throw Error(Ne(459));var t=oh;return oh=null,t}function P5(t){if(t===_m||t===Vb)throw Error(Ne(483))}var xp=null,Ig=0;function Z1(t){var e=Ig;return Ig+=1,xp===null&&(xp=[]),TI(xp,t,e)}function m0(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function $1(t,e){throw e.$$typeof===BX?Error(Ne(525)):(t=Object.prototype.toString.call(e),Error(Ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function AI(t){function e(v,x){if(t){var E=v.deletions;E===null?(v.deletions=[x],v.flags|=16):E.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function i(v){for(var x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function r(v,x){return v=ic(v,x),v.index=0,v.sibling=null,v}function a(v,x,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<x?(v.flags|=67108866,x):E):(v.flags|=67108866,x)):(v.flags|=1048576,x)}function s(v){return t&&v.alternate===null&&(v.flags|=67108866),v}function o(v,x,E,T){return x===null||x.tag!==6?(x=tE(E,v.mode,T),x.return=v,x):(x=r(x,E),x.return=v,x)}function l(v,x,E,T){var w=E.type;return w===Jd?h(v,x,E.props.children,T,E.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Qc&&Gf(w)===x.type)?(x=r(x,E.props),m0(x,E),x.return=v,x):(x=m_(E.type,E.key,E.props,null,v.mode,T),m0(x,E),x.return=v,x)}function f(v,x,E,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=nE(E,v.mode,T),x.return=v,x):(x=r(x,E.children||[]),x.return=v,x)}function h(v,x,E,T,w){return x===null||x.tag!==7?(x=ah(E,v.mode,T,w),x.return=v,x):(x=r(x,E),x.return=v,x)}function d(v,x,E){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=tE(""+x,v.mode,E),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case G1:return E=m_(x.type,x.key,x.props,null,v.mode,E),m0(E,x),E.return=v,E;case V0:return x=nE(x,v.mode,E),x.return=v,x;case Qc:return x=Gf(x),d(v,x,E)}if(G0(x)||h0(x))return x=ah(x,v.mode,E,null),x.return=v,x;if(typeof x.then=="function")return d(v,Z1(x),E);if(x.$$typeof===Ql)return d(v,q1(v,x),E);$1(v,x)}return null}function p(v,x,E,T){var w=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return w!==null?null:o(v,x,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case G1:return E.key===w?l(v,x,E,T):null;case V0:return E.key===w?f(v,x,E,T):null;case Qc:return E=Gf(E),p(v,x,E,T)}if(G0(E)||h0(E))return w!==null?null:h(v,x,E,T,null);if(typeof E.then=="function")return p(v,x,Z1(E),T);if(E.$$typeof===Ql)return p(v,x,q1(v,E),T);$1(v,E)}return null}function g(v,x,E,T,w){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return v=v.get(E)||null,o(x,v,""+T,w);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case G1:return v=v.get(T.key===null?E:T.key)||null,l(x,v,T,w);case V0:return v=v.get(T.key===null?E:T.key)||null,f(x,v,T,w);case Qc:return T=Gf(T),g(v,x,E,T,w)}if(G0(T)||h0(T))return v=v.get(E)||null,h(x,v,T,w,null);if(typeof T.then=="function")return g(v,x,E,Z1(T),w);if(T.$$typeof===Ql)return g(v,x,E,q1(x,T),w);$1(x,T)}return null}function y(v,x,E,T){for(var w=null,R=null,N=x,U=x=0,A=null;N!==null&&U<E.length;U++){N.index>U?(A=N,N=null):A=N.sibling;var C=p(v,N,E[U],T);if(C===null){N===null&&(N=A);break}t&&N&&C.alternate===null&&e(v,N),x=a(C,x,U),R===null?w=C:R.sibling=C,R=C,N=A}if(U===E.length)return n(v,N),_n&&jl(v,U),w;if(N===null){for(;U<E.length;U++)N=d(v,E[U],T),N!==null&&(x=a(N,x,U),R===null?w=N:R.sibling=N,R=N);return _n&&jl(v,U),w}for(N=i(N);U<E.length;U++)A=g(N,v,U,E[U],T),A!==null&&(t&&A.alternate!==null&&N.delete(A.key===null?U:A.key),x=a(A,x,U),R===null?w=A:R.sibling=A,R=A);return t&&N.forEach(function(I){return e(v,I)}),_n&&jl(v,U),w}function S(v,x,E,T){if(E==null)throw Error(Ne(151));for(var w=null,R=null,N=x,U=x=0,A=null,C=E.next();N!==null&&!C.done;U++,C=E.next()){N.index>U?(A=N,N=null):A=N.sibling;var I=p(v,N,C.value,T);if(I===null){N===null&&(N=A);break}t&&N&&I.alternate===null&&e(v,N),x=a(I,x,U),R===null?w=I:R.sibling=I,R=I,N=A}if(C.done)return n(v,N),_n&&jl(v,U),w;if(N===null){for(;!C.done;U++,C=E.next())C=d(v,C.value,T),C!==null&&(x=a(C,x,U),R===null?w=C:R.sibling=C,R=C);return _n&&jl(v,U),w}for(N=i(N);!C.done;U++,C=E.next())C=g(N,v,U,C.value,T),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?U:C.key),x=a(C,x,U),R===null?w=C:R.sibling=C,R=C);return t&&N.forEach(function(X){return e(v,X)}),_n&&jl(v,U),w}function b(v,x,E,T){if(typeof E=="object"&&E!==null&&E.type===Jd&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case G1:e:{for(var w=E.key;x!==null;){if(x.key===w){if(w=E.type,w===Jd){if(x.tag===7){n(v,x.sibling),T=r(x,E.props.children),T.return=v,v=T;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Qc&&Gf(w)===x.type){n(v,x.sibling),T=r(x,E.props),m0(T,E),T.return=v,v=T;break e}n(v,x);break}else e(v,x);x=x.sibling}E.type===Jd?(T=ah(E.props.children,v.mode,T,E.key),T.return=v,v=T):(T=m_(E.type,E.key,E.props,null,v.mode,T),m0(T,E),T.return=v,v=T)}return s(v);case V0:e:{for(w=E.key;x!==null;){if(x.key===w)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(v,x.sibling),T=r(x,E.children||[]),T.return=v,v=T;break e}else{n(v,x);break}else e(v,x);x=x.sibling}T=nE(E,v.mode,T),T.return=v,v=T}return s(v);case Qc:return E=Gf(E),b(v,x,E,T)}if(G0(E))return y(v,x,E,T);if(h0(E)){if(w=h0(E),typeof w!="function")throw Error(Ne(150));return E=w.call(E),S(v,x,E,T)}if(typeof E.then=="function")return b(v,x,Z1(E),T);if(E.$$typeof===Ql)return b(v,x,q1(v,E),T);$1(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,x!==null&&x.tag===6?(n(v,x.sibling),T=r(x,E),T.return=v,v=T):(n(v,x),T=tE(E,v.mode,T),T.return=v,v=T),s(v)):n(v,x)}return function(v,x,E,T){try{Ig=0;var w=b(v,x,E,T);return xp=null,w}catch(N){if(N===_m||N===Vb)throw N;var R=ls(29,N,null,v.mode);return R.lanes=T,R.return=v,R}finally{}}}var gh=AI(!0),wI=AI(!1),Jc=!1;function Gw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ST(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vu(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function yu(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,On&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=j_(t),yI(t,null,n),e}return Hb(t,i,e,n),j_(t)}function ig(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,X8(t,n)}}function rE(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?r=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?r=a=e:a=a.next=e}else r=a=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var ET=!1;function rg(){if(ET){var t=_p;if(t!==null)throw t}}function ag(t,e,n,i){ET=!1;var r=t.updateQueue;Jc=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,f=l.next;l.next=null,s===null?a=f:s.next=f,s=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==s&&(o===null?h.firstBaseUpdate=f:o.next=f,h.lastBaseUpdate=l))}if(a!==null){var d=r.baseState;s=0,h=f=l=null,o=a;do{var p=o.lane&-536870913,g=p!==o.lane;if(g?(gn&p)===p:(i&p)===p){p!==0&&p===Pp&&(ET=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var y=t,S=o;p=e;var b=n;switch(S.tag){case 1:if(y=S.payload,typeof y=="function"){d=y.call(b,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,p=typeof y=="function"?y.call(b,d,p):y,p==null)break e;d=gi({},d,p);break e;case 2:Jc=!0}}p=o.callback,p!==null&&(t.flags|=64,g&&(t.flags|=8192),g=r.callbacks,g===null?r.callbacks=[p]:g.push(p))}else g={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(f=h=g,l=d):h=h.next=g,s|=p;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;g=o,o=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=f,r.lastBaseUpdate=h,a===null&&(r.shared.lanes=0),Lu|=s,t.lanes=s,t.memoizedState=d}}function CI(t,e){if(typeof t!="function")throw Error(Ne(191,t));t.call(e)}function RI(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)CI(n[t],e)}var Ip=ml(null),q_=ml(0);function I5(t,e){t=pc,ri(q_,t),ri(Ip,e),pc=t|e.baseLanes}function MT(){ri(q_,pc),ri(Ip,Ip.current)}function kw(){pc=q_.current,Cr(Ip),Cr(q_)}var Es=ml(null),ao=null;function tu(t){var e=t.alternate;ri(qi,qi.current&1),ri(Es,t),ao===null&&(e===null||Ip.current!==null||e.memoizedState!==null)&&(ao=t)}function TT(t){ri(qi,qi.current),ri(Es,t),ao===null&&(ao=t)}function DI(t){t.tag===22?(ri(qi,qi.current),ri(Es,t),ao===null&&(ao=t)):nu()}function nu(){ri(qi,qi.current),ri(Es,Es.current)}function ss(t){Cr(Es),ao===t&&(ao=null),Cr(qi)}var qi=ml(0);function Z_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||jT(n)||XT(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fc=0,tn=null,Zn=null,ir=null,$_=!1,bp=!1,vh=!1,K_=0,zg=0,Sp=null,JW=0;function zi(){throw Error(Ne(321))}function jw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ss(t[n],e[n]))return!1;return!0}function Xw(t,e,n,i,r,a){return fc=a,tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xt.H=t===null||t.memoizedState===null?oz:n4,vh=!1,a=n(i,r),vh=!1,bp&&(a=NI(e,n,i,r)),OI(t),a}function OI(t){Xt.H=Bg;var e=Zn!==null&&Zn.next!==null;if(fc=0,ir=Zn=tn=null,$_=!1,zg=0,Sp=null,e)throw Error(Ne(300));t===null||or||(t=t.dependencies,t!==null&&W_(t)&&(or=!0))}function NI(t,e,n,i){tn=t;var r=0;do{if(bp&&(Sp=null),zg=0,bp=!1,25<=r)throw Error(Ne(301));if(r+=1,ir=Zn=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}Xt.H=lz,a=e(n,i)}while(bp);return a}function eY(){var t=Xt.H,e=t.useState()[0];return e=typeof e.then=="function"?Rv(e):e,t=t.useState()[0],(Zn!==null?Zn.memoizedState:null)!==t&&(tn.flags|=1024),e}function Ww(){var t=K_!==0;return K_=0,t}function Yw(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function qw(t){if($_){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}$_=!1}fc=0,ir=Zn=tn=null,bp=!1,zg=K_=0,Sp=null}function fa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?tn.memoizedState=ir=t:ir=ir.next=t,ir}function $i(){if(Zn===null){var t=tn.alternate;t=t!==null?t.memoizedState:null}else t=Zn.next;var e=ir===null?tn.memoizedState:ir.next;if(e!==null)ir=e,Zn=t;else{if(t===null)throw tn.alternate===null?Error(Ne(467)):Error(Ne(310));Zn=t,t={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},ir===null?tn.memoizedState=ir=t:ir=ir.next=t}return ir}function Gb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rv(t){var e=zg;return zg+=1,Sp===null&&(Sp=[]),t=TI(Sp,t,e),e=tn,(ir===null?e.memoizedState:ir.next)===null&&(e=e.alternate,Xt.H=e===null||e.memoizedState===null?oz:n4),t}function kb(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Rv(t);if(t.$$typeof===Ql)return Br(t)}throw Error(Ne(438,String(t)))}function Zw(t){var e=null,n=tn.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=tn.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Gb(),tn.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=FX;return e.index++,n}function hc(t,e){return typeof e=="function"?e(t):e}function v_(t){var e=$i();return $w(e,Zn,t)}function $w(t,e,n){var i=t.queue;if(i===null)throw Error(Ne(311));i.lastRenderedReducer=n;var r=t.baseQueue,a=i.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}e.baseQueue=r=a,i.pending=null}if(a=t.baseState,r===null)t.memoizedState=a;else{e=r.next;var o=s=null,l=null,f=e,h=!1;do{var d=f.lane&-536870913;if(d!==f.lane?(gn&d)===d:(fc&d)===d){var p=f.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),d===Pp&&(h=!0);else if((fc&p)===p){f=f.next,p===Pp&&(h=!0);continue}else d={lane:0,revertLane:f.revertLane,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},l===null?(o=l=d,s=a):l=l.next=d,tn.lanes|=p,Lu|=p;d=f.action,vh&&n(a,d),a=f.hasEagerState?f.eagerState:n(a,d)}else p={lane:d,revertLane:f.revertLane,gesture:f.gesture,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},l===null?(o=l=p,s=a):l=l.next=p,tn.lanes|=d,Lu|=d;f=f.next}while(f!==null&&f!==e);if(l===null?s=a:l.next=o,!Ss(a,t.memoizedState)&&(or=!0,h&&(n=_p,n!==null)))throw n;t.memoizedState=a,t.baseState=s,t.baseQueue=l,i.lastRenderedState=a}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function aE(t){var e=$i(),n=e.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do a=t(a,s.action),s=s.next;while(s!==r);Ss(a,e.memoizedState)||(or=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function UI(t,e,n){var i=tn,r=$i(),a=_n;if(a){if(n===void 0)throw Error(Ne(407));n=n()}else n=e();var s=!Ss((Zn||r).memoizedState,n);if(s&&(r.memoizedState=n,or=!0),r=r.queue,Kw(II.bind(null,i,r,t),[t]),r.getSnapshot!==e||s||ir!==null&&ir.memoizedState.tag&1){if(i.flags|=2048,zp(9,{destroy:void 0},PI.bind(null,i,r,n,e),null),Qn===null)throw Error(Ne(349));a||fc&127||LI(i,e,n)}return n}function LI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tn.updateQueue,e===null?(e=Gb(),tn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PI(t,e,n,i){e.value=n,e.getSnapshot=i,zI(e)&&BI(t)}function II(t,e,n){return n(function(){zI(e)&&BI(t)})}function zI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ss(t,n)}catch{return!0}}function BI(t){var e=Ih(t,2);e!==null&&Ia(e,t,2)}function AT(t){var e=fa();if(typeof t=="function"){var n=t;if(t=n(),vh){ou(!0);try{n()}finally{ou(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:t},e}function FI(t,e,n,i){return t.baseState=n,$w(t,Zn,typeof i=="function"?i:hc)}function tY(t,e,n,i,r){if(Xb(t))throw Error(Ne(485));if(t=e.action,t!==null){var a={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};Xt.T!==null?n(!0):a.isTransition=!1,i(a),n=e.pending,n===null?(a.next=e.pending=a,HI(e,a)):(a.next=n.next,e.pending=n.next=a)}}function HI(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var a=Xt.T,s={};Xt.T=s;try{var o=n(r,i),l=Xt.S;l!==null&&l(s,o),z5(t,e,o)}catch(f){wT(t,e,f)}finally{a!==null&&s.types!==null&&(a.types=s.types),Xt.T=a}}else try{a=n(r,i),z5(t,e,a)}catch(f){wT(t,e,f)}}function z5(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){B5(t,e,i)},function(i){return wT(t,e,i)}):B5(t,e,n)}function B5(t,e,n){e.status="fulfilled",e.value=n,VI(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,HI(t,n)))}function wT(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,VI(e),e=e.next;while(e!==i)}t.action=null}function VI(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function GI(t,e){return e}function F5(t,e){if(_n){var n=Qn.formState;if(n!==null){e:{var i=tn;if(_n){if(ui){t:{for(var r=ui,a=to;r.nodeType!==8;){if(!a){r=null;break t}if(r=so(r.nextSibling),r===null){r=null;break t}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){ui=so(r.nextSibling),i=r.data==="F!";break e}}Nu(i)}i=!1}i&&(e=n[0])}}return n=fa(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:GI,lastRenderedState:e},n.queue=i,n=rz.bind(null,tn,i),i.dispatch=n,i=AT(!1),a=t4.bind(null,tn,!1,i.queue),i=fa(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=tY.bind(null,tn,r,a,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function H5(t){var e=$i();return kI(e,Zn,t)}function kI(t,e,n){if(e=$w(t,e,GI)[0],t=v_(hc)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Rv(e)}catch(s){throw s===_m?Vb:s}else i=e;e=$i();var r=e.queue,a=r.dispatch;return n!==e.memoizedState&&(tn.flags|=2048,zp(9,{destroy:void 0},nY.bind(null,r,n),null)),[i,a,t]}function nY(t,e){t.action=e}function V5(t){var e=$i(),n=Zn;if(n!==null)return kI(e,n,t);$i(),e=e.memoizedState,n=$i();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function zp(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=tn.updateQueue,e===null&&(e=Gb(),tn.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function jI(){return $i().memoizedState}function y_(t,e,n,i){var r=fa();tn.flags|=t,r.memoizedState=zp(1|e,{destroy:void 0},n,i===void 0?null:i)}function jb(t,e,n,i){var r=$i();i=i===void 0?null:i;var a=r.memoizedState.inst;Zn!==null&&i!==null&&jw(i,Zn.memoizedState.deps)?r.memoizedState=zp(e,a,n,i):(tn.flags|=t,r.memoizedState=zp(1|e,a,n,i))}function G5(t,e){y_(8390656,8,t,e)}function Kw(t,e){jb(2048,8,t,e)}function iY(t){tn.flags|=4;var e=tn.updateQueue;if(e===null)e=Gb(),tn.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function XI(t){var e=$i().memoizedState;return iY({ref:e,nextImpl:t}),function(){if(On&2)throw Error(Ne(440));return e.impl.apply(void 0,arguments)}}function WI(t,e){return jb(4,2,t,e)}function YI(t,e){return jb(4,4,t,e)}function qI(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZI(t,e,n){n=n!=null?n.concat([t]):null,jb(4,4,qI.bind(null,e,t),n)}function Qw(){}function $I(t,e){var n=$i();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&jw(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function KI(t,e){var n=$i();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&jw(e,i[1]))return i[0];if(i=t(),vh){ou(!0);try{t()}finally{ou(!1)}}return n.memoizedState=[i,e],i}function Jw(t,e,n){return n===void 0||fc&1073741824&&!(gn&261930)?t.memoizedState=e:(t.memoizedState=n,t=Fz(),tn.lanes|=t,Lu|=t,n)}function QI(t,e,n,i){return Ss(n,e)?n:Ip.current!==null?(t=Jw(t,n,i),Ss(t,e)||(or=!0),t):!(fc&42)||fc&1073741824&&!(gn&261930)?(or=!0,t.memoizedState=n):(t=Fz(),tn.lanes|=t,Lu|=t,e)}function JI(t,e,n,i,r){var a=Nn.p;Nn.p=a!==0&&8>a?a:8;var s=Xt.T,o={};Xt.T=o,t4(t,!1,e,n);try{var l=r(),f=Xt.S;if(f!==null&&f(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=QW(l,i);sg(t,e,h,ms(t))}else sg(t,e,i,ms(t))}catch(d){sg(t,e,{then:function(){},status:"rejected",reason:d},ms())}finally{Nn.p=a,s!==null&&o.types!==null&&(s.types=o.types),Xt.T=s}}function rY(){}function CT(t,e,n,i){if(t.tag!==5)throw Error(Ne(476));var r=ez(t).queue;JI(t,r,e,rh,n===null?rY:function(){return tz(t),n(i)})}function ez(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:rh,baseState:rh,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:rh},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function tz(t){var e=ez(t);e.next===null&&(e=t.alternate.memoizedState),sg(t,e.next.queue,{},ms())}function e4(){return Br(Vg)}function nz(){return $i().memoizedState}function iz(){return $i().memoizedState}function aY(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ms();t=vu(n);var i=yu(e,t,n);i!==null&&(Ia(i,e,n),ig(i,e,n)),e={cache:Fw()},t.payload=e;return}e=e.return}}function sY(t,e,n){var i=ms();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Xb(t)?az(e,n):(n=Pw(t,e,n,i),n!==null&&(Ia(n,t,i),sz(n,e,i)))}function rz(t,e,n){var i=ms();sg(t,e,n,i)}function sg(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xb(t))az(e,r);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(r.hasEagerState=!0,r.eagerState=o,Ss(o,s))return Hb(t,e,r,0),Qn===null&&Fb(),!1}catch{}finally{}if(n=Pw(t,e,r,i),n!==null)return Ia(n,t,i),sz(n,e,i),!0}return!1}function t4(t,e,n,i){if(i={lane:2,revertLane:u4(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Xb(t)){if(e)throw Error(Ne(479))}else e=Pw(t,n,i,2),e!==null&&Ia(e,t,2)}function Xb(t){var e=t.alternate;return t===tn||e!==null&&e===tn}function az(t,e){bp=$_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sz(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,X8(t,n)}}var Bg={readContext:Br,use:kb,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useLayoutEffect:zi,useInsertionEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useSyncExternalStore:zi,useId:zi,useHostTransitionStatus:zi,useFormState:zi,useActionState:zi,useOptimistic:zi,useMemoCache:zi,useCacheRefresh:zi};Bg.useEffectEvent=zi;var oz={readContext:Br,use:kb,useCallback:function(t,e){return fa().memoizedState=[t,e===void 0?null:e],t},useContext:Br,useEffect:G5,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,y_(4194308,4,qI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return y_(4194308,4,t,e)},useInsertionEffect:function(t,e){y_(4,2,t,e)},useMemo:function(t,e){var n=fa();e=e===void 0?null:e;var i=t();if(vh){ou(!0);try{t()}finally{ou(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=fa();if(n!==void 0){var r=n(e);if(vh){ou(!0);try{n(e)}finally{ou(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=sY.bind(null,tn,t),[i.memoizedState,t]},useRef:function(t){var e=fa();return t={current:t},e.memoizedState=t},useState:function(t){t=AT(t);var e=t.queue,n=rz.bind(null,tn,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Qw,useDeferredValue:function(t,e){var n=fa();return Jw(n,t,e)},useTransition:function(){var t=AT(!1);return t=JI.bind(null,tn,t.queue,!0,!1),fa().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=tn,r=fa();if(_n){if(n===void 0)throw Error(Ne(407));n=n()}else{if(n=e(),Qn===null)throw Error(Ne(349));gn&127||LI(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,G5(II.bind(null,i,a,t),[t]),i.flags|=2048,zp(9,{destroy:void 0},PI.bind(null,i,a,n,e),null),n},useId:function(){var t=fa(),e=Qn.identifierPrefix;if(_n){var n=nl,i=tl;n=(i&~(1<<32-ps(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=K_++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=JW++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:e4,useFormState:F5,useActionState:F5,useOptimistic:function(t){var e=fa();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=t4.bind(null,tn,!0,n),n.dispatch=e,[t,e]},useMemoCache:Zw,useCacheRefresh:function(){return fa().memoizedState=aY.bind(null,tn)},useEffectEvent:function(t){var e=fa(),n={impl:t};return e.memoizedState=n,function(){if(On&2)throw Error(Ne(440));return n.impl.apply(void 0,arguments)}}},n4={readContext:Br,use:kb,useCallback:$I,useContext:Br,useEffect:Kw,useImperativeHandle:ZI,useInsertionEffect:WI,useLayoutEffect:YI,useMemo:KI,useReducer:v_,useRef:jI,useState:function(){return v_(hc)},useDebugValue:Qw,useDeferredValue:function(t,e){var n=$i();return QI(n,Zn.memoizedState,t,e)},useTransition:function(){var t=v_(hc)[0],e=$i().memoizedState;return[typeof t=="boolean"?t:Rv(t),e]},useSyncExternalStore:UI,useId:nz,useHostTransitionStatus:e4,useFormState:H5,useActionState:H5,useOptimistic:function(t,e){var n=$i();return FI(n,Zn,t,e)},useMemoCache:Zw,useCacheRefresh:iz};n4.useEffectEvent=XI;var lz={readContext:Br,use:kb,useCallback:$I,useContext:Br,useEffect:Kw,useImperativeHandle:ZI,useInsertionEffect:WI,useLayoutEffect:YI,useMemo:KI,useReducer:aE,useRef:jI,useState:function(){return aE(hc)},useDebugValue:Qw,useDeferredValue:function(t,e){var n=$i();return Zn===null?Jw(n,t,e):QI(n,Zn.memoizedState,t,e)},useTransition:function(){var t=aE(hc)[0],e=$i().memoizedState;return[typeof t=="boolean"?t:Rv(t),e]},useSyncExternalStore:UI,useId:nz,useHostTransitionStatus:e4,useFormState:V5,useActionState:V5,useOptimistic:function(t,e){var n=$i();return Zn!==null?FI(n,Zn,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Zw,useCacheRefresh:iz};lz.useEffectEvent=XI;function sE(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:gi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var RT={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ms(),r=vu(i);r.payload=e,n!=null&&(r.callback=n),e=yu(t,r,i),e!==null&&(Ia(e,t,i),ig(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ms(),r=vu(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=yu(t,r,i),e!==null&&(Ia(e,t,i),ig(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ms(),i=vu(n);i.tag=2,e!=null&&(i.callback=e),e=yu(t,i,n),e!==null&&(Ia(e,t,n),ig(e,t,n))}};function k5(t,e,n,i,r,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,s):e.prototype&&e.prototype.isPureReactComponent?!Ug(n,i)||!Ug(r,a):!0}function j5(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&RT.enqueueReplaceState(e,e.state,null)}function yh(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=gi({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function cz(t){k_(t)}function uz(t){console.error(t)}function fz(t){k_(t)}function Q_(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function X5(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function DT(t,e,n){return n=vu(n),n.tag=3,n.payload={element:null},n.callback=function(){Q_(t,e)},n}function hz(t){return t=vu(t),t.tag=3,t}function dz(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;t.payload=function(){return r(a)},t.callback=function(){X5(e,n,i)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){X5(e,n,i),typeof r!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function oY(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&ym(e,n,r,!0),n=Es.current,n!==null){switch(n.tag){case 31:case 13:return ao===null?ix():n.alternate===null&&Fi===0&&(Fi=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Y_?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),vE(t,i,r)),!1;case 22:return n.flags|=65536,i===Y_?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),vE(t,i,r)),!1}throw Error(Ne(435,n.tag))}return vE(t,i,r),ix(),!1}if(_n)return e=Es.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==vT&&(t=Error(Ne(422),{cause:i}),Pg(eo(t,n)))):(i!==vT&&(e=Error(Ne(423),{cause:i}),Pg(eo(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=eo(i,n),r=DT(t.stateNode,i,r),rE(t,r),Fi!==4&&(Fi=2)),!1;var a=Error(Ne(520),{cause:i});if(a=eo(a,n),cg===null?cg=[a]:cg.push(a),Fi!==4&&(Fi=2),e===null)return!0;i=eo(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=DT(n.stateNode,i,t),rE(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(_u===null||!_u.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,r=hz(r),dz(r,t,n,i),rE(n,r),!1}n=n.return}while(n!==null);return!1}var i4=Error(Ne(461)),or=!1;function Lr(t,e,n,i){e.child=t===null?wI(e,null,n,i):gh(e,t.child,n,i)}function W5(t,e,n,i,r){n=n.render;var a=e.ref;if("ref"in i){var s={};for(var o in i)o!=="ref"&&(s[o]=i[o])}else s=i;return mh(e),i=Xw(t,e,n,s,a,r),o=Ww(),t!==null&&!or?(Yw(t,e,r),dc(t,e,r)):(_n&&o&&zw(e),e.flags|=1,Lr(t,e,i,r),e.child)}function Y5(t,e,n,i,r){if(t===null){var a=n.type;return typeof a=="function"&&!Iw(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,pz(t,e,a,i,r)):(t=m_(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!r4(t,r)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ug,n(s,i)&&t.ref===e.ref)return dc(t,e,r)}return e.flags|=1,t=ic(a,i),t.ref=e.ref,t.return=e,e.child=t}function pz(t,e,n,i,r){if(t!==null){var a=t.memoizedProps;if(Ug(a,i)&&t.ref===e.ref)if(or=!1,e.pendingProps=i=a,r4(t,r))t.flags&131072&&(or=!0);else return e.lanes=t.lanes,dc(t,e,r)}return OT(t,e,n,i,r)}function mz(t,e,n,i){var r=i.children,a=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(a=a!==null?a.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~a}else i=0,e.child=null;return q5(t,e,a,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&g_(e,a!==null?a.cachePool:null),a!==null?I5(e,a):MT(),DI(e);else return i=e.lanes=536870912,q5(t,e,a!==null?a.baseLanes|n:n,n,i)}else a!==null?(g_(e,a.cachePool),I5(e,a),nu(),e.memoizedState=null):(t!==null&&g_(e,null),MT(),nu());return Lr(t,e,r,n),e.child}function j0(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function q5(t,e,n,i,r){var a=Hw();return a=a===null?null:{parent:ar._currentValue,pool:a},e.memoizedState={baseLanes:n,cachePool:a},t!==null&&g_(e,null),MT(),DI(e),t!==null&&ym(t,e,i,!0),e.childLanes=r,null}function __(t,e){return e=J_({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Z5(t,e,n){return gh(e,t.child,null,n),t=__(e,e.pendingProps),t.flags|=2,ss(e),e.memoizedState=null,t}function lY(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(_n){if(i.mode==="hidden")return t=__(e,i),e.lanes=536870912,j0(null,t);if(TT(e),(t=ui)?(t=oB(t,to),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ou!==null?{id:tl,overflow:nl}:null,retryLane:536870912,hydrationErrors:null},n=xI(t),n.return=e,e.child=n,Ir=e,ui=null)):t=null,t===null)throw Nu(e);return e.lanes=536870912,null}return __(e,i)}var a=t.memoizedState;if(a!==null){var s=a.dehydrated;if(TT(e),r)if(e.flags&256)e.flags&=-257,e=Z5(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(Ne(558));else if(or||ym(t,e,n,!1),r=(n&t.childLanes)!==0,or||r){if(i=Qn,i!==null&&(s=W8(i,n),s!==0&&s!==a.retryLane))throw a.retryLane=s,Ih(t,s),Ia(i,t,s),i4;ix(),e=Z5(t,e,n)}else t=a.treeContext,ui=so(s.nextSibling),Ir=e,_n=!0,gu=null,to=!1,t!==null&&SI(e,t),e=__(e,i),e.flags|=4096;return e}return t=ic(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function x_(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(Ne(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function OT(t,e,n,i,r){return mh(e),n=Xw(t,e,n,i,void 0,r),i=Ww(),t!==null&&!or?(Yw(t,e,r),dc(t,e,r)):(_n&&i&&zw(e),e.flags|=1,Lr(t,e,n,r),e.child)}function $5(t,e,n,i,r,a){return mh(e),e.updateQueue=null,n=NI(e,i,n,r),OI(t),i=Ww(),t!==null&&!or?(Yw(t,e,a),dc(t,e,a)):(_n&&i&&zw(e),e.flags|=1,Lr(t,e,n,a),e.child)}function K5(t,e,n,i,r){if(mh(e),e.stateNode===null){var a=op,s=n.contextType;typeof s=="object"&&s!==null&&(a=Br(s)),a=new n(i,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=RT,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=i,a.state=e.memoizedState,a.refs={},Gw(e),s=n.contextType,a.context=typeof s=="object"&&s!==null?Br(s):op,a.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(sE(e,n,s,i),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&RT.enqueueReplaceState(a,a.state,null),ag(e,i,a,r),rg(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,l=yh(n,o);a.props=l;var f=a.context,h=n.contextType;s=op,typeof h=="object"&&h!==null&&(s=Br(h));var d=n.getDerivedStateFromProps;h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||f!==s)&&j5(e,a,i,s),Jc=!1;var p=e.memoizedState;a.state=p,ag(e,i,a,r),rg(),f=e.memoizedState,o||p!==f||Jc?(typeof d=="function"&&(sE(e,n,d,i),f=e.memoizedState),(l=Jc||k5(e,n,l,i,p,f,s))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),a.props=i,a.state=f,a.context=s,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,ST(t,e),s=e.memoizedProps,h=yh(n,s),a.props=h,d=e.pendingProps,p=a.context,f=n.contextType,l=op,typeof f=="object"&&f!==null&&(l=Br(f)),o=n.getDerivedStateFromProps,(f=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||p!==l)&&j5(e,a,i,l),Jc=!1,p=e.memoizedState,a.state=p,ag(e,i,a,r),rg();var g=e.memoizedState;s!==d||p!==g||Jc||t!==null&&t.dependencies!==null&&W_(t.dependencies)?(typeof o=="function"&&(sE(e,n,o,i),g=e.memoizedState),(h=Jc||k5(e,n,h,i,p,g,l)||t!==null&&t.dependencies!==null&&W_(t.dependencies))?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=l,i=h):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return a=i,x_(t,e),i=(e.flags&128)!==0,a||i?(a=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&i?(e.child=gh(e,t.child,null,r),e.child=gh(e,null,n,r)):Lr(t,e,n,r),e.memoizedState=a.state,t=e.child):t=dc(t,e,r),t}function Q5(t,e,n,i){return ph(),e.flags|=256,Lr(t,e,n,i),e.child}var oE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lE(t){return{baseLanes:t,cachePool:MI()}}function cE(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=cs),t}function gz(t,e,n){var i=e.pendingProps,r=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(qi.current&2)!==0),s&&(r=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(_n){if(r?tu(e):nu(),(t=ui)?(t=oB(t,to),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ou!==null?{id:tl,overflow:nl}:null,retryLane:536870912,hydrationErrors:null},n=xI(t),n.return=e,e.child=n,Ir=e,ui=null)):t=null,t===null)throw Nu(e);return XT(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(nu(),r=e.mode,o=J_({mode:"hidden",children:o},r),i=ah(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=lE(n),i.childLanes=cE(t,s,n),e.memoizedState=oE,j0(null,i)):(tu(e),NT(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(a)e.flags&256?(tu(e),e.flags&=-257,e=uE(t,e,n)):e.memoizedState!==null?(nu(),e.child=t.child,e.flags|=128,e=null):(nu(),o=i.fallback,r=e.mode,i=J_({mode:"visible",children:i.children},r),o=ah(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,gh(e,t.child,null,n),i=e.child,i.memoizedState=lE(n),i.childLanes=cE(t,s,n),e.memoizedState=oE,e=j0(null,i));else if(tu(e),XT(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var f=s.dgst;s=f,i=Error(Ne(419)),i.stack="",i.digest=s,Pg({value:i,source:null,stack:null}),e=uE(t,e,n)}else if(or||ym(t,e,n,!1),s=(n&t.childLanes)!==0,or||s){if(s=Qn,s!==null&&(i=W8(s,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,Ih(t,i),Ia(s,t,i),i4;jT(o)||ix(),e=uE(t,e,n)}else jT(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,ui=so(o.nextSibling),Ir=e,_n=!0,gu=null,to=!1,t!==null&&SI(e,t),e=NT(e,i.children),e.flags|=4096);return e}return r?(nu(),o=i.fallback,r=e.mode,l=t.child,f=l.sibling,i=ic(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,f!==null?o=ic(f,o):(o=ah(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,j0(null,i),i=e.child,o=t.child.memoizedState,o===null?o=lE(n):(r=o.cachePool,r!==null?(l=ar._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=MI(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=cE(t,s,n),e.memoizedState=oE,j0(t.child,i)):(tu(e),n=t.child,t=n.sibling,n=ic(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function NT(t,e){return e=J_({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function J_(t,e){return t=ls(22,t,null,e),t.lanes=0,t}function uE(t,e,n){return gh(e,t.child,null,n),t=NT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J5(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),_T(t.return,e,n)}function fE(t,e,n,i,r,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.treeForkCount=a)}function vz(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;i=i.children;var s=qi.current,o=(s&2)!==0;if(o?(s=s&1|2,e.flags|=128):s&=1,ri(qi,s),Lr(t,e,i,n),i=_n?Lg:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J5(t,n,e);else if(t.tag===19)J5(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Z_(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),fE(e,!1,r,n,a,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Z_(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}fE(e,!0,n,null,a,i);break;case"together":fE(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function dc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lu|=e.lanes,!(n&e.childLanes))if(t!==null){if(ym(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(Ne(153));if(e.child!==null){for(t=e.child,n=ic(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ic(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function r4(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&W_(t)))}function cY(t,e,n){switch(e.tag){case 3:F_(e,e.stateNode.containerInfo),eu(e,ar,t.memoizedState.cache),ph();break;case 27:case 5:sT(e);break;case 4:F_(e,e.stateNode.containerInfo);break;case 10:eu(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,TT(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(tu(e),e.flags|=128,null):n&e.child.childLanes?gz(t,e,n):(tu(e),t=dc(t,e,n),t!==null?t.sibling:null);tu(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(ym(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return vz(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ri(qi,qi.current),i)break;return null;case 22:return e.lanes=0,mz(t,e,n,e.pendingProps);case 24:eu(e,ar,t.memoizedState.cache)}return dc(t,e,n)}function yz(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)or=!0;else{if(!r4(t,n)&&!(e.flags&128))return or=!1,cY(t,e,n);or=!!(t.flags&131072)}else or=!1,_n&&e.flags&1048576&&bI(e,Lg,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Gf(e.elementType),e.type=t,typeof t=="function")Iw(t)?(i=yh(t,i),e.tag=1,e=K5(null,e,t,i,n)):(e.tag=0,e=OT(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===Sw){e.tag=11,e=W5(null,e,t,i,n);break e}else if(r===Ew){e.tag=14,e=Y5(null,e,t,i,n);break e}}throw e=rT(t)||t,Error(Ne(306,e,""))}}return e;case 0:return OT(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=yh(i,e.pendingProps),K5(t,e,i,r,n);case 3:e:{if(F_(e,e.stateNode.containerInfo),t===null)throw Error(Ne(387));i=e.pendingProps;var a=e.memoizedState;r=a.element,ST(t,e),ag(e,i,null,n);var s=e.memoizedState;if(i=s.cache,eu(e,ar,i),i!==a.cache&&xT(e,[ar],n,!0),rg(),i=s.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=Q5(t,e,i,n);break e}else if(i!==r){r=eo(Error(Ne(424)),e),Pg(r),e=Q5(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ui=so(t.firstChild),Ir=e,_n=!0,gu=null,to=!0,n=wI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ph(),i===r){e=dc(t,e,n);break e}Lr(t,e,i,n)}e=e.child}return e;case 26:return x_(t,e),t===null?(n=_N(e.type,null,e.pendingProps,null))?e.memoizedState=n:_n||(n=e.type,t=e.pendingProps,i=ox(mu.current).createElement(n),i[Pr]=e,i[Ba]=t,Fr(i,n,t),wr(i),e.stateNode=i):e.memoizedState=_N(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return sT(e),t===null&&_n&&(i=e.stateNode=lB(e.type,e.pendingProps,mu.current),Ir=e,to=!0,r=ui,qu(e.type)?(WT=r,ui=so(i.firstChild)):ui=r),Lr(t,e,e.pendingProps.children,n),x_(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&_n&&((r=i=ui)&&(i=FY(i,e.type,e.pendingProps,to),i!==null?(e.stateNode=i,Ir=e,ui=so(i.firstChild),to=!1,r=!0):r=!1),r||Nu(e)),sT(e),r=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,GT(r,a)?i=null:s!==null&&GT(r,s)&&(e.flags|=32),e.memoizedState!==null&&(r=Xw(t,e,eY,null,null,n),Vg._currentValue=r),x_(t,e),Lr(t,e,i,n),e.child;case 6:return t===null&&_n&&((t=n=ui)&&(n=HY(n,e.pendingProps,to),n!==null?(e.stateNode=n,Ir=e,ui=null,t=!0):t=!1),t||Nu(e)),null;case 13:return gz(t,e,n);case 4:return F_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=gh(e,null,i,n):Lr(t,e,i,n),e.child;case 11:return W5(t,e,e.type,e.pendingProps,n);case 7:return Lr(t,e,e.pendingProps,n),e.child;case 8:return Lr(t,e,e.pendingProps.children,n),e.child;case 12:return Lr(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,eu(e,e.type,i.value),Lr(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,mh(e),r=Br(r),i=i(r),e.flags|=1,Lr(t,e,i,n),e.child;case 14:return Y5(t,e,e.type,e.pendingProps,n);case 15:return pz(t,e,e.type,e.pendingProps,n);case 19:return vz(t,e,n);case 31:return lY(t,e,n);case 22:return mz(t,e,n,e.pendingProps);case 24:return mh(e),i=Br(ar),t===null?(r=Hw(),r===null&&(r=Qn,a=Fw(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=n),r=a),e.memoizedState={parent:i,cache:r},Gw(e),eu(e,ar,r)):(t.lanes&n&&(ST(t,e),ag(e,null,null,n),rg()),r=t.memoizedState,a=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),eu(e,ar,i)):(i=a.cache,eu(e,ar,i),i!==r.cache&&xT(e,[ar],n,!0))),Lr(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(Ne(156,e.tag))}function Nl(t){t.flags|=4}function hE(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(Gz())t.flags|=8192;else throw oh=Y_,Vw}else t.flags&=-16777217}function eN(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!fB(e))if(Gz())t.flags|=8192;else throw oh=Y_,Vw}function K1(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?k8():536870912,t.lanes|=e,Bp|=e)}function g0(t,e){if(!_n)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ci(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function uY(t,e,n){var i=e.pendingProps;switch(Bw(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ci(e),null;case 1:return ci(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),rc(ar),Np(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(yd(e)?Nl(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,iE())),ci(e),null;case 26:var r=e.type,a=e.memoizedState;return t===null?(Nl(e),a!==null?(ci(e),eN(e,a)):(ci(e),hE(e,r,null,i,n))):a?a!==t.memoizedState?(Nl(e),ci(e),eN(e,a)):(ci(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&Nl(e),ci(e),hE(e,r,t,i,n)),null;case 27:if(H_(e),n=mu.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Nl(e);else{if(!i){if(e.stateNode===null)throw Error(Ne(166));return ci(e),null}t=ol.current,yd(e)?R5(e):(t=lB(r,i,n),e.stateNode=t,Nl(e))}return ci(e),null;case 5:if(H_(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Nl(e);else{if(!i){if(e.stateNode===null)throw Error(Ne(166));return ci(e),null}if(a=ol.current,yd(e))R5(e);else{var s=ox(mu.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":a=s.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?a.multiple=!0:i.size&&(a.size=i.size);break;default:a=typeof i.is=="string"?s.createElement(r,{is:i.is}):s.createElement(r)}}a[Pr]=e,a[Ba]=i;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)a.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=a;e:switch(Fr(a,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Nl(e)}}return ci(e),hE(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Nl(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ne(166));if(t=mu.current,yd(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=Ir,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Pr]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||rB(t.nodeValue,n)),t||Nu(e,!0)}else t=ox(t).createTextNode(i),t[Pr]=e,e.stateNode=t}return ci(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=yd(e),n!==null){if(t===null){if(!i)throw Error(Ne(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ne(557));t[Pr]=e}else ph(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ci(e),t=!1}else n=iE(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(ss(e),e):(ss(e),null);if(e.flags&128)throw Error(Ne(558))}return ci(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=yd(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(Ne(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ne(317));r[Pr]=e}else ph(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ci(e),r=!1}else r=iE(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(ss(e),e):(ss(e),null)}return ss(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),K1(e,e.updateQueue),ci(e),null);case 4:return Np(),t===null&&f4(e.stateNode.containerInfo),ci(e),null;case 10:return rc(e.type),ci(e),null;case 19:if(Cr(qi),i=e.memoizedState,i===null)return ci(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)g0(i,!1);else{if(Fi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Z_(t),a!==null){for(e.flags|=128,g0(i,!1),t=a.updateQueue,e.updateQueue=t,K1(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)_I(n,t),n=n.sibling;return ri(qi,qi.current&1|2),_n&&jl(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&hs()>tx&&(e.flags|=128,r=!0,g0(i,!1),e.lanes=4194304)}else{if(!r)if(t=Z_(a),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,K1(e,t),g0(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!_n)return ci(e),null}else 2*hs()-i.renderingStartTime>tx&&n!==536870912&&(e.flags|=128,r=!0,g0(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=hs(),t.sibling=null,n=qi.current,ri(qi,r?n&1|2:n&1),_n&&jl(e,i.treeForkCount),t):(ci(e),null);case 22:case 23:return ss(e),kw(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(ci(e),e.subtreeFlags&6&&(e.flags|=8192)):ci(e),n=e.updateQueue,n!==null&&K1(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Cr(sh),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),rc(ar),ci(e),null;case 25:return null;case 30:return null}throw Error(Ne(156,e.tag))}function fY(t,e){switch(Bw(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rc(ar),Np(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return H_(e),null;case 31:if(e.memoizedState!==null){if(ss(e),e.alternate===null)throw Error(Ne(340));ph()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(ss(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));ph()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Cr(qi),null;case 4:return Np(),null;case 10:return rc(e.type),null;case 22:case 23:return ss(e),kw(),t!==null&&Cr(sh),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return rc(ar),null;case 25:return null;default:return null}}function _z(t,e){switch(Bw(e),e.tag){case 3:rc(ar),Np();break;case 26:case 27:case 5:H_(e);break;case 4:Np();break;case 31:e.memoizedState!==null&&ss(e);break;case 13:ss(e);break;case 19:Cr(qi);break;case 10:rc(e.type);break;case 22:case 23:ss(e),kw(),t!==null&&Cr(sh);break;case 24:rc(ar)}}function Dv(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var a=n.create,s=n.inst;i=a(),s.destroy=i}n=n.next}while(n!==r)}}catch(o){kn(e,e.return,o)}}function Uu(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var a=r.next;i=a;do{if((i.tag&t)===t){var s=i.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,r=e;var l=n,f=o;try{f()}catch(h){kn(r,l,h)}}}i=i.next}while(i!==a)}}catch(h){kn(e,e.return,h)}}function xz(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{RI(e,n)}catch(i){kn(t,t.return,i)}}}function bz(t,e,n){n.props=yh(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){kn(t,e,i)}}function og(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){kn(t,e,r)}}function il(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){kn(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){kn(t,e,r)}else n.current=null}function Sz(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){kn(t,t.return,r)}}function dE(t,e,n){try{var i=t.stateNode;UY(i,t.type,n,e),i[Ba]=e}catch(r){kn(t,t.return,r)}}function Ez(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qu(t.type)||t.tag===4}function pE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ez(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qu(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function UT(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jl));else if(i!==4&&(i===27&&qu(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(UT(t,e,n),t=t.sibling;t!==null;)UT(t,e,n),t=t.sibling}function ex(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&qu(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(ex(t,e,n),t=t.sibling;t!==null;)ex(t,e,n),t=t.sibling}function Mz(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Fr(e,i,n),e[Pr]=t,e[Ba]=n}catch(a){kn(t,t.return,a)}}var ql=!1,rr=!1,mE=!1,tN=typeof WeakSet=="function"?WeakSet:Set,Tr=null;function hY(t,e){if(t=t.containerInfo,HT=fx,t=fI(t),Uw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,f=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(o=s+r),d!==a||i!==0&&d.nodeType!==3||(l=s+i),d.nodeType===3&&(s+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++f===r&&(o=s),p===a&&++h===i&&(l=s),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(VT={focusedElem:t,selectionRange:n},fx=!1,Tr=e;Tr!==null;)if(e=Tr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Tr=t;else for(;Tr!==null;){switch(e=Tr,a=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,r=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var y=yh(n.type,r);t=i.getSnapshotBeforeUpdate(y,a),i.__reactInternalSnapshotBeforeUpdate=t}catch(S){kn(n,n.return,S)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)kT(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":kT(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(Ne(163))}if(t=e.sibling,t!==null){t.return=e.return,Tr=t;break}Tr=e.return}}function Tz(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ll(t,n),i&4&&Dv(5,n);break;case 1:if(Ll(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){kn(n,n.return,s)}else{var r=yh(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){kn(n,n.return,s)}}i&64&&xz(n),i&512&&og(n,n.return);break;case 3:if(Ll(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{RI(t,e)}catch(s){kn(n,n.return,s)}}break;case 27:e===null&&i&4&&Mz(n);case 26:case 5:Ll(t,n),e===null&&i&4&&Sz(n),i&512&&og(n,n.return);break;case 12:Ll(t,n);break;case 31:Ll(t,n),i&4&&Cz(t,n);break;case 13:Ll(t,n),i&4&&Rz(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=bY.bind(null,n),VY(t,n))));break;case 22:if(i=n.memoizedState!==null||ql,!i){e=e!==null&&e.memoizedState!==null||rr,r=ql;var a=rr;ql=i,(rr=e)&&!a?kl(t,n,(n.subtreeFlags&8772)!==0):Ll(t,n),ql=r,rr=a}break;case 30:break;default:Ll(t,n)}}function Az(t){var e=t.alternate;e!==null&&(t.alternate=null,Az(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ww(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _i=null,Oa=!1;function Ul(t,e,n){for(n=n.child;n!==null;)wz(t,e,n),n=n.sibling}function wz(t,e,n){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(Ev,n)}catch{}switch(n.tag){case 26:rr||il(n,e),Ul(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:rr||il(n,e);var i=_i,r=Oa;qu(n.type)&&(_i=n.stateNode,Oa=!1),Ul(t,e,n),fg(n.stateNode),_i=i,Oa=r;break;case 5:rr||il(n,e);case 6:if(i=_i,r=Oa,_i=null,Ul(t,e,n),_i=i,Oa=r,_i!==null)if(Oa)try{(_i.nodeType===9?_i.body:_i.nodeName==="HTML"?_i.ownerDocument.body:_i).removeChild(n.stateNode)}catch(a){kn(n,e,a)}else try{_i.removeChild(n.stateNode)}catch(a){kn(n,e,a)}break;case 18:_i!==null&&(Oa?(t=_i,pN(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Gp(t)):pN(_i,n.stateNode));break;case 4:i=_i,r=Oa,_i=n.stateNode.containerInfo,Oa=!0,Ul(t,e,n),_i=i,Oa=r;break;case 0:case 11:case 14:case 15:Uu(2,n,e),rr||Uu(4,n,e),Ul(t,e,n);break;case 1:rr||(il(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&bz(n,e,i)),Ul(t,e,n);break;case 21:Ul(t,e,n);break;case 22:rr=(i=rr)||n.memoizedState!==null,Ul(t,e,n),rr=i;break;default:Ul(t,e,n)}}function Cz(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Gp(t)}catch(n){kn(e,e.return,n)}}}function Rz(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Gp(t)}catch(n){kn(e,e.return,n)}}function dY(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new tN),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new tN),e;default:throw Error(Ne(435,t.tag))}}function Q1(t,e){var n=dY(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=SY.bind(null,t,i);i.then(r,r)}})}function Aa(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(qu(o.type)){_i=o.stateNode,Oa=!1;break e}break;case 5:_i=o.stateNode,Oa=!1;break e;case 3:case 4:_i=o.stateNode.containerInfo,Oa=!0;break e}o=o.return}if(_i===null)throw Error(Ne(160));wz(a,s,r),_i=null,Oa=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Dz(e,t),e=e.sibling}var wo=null;function Dz(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Aa(e,t),wa(t),i&4&&(Uu(3,t,t.return),Dv(3,t),Uu(5,t,t.return));break;case 1:Aa(e,t),wa(t),i&512&&(rr||n===null||il(n,n.return)),i&64&&ql&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=wo;if(Aa(e,t),wa(t),i&512&&(rr||n===null||il(n,n.return)),i&4){var a=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":a=r.getElementsByTagName("title")[0],(!a||a[Av]||a[Pr]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),Fr(a,i,n),a[Pr]=t,wr(a),i=a;break e;case"link":var s=bN("link","href",r).get(i+(n.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(o,1);break t}}a=r.createElement(i),Fr(a,i,n),r.head.appendChild(a);break;case"meta":if(s=bN("meta","content",r).get(i+(n.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(o,1);break t}}a=r.createElement(i),Fr(a,i,n),r.head.appendChild(a);break;default:throw Error(Ne(468,i))}a[Pr]=t,wr(a),i=a}t.stateNode=i}else SN(r,t.type,t.stateNode);else t.stateNode=xN(r,i,t.memoizedProps);else a!==i?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,i===null?SN(r,t.type,t.stateNode):xN(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&dE(t,t.memoizedProps,n.memoizedProps)}break;case 27:Aa(e,t),wa(t),i&512&&(rr||n===null||il(n,n.return)),n!==null&&i&4&&dE(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Aa(e,t),wa(t),i&512&&(rr||n===null||il(n,n.return)),t.flags&32){r=t.stateNode;try{Lp(r,"")}catch(y){kn(t,t.return,y)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,dE(t,r,n!==null?n.memoizedProps:r)),i&1024&&(mE=!0);break;case 6:if(Aa(e,t),wa(t),i&4){if(t.stateNode===null)throw Error(Ne(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(y){kn(t,t.return,y)}}break;case 3:if(E_=null,r=wo,wo=lx(e.containerInfo),Aa(e,t),wo=r,wa(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Gp(e.containerInfo)}catch(y){kn(t,t.return,y)}mE&&(mE=!1,Oz(t));break;case 4:i=wo,wo=lx(t.stateNode.containerInfo),Aa(e,t),wa(t),wo=i;break;case 12:Aa(e,t),wa(t);break;case 31:Aa(e,t),wa(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Q1(t,i)));break;case 13:Aa(e,t),wa(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Wb=hs()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Q1(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,f=ql,h=rr;if(ql=f||r,rr=h||l,Aa(e,t),rr=h,ql=f,wa(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||ql||rr||kf(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(a=l.stateNode,r)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,p=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(y){kn(l,l.return,y)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(y){kn(l,l.return,y)}}}else if(e.tag===18){if(n===null){l=e;try{var g=l.stateNode;r?mN(g,!0):mN(l.stateNode,!1)}catch(y){kn(l,l.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Q1(t,n))));break;case 19:Aa(e,t),wa(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Q1(t,i)));break;case 30:break;case 21:break;default:Aa(e,t),wa(t)}}function wa(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(Ez(i)){n=i;break}i=i.return}if(n==null)throw Error(Ne(160));switch(n.tag){case 27:var r=n.stateNode,a=pE(t);ex(t,a,r);break;case 5:var s=n.stateNode;n.flags&32&&(Lp(s,""),n.flags&=-33);var o=pE(t);ex(t,o,s);break;case 3:case 4:var l=n.stateNode.containerInfo,f=pE(t);UT(t,f,l);break;default:throw Error(Ne(161))}}catch(h){kn(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Oz(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Oz(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ll(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Tz(t,e.alternate,e),e=e.sibling}function kf(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Uu(4,e,e.return),kf(e);break;case 1:il(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&bz(e,e.return,n),kf(e);break;case 27:fg(e.stateNode);case 26:case 5:il(e,e.return),kf(e);break;case 22:e.memoizedState===null&&kf(e);break;case 30:kf(e);break;default:kf(e)}t=t.sibling}}function kl(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,a=e,s=a.flags;switch(a.tag){case 0:case 11:case 15:kl(r,a,n),Dv(4,a);break;case 1:if(kl(r,a,n),i=a,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(f){kn(i,i.return,f)}if(i=a,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)CI(l[r],o)}catch(f){kn(i,i.return,f)}}n&&s&64&&xz(a),og(a,a.return);break;case 27:Mz(a);case 26:case 5:kl(r,a,n),n&&i===null&&s&4&&Sz(a),og(a,a.return);break;case 12:kl(r,a,n);break;case 31:kl(r,a,n),n&&s&4&&Cz(r,a);break;case 13:kl(r,a,n),n&&s&4&&Rz(r,a);break;case 22:a.memoizedState===null&&kl(r,a,n),og(a,a.return);break;case 30:break;default:kl(r,a,n)}e=e.sibling}}function a4(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Cv(n))}function s4(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Cv(t))}function So(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nz(t,e,n,i),e=e.sibling}function Nz(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:So(t,e,n,i),r&2048&&Dv(9,e);break;case 1:So(t,e,n,i);break;case 3:So(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Cv(t)));break;case 12:if(r&2048){So(t,e,n,i),t=e.stateNode;try{var a=e.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){kn(e,e.return,l)}}else So(t,e,n,i);break;case 31:So(t,e,n,i);break;case 13:So(t,e,n,i);break;case 23:break;case 22:a=e.stateNode,s=e.alternate,e.memoizedState!==null?a._visibility&2?So(t,e,n,i):lg(t,e):a._visibility&2?So(t,e,n,i):(a._visibility|=2,$d(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&a4(s,e);break;case 24:So(t,e,n,i),r&2048&&s4(e.alternate,e);break;default:So(t,e,n,i)}}function $d(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var a=t,s=e,o=n,l=i,f=s.flags;switch(s.tag){case 0:case 11:case 15:$d(a,s,o,l,r),Dv(8,s);break;case 23:break;case 22:var h=s.stateNode;s.memoizedState!==null?h._visibility&2?$d(a,s,o,l,r):lg(a,s):(h._visibility|=2,$d(a,s,o,l,r)),r&&f&2048&&a4(s.alternate,s);break;case 24:$d(a,s,o,l,r),r&&f&2048&&s4(s.alternate,s);break;default:$d(a,s,o,l,r)}e=e.sibling}}function lg(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:lg(n,i),r&2048&&a4(i.alternate,i);break;case 24:lg(n,i),r&2048&&s4(i.alternate,i);break;default:lg(n,i)}e=e.sibling}}var X0=8192;function _d(t,e,n){if(t.subtreeFlags&X0)for(t=t.child;t!==null;)Uz(t,e,n),t=t.sibling}function Uz(t,e,n){switch(t.tag){case 26:_d(t,e,n),t.flags&X0&&t.memoizedState!==null&&JY(n,wo,t.memoizedState,t.memoizedProps);break;case 5:_d(t,e,n);break;case 3:case 4:var i=wo;wo=lx(t.stateNode.containerInfo),_d(t,e,n),wo=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=X0,X0=16777216,_d(t,e,n),X0=i):_d(t,e,n));break;default:_d(t,e,n)}}function Lz(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function v0(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Tr=i,Iz(i,t)}Lz(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Pz(t),t=t.sibling}function Pz(t){switch(t.tag){case 0:case 11:case 15:v0(t),t.flags&2048&&Uu(9,t,t.return);break;case 3:v0(t);break;case 12:v0(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,b_(t)):v0(t);break;default:v0(t)}}function b_(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Tr=i,Iz(i,t)}Lz(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Uu(8,e,e.return),b_(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,b_(e));break;default:b_(e)}t=t.sibling}}function Iz(t,e){for(;Tr!==null;){var n=Tr;switch(n.tag){case 0:case 11:case 15:Uu(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Cv(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Tr=i;else e:for(n=t;Tr!==null;){i=Tr;var r=i.sibling,a=i.return;if(Az(i),i===n){Tr=null;break e}if(r!==null){r.return=a,Tr=r;break e}Tr=a}}}var pY={getCacheForType:function(t){var e=Br(ar),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Br(ar).controller.signal}},mY=typeof WeakMap=="function"?WeakMap:Map,On=0,Qn=null,hn=null,gn=0,Gn=0,as=null,cu=!1,xm=!1,o4=!1,pc=0,Fi=0,Lu=0,lh=0,l4=0,cs=0,Bp=0,cg=null,Na=null,LT=!1,Wb=0,zz=0,tx=1/0,nx=null,_u=null,gr=0,xu=null,Fp=null,ac=0,PT=0,IT=null,Bz=null,ug=0,zT=null;function ms(){return On&2&&gn!==0?gn&-gn:Xt.T!==null?u4():Y8()}function Fz(){if(cs===0)if(!(gn&536870912)||_n){var t=j1;j1<<=1,!(j1&3932160)&&(j1=262144),cs=t}else cs=536870912;return t=Es.current,t!==null&&(t.flags|=32),cs}function Ia(t,e,n){(t===Qn&&(Gn===2||Gn===9)||t.cancelPendingCommit!==null)&&(Hp(t,0),uu(t,gn,cs,!1)),Tv(t,n),(!(On&2)||t!==Qn)&&(t===Qn&&(!(On&2)&&(lh|=n),Fi===4&&uu(t,gn,cs,!1)),gl(t))}function Hz(t,e,n){if(On&6)throw Error(Ne(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Mv(t,e),r=i?yY(t,e):gE(t,e,!0),a=i;do{if(r===0){xm&&!i&&uu(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!gY(n)){r=gE(t,e,!1),a=!1;continue}if(r===2){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=t;r=cg;var l=o.current.memoizedState.isDehydrated;if(l&&(Hp(o,s).flags|=256),s=gE(o,s,!1),s!==2){if(o4&&!l){o.errorRecoveryDisabledLanes|=a,lh|=a,r=4;break e}a=Na,Na=r,a!==null&&(Na===null?Na=a:Na.push.apply(Na,a))}r=s}if(a=!1,r!==2)continue}}if(r===1){Hp(t,0),uu(t,e,0,!0);break}e:{switch(i=t,a=r,a){case 0:case 1:throw Error(Ne(345));case 4:if((e&4194048)!==e)break;case 6:uu(i,e,cs,!cu);break e;case 2:Na=null;break;case 3:case 5:break;default:throw Error(Ne(329))}if((e&62914560)===e&&(r=Wb+300-hs(),10<r)){if(uu(i,e,cs,!cu),Pb(i,0,!0)!==0)break e;ac=e,i.timeoutHandle=sB(nN.bind(null,i,n,Na,nx,LT,e,cs,lh,Bp,cu,a,"Throttled",-0,0),r);break e}nN(i,n,Na,nx,LT,e,cs,lh,Bp,cu,a,null,-0,0)}}break}while(!0);gl(t)}function nN(t,e,n,i,r,a,s,o,l,f,h,d,p,g){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jl},Uz(e,a,d);var y=(a&62914560)===a?Wb-hs():(a&4194048)===a?zz-hs():0;if(y=eq(d,y),y!==null){ac=a,t.cancelPendingCommit=y(rN.bind(null,t,e,a,n,i,r,s,o,l,h,d,null,p,g)),uu(t,a,s,!f);return}}rN(t,e,a,n,i,r,s,o,l)}function gY(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Ss(a(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function uu(t,e,n,i){e&=~l4,e&=~lh,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var a=31-ps(r),s=1<<a;i[a]=-1,r&=~s}n!==0&&j8(t,n,e)}function Yb(){return On&6?!0:(Ov(0),!1)}function c4(){if(hn!==null){if(Gn===0)var t=hn.return;else t=hn,ec=zh=null,qw(t),xp=null,Ig=0,t=hn;for(;t!==null;)_z(t.alternate,t),t=t.return;hn=null}}function Hp(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,IY(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ac=0,c4(),Qn=t,hn=n=ic(t.current,null),gn=e,Gn=0,as=null,cu=!1,xm=Mv(t,e),o4=!1,Bp=cs=l4=lh=Lu=Fi=0,Na=cg=null,LT=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-ps(i),a=1<<r;e|=t[r],i&=~a}return pc=e,Fb(),n}function Vz(t,e){tn=null,Xt.H=Bg,e===_m||e===Vb?(e=L5(),Gn=3):e===Vw?(e=L5(),Gn=4):Gn=e===i4?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,as=e,hn===null&&(Fi=1,Q_(t,eo(e,t.current)))}function Gz(){var t=Es.current;return t===null?!0:(gn&4194048)===gn?ao===null:(gn&62914560)===gn||gn&536870912?t===ao:!1}function kz(){var t=Xt.H;return Xt.H=Bg,t===null?Bg:t}function jz(){var t=Xt.A;return Xt.A=pY,t}function ix(){Fi=4,cu||(gn&4194048)!==gn&&Es.current!==null||(xm=!0),!(Lu&134217727)&&!(lh&134217727)||Qn===null||uu(Qn,gn,cs,!1)}function gE(t,e,n){var i=On;On|=2;var r=kz(),a=jz();(Qn!==t||gn!==e)&&(nx=null,Hp(t,e)),e=!1;var s=Fi;e:do try{if(Gn!==0&&hn!==null){var o=hn,l=as;switch(Gn){case 8:c4(),s=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(e=!0);var f=Gn;if(Gn=0,as=null,up(t,o,l,f),n&&xm){s=0;break e}break;default:f=Gn,Gn=0,as=null,up(t,o,l,f)}}vY(),s=Fi;break}catch(h){Vz(t,h)}while(!0);return e&&t.shellSuspendCounter++,ec=zh=null,On=i,Xt.H=r,Xt.A=a,hn===null&&(Qn=null,gn=0,Fb()),s}function vY(){for(;hn!==null;)Xz(hn)}function yY(t,e){var n=On;On|=2;var i=kz(),r=jz();Qn!==t||gn!==e?(nx=null,tx=hs()+500,Hp(t,e)):xm=Mv(t,e);e:do try{if(Gn!==0&&hn!==null){e=hn;var a=as;t:switch(Gn){case 1:Gn=0,as=null,up(t,e,a,1);break;case 2:case 9:if(U5(a)){Gn=0,as=null,iN(e);break}e=function(){Gn!==2&&Gn!==9||Qn!==t||(Gn=7),gl(t)},a.then(e,e);break e;case 3:Gn=7;break e;case 4:Gn=5;break e;case 7:U5(a)?(Gn=0,as=null,iN(e)):(Gn=0,as=null,up(t,e,a,7));break;case 5:var s=null;switch(hn.tag){case 26:s=hn.memoizedState;case 5:case 27:var o=hn;if(s?fB(s):o.stateNode.complete){Gn=0,as=null;var l=o.sibling;if(l!==null)hn=l;else{var f=o.return;f!==null?(hn=f,qb(f)):hn=null}break t}}Gn=0,as=null,up(t,e,a,5);break;case 6:Gn=0,as=null,up(t,e,a,6);break;case 8:c4(),Fi=6;break e;default:throw Error(Ne(462))}}_Y();break}catch(h){Vz(t,h)}while(!0);return ec=zh=null,Xt.H=i,Xt.A=r,On=n,hn!==null?0:(Qn=null,gn=0,Fb(),Fi)}function _Y(){for(;hn!==null&&!GX();)Xz(hn)}function Xz(t){var e=yz(t.alternate,t,pc);t.memoizedProps=t.pendingProps,e===null?qb(t):hn=e}function iN(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=$5(n,e,e.pendingProps,e.type,void 0,gn);break;case 11:e=$5(n,e,e.pendingProps,e.type.render,e.ref,gn);break;case 5:qw(e);default:_z(n,e),e=hn=_I(e,pc),e=yz(n,e,pc)}t.memoizedProps=t.pendingProps,e===null?qb(t):hn=e}function up(t,e,n,i){ec=zh=null,qw(e),xp=null,Ig=0;var r=e.return;try{if(oY(t,r,e,n,gn)){Fi=1,Q_(t,eo(n,t.current)),hn=null;return}}catch(a){if(r!==null)throw hn=r,a;Fi=1,Q_(t,eo(n,t.current)),hn=null;return}e.flags&32768?(_n||i===1?t=!0:xm||gn&536870912?t=!1:(cu=t=!0,(i===2||i===9||i===3||i===6)&&(i=Es.current,i!==null&&i.tag===13&&(i.flags|=16384))),Wz(e,t)):qb(e)}function qb(t){var e=t;do{if(e.flags&32768){Wz(e,cu);return}t=e.return;var n=uY(e.alternate,e,pc);if(n!==null){hn=n;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=t}while(e!==null);Fi===0&&(Fi=5)}function Wz(t,e){do{var n=fY(t.alternate,t);if(n!==null){n.flags&=32767,hn=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){hn=t;return}hn=t=n}while(t!==null);Fi=6,hn=null}function rN(t,e,n,i,r,a,s,o,l){t.cancelPendingCommit=null;do Zb();while(gr!==0);if(On&6)throw Error(Ne(327));if(e!==null){if(e===t.current)throw Error(Ne(177));if(a=e.lanes|e.childLanes,a|=Lw,QX(t,n,a,s,o,l),t===Qn&&(hn=Qn=null,gn=0),Fp=e,xu=t,ac=n,PT=a,IT=r,Bz=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,EY(V_,function(){return Kz(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=Xt.T,Xt.T=null,r=Nn.p,Nn.p=2,s=On,On|=4;try{hY(t,e,n)}finally{On=s,Nn.p=r,Xt.T=i}}gr=1,Yz(),qz(),Zz()}}function Yz(){if(gr===1){gr=0;var t=xu,e=Fp,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Xt.T,Xt.T=null;var i=Nn.p;Nn.p=2;var r=On;On|=4;try{Dz(e,t);var a=VT,s=fI(t.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&uI(o.ownerDocument.documentElement,o)){if(l!==null&&Uw(o)){var f=l.start,h=l.end;if(h===void 0&&(h=f),"selectionStart"in o)o.selectionStart=f,o.selectionEnd=Math.min(h,o.value.length);else{var d=o.ownerDocument||document,p=d&&d.defaultView||window;if(p.getSelection){var g=p.getSelection(),y=o.textContent.length,S=Math.min(l.start,y),b=l.end===void 0?S:Math.min(l.end,y);!g.extend&&S>b&&(s=b,b=S,S=s);var v=A5(o,S),x=A5(o,b);if(v&&x&&(g.rangeCount!==1||g.anchorNode!==v.node||g.anchorOffset!==v.offset||g.focusNode!==x.node||g.focusOffset!==x.offset)){var E=d.createRange();E.setStart(v.node,v.offset),g.removeAllRanges(),S>b?(g.addRange(E),g.extend(x.node,x.offset)):(E.setEnd(x.node,x.offset),g.addRange(E))}}}}for(d=[],g=o;g=g.parentNode;)g.nodeType===1&&d.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var T=d[o];T.element.scrollLeft=T.left,T.element.scrollTop=T.top}}fx=!!HT,VT=HT=null}finally{On=r,Nn.p=i,Xt.T=n}}t.current=e,gr=2}}function qz(){if(gr===2){gr=0;var t=xu,e=Fp,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Xt.T,Xt.T=null;var i=Nn.p;Nn.p=2;var r=On;On|=4;try{Tz(t,e.alternate,e)}finally{On=r,Nn.p=i,Xt.T=n}}gr=3}}function Zz(){if(gr===4||gr===3){gr=0,kX();var t=xu,e=Fp,n=ac,i=Bz;e.subtreeFlags&10256||e.flags&10256?gr=5:(gr=0,Fp=xu=null,$z(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(_u=null),Aw(n),e=e.stateNode,ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(Ev,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=Xt.T,r=Nn.p,Nn.p=2,Xt.T=null;try{for(var a=t.onRecoverableError,s=0;s<i.length;s++){var o=i[s];a(o.value,{componentStack:o.stack})}}finally{Xt.T=e,Nn.p=r}}ac&3&&Zb(),gl(t),r=t.pendingLanes,n&261930&&r&42?t===zT?ug++:(ug=0,zT=t):ug=0,Ov(0)}}function $z(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Cv(e)))}function Zb(){return Yz(),qz(),Zz(),Kz()}function Kz(){if(gr!==5)return!1;var t=xu,e=PT;PT=0;var n=Aw(ac),i=Xt.T,r=Nn.p;try{Nn.p=32>n?32:n,Xt.T=null,n=IT,IT=null;var a=xu,s=ac;if(gr=0,Fp=xu=null,ac=0,On&6)throw Error(Ne(331));var o=On;if(On|=4,Pz(a.current),Nz(a,a.current,s,n),On=o,Ov(0,!1),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(Ev,a)}catch{}return!0}finally{Nn.p=r,Xt.T=i,$z(t,e)}}function aN(t,e,n){e=eo(n,e),e=DT(t.stateNode,e,2),t=yu(t,e,2),t!==null&&(Tv(t,2),gl(t))}function kn(t,e,n){if(t.tag===3)aN(t,t,n);else for(;e!==null;){if(e.tag===3){aN(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_u===null||!_u.has(i))){t=eo(n,t),n=hz(2),i=yu(e,n,2),i!==null&&(dz(n,i,e,t),Tv(i,2),gl(i));break}}e=e.return}}function vE(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new mY;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(o4=!0,r.add(n),t=xY.bind(null,t,e,n),e.then(t,t))}function xY(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Qn===t&&(gn&n)===n&&(Fi===4||Fi===3&&(gn&62914560)===gn&&300>hs()-Wb?!(On&2)&&Hp(t,0):l4|=n,Bp===gn&&(Bp=0)),gl(t)}function Qz(t,e){e===0&&(e=k8()),t=Ih(t,e),t!==null&&(Tv(t,e),gl(t))}function bY(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qz(t,n)}function SY(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(Ne(314))}i!==null&&i.delete(e),Qz(t,n)}function EY(t,e){return Mw(t,e)}var rx=null,Kd=null,BT=!1,ax=!1,yE=!1,fu=0;function gl(t){t!==Kd&&t.next===null&&(Kd===null?rx=Kd=t:Kd=Kd.next=t),ax=!0,BT||(BT=!0,TY())}function Ov(t,e){if(!yE&&ax){yE=!0;do for(var n=!1,i=rx;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var a=0;else{var s=i.suspendedLanes,o=i.pingedLanes;a=(1<<31-ps(42|t)+1)-1,a&=r&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,sN(i,a))}else a=gn,a=Pb(i,i===Qn?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||Mv(i,a)||(n=!0,sN(i,a));i=i.next}while(n);yE=!1}}function MY(){Jz()}function Jz(){ax=BT=!1;var t=0;fu!==0&&PY()&&(t=fu);for(var e=hs(),n=null,i=rx;i!==null;){var r=i.next,a=eB(i,e);a===0?(i.next=null,n===null?rx=r:n.next=r,r===null&&(Kd=n)):(n=i,(t!==0||a&3)&&(ax=!0)),i=r}gr!==0&&gr!==5||Ov(t),fu!==0&&(fu=0)}function eB(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var s=31-ps(a),o=1<<s,l=r[s];l===-1?(!(o&n)||o&i)&&(r[s]=KX(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}if(e=Qn,n=gn,n=Pb(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Gn===2||Gn===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&W3(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Mv(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&W3(i),Aw(n)){case 2:case 8:n=V8;break;case 32:n=V_;break;case 268435456:n=G8;break;default:n=V_}return i=tB.bind(null,t),n=Mw(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&W3(i),t.callbackPriority=2,t.callbackNode=null,2}function tB(t,e){if(gr!==0&&gr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Zb()&&t.callbackNode!==n)return null;var i=gn;return i=Pb(t,t===Qn?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(Hz(t,i,e),eB(t,hs()),t.callbackNode!=null&&t.callbackNode===n?tB.bind(null,t):null)}function sN(t,e){if(Zb())return null;Hz(t,e,!0)}function TY(){zY(function(){On&6?Mw(H8,MY):Jz()})}function u4(){if(fu===0){var t=Pp;t===0&&(t=k1,k1<<=1,!(k1&261888)&&(k1=256)),fu=t}return fu}function oN(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:h_(""+t)}function lN(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function AY(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var a=oN((r[Ba]||null).action),s=i.submitter;s&&(e=(e=s[Ba]||null)?oN(e.formAction):s.getAttribute("formAction"),e!==null&&(a=e,s=null));var o=new Ib("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(fu!==0){var l=s?lN(r,s):new FormData(r);CT(n,{pending:!0,data:l,method:r.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=s?lN(r,s):new FormData(r),CT(n,{pending:!0,data:l,method:r.method,action:a},a,l))},currentTarget:r}]})}}for(var _E=0;_E<gT.length;_E++){var xE=gT[_E],wY=xE.toLowerCase(),CY=xE[0].toUpperCase()+xE.slice(1);Po(wY,"on"+CY)}Po(dI,"onAnimationEnd");Po(pI,"onAnimationIteration");Po(mI,"onAnimationStart");Po("dblclick","onDoubleClick");Po("focusin","onFocus");Po("focusout","onBlur");Po(jW,"onTransitionRun");Po(XW,"onTransitionStart");Po(WW,"onTransitionCancel");Po(gI,"onTransitionEnd");Up("onMouseEnter",["mouseout","mouseover"]);Up("onMouseLeave",["mouseout","mouseover"]);Up("onPointerEnter",["pointerout","pointerover"]);Up("onPointerLeave",["pointerout","pointerover"]);Uh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fg));function nB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,f=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;a=o,r.currentTarget=f;try{a(r)}catch(h){k_(h)}r.currentTarget=null,a=l}else for(s=0;s<i.length;s++){if(o=i[s],l=o.instance,f=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;a=o,r.currentTarget=f;try{a(r)}catch(h){k_(h)}r.currentTarget=null,a=l}}}}function fn(t,e){var n=e[lT];n===void 0&&(n=e[lT]=new Set);var i=t+"__bubble";n.has(i)||(iB(e,t,2,!1),n.add(i))}function bE(t,e,n){var i=0;e&&(i|=4),iB(n,t,i,e)}var J1="_reactListening"+Math.random().toString(36).slice(2);function f4(t){if(!t[J1]){t[J1]=!0,q8.forEach(function(n){n!=="selectionchange"&&(RY.has(n)||bE(n,!1,t),bE(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[J1]||(e[J1]=!0,bE("selectionchange",!1,e))}}function iB(t,e,n,i){switch(gB(e)){case 2:var r=iq;break;case 8:r=rq;break;default:r=m4}n=r.bind(null,e,n,t),r=void 0,!dT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function SE(t,e,n,i,r){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var o=i.stateNode.containerInfo;if(o===r)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;o!==null;){if(s=tp(o),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){i=a=s;continue e}o=o.parentNode}}i=i.return}nI(function(){var f=a,h=Rw(n),d=[];e:{var p=vI.get(t);if(p!==void 0){var g=Ib,y=t;switch(t){case"keypress":if(p_(n)===0)break e;case"keydown":case"keyup":g=SW;break;case"focusin":y="focus",g=K3;break;case"focusout":y="blur",g=K3;break;case"beforeblur":case"afterblur":g=K3;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=g5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=uW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=TW;break;case dI:case pI:case mI:g=dW;break;case gI:g=wW;break;case"scroll":case"scrollend":g=lW;break;case"wheel":g=RW;break;case"copy":case"cut":case"paste":g=mW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=y5;break;case"toggle":case"beforetoggle":g=OW}var S=(e&4)!==0,b=!S&&(t==="scroll"||t==="scrollend"),v=S?p!==null?p+"Capture":null:p;S=[];for(var x=f,E;x!==null;){var T=x;if(E=T.stateNode,T=T.tag,T!==5&&T!==26&&T!==27||E===null||v===null||(T=Og(x,v),T!=null&&S.push(Hg(x,T,E))),b)break;x=x.return}0<S.length&&(p=new g(p,y,null,n,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==hT&&(y=n.relatedTarget||n.fromElement)&&(tp(y)||y[gm]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=f,y=y?tp(y):null,y!==null&&(b=Sv(y),S=y.tag,y!==b||S!==5&&S!==27&&S!==6)&&(y=null)):(g=null,y=f),g!==y)){if(S=g5,T="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(S=y5,T="onPointerLeave",v="onPointerEnter",x="pointer"),b=g==null?p:k0(g),E=y==null?p:k0(y),p=new S(T,x+"leave",g,n,h),p.target=b,p.relatedTarget=E,T=null,tp(h)===f&&(S=new S(v,x+"enter",y,n,h),S.target=E,S.relatedTarget=b,T=S),b=T,g&&y)t:{for(S=DY,v=g,x=y,E=0,T=v;T;T=S(T))E++;T=0;for(var w=x;w;w=S(w))T++;for(;0<E-T;)v=S(v),E--;for(;0<T-E;)x=S(x),T--;for(;E--;){if(v===x||x!==null&&v===x.alternate){S=v;break t}v=S(v),x=S(x)}S=null}else S=null;g!==null&&cN(d,p,g,S,!1),y!==null&&b!==null&&cN(d,b,y,S,!0)}}e:{if(p=f?k0(f):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var R=S5;else if(b5(p))if(lI)R=VW;else{R=FW;var N=BW}else g=p.nodeName,!g||g.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?f&&Cw(f.elementType)&&(R=S5):R=HW;if(R&&(R=R(t,f))){oI(d,R,n,h);break e}N&&N(t,p,f),t==="focusout"&&f&&p.type==="number"&&f.memoizedProps.value!=null&&fT(p,"number",p.value)}switch(N=f?k0(f):window,t){case"focusin":(b5(N)||N.contentEditable==="true")&&(rp=N,pT=f,tg=null);break;case"focusout":tg=pT=rp=null;break;case"mousedown":mT=!0;break;case"contextmenu":case"mouseup":case"dragend":mT=!1,w5(d,n,h);break;case"selectionchange":if(kW)break;case"keydown":case"keyup":w5(d,n,h)}var U;if(Nw)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ip?aI(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(rI&&n.locale!=="ko"&&(ip||A!=="onCompositionStart"?A==="onCompositionEnd"&&ip&&(U=iI()):(lu=h,Dw="value"in lu?lu.value:lu.textContent,ip=!0)),N=sx(f,A),0<N.length&&(A=new v5(A,t,null,n,h),d.push({event:A,listeners:N}),U?A.data=U:(U=sI(n),U!==null&&(A.data=U)))),(U=UW?LW(t,n):PW(t,n))&&(A=sx(f,"onBeforeInput"),0<A.length&&(N=new v5("onBeforeInput","beforeinput",null,n,h),d.push({event:N,listeners:A}),N.data=U)),AY(d,t,f,n,h)}nB(d,e)})}function Hg(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sx(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=Og(t,n),r!=null&&i.unshift(Hg(t,r,a)),r=Og(t,e),r!=null&&i.push(Hg(t,r,a))),t.tag===3)return i;t=t.return}return[]}function DY(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function cN(t,e,n,i,r){for(var a=e._reactName,s=[];n!==null&&n!==i;){var o=n,l=o.alternate,f=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||f===null||(l=f,r?(f=Og(n,a),f!=null&&s.unshift(Hg(n,f,l))):r||(f=Og(n,a),f!=null&&s.push(Hg(n,f,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var OY=/\r\n?/g,NY=/\u0000|\uFFFD/g;function uN(t){return(typeof t=="string"?t:""+t).replace(OY,`
`).replace(NY,"")}function rB(t,e){return e=uN(e),uN(t)===e}function qn(t,e,n,i,r,a){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Lp(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Lp(t,""+i);break;case"className":W1(t,"class",i);break;case"tabIndex":W1(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":W1(t,n,i);break;case"style":tI(t,i,a);break;case"data":if(e!=="object"){W1(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=h_(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&qn(t,e,"name",r.name,r,null),qn(t,e,"formEncType",r.formEncType,r,null),qn(t,e,"formMethod",r.formMethod,r,null),qn(t,e,"formTarget",r.formTarget,r,null)):(qn(t,e,"encType",r.encType,r,null),qn(t,e,"method",r.method,r,null),qn(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=h_(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Jl);break;case"onScroll":i!=null&&fn("scroll",t);break;case"onScrollEnd":i!=null&&fn("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(Ne(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(Ne(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=h_(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":fn("beforetoggle",t),fn("toggle",t),f_(t,"popover",i);break;case"xlinkActuate":Ol(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Ol(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Ol(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Ol(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Ol(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Ol(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Ol(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Ol(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Ol(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":f_(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=sW.get(n)||n,f_(t,n,i))}}function FT(t,e,n,i,r,a){switch(n){case"style":tI(t,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(Ne(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(Ne(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Lp(t,i):(typeof i=="number"||typeof i=="bigint")&&Lp(t,""+i);break;case"onScroll":i!=null&&fn("scroll",t);break;case"onScrollEnd":i!=null&&fn("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Jl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Z8.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),a=t[Ba]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,r),typeof i=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):f_(t,n,i)}}}function Fr(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fn("error",t),fn("load",t);var i=!1,r=!1,a;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(s!=null)switch(a){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Ne(137,e));default:qn(t,e,a,s,n,null)}}r&&qn(t,e,"srcSet",n.srcSet,n,null),i&&qn(t,e,"src",n.src,n,null);return;case"input":fn("invalid",t);var o=a=s=r=null,l=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":r=h;break;case"type":s=h;break;case"checked":l=h;break;case"defaultChecked":f=h;break;case"value":a=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Ne(137,e));break;default:qn(t,e,i,h,n,null)}}Q8(t,a,o,l,f,s,r,!1);return;case"select":fn("invalid",t),i=s=a=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":i=o;default:qn(t,e,r,o,n,null)}e=a,n=s,t.multiple=!!i,e!=null?vp(t,!!i,e,!1):n!=null&&vp(t,!!i,n,!0);return;case"textarea":fn("invalid",t),a=r=i=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":i=o;break;case"defaultValue":r=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(Ne(91));break;default:qn(t,e,s,o,n,null)}eI(t,i,r,a);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:qn(t,e,l,i,n,null)}return;case"dialog":fn("beforetoggle",t),fn("toggle",t),fn("cancel",t),fn("close",t);break;case"iframe":case"object":fn("load",t);break;case"video":case"audio":for(i=0;i<Fg.length;i++)fn(Fg[i],t);break;case"image":fn("error",t),fn("load",t);break;case"details":fn("toggle",t);break;case"embed":case"source":case"link":fn("error",t),fn("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Ne(137,e));default:qn(t,e,f,i,n,null)}return;default:if(Cw(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&FT(t,e,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&qn(t,e,o,i,n,null))}function UY(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,o=null,l=null,f=null,h=null;for(g in n){var d=n[g];if(n.hasOwnProperty(g)&&d!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(g)||qn(t,e,g,null,i,d)}}for(var p in i){var g=i[p];if(d=n[p],i.hasOwnProperty(p)&&(g!=null||d!=null))switch(p){case"type":a=g;break;case"name":r=g;break;case"checked":f=g;break;case"defaultChecked":h=g;break;case"value":s=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(Ne(137,e));break;default:g!==d&&qn(t,e,p,g,i,d)}}uT(t,s,o,l,f,h,a,r);return;case"select":g=s=o=p=null;for(a in n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":g=l;default:i.hasOwnProperty(a)||qn(t,e,a,null,i,l)}for(r in i)if(a=i[r],l=n[r],i.hasOwnProperty(r)&&(a!=null||l!=null))switch(r){case"value":p=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==l&&qn(t,e,r,a,i,l)}e=o,n=s,i=g,p!=null?vp(t,!!n,p,!1):!!i!=!!n&&(e!=null?vp(t,!!n,e,!0):vp(t,!!n,n?[]:"",!1));return;case"textarea":g=p=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:qn(t,e,o,null,i,r)}for(s in i)if(r=i[s],a=n[s],i.hasOwnProperty(s)&&(r!=null||a!=null))switch(s){case"value":p=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(Ne(91));break;default:r!==a&&qn(t,e,s,r,i,a)}J8(t,p,g);return;case"option":for(var y in n)if(p=n[y],n.hasOwnProperty(y)&&p!=null&&!i.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:qn(t,e,y,null,i,p)}for(l in i)if(p=i[l],g=n[l],i.hasOwnProperty(l)&&p!==g&&(p!=null||g!=null))switch(l){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:qn(t,e,l,p,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in n)p=n[S],n.hasOwnProperty(S)&&p!=null&&!i.hasOwnProperty(S)&&qn(t,e,S,null,i,p);for(f in i)if(p=i[f],g=n[f],i.hasOwnProperty(f)&&p!==g&&(p!=null||g!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(Ne(137,e));break;default:qn(t,e,f,p,i,g)}return;default:if(Cw(e)){for(var b in n)p=n[b],n.hasOwnProperty(b)&&p!==void 0&&!i.hasOwnProperty(b)&&FT(t,e,b,void 0,i,p);for(h in i)p=i[h],g=n[h],!i.hasOwnProperty(h)||p===g||p===void 0&&g===void 0||FT(t,e,h,p,i,g);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!i.hasOwnProperty(v)&&qn(t,e,v,null,i,p);for(d in i)p=i[d],g=n[d],!i.hasOwnProperty(d)||p===g||p==null&&g==null||qn(t,e,d,p,i,g)}function fN(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LY(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],a=r.transferSize,s=r.initiatorType,o=r.duration;if(a&&o&&fN(s)){for(s=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],f=l.startTime;if(f>o)break;var h=l.transferSize,d=l.initiatorType;h&&fN(d)&&(l=l.responseEnd,s+=h*(l<o?1:(o-f)/(l-f)))}if(--i,e+=8*(a+s)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var HT=null,VT=null;function ox(t){return t.nodeType===9?t:t.ownerDocument}function hN(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aB(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function GT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var EE=null;function PY(){var t=window.event;return t&&t.type==="popstate"?t===EE?!1:(EE=t,!0):(EE=null,!1)}var sB=typeof setTimeout=="function"?setTimeout:void 0,IY=typeof clearTimeout=="function"?clearTimeout:void 0,dN=typeof Promise=="function"?Promise:void 0,zY=typeof queueMicrotask=="function"?queueMicrotask:typeof dN<"u"?function(t){return dN.resolve(null).then(t).catch(BY)}:sB;function BY(t){setTimeout(function(){throw t})}function qu(t){return t==="head"}function pN(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),Gp(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")fg(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,fg(n);for(var a=n.firstChild;a;){var s=a.nextSibling,o=a.nodeName;a[Av]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=s}}else n==="body"&&fg(t.ownerDocument.body);n=r}while(n);Gp(e)}function mN(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function kT(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":kT(n),ww(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function FY(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Av])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=so(t.nextSibling),t===null)break}return null}function HY(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=so(t.nextSibling),t===null))return null;return t}function oB(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=so(t.nextSibling),t===null))return null;return t}function jT(t){return t.data==="$?"||t.data==="$~"}function XT(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function VY(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function so(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var WT=null;function gN(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return so(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function vN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function lB(t,e,n){switch(e=ox(n),t){case"html":if(t=e.documentElement,!t)throw Error(Ne(452));return t;case"head":if(t=e.head,!t)throw Error(Ne(453));return t;case"body":if(t=e.body,!t)throw Error(Ne(454));return t;default:throw Error(Ne(451))}}function fg(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ww(t)}var lo=new Map,yN=new Set;function lx(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var xc=Nn.d;Nn.d={f:GY,r:kY,D:jY,C:XY,L:WY,m:YY,X:ZY,S:qY,M:$Y};function GY(){var t=xc.f(),e=Yb();return t||e}function kY(t){var e=vm(t);e!==null&&e.tag===5&&e.type==="form"?tz(e):xc.r(t)}var bm=typeof document>"u"?null:document;function cB(t,e,n){var i=bm;if(i&&typeof e=="string"&&e){var r=Js(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),yN.has(r)||(yN.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Fr(e,"link",t),wr(e),i.head.appendChild(e)))}}function jY(t){xc.D(t),cB("dns-prefetch",t,null)}function XY(t,e){xc.C(t,e),cB("preconnect",t,e)}function WY(t,e,n){xc.L(t,e,n);var i=bm;if(i&&t&&e){var r='link[rel="preload"][as="'+Js(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Js(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Js(n.imageSizes)+'"]')):r+='[href="'+Js(t)+'"]';var a=r;switch(e){case"style":a=Vp(t);break;case"script":a=Sm(t)}lo.has(a)||(t=gi({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),lo.set(a,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Nv(a))||e==="script"&&i.querySelector(Uv(a))||(e=i.createElement("link"),Fr(e,"link",t),wr(e),i.head.appendChild(e)))}}function YY(t,e){xc.m(t,e);var n=bm;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Js(i)+'"][href="'+Js(t)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Sm(t)}if(!lo.has(a)&&(t=gi({rel:"modulepreload",href:t},e),lo.set(a,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Uv(a)))return}i=n.createElement("link"),Fr(i,"link",t),wr(i),n.head.appendChild(i)}}}function qY(t,e,n){xc.S(t,e,n);var i=bm;if(i&&t){var r=gp(i).hoistableStyles,a=Vp(t);e=e||"default";var s=r.get(a);if(!s){var o={loading:0,preload:null};if(s=i.querySelector(Nv(a)))o.loading=5;else{t=gi({rel:"stylesheet",href:t,"data-precedence":e},n),(n=lo.get(a))&&h4(t,n);var l=s=i.createElement("link");wr(l),Fr(l,"link",t),l._p=new Promise(function(f,h){l.onload=f,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,S_(s,e,i)}s={type:"stylesheet",instance:s,count:1,state:o},r.set(a,s)}}}function ZY(t,e){xc.X(t,e);var n=bm;if(n&&t){var i=gp(n).hoistableScripts,r=Sm(t),a=i.get(r);a||(a=n.querySelector(Uv(r)),a||(t=gi({src:t,async:!0},e),(e=lo.get(r))&&d4(t,e),a=n.createElement("script"),wr(a),Fr(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function $Y(t,e){xc.M(t,e);var n=bm;if(n&&t){var i=gp(n).hoistableScripts,r=Sm(t),a=i.get(r);a||(a=n.querySelector(Uv(r)),a||(t=gi({src:t,async:!0,type:"module"},e),(e=lo.get(r))&&d4(t,e),a=n.createElement("script"),wr(a),Fr(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function _N(t,e,n,i){var r=(r=mu.current)?lx(r):null;if(!r)throw Error(Ne(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Vp(n.href),n=gp(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Vp(n.href);var a=gp(r).hoistableStyles,s=a.get(t);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,s),(a=r.querySelector(Nv(t)))&&!a._p&&(s.instance=a,s.state.loading=5),lo.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},lo.set(t,n),a||KY(r,t,n,s.state))),e&&i===null)throw Error(Ne(528,""));return s}if(e&&i!==null)throw Error(Ne(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Sm(n),n=gp(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(Ne(444,t))}}function Vp(t){return'href="'+Js(t)+'"'}function Nv(t){return'link[rel="stylesheet"]['+t+"]"}function uB(t){return gi({},t,{"data-precedence":t.precedence,precedence:null})}function KY(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Fr(e,"link",n),wr(e),t.head.appendChild(e))}function Sm(t){return'[src="'+Js(t)+'"]'}function Uv(t){return"script[async]"+t}function xN(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Js(n.href)+'"]');if(i)return e.instance=i,wr(i),i;var r=gi({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),wr(i),Fr(i,"style",r),S_(i,n.precedence,t),e.instance=i;case"stylesheet":r=Vp(n.href);var a=t.querySelector(Nv(r));if(a)return e.state.loading|=4,e.instance=a,wr(a),a;i=uB(n),(r=lo.get(r))&&h4(i,r),a=(t.ownerDocument||t).createElement("link"),wr(a);var s=a;return s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),Fr(a,"link",i),e.state.loading|=4,S_(a,n.precedence,t),e.instance=a;case"script":return a=Sm(n.src),(r=t.querySelector(Uv(a)))?(e.instance=r,wr(r),r):(i=n,(r=lo.get(a))&&(i=gi({},n),d4(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),wr(r),Fr(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(Ne(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,S_(i,n.precedence,t));return e.instance}function S_(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,s=0;s<i.length;s++){var o=i[s];if(o.dataset.precedence===e)a=o;else if(a!==r)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function h4(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function d4(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var E_=null;function bN(t,e,n){if(E_===null){var i=new Map,r=E_=new Map;r.set(n,i)}else r=E_,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var a=n[r];if(!(a[Av]||a[Pr]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(e)||"";s=t+s;var o=i.get(s);o?o.push(a):i.set(s,[a])}}return i}function SN(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function QY(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function fB(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function JY(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Vp(i.href),a=e.querySelector(Nv(r));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=cx.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=a,wr(a);return}a=e.ownerDocument||e,i=uB(i),(r=lo.get(r))&&h4(i,r),a=a.createElement("link"),wr(a);var s=a;s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),Fr(a,"link",i),n.instance=a}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=cx.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var ME=0;function eq(t,e){return t.stylesheets&&t.count===0&&M_(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&M_(t,t.stylesheets),t.unsuspend){var a=t.unsuspend;t.unsuspend=null,a()}},6e4+e);0<t.imgBytes&&ME===0&&(ME=62500*LY());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&M_(t,t.stylesheets),t.unsuspend)){var a=t.unsuspend;t.unsuspend=null,a()}},(t.imgBytes>ME?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function cx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)M_(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ux=null;function M_(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ux=new Map,e.forEach(tq,t),ux=null,cx.call(t))}function tq(t,e){if(!(e.state.loading&4)){var n=ux.get(t);if(n)var i=n.get(null);else{n=new Map,ux.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var s=r[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}r=e.instance,s=r.getAttribute("data-precedence"),a=n.get(s)||i,a===i&&n.set(null,r),n.set(s,r),this.count++,i=cx.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Vg={$$typeof:Ql,Provider:null,Consumer:null,_currentValue:rh,_currentValue2:rh,_threadCount:0};function nq(t,e,n,i,r,a,s,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Y3(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y3(0),this.hiddenUpdates=Y3(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hB(t,e,n,i,r,a,s,o,l,f,h,d){return t=new nq(t,e,n,s,l,f,h,d,o),e=1,a===!0&&(e|=24),a=ls(3,null,null,e),t.current=a,a.stateNode=t,e=Fw(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:e},Gw(a),t}function dB(t){return t?(t=op,t):op}function pB(t,e,n,i,r,a){r=dB(r),i.context===null?i.context=r:i.pendingContext=r,i=vu(e),i.payload={element:n},a=a===void 0?null:a,a!==null&&(i.callback=a),n=yu(t,i,e),n!==null&&(Ia(n,t,e),ig(n,t,e))}function EN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function p4(t,e){EN(t,e),(t=t.alternate)&&EN(t,e)}function mB(t){if(t.tag===13||t.tag===31){var e=Ih(t,67108864);e!==null&&Ia(e,t,67108864),p4(t,67108864)}}function MN(t){if(t.tag===13||t.tag===31){var e=ms();e=Tw(e);var n=Ih(t,e);n!==null&&Ia(n,t,e),p4(t,e)}}var fx=!0;function iq(t,e,n,i){var r=Xt.T;Xt.T=null;var a=Nn.p;try{Nn.p=2,m4(t,e,n,i)}finally{Nn.p=a,Xt.T=r}}function rq(t,e,n,i){var r=Xt.T;Xt.T=null;var a=Nn.p;try{Nn.p=8,m4(t,e,n,i)}finally{Nn.p=a,Xt.T=r}}function m4(t,e,n,i){if(fx){var r=YT(i);if(r===null)SE(t,e,i,hx,n),TN(t,i);else if(sq(r,t,e,n,i))i.stopPropagation();else if(TN(t,i),e&4&&-1<aq.indexOf(t)){for(;r!==null;){var a=vm(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=Vf(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-ps(s);o.entanglements[1]|=l,s&=~l}gl(a),!(On&6)&&(tx=hs()+500,Ov(0))}}break;case 31:case 13:o=Ih(a,2),o!==null&&Ia(o,a,2),Yb(),p4(a,2)}if(a=YT(i),a===null&&SE(t,e,i,hx,n),a===r)break;r=a}r!==null&&i.stopPropagation()}else SE(t,e,i,null,n)}}function YT(t){return t=Rw(t),g4(t)}var hx=null;function g4(t){if(hx=null,t=tp(t),t!==null){var e=Sv(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=P8(e),t!==null)return t;t=null}else if(n===31){if(t=I8(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return hx=t,null}function gB(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jX()){case H8:return 2;case V8:return 8;case V_:case XX:return 32;case G8:return 268435456;default:return 32}default:return 32}}var qT=!1,bu=null,Su=null,Eu=null,Gg=new Map,kg=new Map,iu=[],aq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TN(t,e){switch(t){case"focusin":case"focusout":bu=null;break;case"dragenter":case"dragleave":Su=null;break;case"mouseover":case"mouseout":Eu=null;break;case"pointerover":case"pointerout":Gg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kg.delete(e.pointerId)}}function y0(t,e,n,i,r,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},e!==null&&(e=vm(e),e!==null&&mB(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function sq(t,e,n,i,r){switch(e){case"focusin":return bu=y0(bu,t,e,n,i,r),!0;case"dragenter":return Su=y0(Su,t,e,n,i,r),!0;case"mouseover":return Eu=y0(Eu,t,e,n,i,r),!0;case"pointerover":var a=r.pointerId;return Gg.set(a,y0(Gg.get(a)||null,t,e,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,kg.set(a,y0(kg.get(a)||null,t,e,n,i,r)),!0}return!1}function vB(t){var e=tp(t.target);if(e!==null){var n=Sv(e);if(n!==null){if(e=n.tag,e===13){if(e=P8(n),e!==null){t.blockedOn=e,c5(t.priority,function(){MN(n)});return}}else if(e===31){if(e=I8(n),e!==null){t.blockedOn=e,c5(t.priority,function(){MN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function T_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=YT(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);hT=i,n.target.dispatchEvent(i),hT=null}else return e=vm(n),e!==null&&mB(e),t.blockedOn=n,!1;e.shift()}return!0}function AN(t,e,n){T_(t)&&n.delete(e)}function oq(){qT=!1,bu!==null&&T_(bu)&&(bu=null),Su!==null&&T_(Su)&&(Su=null),Eu!==null&&T_(Eu)&&(Eu=null),Gg.forEach(AN),kg.forEach(AN)}function ey(t,e){t.blockedOn===e&&(t.blockedOn=null,qT||(qT=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,oq)))}var ty=null;function wN(t){ty!==t&&(ty=t,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,function(){ty===t&&(ty=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(g4(i||n)===null)continue;break}var a=vm(n);a!==null&&(t.splice(e,3),e-=3,CT(a,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Gp(t){function e(l){return ey(l,t)}bu!==null&&ey(bu,t),Su!==null&&ey(Su,t),Eu!==null&&ey(Eu,t),Gg.forEach(e),kg.forEach(e);for(var n=0;n<iu.length;n++){var i=iu[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<iu.length&&(n=iu[0],n.blockedOn===null);)vB(n),n.blockedOn===null&&iu.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],a=n[i+1],s=r[Ba]||null;if(typeof a=="function")s||wN(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(r=a,s=a[Ba]||null)o=s.formAction;else if(g4(r)!==null)continue}else o=s.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),wN(n)}}}function yB(){function t(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(s){return r=s})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function v4(t){this._internalRoot=t}$b.prototype.render=v4.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ne(409));var n=e.current,i=ms();pB(n,i,t,e,null,null)};$b.prototype.unmount=v4.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pB(t.current,2,null,t,null,null),Yb(),e[gm]=null}};function $b(t){this._internalRoot=t}$b.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y8();t={blockedOn:null,target:t,priority:e};for(var n=0;n<iu.length&&e!==0&&e<iu[n].priority;n++);iu.splice(n,0,t),n===0&&vB(t)}};var CN=U8.version;if(CN!=="19.2.3")throw Error(Ne(527,CN,"19.2.3"));Nn.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ne(188)):(t=Object.keys(t).join(","),Error(Ne(268,t)));return t=zX(e),t=t!==null?z8(t):null,t=t===null?null:t.stateNode,t};var lq={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Xt,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{Ev=ny.inject(lq),ds=ny}catch{}}Nb.createRoot=function(t,e){if(!L8(t))throw Error(Ne(299));var n=!1,i="",r=cz,a=uz,s=fz;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hB(t,1,!1,null,null,n,i,null,r,a,s,yB),t[gm]=e.current,f4(t),new v4(e)};Nb.hydrateRoot=function(t,e,n){if(!L8(t))throw Error(Ne(299));var i=!1,r="",a=cz,s=uz,o=fz,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=hB(t,1,!0,e,n??null,i,r,l,a,s,o,yB),e.context=dB(null),n=e.current,i=ms(),i=Tw(i),r=vu(i),r.callback=null,yu(n,r,i),n=i,e.current.lanes=n,Tv(e,n),gl(e),t[gm]=e.current,f4(t),new $b(e)};Nb.version="19.2.3";function _B(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_B)}catch(t){console.error(t)}}_B(),w8.exports=Nb;var y4=w8.exports;const cq=Nh(y4);var xB={exports:{}},Zu={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Zu.ConcurrentRoot=1;Zu.ContinuousEventPriority=8;Zu.DefaultEventPriority=32;Zu.DiscreteEventPriority=2;Zu.IdleEventPriority=268435456;Zu.LegacyRoot=0;Zu.NoEventPriority=0;xB.exports=Zu;var A_=xB.exports;/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Bh="182",jf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Xf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bB=0,ZT=1,SB=2,uq=3,EB=0,Ep=1,hg=2,Zf=3,Oo=0,lr=1,zr=2,Hr=0,Mu=1,jg=2,$T=3,KT=4,MB=5,ru=100,TB=101,AB=102,wB=103,CB=104,RB=200,DB=201,OB=202,NB=203,dx=204,px=205,UB=206,LB=207,PB=208,IB=209,zB=210,BB=211,FB=212,HB=213,VB=214,mx=0,Xg=1,gx=2,_h=3,vx=4,yx=5,_x=6,xx=7,Lv=0,GB=1,kB=2,gs=0,_4=1,x4=2,b4=3,Kb=4,S4=5,E4=6,M4=7,QT="attached",jB="detached",Pu=300,No=301,Iu=302,kp=303,Wg=304,Em=306,Yg=1e3,Hi=1001,qg=1002,pi=1003,T4=1004,fq=1004,fp=1005,hq=1005,rn=1006,dg=1007,dq=1007,rl=1008,JT=1008,fi=1009,Qb=1010,Jb=1011,jp=1012,Pv=1013,Fa=1014,ai=1015,Ei=1016,e2=1017,t2=1018,xh=1020,A4=35902,w4=35899,C4=1021,R4=1022,Zi=1023,ul=1026,tc=1027,Iv=1028,zv=1029,bh=1030,n2=1031,pq=1032,i2=1033,pg=33776,mg=33777,gg=33778,vg=33779,bx=35840,Sx=35841,Ex=35842,Mx=35843,Tx=36196,Ax=37492,wx=37496,Cx=37488,Rx=37489,Dx=37490,Ox=37491,Nx=37808,Ux=37809,Lx=37810,Px=37811,Ix=37812,zx=37813,Bx=37814,Fx=37815,Hx=37816,Vx=37817,Gx=37818,kx=37819,jx=37820,Xx=37821,Wx=36492,Yx=36494,qx=36495,Zx=36283,$x=36284,Kx=36285,Qx=36286,XB=2200,WB=2201,YB=2202,Zg=2300,Jx=2301,w_=2302,$f=2400,Kf=2401,$g=2402,r2=2500,D4=2501,mq=0,gq=1,vq=2,$u=3200,yq=3201,_q=3202,xq=3203,Ku=0,qB=1,Ro="",En="srgb",Ms="srgb-linear",Kg="linear",Ln="srgb",bq="",Sq="rg",Eq="ga",Mq=0,Wf=7680,Tq=7681,Aq=7682,wq=7683,Cq=34055,Rq=34056,Dq=5386,Oq=512,Nq=513,Uq=514,Lq=515,Pq=516,Iq=517,zq=518,eA=519,ZB=512,$B=513,KB=514,a2=515,QB=516,JB=517,s2=518,e7=519,Qg=35044,Bq=35048,Fq=35040,Hq=35045,Vq=35049,Gq=35041,kq=35046,jq=35050,Xq=35042,Wq="100",tA="300 es",us=2e3,Xp=2001,Yq={COMPUTE:"compute",RENDER:"render"},qq={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Zq={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function t7(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const $q={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hp(t,e){return new $q[t](e)}function n7(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Jg(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function i7(){const t=Jg("canvas");return t.style.display="block",t}const RN={};let zu=null;function Kq(t){zu=t}function Qq(){return zu}function ev(...t){const e="THREE."+t.shift();zu?zu("log",e,...t):console.log(e,...t)}function ft(...t){const e="THREE."+t.shift();zu?zu("warn",e,...t):console.warn(e,...t)}function Ut(...t){const e="THREE."+t.shift();zu?zu("error",e,...t):console.error(e,...t)}function Wp(...t){const e=t.join(" ");e in RN||(RN[e]=!0,ft(...t))}function Jq(t,e,n){return new Promise(function(i,r){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:i()}}setTimeout(a,n)})}let ws=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const Yr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let DN=1234567;const ch=Math.PI/180,Yp=180/Math.PI;function vs(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Yr[t&255]+Yr[t>>8&255]+Yr[t>>16&255]+Yr[t>>24&255]+"-"+Yr[e&255]+Yr[e>>8&255]+"-"+Yr[e>>16&15|64]+Yr[e>>24&255]+"-"+Yr[n&63|128]+Yr[n>>8&255]+"-"+Yr[n>>16&255]+Yr[n>>24&255]+Yr[i&255]+Yr[i>>8&255]+Yr[i>>16&255]+Yr[i>>24&255]).toLowerCase()}function jt(t,e,n){return Math.max(e,Math.min(n,t))}function O4(t,e){return(t%e+e)%e}function eZ(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function tZ(t,e,n){return t!==e?(n-t)/(e-t):0}function yg(t,e,n){return(1-n)*t+n*e}function nZ(t,e,n,i){return yg(t,e,1-Math.exp(-n*i))}function iZ(t,e=1){return e-Math.abs(O4(t,e*2)-e)}function rZ(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function aZ(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function sZ(t,e){return t+Math.floor(Math.random()*(e-t+1))}function oZ(t,e){return t+Math.random()*(e-t)}function lZ(t){return t*(.5-Math.random())}function cZ(t){t!==void 0&&(DN=t);let e=DN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function uZ(t){return t*ch}function fZ(t){return t*Yp}function hZ(t){return(t&t-1)===0&&t!==0}function dZ(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function pZ(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function mZ(t,e,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),f=a((e+i)/2),h=s((e+i)/2),d=a((e-i)/2),p=s((e-i)/2),g=a((i-e)/2),y=s((i-e)/2);switch(r){case"XYX":t.set(o*h,l*d,l*p,o*f);break;case"YZY":t.set(l*p,o*h,l*d,o*f);break;case"ZXZ":t.set(l*d,l*p,o*h,o*f);break;case"XZX":t.set(o*h,l*y,l*g,o*f);break;case"YXY":t.set(l*g,o*h,l*y,o*f);break;case"ZYZ":t.set(l*y,l*g,o*h,o*f);break;default:ft("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function pa(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function en(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const fs={DEG2RAD:ch,RAD2DEG:Yp,generateUUID:vs,clamp:jt,euclideanModulo:O4,mapLinear:eZ,inverseLerp:tZ,lerp:yg,damp:nZ,pingpong:iZ,smoothstep:rZ,smootherstep:aZ,randInt:sZ,randFloat:oZ,randFloatSpread:lZ,seededRandom:cZ,degToRad:uZ,radToDeg:fZ,isPowerOfTwo:hZ,ceilPowerOfTwo:dZ,floorPowerOfTwo:pZ,setQuaternionFromProperEuler:mZ,normalize:en,denormalize:pa};class xe{constructor(e=0,n=0){xe.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=jt(this.x,e.x,n.x),this.y=jt(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=jt(this.x,e,n),this.y=jt(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jr{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,a,s,o){let l=i[r+0],f=i[r+1],h=i[r+2],d=i[r+3],p=a[s+0],g=a[s+1],y=a[s+2],S=a[s+3];if(o<=0){e[n+0]=l,e[n+1]=f,e[n+2]=h,e[n+3]=d;return}if(o>=1){e[n+0]=p,e[n+1]=g,e[n+2]=y,e[n+3]=S;return}if(d!==S||l!==p||f!==g||h!==y){let b=l*p+f*g+h*y+d*S;b<0&&(p=-p,g=-g,y=-y,S=-S,b=-b);let v=1-o;if(b<.9995){const x=Math.acos(b),E=Math.sin(x);v=Math.sin(v*x)/E,o=Math.sin(o*x)/E,l=l*v+p*o,f=f*v+g*o,h=h*v+y*o,d=d*v+S*o}else{l=l*v+p*o,f=f*v+g*o,h=h*v+y*o,d=d*v+S*o;const x=1/Math.sqrt(l*l+f*f+h*h+d*d);l*=x,f*=x,h*=x,d*=x}}e[n]=l,e[n+1]=f,e[n+2]=h,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,r,a,s){const o=i[r],l=i[r+1],f=i[r+2],h=i[r+3],d=a[s],p=a[s+1],g=a[s+2],y=a[s+3];return e[n]=o*y+h*d+l*g-f*p,e[n+1]=l*y+h*p+f*d-o*g,e[n+2]=f*y+h*g+o*p-l*d,e[n+3]=h*y-o*d-l*p-f*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,f=o(i/2),h=o(r/2),d=o(a/2),p=l(i/2),g=l(r/2),y=l(a/2);switch(s){case"XYZ":this._x=p*h*d+f*g*y,this._y=f*g*d-p*h*y,this._z=f*h*y+p*g*d,this._w=f*h*d-p*g*y;break;case"YXZ":this._x=p*h*d+f*g*y,this._y=f*g*d-p*h*y,this._z=f*h*y-p*g*d,this._w=f*h*d+p*g*y;break;case"ZXY":this._x=p*h*d-f*g*y,this._y=f*g*d+p*h*y,this._z=f*h*y+p*g*d,this._w=f*h*d-p*g*y;break;case"ZYX":this._x=p*h*d-f*g*y,this._y=f*g*d+p*h*y,this._z=f*h*y-p*g*d,this._w=f*h*d+p*g*y;break;case"YZX":this._x=p*h*d+f*g*y,this._y=f*g*d+p*h*y,this._z=f*h*y-p*g*d,this._w=f*h*d-p*g*y;break;case"XZY":this._x=p*h*d-f*g*y,this._y=f*g*d-p*h*y,this._z=f*h*y+p*g*d,this._w=f*h*d+p*g*y;break;default:ft("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],a=n[8],s=n[1],o=n[5],l=n[9],f=n[2],h=n[6],d=n[10],p=i+o+d;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(h-l)*g,this._y=(a-f)*g,this._z=(s-r)*g}else if(i>o&&i>d){const g=2*Math.sqrt(1+i-o-d);this._w=(h-l)/g,this._x=.25*g,this._y=(r+s)/g,this._z=(a+f)/g}else if(o>d){const g=2*Math.sqrt(1+o-i-d);this._w=(a-f)/g,this._x=(r+s)/g,this._y=.25*g,this._z=(l+h)/g}else{const g=2*Math.sqrt(1+d-i-o);this._w=(s-r)/g,this._x=(a+f)/g,this._y=(l+h)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jt(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,a=e._z,s=e._w,o=n._x,l=n._y,f=n._z,h=n._w;return this._x=i*h+s*o+r*f-a*l,this._y=r*h+s*l+a*o-i*f,this._z=a*h+s*f+i*l-r*o,this._w=s*h-i*o-r*l-a*f,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,s=e._w,o=this.dot(e);o<0&&(i=-i,r=-r,a=-a,s=-s,o=-o);let l=1-n;if(o<.9995){const f=Math.acos(o),h=Math.sin(f);l=Math.sin(l*f)/h,n=Math.sin(n*f)/h,this._x=this._x*l+i*n,this._y=this._y*l+r*n,this._z=this._z*l+a*n,this._w=this._w*l+s*n,this._onChangeCallback()}else this._x=this._x*l+i*n,this._y=this._y*l+r*n,this._z=this._z*l+a*n,this._w=this._w*l+s*n,this.normalize();return this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,n=0,i=0){k.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(ON.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(ON.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*r,this.y=a[1]*n+a[4]*i+a[7]*r,this.z=a[2]*n+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*n+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*n+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*n+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,a=e.x,s=e.y,o=e.z,l=e.w,f=2*(s*r-o*i),h=2*(o*n-a*r),d=2*(a*i-s*n);return this.x=n+l*f+s*d-o*h,this.y=i+l*h+o*f-a*d,this.z=r+l*d+a*h-s*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r,this.y=a[1]*n+a[5]*i+a[9]*r,this.z=a[2]*n+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=jt(this.x,e.x,n.x),this.y=jt(this.y,e.y,n.y),this.z=jt(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=jt(this.x,e,n),this.y=jt(this.y,e,n),this.z=jt(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,a=e.z,s=n.x,o=n.y,l=n.z;return this.x=r*l-a*o,this.y=a*s-i*l,this.z=i*o-r*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return TE.copy(this).projectOnVector(e),this.sub(TE)}reflect(e){return this.sub(TE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const TE=new k,ON=new Jr;class $t{constructor(e,n,i,r,a,s,o,l,f){$t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,s,o,l,f)}set(e,n,i,r,a,s,o,l,f){const h=this.elements;return h[0]=e,h[1]=r,h[2]=o,h[3]=n,h[4]=a,h[5]=l,h[6]=i,h[7]=s,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,s=i[0],o=i[3],l=i[6],f=i[1],h=i[4],d=i[7],p=i[2],g=i[5],y=i[8],S=r[0],b=r[3],v=r[6],x=r[1],E=r[4],T=r[7],w=r[2],R=r[5],N=r[8];return a[0]=s*S+o*x+l*w,a[3]=s*b+o*E+l*R,a[6]=s*v+o*T+l*N,a[1]=f*S+h*x+d*w,a[4]=f*b+h*E+d*R,a[7]=f*v+h*T+d*N,a[2]=p*S+g*x+y*w,a[5]=p*b+g*E+y*R,a[8]=p*v+g*T+y*N,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],f=e[7],h=e[8];return n*s*h-n*o*f-i*a*h+i*o*l+r*a*f-r*s*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],f=e[7],h=e[8],d=h*s-o*f,p=o*l-h*a,g=f*a-s*l,y=n*d+i*p+r*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/y;return e[0]=d*S,e[1]=(r*f-h*i)*S,e[2]=(o*i-r*s)*S,e[3]=p*S,e[4]=(h*n-r*l)*S,e[5]=(r*a-o*n)*S,e[6]=g*S,e[7]=(i*l-f*n)*S,e[8]=(s*n-i*a)*S,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,a,s,o){const l=Math.cos(a),f=Math.sin(a);return this.set(i*l,i*f,-i*(l*s+f*o)+s+e,-r*f,r*l,-r*(-f*s+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(AE.makeScale(e,n)),this}rotate(e){return this.premultiply(AE.makeRotation(-e)),this}translate(e,n){return this.premultiply(AE.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const AE=new $t,NN=new $t().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),UN=new $t().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function gZ(){const t={enabled:!0,workingColorSpace:Ms,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Ln&&(r.r=sc(r.r),r.g=sc(r.g),r.b=sc(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Ln&&(r.r=Mp(r.r),r.g=Mp(r.g),r.b=Mp(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ro?Kg:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return Wp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return Wp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[Ms]:{primaries:e,whitePoint:i,transfer:Kg,toXYZ:NN,fromXYZ:UN,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:En},outputColorSpaceConfig:{drawingBufferColorSpace:En}},[En]:{primaries:e,whitePoint:i,transfer:Ln,toXYZ:NN,fromXYZ:UN,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:En}}}),t}const pn=gZ();function sc(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Mp(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let xd;class r7{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{xd===void 0&&(xd=Jg("canvas")),xd.width=e.width,xd.height=e.height;const r=xd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=xd}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Jg("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=sc(a[s]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(sc(n[i]/255)*255):n[i]=sc(n[i]);return{data:n,width:e.width,height:e.height}}else return ft("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let vZ=0;class hu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:vZ++}),this.uuid=vs(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):typeof VideoFrame<"u"&&n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(wE(r[s].image)):a.push(wE(r[s]))}else a=wE(r);i.url=a}return n||(e.images[this.uuid]=i),i}}function wE(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?r7.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(ft("Texture: Unable to serialize Texture."),{})}let yZ=0;const CE=new k;class zn extends ws{constructor(e=zn.DEFAULT_IMAGE,n=zn.DEFAULT_MAPPING,i=Hi,r=Hi,a=rn,s=rl,o=Zi,l=fi,f=zn.DEFAULT_ANISOTROPY,h=Ro){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yZ++}),this.uuid=vs(),this.name="",this.source=new hu(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=f,this.format=o,this.internalFormat=null,this.type=l,this.offset=new xe(0,0),this.repeat=new xe(1,1),this.center=new xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(CE).x}get height(){return this.source.getSize(CE).y}get depth(){return this.source.getSize(CE).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const i=e[n];if(i===void 0){ft(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){ft(`Texture.setValues(): property '${n}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Pu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Yg:e.x=e.x-Math.floor(e.x);break;case Hi:e.x=e.x<0?0:1;break;case qg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Yg:e.y=e.y-Math.floor(e.y);break;case Hi:e.y=e.y<0?0:1;break;case qg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}zn.DEFAULT_IMAGE=null;zn.DEFAULT_MAPPING=Pu;zn.DEFAULT_ANISOTROPY=1;class jn{constructor(e=0,n=0,i=0,r=1){jn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*n+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*n+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*n+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,a;const l=e.elements,f=l[0],h=l[4],d=l[8],p=l[1],g=l[5],y=l[9],S=l[2],b=l[6],v=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-S)<.01&&Math.abs(y-b)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+S)<.1&&Math.abs(y+b)<.1&&Math.abs(f+g+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const E=(f+1)/2,T=(g+1)/2,w=(v+1)/2,R=(h+p)/4,N=(d+S)/4,U=(y+b)/4;return E>T&&E>w?E<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(E),r=R/i,a=N/i):T>w?T<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(T),i=R/r,a=U/r):w<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(w),i=N/a,r=U/a),this.set(i,r,a,n),this}let x=Math.sqrt((b-y)*(b-y)+(d-S)*(d-S)+(p-h)*(p-h));return Math.abs(x)<.001&&(x=1),this.x=(b-y)/x,this.y=(d-S)/x,this.z=(p-h)/x,this.w=Math.acos((f+g+v-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=jt(this.x,e.x,n.x),this.y=jt(this.y,e.y,n.y),this.z=jt(this.z,e.z,n.z),this.w=jt(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=jt(this.x,e,n),this.y=jt(this.y,e,n),this.z=jt(this.z,e,n),this.w=jt(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class N4 extends ws{constructor(e=1,n=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:rn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=i.depth,this.scissor=new jn(0,0,e,n),this.scissorTest=!1,this.viewport=new jn(0,0,e,n);const r={width:e,height:n,depth:i.depth},a=new zn(r);this.textures=[];const s=i.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const n={minFilter:rn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const r=Object.assign({},e.textures[n].image);this.textures[n].source=new hu(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class si extends N4{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class o2 extends zn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=pi,this.minFilter=pi,this.wrapR=Hi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _Z extends si{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new o2(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class l2 extends zn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=pi,this.minFilter=pi,this.wrapR=Hi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xZ extends si{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new l2(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class ea{constructor(e=new k(1/0,1/0,1/0),n=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Eo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Eo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Eo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Eo):Eo.fromBufferAttribute(a,s),Eo.applyMatrix4(e.matrixWorld),this.expandByPoint(Eo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),iy.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),iy.copy(i.boundingBox)),iy.applyMatrix4(e.matrixWorld),this.union(iy)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Eo),Eo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_0),ry.subVectors(this.max,_0),bd.subVectors(e.a,_0),Sd.subVectors(e.b,_0),Ed.subVectors(e.c,_0),Gc.subVectors(Sd,bd),kc.subVectors(Ed,Sd),Mf.subVectors(bd,Ed);let n=[0,-Gc.z,Gc.y,0,-kc.z,kc.y,0,-Mf.z,Mf.y,Gc.z,0,-Gc.x,kc.z,0,-kc.x,Mf.z,0,-Mf.x,-Gc.y,Gc.x,0,-kc.y,kc.x,0,-Mf.y,Mf.x,0];return!RE(n,bd,Sd,Ed,ry)||(n=[1,0,0,0,1,0,0,0,1],!RE(n,bd,Sd,Ed,ry))?!1:(ay.crossVectors(Gc,kc),n=[ay.x,ay.y,ay.z],RE(n,bd,Sd,Ed,ry))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Eo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Eo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Pl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Pl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Pl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Pl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Pl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Pl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Pl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Pl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Pl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Pl=[new k,new k,new k,new k,new k,new k,new k,new k],Eo=new k,iy=new ea,bd=new k,Sd=new k,Ed=new k,Gc=new k,kc=new k,Mf=new k,_0=new k,ry=new k,ay=new k,Tf=new k;function RE(t,e,n,i,r){for(let a=0,s=t.length-3;a<=s;a+=3){Tf.fromArray(t,a);const o=r.x*Math.abs(Tf.x)+r.y*Math.abs(Tf.y)+r.z*Math.abs(Tf.z),l=e.dot(Tf),f=n.dot(Tf),h=i.dot(Tf);if(Math.max(-Math.max(l,f,h),Math.min(l,f,h))>o)return!1}return!0}const bZ=new ea,x0=new k,DE=new k;class Vr{constructor(e=new k,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):bZ.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;x0.subVectors(e,this.center);const n=x0.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(x0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(DE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(x0.copy(e.center).add(DE)),this.expandByPoint(x0.copy(e.center).sub(DE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Il=new k,OE=new k,sy=new k,jc=new k,NE=new k,oy=new k,UE=new k;class Fh{constructor(e=new k,n=new k(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Il)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Il.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Il.copy(this.origin).addScaledVector(this.direction,n),Il.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){OE.copy(e).add(n).multiplyScalar(.5),sy.copy(n).sub(e).normalize(),jc.copy(this.origin).sub(OE);const a=e.distanceTo(n)*.5,s=-this.direction.dot(sy),o=jc.dot(this.direction),l=-jc.dot(sy),f=jc.lengthSq(),h=Math.abs(1-s*s);let d,p,g,y;if(h>0)if(d=s*l-o,p=s*o-l,y=a*h,d>=0)if(p>=-y)if(p<=y){const S=1/h;d*=S,p*=S,g=d*(d+s*p+2*o)+p*(s*d+p+2*l)+f}else p=a,d=Math.max(0,-(s*p+o)),g=-d*d+p*(p+2*l)+f;else p=-a,d=Math.max(0,-(s*p+o)),g=-d*d+p*(p+2*l)+f;else p<=-y?(d=Math.max(0,-(-s*a+o)),p=d>0?-a:Math.min(Math.max(-a,-l),a),g=-d*d+p*(p+2*l)+f):p<=y?(d=0,p=Math.min(Math.max(-a,-l),a),g=p*(p+2*l)+f):(d=Math.max(0,-(s*a+o)),p=d>0?a:Math.min(Math.max(-a,-l),a),g=-d*d+p*(p+2*l)+f);else p=s>0?-a:a,d=Math.max(0,-(s*p+o)),g=-d*d+p*(p+2*l)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(OE).addScaledVector(sy,p),g}intersectSphere(e,n){Il.subVectors(e.center,this.origin);const i=Il.dot(this.direction),r=Il.dot(Il)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),o=i-s,l=i+s;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,a,s,o,l;const f=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return f>=0?(i=(e.min.x-p.x)*f,r=(e.max.x-p.x)*f):(i=(e.max.x-p.x)*f,r=(e.min.x-p.x)*f),h>=0?(a=(e.min.y-p.y)*h,s=(e.max.y-p.y)*h):(a=(e.max.y-p.y)*h,s=(e.min.y-p.y)*h),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),d>=0?(o=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(o=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Il)!==null}intersectTriangle(e,n,i,r,a){NE.subVectors(n,e),oy.subVectors(i,e),UE.crossVectors(NE,oy);let s=this.direction.dot(UE),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;jc.subVectors(this.origin,e);const l=o*this.direction.dot(oy.crossVectors(jc,oy));if(l<0)return null;const f=o*this.direction.dot(NE.cross(jc));if(f<0||l+f>s)return null;const h=-o*jc.dot(UE);return h<0?null:this.at(h/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Wt{constructor(e,n,i,r,a,s,o,l,f,h,d,p,g,y,S,b){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,s,o,l,f,h,d,p,g,y,S,b)}set(e,n,i,r,a,s,o,l,f,h,d,p,g,y,S,b){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=r,v[1]=a,v[5]=s,v[9]=o,v[13]=l,v[2]=f,v[6]=h,v[10]=d,v[14]=p,v[3]=g,v[7]=y,v[11]=S,v[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Wt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return this.determinant()===0?(e.set(1,0,0),n.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const n=this.elements,i=e.elements,r=1/Md.setFromMatrixColumn(e,0).length(),a=1/Md.setFromMatrixColumn(e,1).length(),s=1/Md.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),o=Math.sin(i),l=Math.cos(r),f=Math.sin(r),h=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const p=s*h,g=s*d,y=o*h,S=o*d;n[0]=l*h,n[4]=-l*d,n[8]=f,n[1]=g+y*f,n[5]=p-S*f,n[9]=-o*l,n[2]=S-p*f,n[6]=y+g*f,n[10]=s*l}else if(e.order==="YXZ"){const p=l*h,g=l*d,y=f*h,S=f*d;n[0]=p+S*o,n[4]=y*o-g,n[8]=s*f,n[1]=s*d,n[5]=s*h,n[9]=-o,n[2]=g*o-y,n[6]=S+p*o,n[10]=s*l}else if(e.order==="ZXY"){const p=l*h,g=l*d,y=f*h,S=f*d;n[0]=p-S*o,n[4]=-s*d,n[8]=y+g*o,n[1]=g+y*o,n[5]=s*h,n[9]=S-p*o,n[2]=-s*f,n[6]=o,n[10]=s*l}else if(e.order==="ZYX"){const p=s*h,g=s*d,y=o*h,S=o*d;n[0]=l*h,n[4]=y*f-g,n[8]=p*f+S,n[1]=l*d,n[5]=S*f+p,n[9]=g*f-y,n[2]=-f,n[6]=o*l,n[10]=s*l}else if(e.order==="YZX"){const p=s*l,g=s*f,y=o*l,S=o*f;n[0]=l*h,n[4]=S-p*d,n[8]=y*d+g,n[1]=d,n[5]=s*h,n[9]=-o*h,n[2]=-f*h,n[6]=g*d+y,n[10]=p-S*d}else if(e.order==="XZY"){const p=s*l,g=s*f,y=o*l,S=o*f;n[0]=l*h,n[4]=-d,n[8]=f*h,n[1]=p*d+S,n[5]=s*h,n[9]=g*d-y,n[2]=y*d-g,n[6]=o*h,n[10]=S*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(SZ,e,EZ)}lookAt(e,n,i){const r=this.elements;return es.subVectors(e,n),es.lengthSq()===0&&(es.z=1),es.normalize(),Xc.crossVectors(i,es),Xc.lengthSq()===0&&(Math.abs(i.z)===1?es.x+=1e-4:es.z+=1e-4,es.normalize(),Xc.crossVectors(i,es)),Xc.normalize(),ly.crossVectors(es,Xc),r[0]=Xc.x,r[4]=ly.x,r[8]=es.x,r[1]=Xc.y,r[5]=ly.y,r[9]=es.y,r[2]=Xc.z,r[6]=ly.z,r[10]=es.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,s=i[0],o=i[4],l=i[8],f=i[12],h=i[1],d=i[5],p=i[9],g=i[13],y=i[2],S=i[6],b=i[10],v=i[14],x=i[3],E=i[7],T=i[11],w=i[15],R=r[0],N=r[4],U=r[8],A=r[12],C=r[1],I=r[5],X=r[9],j=r[13],Y=r[2],Z=r[6],z=r[10],G=r[14],q=r[3],se=r[7],le=r[11],me=r[15];return a[0]=s*R+o*C+l*Y+f*q,a[4]=s*N+o*I+l*Z+f*se,a[8]=s*U+o*X+l*z+f*le,a[12]=s*A+o*j+l*G+f*me,a[1]=h*R+d*C+p*Y+g*q,a[5]=h*N+d*I+p*Z+g*se,a[9]=h*U+d*X+p*z+g*le,a[13]=h*A+d*j+p*G+g*me,a[2]=y*R+S*C+b*Y+v*q,a[6]=y*N+S*I+b*Z+v*se,a[10]=y*U+S*X+b*z+v*le,a[14]=y*A+S*j+b*G+v*me,a[3]=x*R+E*C+T*Y+w*q,a[7]=x*N+E*I+T*Z+w*se,a[11]=x*U+E*X+T*z+w*le,a[15]=x*A+E*j+T*G+w*me,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],a=e[12],s=e[1],o=e[5],l=e[9],f=e[13],h=e[2],d=e[6],p=e[10],g=e[14],y=e[3],S=e[7],b=e[11],v=e[15],x=l*g-f*p,E=o*g-f*d,T=o*p-l*d,w=s*g-f*h,R=s*p-l*h,N=s*d-o*h;return n*(S*x-b*E+v*T)-i*(y*x-b*w+v*R)+r*(y*E-S*w+v*N)-a*(y*T-S*R+b*N)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],f=e[7],h=e[8],d=e[9],p=e[10],g=e[11],y=e[12],S=e[13],b=e[14],v=e[15],x=d*b*f-S*p*f+S*l*g-o*b*g-d*l*v+o*p*v,E=y*p*f-h*b*f-y*l*g+s*b*g+h*l*v-s*p*v,T=h*S*f-y*d*f+y*o*g-s*S*g-h*o*v+s*d*v,w=y*d*l-h*S*l-y*o*p+s*S*p+h*o*b-s*d*b,R=n*x+i*E+r*T+a*w;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/R;return e[0]=x*N,e[1]=(S*p*a-d*b*a-S*r*g+i*b*g+d*r*v-i*p*v)*N,e[2]=(o*b*a-S*l*a+S*r*f-i*b*f-o*r*v+i*l*v)*N,e[3]=(d*l*a-o*p*a-d*r*f+i*p*f+o*r*g-i*l*g)*N,e[4]=E*N,e[5]=(h*b*a-y*p*a+y*r*g-n*b*g-h*r*v+n*p*v)*N,e[6]=(y*l*a-s*b*a-y*r*f+n*b*f+s*r*v-n*l*v)*N,e[7]=(s*p*a-h*l*a+h*r*f-n*p*f-s*r*g+n*l*g)*N,e[8]=T*N,e[9]=(y*d*a-h*S*a-y*i*g+n*S*g+h*i*v-n*d*v)*N,e[10]=(s*S*a-y*o*a+y*i*f-n*S*f-s*i*v+n*o*v)*N,e[11]=(h*o*a-s*d*a-h*i*f+n*d*f+s*i*g-n*o*g)*N,e[12]=w*N,e[13]=(h*S*r-y*d*r+y*i*p-n*S*p-h*i*b+n*d*b)*N,e[14]=(y*o*r-s*S*r-y*i*l+n*S*l+s*i*b-n*o*b)*N,e[15]=(s*d*r-h*o*r+h*i*l-n*d*l-s*i*p+n*o*p)*N,this}scale(e){const n=this.elements,i=e.x,r=e.y,a=e.z;return n[0]*=i,n[4]*=r,n[8]*=a,n[1]*=i,n[5]*=r,n[9]*=a,n[2]*=i,n[6]*=r,n[10]*=a,n[3]*=i,n[7]*=r,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),a=1-i,s=e.x,o=e.y,l=e.z,f=a*s,h=a*o;return this.set(f*s+i,f*o-r*l,f*l+r*o,0,f*o+r*l,h*o+i,h*l-r*s,0,f*l-r*o,h*l+r*s,a*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,a=n._x,s=n._y,o=n._z,l=n._w,f=a+a,h=s+s,d=o+o,p=a*f,g=a*h,y=a*d,S=s*h,b=s*d,v=o*d,x=l*f,E=l*h,T=l*d,w=i.x,R=i.y,N=i.z;return r[0]=(1-(S+v))*w,r[1]=(g+T)*w,r[2]=(y-E)*w,r[3]=0,r[4]=(g-T)*R,r[5]=(1-(p+v))*R,r[6]=(b+x)*R,r[7]=0,r[8]=(y+E)*N,r[9]=(b-x)*N,r[10]=(1-(p+S))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),n.identity(),this;let a=Md.set(r[0],r[1],r[2]).length();const s=Md.set(r[4],r[5],r[6]).length(),o=Md.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),Mo.copy(this);const f=1/a,h=1/s,d=1/o;return Mo.elements[0]*=f,Mo.elements[1]*=f,Mo.elements[2]*=f,Mo.elements[4]*=h,Mo.elements[5]*=h,Mo.elements[6]*=h,Mo.elements[8]*=d,Mo.elements[9]*=d,Mo.elements[10]*=d,n.setFromRotationMatrix(Mo),i.x=a,i.y=s,i.z=o,this}makePerspective(e,n,i,r,a,s,o=us,l=!1){const f=this.elements,h=2*a/(n-e),d=2*a/(i-r),p=(n+e)/(n-e),g=(i+r)/(i-r);let y,S;if(l)y=a/(s-a),S=s*a/(s-a);else if(o===us)y=-(s+a)/(s-a),S=-2*s*a/(s-a);else if(o===Xp)y=-s/(s-a),S=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return f[0]=h,f[4]=0,f[8]=p,f[12]=0,f[1]=0,f[5]=d,f[9]=g,f[13]=0,f[2]=0,f[6]=0,f[10]=y,f[14]=S,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,n,i,r,a,s,o=us,l=!1){const f=this.elements,h=2/(n-e),d=2/(i-r),p=-(n+e)/(n-e),g=-(i+r)/(i-r);let y,S;if(l)y=1/(s-a),S=s/(s-a);else if(o===us)y=-2/(s-a),S=-(s+a)/(s-a);else if(o===Xp)y=-1/(s-a),S=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return f[0]=h,f[4]=0,f[8]=0,f[12]=p,f[1]=0,f[5]=d,f[9]=0,f[13]=g,f[2]=0,f[6]=0,f[10]=y,f[14]=S,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Md=new k,Mo=new Wt,SZ=new k(0,0,0),EZ=new k(1,1,1),Xc=new k,ly=new k,es=new k,LN=new Wt,PN=new Jr;class Ts{constructor(e=0,n=0,i=0,r=Ts.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],o=r[8],l=r[1],f=r[5],h=r[9],d=r[2],p=r[6],g=r[10];switch(n){case"XYZ":this._y=Math.asin(jt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,g),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(p,f),this._z=0);break;case"YXZ":this._x=Math.asin(-jt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,g),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(jt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,g),this._z=Math.atan2(-s,f)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-jt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,f));break;case"YZX":this._z=Math.asin(jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,g));break;case"XZY":this._z=Math.asin(-jt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,f),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,g),this._y=0);break;default:ft("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return LN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(LN,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return PN.setFromEuler(this),this.setFromQuaternion(PN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ts.DEFAULT_ORDER="XYZ";class qp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let MZ=0;const IN=new k,Td=new Jr,zl=new Wt,cy=new k,b0=new k,TZ=new k,AZ=new Jr,zN=new k(1,0,0),BN=new k(0,1,0),FN=new k(0,0,1),HN={type:"added"},wZ={type:"removed"},Ad={type:"childadded",child:null},LE={type:"childremoved",child:null};class xn extends ws{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:MZ++}),this.uuid=vs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xn.DEFAULT_UP.clone();const e=new k,n=new Ts,i=new Jr,r=new k(1,1,1);function a(){i.setFromEuler(n,!1)}function s(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Wt},normalMatrix:{value:new $t}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=xn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=xn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new qp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Td.setFromAxisAngle(e,n),this.quaternion.multiply(Td),this}rotateOnWorldAxis(e,n){return Td.setFromAxisAngle(e,n),this.quaternion.premultiply(Td),this}rotateX(e){return this.rotateOnAxis(zN,e)}rotateY(e){return this.rotateOnAxis(BN,e)}rotateZ(e){return this.rotateOnAxis(FN,e)}translateOnAxis(e,n){return IN.copy(e).applyQuaternion(this.quaternion),this.position.add(IN.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(zN,e)}translateY(e){return this.translateOnAxis(BN,e)}translateZ(e){return this.translateOnAxis(FN,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zl.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?cy.copy(e):cy.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),b0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zl.lookAt(b0,cy,this.up):zl.lookAt(cy,b0,this.up),this.quaternion.setFromRotationMatrix(zl),r&&(zl.extractRotation(r.matrixWorld),Td.setFromRotationMatrix(zl),this.quaternion.premultiply(Td.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(Ut("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(HN),Ad.child=e,this.dispatchEvent(Ad),Ad.child=null):Ut("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(wZ),LE.child=e,this.dispatchEvent(LE),LE.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zl.multiply(e.parent.matrixWorld)),e.applyMatrix4(zl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(HN),Ad.child=e,this.dispatchEvent(Ad),Ad.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(b0,e,TZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(b0,AZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let f=0,h=l.length;f<h;f++){const d=l[f];a(e.shapes,d)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,f=this.material.length;l<f;l++)o.push(a(e.materials,this.material[l]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(a(e.animations,l))}}if(n){const o=s(e.geometries),l=s(e.materials),f=s(e.textures),h=s(e.images),d=s(e.shapes),p=s(e.skeletons),g=s(e.animations),y=s(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),f.length>0&&(i.textures=f),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),g.length>0&&(i.animations=g),y.length>0&&(i.nodes=y)}return i.object=r,i;function s(o){const l=[];for(const f in o){const h=o[f];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}xn.DEFAULT_UP=new k(0,1,0);xn.DEFAULT_MATRIX_AUTO_UPDATE=!0;xn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const To=new k,Bl=new k,PE=new k,Fl=new k,wd=new k,Cd=new k,VN=new k,IE=new k,zE=new k,BE=new k,FE=new jn,HE=new jn,VE=new jn;class La{constructor(e=new k,n=new k,i=new k){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),To.subVectors(e,n),r.cross(To);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,n,i,r,a){To.subVectors(r,n),Bl.subVectors(i,n),PE.subVectors(e,n);const s=To.dot(To),o=To.dot(Bl),l=To.dot(PE),f=Bl.dot(Bl),h=Bl.dot(PE),d=s*f-o*o;if(d===0)return a.set(0,0,0),null;const p=1/d,g=(f*l-o*h)*p,y=(s*h-o*l)*p;return a.set(1-g-y,y,g)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Fl)===null?!1:Fl.x>=0&&Fl.y>=0&&Fl.x+Fl.y<=1}static getInterpolation(e,n,i,r,a,s,o,l){return this.getBarycoord(e,n,i,r,Fl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Fl.x),l.addScaledVector(s,Fl.y),l.addScaledVector(o,Fl.z),l)}static getInterpolatedAttribute(e,n,i,r,a,s){return FE.setScalar(0),HE.setScalar(0),VE.setScalar(0),FE.fromBufferAttribute(e,n),HE.fromBufferAttribute(e,i),VE.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(FE,a.x),s.addScaledVector(HE,a.y),s.addScaledVector(VE,a.z),s}static isFrontFacing(e,n,i,r){return To.subVectors(i,n),Bl.subVectors(e,n),To.cross(Bl).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return To.subVectors(this.c,this.b),Bl.subVectors(this.a,this.b),To.cross(Bl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return La.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return La.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,a){return La.getInterpolation(e,this.a,this.b,this.c,n,i,r,a)}containsPoint(e){return La.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return La.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,a=this.c;let s,o;wd.subVectors(r,i),Cd.subVectors(a,i),IE.subVectors(e,i);const l=wd.dot(IE),f=Cd.dot(IE);if(l<=0&&f<=0)return n.copy(i);zE.subVectors(e,r);const h=wd.dot(zE),d=Cd.dot(zE);if(h>=0&&d<=h)return n.copy(r);const p=l*d-h*f;if(p<=0&&l>=0&&h<=0)return s=l/(l-h),n.copy(i).addScaledVector(wd,s);BE.subVectors(e,a);const g=wd.dot(BE),y=Cd.dot(BE);if(y>=0&&g<=y)return n.copy(a);const S=g*f-l*y;if(S<=0&&f>=0&&y<=0)return o=f/(f-y),n.copy(i).addScaledVector(Cd,o);const b=h*y-g*d;if(b<=0&&d-h>=0&&g-y>=0)return VN.subVectors(a,r),o=(d-h)/(d-h+(g-y)),n.copy(r).addScaledVector(VN,o);const v=1/(b+S+p);return s=S*v,o=p*v,n.copy(i).addScaledVector(wd,s).addScaledVector(Cd,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const a7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wc={h:0,s:0,l:0},uy={h:0,s:0,l:0};function GE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let lt=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=En){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,pn.colorSpaceToWorking(this,n),this}setRGB(e,n,i,r=pn.workingColorSpace){return this.r=e,this.g=n,this.b=i,pn.colorSpaceToWorking(this,r),this}setHSL(e,n,i,r=pn.workingColorSpace){if(e=O4(e,1),n=jt(n,0,1),i=jt(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,s=2*i-a;this.r=GE(s,a,e+1/3),this.g=GE(s,a,e),this.b=GE(s,a,e-1/3)}return pn.colorSpaceToWorking(this,r),this}setStyle(e,n=En){function i(a){a!==void 0&&parseFloat(a)<1&&ft("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:ft("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(a,16),n);ft("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=En){const i=a7[e.toLowerCase()];return i!==void 0?this.setHex(i,n):ft("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=sc(e.r),this.g=sc(e.g),this.b=sc(e.b),this}copyLinearToSRGB(e){return this.r=Mp(e.r),this.g=Mp(e.g),this.b=Mp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=En){return pn.workingToColorSpace(qr.copy(this),e),Math.round(jt(qr.r*255,0,255))*65536+Math.round(jt(qr.g*255,0,255))*256+Math.round(jt(qr.b*255,0,255))}getHexString(e=En){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=pn.workingColorSpace){pn.workingToColorSpace(qr.copy(this),n);const i=qr.r,r=qr.g,a=qr.b,s=Math.max(i,r,a),o=Math.min(i,r,a);let l,f;const h=(o+s)/2;if(o===s)l=0,f=0;else{const d=s-o;switch(f=h<=.5?d/(s+o):d/(2-s-o),s){case i:l=(r-a)/d+(r<a?6:0);break;case r:l=(a-i)/d+2;break;case a:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=f,e.l=h,e}getRGB(e,n=pn.workingColorSpace){return pn.workingToColorSpace(qr.copy(this),n),e.r=qr.r,e.g=qr.g,e.b=qr.b,e}getStyle(e=En){pn.workingToColorSpace(qr.copy(this),e);const n=qr.r,i=qr.g,r=qr.b;return e!==En?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(Wc),this.setHSL(Wc.h+e,Wc.s+n,Wc.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Wc),e.getHSL(uy);const i=yg(Wc.h,uy.h,n),r=yg(Wc.s,uy.s,n),a=yg(Wc.l,uy.l,n);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*r,this.g=a[1]*n+a[4]*i+a[7]*r,this.b=a[2]*n+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const qr=new lt;lt.NAMES=a7;let CZ=0;class Rr extends ws{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:CZ++}),this.uuid=vs(),this.name="",this.type="Material",this.blending=Mu,this.side=Oo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=dx,this.blendDst=px,this.blendEquation=ru,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new lt(0,0,0),this.blendAlpha=0,this.depthFunc=_h,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=eA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wf,this.stencilZFail=Wf,this.stencilZPass=Wf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){ft(`Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){ft(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Mu&&(i.blending=this.blending),this.side!==Oo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==dx&&(i.blendSrc=this.blendSrc),this.blendDst!==px&&(i.blendDst=this.blendDst),this.blendEquation!==ru&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==_h&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==eA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Wf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Wf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Wf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(n){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=n[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class bc extends Rr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=Lv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zl=RZ();function RZ(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const f=l-127;f<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):f<-14?(i[l]=1024>>-f-14,i[l|256]=1024>>-f-14|32768,r[l]=-f-1,r[l|256]=-f-1):f<=15?(i[l]=f+15<<10,i[l|256]=f+15<<10|32768,r[l]=13,r[l|256]=13):f<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let f=l<<13,h=0;for(;!(f&8388608);)f<<=1,h-=8388608;f&=-8388609,h+=947912704,a[l]=f|h}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function Da(t){Math.abs(t)>65504&&ft("DataUtils.toHalfFloat(): Value out of range."),t=jt(t,-65504,65504),Zl.floatView[0]=t;const e=Zl.uint32View[0],n=e>>23&511;return Zl.baseTable[n]+((e&8388607)>>Zl.shiftTable[n])}function W0(t){const e=t>>10;return Zl.uint32View[0]=Zl.mantissaTable[Zl.offsetTable[e]+(t&1023)]+Zl.exponentTable[e],Zl.floatView[0]}class Qf{static toHalfFloat(e){return Da(e)}static fromHalfFloat(e){return W0(e)}}const tr=new k,fy=new xe;let DZ=0;class Bn{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:DZ++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=Qg,this.updateRanges=[],this.gpuType=ai,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)fy.fromBufferAttribute(this,n),fy.applyMatrix3(e),this.setXY(n,fy.x,fy.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)tr.fromBufferAttribute(this,n),tr.applyMatrix3(e),this.setXYZ(n,tr.x,tr.y,tr.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)tr.fromBufferAttribute(this,n),tr.applyMatrix4(e),this.setXYZ(n,tr.x,tr.y,tr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)tr.fromBufferAttribute(this,n),tr.applyNormalMatrix(e),this.setXYZ(n,tr.x,tr.y,tr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)tr.fromBufferAttribute(this,n),tr.transformDirection(e),this.setXYZ(n,tr.x,tr.y,tr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=pa(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=en(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=pa(n,this.array)),n}setX(e,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=pa(n,this.array)),n}setY(e,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=pa(n,this.array)),n}setZ(e,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=pa(n,this.array)),n}setW(e,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=en(n,this.array),i=en(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=en(n,this.array),i=en(i,this.array),r=en(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=en(n,this.array),i=en(i,this.array),r=en(r,this.array),a=en(a,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qg&&(e.usage=this.usage),e}}class OZ extends Bn{constructor(e,n,i){super(new Int8Array(e),n,i)}}class NZ extends Bn{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class UZ extends Bn{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class LZ extends Bn{constructor(e,n,i){super(new Int16Array(e),n,i)}}class U4 extends Bn{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class PZ extends Bn{constructor(e,n,i){super(new Int32Array(e),n,i)}}class L4 extends Bn{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class IZ extends Bn{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=W0(this.array[e*this.itemSize]);return this.normalized&&(n=pa(n,this.array)),n}setX(e,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize]=Da(n),this}getY(e){let n=W0(this.array[e*this.itemSize+1]);return this.normalized&&(n=pa(n,this.array)),n}setY(e,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize+1]=Da(n),this}getZ(e){let n=W0(this.array[e*this.itemSize+2]);return this.normalized&&(n=pa(n,this.array)),n}setZ(e,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize+2]=Da(n),this}getW(e){let n=W0(this.array[e*this.itemSize+3]);return this.normalized&&(n=pa(n,this.array)),n}setW(e,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize+3]=Da(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=en(n,this.array),i=en(i,this.array)),this.array[e+0]=Da(n),this.array[e+1]=Da(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=en(n,this.array),i=en(i,this.array),r=en(r,this.array)),this.array[e+0]=Da(n),this.array[e+1]=Da(i),this.array[e+2]=Da(r),this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=en(n,this.array),i=en(i,this.array),r=en(r,this.array),a=en(a,this.array)),this.array[e+0]=Da(n),this.array[e+1]=Da(i),this.array[e+2]=Da(r),this.array[e+3]=Da(a),this}}class Et extends Bn{constructor(e,n,i){super(new Float32Array(e),n,i)}}let zZ=0;const Vs=new Wt,kE=new xn,Rd=new k,ts=new ea,S0=new ea,Er=new k;class Zt extends ws{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zZ++}),this.uuid=vs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(t7(e)?L4:U4)(e,1):this.index=e,this}setIndirect(e,n=0){return this.indirect=e,this.indirectOffset=n,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new $t().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Vs.makeRotationFromQuaternion(e),this.applyMatrix4(Vs),this}rotateX(e){return Vs.makeRotationX(e),this.applyMatrix4(Vs),this}rotateY(e){return Vs.makeRotationY(e),this.applyMatrix4(Vs),this}rotateZ(e){return Vs.makeRotationZ(e),this.applyMatrix4(Vs),this}translate(e,n,i){return Vs.makeTranslation(e,n,i),this.applyMatrix4(Vs),this}scale(e,n,i){return Vs.makeScale(e,n,i),this.applyMatrix4(Vs),this}lookAt(e){return kE.lookAt(e),kE.updateMatrix(),this.applyMatrix4(kE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rd).negate(),this.translate(Rd.x,Rd.y,Rd.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Et(i,3))}else{const i=Math.min(e.length,n.count);for(let r=0;r<i;r++){const a=e[r];n.setXYZ(r,a.x,a.y,a.z||0)}e.length>n.count&&ft("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ea);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ut("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const a=n[i];ts.setFromBufferAttribute(a),this.morphTargetsRelative?(Er.addVectors(this.boundingBox.min,ts.min),this.boundingBox.expandByPoint(Er),Er.addVectors(this.boundingBox.max,ts.max),this.boundingBox.expandByPoint(Er)):(this.boundingBox.expandByPoint(ts.min),this.boundingBox.expandByPoint(ts.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Ut('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ut("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new k,1/0);return}if(e){const i=this.boundingSphere.center;if(ts.setFromBufferAttribute(e),n)for(let a=0,s=n.length;a<s;a++){const o=n[a];S0.setFromBufferAttribute(o),this.morphTargetsRelative?(Er.addVectors(ts.min,S0.min),ts.expandByPoint(Er),Er.addVectors(ts.max,S0.max),ts.expandByPoint(Er)):(ts.expandByPoint(S0.min),ts.expandByPoint(S0.max))}ts.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)Er.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Er));if(n)for(let a=0,s=n.length;a<s;a++){const o=n[a],l=this.morphTargetsRelative;for(let f=0,h=o.count;f<h;f++)Er.fromBufferAttribute(o,f),l&&(Rd.fromBufferAttribute(e,f),Er.add(Rd)),r=Math.max(r,i.distanceToSquared(Er))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&Ut('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){Ut("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Bn(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let U=0;U<i.count;U++)o[U]=new k,l[U]=new k;const f=new k,h=new k,d=new k,p=new xe,g=new xe,y=new xe,S=new k,b=new k;function v(U,A,C){f.fromBufferAttribute(i,U),h.fromBufferAttribute(i,A),d.fromBufferAttribute(i,C),p.fromBufferAttribute(a,U),g.fromBufferAttribute(a,A),y.fromBufferAttribute(a,C),h.sub(f),d.sub(f),g.sub(p),y.sub(p);const I=1/(g.x*y.y-y.x*g.y);isFinite(I)&&(S.copy(h).multiplyScalar(y.y).addScaledVector(d,-g.y).multiplyScalar(I),b.copy(d).multiplyScalar(g.x).addScaledVector(h,-y.x).multiplyScalar(I),o[U].add(S),o[A].add(S),o[C].add(S),l[U].add(b),l[A].add(b),l[C].add(b))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let U=0,A=x.length;U<A;++U){const C=x[U],I=C.start,X=C.count;for(let j=I,Y=I+X;j<Y;j+=3)v(e.getX(j+0),e.getX(j+1),e.getX(j+2))}const E=new k,T=new k,w=new k,R=new k;function N(U){w.fromBufferAttribute(r,U),R.copy(w);const A=o[U];E.copy(A),E.sub(w.multiplyScalar(w.dot(A))).normalize(),T.crossVectors(R,A);const I=T.dot(l[U])<0?-1:1;s.setXYZW(U,E.x,E.y,E.z,I)}for(let U=0,A=x.length;U<A;++U){const C=x[U],I=C.start,X=C.count;for(let j=I,Y=I+X;j<Y;j+=3)N(e.getX(j+0)),N(e.getX(j+1)),N(e.getX(j+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Bn(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const r=new k,a=new k,s=new k,o=new k,l=new k,f=new k,h=new k,d=new k;if(e)for(let p=0,g=e.count;p<g;p+=3){const y=e.getX(p+0),S=e.getX(p+1),b=e.getX(p+2);r.fromBufferAttribute(n,y),a.fromBufferAttribute(n,S),s.fromBufferAttribute(n,b),h.subVectors(s,a),d.subVectors(r,a),h.cross(d),o.fromBufferAttribute(i,y),l.fromBufferAttribute(i,S),f.fromBufferAttribute(i,b),o.add(h),l.add(h),f.add(h),i.setXYZ(y,o.x,o.y,o.z),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(b,f.x,f.y,f.z)}else for(let p=0,g=n.count;p<g;p+=3)r.fromBufferAttribute(n,p+0),a.fromBufferAttribute(n,p+1),s.fromBufferAttribute(n,p+2),h.subVectors(s,a),d.subVectors(r,a),h.cross(d),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Er.fromBufferAttribute(e,n),Er.normalize(),e.setXYZ(n,Er.x,Er.y,Er.z)}toNonIndexed(){function e(o,l){const f=o.array,h=o.itemSize,d=o.normalized,p=new f.constructor(l.length*h);let g=0,y=0;for(let S=0,b=l.length;S<b;S++){o.isInterleavedBufferAttribute?g=l[S]*o.data.stride+o.offset:g=l[S]*h;for(let v=0;v<h;v++)p[y++]=f[g++]}return new Bn(p,h,d)}if(this.index===null)return ft("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Zt,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],f=e(l,i);n.setAttribute(o,f)}const a=this.morphAttributes;for(const o in a){const l=[],f=a[o];for(let h=0,d=f.length;h<d;h++){const p=f[h],g=e(p,i);l.push(g)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const f=s[o];n.addGroup(f.start,f.count,f.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const f in l)l[f]!==void 0&&(e[f]=l[f]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const f=i[l];e.data.attributes[l]=f.toJSON(e.data)}const r={};let a=!1;for(const l in this.morphAttributes){const f=this.morphAttributes[l],h=[];for(let d=0,p=f.length;d<p;d++){const g=f[d];h.push(g.toJSON(e.data))}h.length>0&&(r[l]=h,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const f in r){const h=r[f];this.setAttribute(f,h.clone(n))}const a=e.morphAttributes;for(const f in a){const h=[],d=a[f];for(let p=0,g=d.length;p<g;p++)h.push(d[p].clone(n));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let f=0,h=s.length;f<h;f++){const d=s[f];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const GN=new Wt,Af=new Fh,hy=new Vr,kN=new k,dy=new k,py=new k,my=new k,jE=new k,gy=new k,jN=new k,vy=new k;class Mi extends xn{constructor(e=new Zt,n=new bc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(a&&o){gy.set(0,0,0);for(let l=0,f=a.length;l<f;l++){const h=o[l],d=a[l];h!==0&&(jE.fromBufferAttribute(d,e),s?gy.addScaledVector(jE,h):gy.addScaledVector(jE.sub(n),h))}n.add(gy)}return n}raycast(e,n){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),hy.copy(i.boundingSphere),hy.applyMatrix4(a),Af.copy(e.ray).recast(e.near),!(hy.containsPoint(Af.origin)===!1&&(Af.intersectSphere(hy,kN)===null||Af.origin.distanceToSquared(kN)>(e.far-e.near)**2))&&(GN.copy(a).invert(),Af.copy(e.ray).applyMatrix4(GN),!(i.boundingBox!==null&&Af.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,Af)))}_computeIntersections(e,n,i){let r;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,f=a.attributes.uv,h=a.attributes.uv1,d=a.attributes.normal,p=a.groups,g=a.drawRange;if(o!==null)if(Array.isArray(s))for(let y=0,S=p.length;y<S;y++){const b=p[y],v=s[b.materialIndex],x=Math.max(b.start,g.start),E=Math.min(o.count,Math.min(b.start+b.count,g.start+g.count));for(let T=x,w=E;T<w;T+=3){const R=o.getX(T),N=o.getX(T+1),U=o.getX(T+2);r=yy(this,v,e,i,f,h,d,R,N,U),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=b.materialIndex,n.push(r))}}else{const y=Math.max(0,g.start),S=Math.min(o.count,g.start+g.count);for(let b=y,v=S;b<v;b+=3){const x=o.getX(b),E=o.getX(b+1),T=o.getX(b+2);r=yy(this,s,e,i,f,h,d,x,E,T),r&&(r.faceIndex=Math.floor(b/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let y=0,S=p.length;y<S;y++){const b=p[y],v=s[b.materialIndex],x=Math.max(b.start,g.start),E=Math.min(l.count,Math.min(b.start+b.count,g.start+g.count));for(let T=x,w=E;T<w;T+=3){const R=T,N=T+1,U=T+2;r=yy(this,v,e,i,f,h,d,R,N,U),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=b.materialIndex,n.push(r))}}else{const y=Math.max(0,g.start),S=Math.min(l.count,g.start+g.count);for(let b=y,v=S;b<v;b+=3){const x=b,E=b+1,T=b+2;r=yy(this,s,e,i,f,h,d,x,E,T),r&&(r.faceIndex=Math.floor(b/3),n.push(r))}}}}function BZ(t,e,n,i,r,a,s,o){let l;if(e.side===lr?l=i.intersectTriangle(s,a,r,!0,o):l=i.intersectTriangle(r,a,s,e.side===Oo,o),l===null)return null;vy.copy(o),vy.applyMatrix4(t.matrixWorld);const f=n.ray.origin.distanceTo(vy);return f<n.near||f>n.far?null:{distance:f,point:vy.clone(),object:t}}function yy(t,e,n,i,r,a,s,o,l,f){t.getVertexPosition(o,dy),t.getVertexPosition(l,py),t.getVertexPosition(f,my);const h=BZ(t,e,n,i,dy,py,my,jN);if(h){const d=new k;La.getBarycoord(jN,dy,py,my,d),r&&(h.uv=La.getInterpolatedAttribute(r,o,l,f,d,new xe)),a&&(h.uv1=La.getInterpolatedAttribute(a,o,l,f,d,new xe)),s&&(h.normal=La.getInterpolatedAttribute(s,o,l,f,d,new k),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const p={a:o,b:l,c:f,normal:new k,materialIndex:0};La.getNormal(dy,py,my,p.normal),h.face=p,h.barycoord=d}return h}class Hh extends Zt{constructor(e=1,n=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const l=[],f=[],h=[],d=[];let p=0,g=0;y("z","y","x",-1,-1,i,n,e,s,a,0),y("z","y","x",1,-1,i,n,-e,s,a,1),y("x","z","y",1,1,e,i,n,r,s,2),y("x","z","y",1,-1,e,i,-n,r,s,3),y("x","y","z",1,-1,e,n,i,r,a,4),y("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(l),this.setAttribute("position",new Et(f,3)),this.setAttribute("normal",new Et(h,3)),this.setAttribute("uv",new Et(d,2));function y(S,b,v,x,E,T,w,R,N,U,A){const C=T/N,I=w/U,X=T/2,j=w/2,Y=R/2,Z=N+1,z=U+1;let G=0,q=0;const se=new k;for(let le=0;le<z;le++){const me=le*I-j;for(let Ae=0;Ae<Z;Ae++){const Le=Ae*C-X;se[S]=Le*x,se[b]=me*E,se[v]=Y,f.push(se.x,se.y,se.z),se[S]=0,se[b]=0,se[v]=R>0?1:-1,h.push(se.x,se.y,se.z),d.push(Ae/N),d.push(1-le/U),G+=1}}for(let le=0;le<U;le++)for(let me=0;me<N;me++){const Ae=p+me+Z*le,Le=p+me+Z*(le+1),Ke=p+(me+1)+Z*(le+1),yt=p+(me+1)+Z*le;l.push(Ae,Le,yt),l.push(Le,Ke,yt),q+=6}o.addGroup(g,q,A),g+=q,p+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zp(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(ft("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function ca(t){const e={};for(let n=0;n<t.length;n++){const i=Zp(t[n]);for(const r in i)e[r]=i[r]}return e}function FZ(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function s7(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:pn.workingColorSpace}const P4={clone:Zp,merge:ca};var HZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vi extends Rr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HZ,this.fragmentShader=VZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zp(e.uniforms),this.uniformsGroups=FZ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?n.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[r]={type:"m4",value:s.toArray()}:n.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class c2 extends xn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt,this.coordinateSystem=us,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Yc=new k,XN=new xe,WN=new xe;let bi=class extends c2{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Yp*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ch*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Yp*2*Math.atan(Math.tan(ch*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){Yc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Yc.x,Yc.y).multiplyScalar(-e/Yc.z),Yc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Yc.x,Yc.y).multiplyScalar(-e/Yc.z)}getViewSize(e,n){return this.getViewBounds(e,XN,WN),n.subVectors(WN,XN)}setViewOffset(e,n,i,r,a,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(ch*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,f=s.fullHeight;a+=s.offsetX*r/l,n-=s.offsetY*i/f,r*=s.width/l,i*=s.height/f}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,n,n-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const Dd=-90,Od=1;class o7 extends xn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new bi(Dd,Od,e,n);r.layers=this.layers,this.add(r);const a=new bi(Dd,Od,e,n);a.layers=this.layers,this.add(a);const s=new bi(Dd,Od,e,n);s.layers=this.layers,this.add(s);const o=new bi(Dd,Od,e,n);o.layers=this.layers,this.add(o);const l=new bi(Dd,Od,e,n);l.layers=this.layers,this.add(l);const f=new bi(Dd,Od,e,n);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,a,s,o,l]=n;for(const f of n)this.remove(f);if(e===us)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Xp)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of n)this.add(f),f.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,f,h]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,a),e.setRenderTarget(i,1,r),e.render(n,s),e.setRenderTarget(i,2,r),e.render(n,o),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,f),i.texture.generateMipmaps=S,e.setRenderTarget(i,5,r),e.render(n,h),e.setRenderTarget(d,p,g),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class Bv extends zn{constructor(e=[],n=No,i,r,a,s,o,l,f,h){super(e,n,i,r,a,s,o,l,f,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class u2 extends si{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Bv(r),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Hh(5,5,5),a=new vi({name:"CubemapFromEquirect",uniforms:Zp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:lr,blending:Hr});a.uniforms.tEquirect.value=n;const s=new Mi(r,a),o=n.minFilter;return n.minFilter===rl&&(n.minFilter=rn),new o7(1,10,this).update(e,s),n.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,i,r);e.setRenderTarget(a)}}class dp extends xn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const GZ={type:"move"};class C_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new dp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new dp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new dp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,a=null,s=null;const o=this._targetRay,l=this._grip,f=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(f&&e.hand){s=!0;for(const S of e.hand.values()){const b=n.getJointPose(S,i),v=this._getHandJoint(f,S);b!==null&&(v.matrix.fromArray(b.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=b.radius),v.visible=b!==null}const h=f.joints["index-finger-tip"],d=f.joints["thumb-tip"],p=h.position.distanceTo(d.position),g=.02,y=.005;f.inputState.pinching&&p>g+y?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&p<=g-y&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,i),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(GZ)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=a!==null),f!==null&&(f.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new dp;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class f2{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new lt(e),this.density=n}clone(){return new f2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class h2{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new lt(e),this.near=n,this.far=i}clone(){return new h2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Sh extends xn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ts,this.environmentIntensity=1,this.environmentRotation=new Ts,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class d2{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Qg,this.updateRanges=[],this.version=0,this.uuid=vs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const sa=new k;class Eh{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)sa.fromBufferAttribute(this,n),sa.applyMatrix4(e),this.setXYZ(n,sa.x,sa.y,sa.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)sa.fromBufferAttribute(this,n),sa.applyNormalMatrix(e),this.setXYZ(n,sa.x,sa.y,sa.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)sa.fromBufferAttribute(this,n),sa.transformDirection(e),this.setXYZ(n,sa.x,sa.y,sa.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=pa(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=en(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=en(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=en(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=en(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=en(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=pa(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=pa(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=pa(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=pa(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=en(n,this.array),i=en(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=en(n,this.array),i=en(i,this.array),r=en(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=en(n,this.array),i=en(i,this.array),r=en(r,this.array),a=en(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){ev("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return new Bn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Eh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){ev("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class I4 extends Rr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Nd;const E0=new k,Ud=new k,Ld=new k,Pd=new xe,M0=new xe,l7=new Wt,_y=new k,T0=new k,xy=new k,YN=new xe,XE=new xe,qN=new xe;class c7 extends xn{constructor(e=new I4){if(super(),this.isSprite=!0,this.type="Sprite",Nd===void 0){Nd=new Zt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new d2(n,5);Nd.setIndex([0,1,2,0,2,3]),Nd.setAttribute("position",new Eh(i,3,0,!1)),Nd.setAttribute("uv",new Eh(i,2,3,!1))}this.geometry=Nd,this.material=e,this.center=new xe(.5,.5),this.count=1}raycast(e,n){e.camera===null&&Ut('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ud.setFromMatrixScale(this.matrixWorld),l7.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ld.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ud.multiplyScalar(-Ld.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;by(_y.set(-.5,-.5,0),Ld,s,Ud,r,a),by(T0.set(.5,-.5,0),Ld,s,Ud,r,a),by(xy.set(.5,.5,0),Ld,s,Ud,r,a),YN.set(0,0),XE.set(1,0),qN.set(1,1);let o=e.ray.intersectTriangle(_y,T0,xy,!1,E0);if(o===null&&(by(T0.set(-.5,.5,0),Ld,s,Ud,r,a),XE.set(0,1),o=e.ray.intersectTriangle(_y,xy,T0,!1,E0),o===null))return;const l=e.ray.origin.distanceTo(E0);l<e.near||l>e.far||n.push({distance:l,point:E0.clone(),uv:La.getInterpolation(E0,_y,T0,xy,YN,XE,qN,new xe),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function by(t,e,n,i,r,a){Pd.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(M0.x=a*Pd.x-r*Pd.y,M0.y=r*Pd.x+a*Pd.y):M0.copy(Pd),t.copy(e),t.x+=M0.x,t.y+=M0.y,t.applyMatrix4(l7)}const Sy=new k,ZN=new k;class u7 extends xn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let a;for(a=0;a<r.length&&!(n<r[a].distance);a++);return r.splice(a,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let i=0;i<n.length;i++)if(n[i].distance===e){const r=n.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let a=n[i].distance;if(n[i].object.visible&&(a-=a*n[i].hysteresis),e<a)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){Sy.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Sy);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Sy.setFromMatrixPosition(e.matrixWorld),ZN.setFromMatrixPosition(this.matrixWorld);const i=Sy.distanceTo(ZN)/e.zoom;n[0].object.visible=!0;let r,a;for(r=1,a=n.length;r<a;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),i>=s)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const $N=new k,KN=new jn,QN=new jn,kZ=new k,JN=new Wt,Ey=new k,WE=new Vr,eU=new Wt,YE=new Fh;class f7 extends Mi{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=QT,this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ea),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Ey),this.boundingBox.expandByPoint(Ey)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Vr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Ey),this.boundingSphere.expandByPoint(Ey)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),WE.copy(this.boundingSphere),WE.applyMatrix4(r),e.ray.intersectsSphere(WE)!==!1&&(eU.copy(r).invert(),YE.copy(e.ray).applyMatrix4(eU),!(this.boundingBox!==null&&YE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,YE)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new jn,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===QT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===jB?this.bindMatrixInverse.copy(this.bindMatrix).invert():ft("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;KN.fromBufferAttribute(r.attributes.skinIndex,e),QN.fromBufferAttribute(r.attributes.skinWeight,e),$N.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const s=QN.getComponent(a);if(s!==0){const o=KN.getComponent(a);JN.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),n.addScaledVector(kZ.copy($N).applyMatrix4(JN),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class z4 extends xn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class oo extends zn{constructor(e=null,n=1,i=1,r,a,s,o,l,f=pi,h=pi,d,p){super(null,s,o,l,f,h,r,a,d,p),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const tU=new Wt,jZ=new Wt;class p2{constructor(e=[],n=[]){this.uuid=vs(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){ft("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Wt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:jZ;tU.multiplyMatrices(o,n[a]),tU.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new p2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new oo(n,e,e,Zi,ai);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=n[a];s===void 0&&(ft("Skeleton: No bone found with UUID:",a),s=new z4),this.bones.push(s),this.boneInverses.push(new Wt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,a=n.length;r<a;r++){const s=n[r];e.bones.push(s.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class $p extends Bn{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Id=new Wt,nU=new Wt,My=[],iU=new ea,XZ=new Wt,A0=new Mi,w0=new Vr;class h7 extends Mi{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new $p(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,XZ)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ea),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Id),iU.copy(e.boundingBox).applyMatrix4(Id),this.boundingBox.union(iU)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Vr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Id),w0.copy(e.boundingSphere).applyMatrix4(Id),this.boundingSphere.union(w0)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let o=0;o<i.length;o++)i[o]=r[s+o]}raycast(e,n){const i=this.matrixWorld,r=this.count;if(A0.geometry=this.geometry,A0.material=this.material,A0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),w0.copy(this.boundingSphere),w0.applyMatrix4(i),e.ray.intersectsSphere(w0)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,Id),nU.multiplyMatrices(i,Id),A0.matrixWorld=nU,A0.raycast(e,My);for(let s=0,o=My.length;s<o;s++){const l=My[s];l.instanceId=a,l.object=this,n.push(l)}My.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new $p(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new oo(new Float32Array(r*this.count),r,this.count,Iv,ai));const a=this.morphTexture.source.data.data;let s=0;for(let f=0;f<i.length;f++)s+=i[f];const o=this.geometry.morphTargetsRelative?1:1-s,l=r*e;a[l]=o,a.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const qE=new k,WZ=new k,YZ=new $t;class Xl{constructor(e=new k(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=qE.subVectors(i,n).cross(WZ.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(qE),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||YZ.getNormalMatrix(e),r=this.coplanarPoint(qE).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const wf=new Vr,qZ=new xe(.5,.5),Ty=new k;class Mm{constructor(e=new Xl,n=new Xl,i=new Xl,r=new Xl,a=new Xl,s=new Xl){this.planes=[e,n,i,r,a,s]}set(e,n,i,r,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(i),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=us,i=!1){const r=this.planes,a=e.elements,s=a[0],o=a[1],l=a[2],f=a[3],h=a[4],d=a[5],p=a[6],g=a[7],y=a[8],S=a[9],b=a[10],v=a[11],x=a[12],E=a[13],T=a[14],w=a[15];if(r[0].setComponents(f-s,g-h,v-y,w-x).normalize(),r[1].setComponents(f+s,g+h,v+y,w+x).normalize(),r[2].setComponents(f+o,g+d,v+S,w+E).normalize(),r[3].setComponents(f-o,g-d,v-S,w-E).normalize(),i)r[4].setComponents(l,p,b,T).normalize(),r[5].setComponents(f-l,g-p,v-b,w-T).normalize();else if(r[4].setComponents(f-l,g-p,v-b,w-T).normalize(),n===us)r[5].setComponents(f+l,g+p,v+b,w+T).normalize();else if(n===Xp)r[5].setComponents(l,p,b,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),wf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),wf.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(wf)}intersectsSprite(e){wf.center.set(0,0,0);const n=qZ.distanceTo(e.center);return wf.radius=.7071067811865476+n,wf.applyMatrix4(e.matrixWorld),this.intersectsSphere(wf)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(Ty.x=r.normal.x>0?e.max.x:e.min.x,Ty.y=r.normal.y>0?e.max.y:e.min.y,Ty.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ty)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Wo=new Wt,Yo=new Mm;class m2{constructor(){this.coordinateSystem=us}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Wo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yo.setFromProjectionMatrix(Wo,r.coordinateSystem,r.reversedDepth),Yo.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Wo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yo.setFromProjectionMatrix(Wo,r.coordinateSystem,r.reversedDepth),Yo.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Wo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yo.setFromProjectionMatrix(Wo,r.coordinateSystem,r.reversedDepth),Yo.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Wo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yo.setFromProjectionMatrix(Wo,r.coordinateSystem,r.reversedDepth),Yo.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Wo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yo.setFromProjectionMatrix(Wo,r.coordinateSystem,r.reversedDepth),Yo.containsPoint(e))return!0}return!1}clone(){return new m2}}function ZE(t,e){return t-e}function ZZ(t,e){return t.z-e.z}function $Z(t,e){return e.z-t.z}class KZ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=n,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const Ca=new Wt,QZ=new lt(1,1,1),rU=new Mm,JZ=new m2,Ay=new ea,Cf=new Vr,C0=new k,aU=new k,e$=new k,$E=new KZ,Zr=new Mi,wy=[];function t$(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+n,s,t.getComponent(a,s))}else e.array.set(t.array,n*i);e.needsUpdate=!0}function Rf(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)e[i]=t[i]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class d7 extends Mi{constructor(e,n,i=n*2,r){super(new Zt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new oo(n,e,e,Zi,ai);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),i=new oo(n,e,e,zv,Fa);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),i=new oo(n,e,e,Zi,ai);i.colorSpace=pn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:l,normalized:f}=s,h=new o.constructor(i*l),d=new Bn(h,l,f);n.setAttribute(a,d)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new Bn(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=n.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ea);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,Ca),this.getBoundingBoxAt(a,Ay).applyMatrix4(Ca),e.union(Ay)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vr);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,Ca),this.getBoundingSphereAt(a,Cf).applyMatrix4(Ca),e.union(Cf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ZE),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Ca.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(QZ.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,n=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ZE),l=this._availableGeometryIds.shift(),a[l]=r):(l=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=n.getIndex(),o=this._geometryInfo[e];if(r&&s.count>o.reservedIndexCount||n.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,f=o.reservedVertexCount;o.vertexCount=n.getAttribute("position").count;for(const h in i.attributes){const d=n.getAttribute(h),p=i.getAttribute(h);t$(d,p,l);const g=d.itemSize;for(let y=d.count,S=f;y<S;y++){const b=l+y;for(let v=0;v<g;v++)p.setComponent(b,v,0)}p.needsUpdate=!0,p.addUpdateRange(l*g,f*g)}if(r){const h=o.indexStart,d=o.reservedIndexCount;o.indexCount=n.getIndex().count;for(let p=0;p<s.count;p++)a.setX(h+p,l+s.getX(p));for(let p=s.count,g=d;p<g;p++)a.setX(h+p,l);a.needsUpdate=!0,a.addUpdateRange(h,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,n.boundingBox!==null&&(o.boundingBox=n.boundingBox.clone()),o.boundingSphere=null,n.boundingSphere!==null&&(o.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const i=this._geometryInfo,r=i.map((s,o)=>o).sort((s,o)=>i[s].vertexStart-i[o].vertexStart),a=this.geometry;for(let s=0,o=i.length;s<o;s++){const l=r[s],f=i[l];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==n){const{indexStart:h,vertexStart:d,reservedIndexCount:p}=f,g=a.index,y=g.array,S=e-d;for(let b=h;b<h+p;b++)y[b]=y[b]+S;g.array.copyWithin(n,h,h+p),g.addUpdateRange(n,p),g.needsUpdate=!0,f.indexStart=n}n+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:h,reservedVertexCount:d}=f,p=a.attributes;for(const g in p){const y=p[g],{array:S,itemSize:b}=y;S.copyWithin(e*b,h*b,(h+d)*b),y.addUpdateRange(e*b,d*b),y.needsUpdate=!0}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new ea,s=i.index,o=i.attributes.position;for(let l=r.start,f=r.start+r.count;l<f;l++){let h=l;s&&(h=s.getX(h)),a.expandByPoint(C0.fromBufferAttribute(o,h))}r.boundingBox=a}return n.copy(r.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new Vr;this.getBoundingBoxAt(e,Ay),Ay.getCenter(a.center);const s=i.index,o=i.attributes.position;let l=0;for(let f=r.start,h=r.start+r.count;f<h;f++){let d=f;s&&(d=s.getX(d)),C0.fromBufferAttribute(o,d),l=Math.max(l,a.center.distanceToSquared(C0))}a.radius=Math.sqrt(l),r.boundingSphere=a}return n.copy(r.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return n.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return n.vertexStart=i.vertexStart,n.vertexCount=i.vertexCount,n.reservedVertexCount=i.reservedVertexCount,n.indexStart=i.indexStart,n.indexCount=i.indexCount,n.reservedIndexCount=i.reservedIndexCount,n.start=i.start,n.count=i.count,n}setInstanceCount(e){const n=this._availableInstanceIds,i=this._instanceInfo;for(n.sort(ZE);n[n.length-1]===i.length-1;)i.pop(),n.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);Rf(this._multiDrawCounts,r),Rf(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Rf(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Rf(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Rf(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Zt,this._initializeGeometry(a));const s=this.geometry;a.index&&Rf(a.index.array,s.index.array);for(const o in a.attributes)Rf(a.attributes[o].array,s.attributes[o].array)}raycast(e,n){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;Zr.material=this.material,Zr.geometry.index=s.index,Zr.geometry.attributes=s.attributes,Zr.geometry.boundingBox===null&&(Zr.geometry.boundingBox=new ea),Zr.geometry.boundingSphere===null&&(Zr.geometry.boundingSphere=new Vr);for(let o=0,l=i.length;o<l;o++){if(!i[o].visible||!i[o].active)continue;const f=i[o].geometryIndex,h=r[f];Zr.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(o,Zr.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,Zr.geometry.boundingBox),this.getBoundingSphereAt(f,Zr.geometry.boundingSphere),Zr.raycast(e,wy);for(let d=0,p=wy.length;d<p;d++){const g=wy[d];g.object=this,g.batchId=o,n.push(g)}wy.length=0}Zr.material=null,Zr.geometry.index=null,Zr.geometry.attributes={},Zr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,f=this._multiDrawStarts,h=this._multiDrawCounts,d=this._geometryInfo,p=this.perObjectFrustumCulled,g=this._indirectTexture,y=g.image.data,S=i.isArrayCamera?JZ:rU;p&&!i.isArrayCamera&&(Ca.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),rU.setFromProjectionMatrix(Ca,i.coordinateSystem,i.reversedDepth));let b=0;if(this.sortObjects){Ca.copy(this.matrixWorld).invert(),C0.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ca),aU.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ca);for(let E=0,T=l.length;E<T;E++)if(l[E].visible&&l[E].active){const w=l[E].geometryIndex;this.getMatrixAt(E,Ca),this.getBoundingSphereAt(w,Cf).applyMatrix4(Ca);let R=!1;if(p&&(R=!S.intersectsSphere(Cf,i)),!R){const N=d[w],U=e$.subVectors(Cf.center,C0).dot(aU);$E.push(N.start,N.count,U,E)}}const v=$E.list,x=this.customSort;x===null?v.sort(a.transparent?$Z:ZZ):x.call(this,v,i);for(let E=0,T=v.length;E<T;E++){const w=v[E];f[b]=w.start*o,h[b]=w.count,y[b]=w.index,b++}$E.reset()}else for(let v=0,x=l.length;v<x;v++)if(l[v].visible&&l[v].active){const E=l[v].geometryIndex;let T=!1;if(p&&(this.getMatrixAt(v,Ca),this.getBoundingSphereAt(E,Cf).applyMatrix4(Ca),T=!S.intersectsSphere(Cf,i)),!T){const w=d[E];f[b]=w.start*o,h[b]=w.count,y[b]=v,b++}}g.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class xa extends Rr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new lt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const eb=new k,tb=new k,sU=new Wt,R0=new Fh,Cy=new Vr,KE=new k,oU=new k;class Bu extends xn{constructor(e=new Zt,n=new xa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,a=n.count;r<a;r++)eb.fromBufferAttribute(n,r-1),tb.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=eb.distanceTo(tb);e.setAttribute("lineDistance",new Et(i,1))}else ft("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Cy.copy(i.boundingSphere),Cy.applyMatrix4(r),Cy.radius+=a,e.ray.intersectsSphere(Cy)===!1)return;sU.copy(r).invert(),R0.copy(e.ray).applyMatrix4(sU);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,f=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(h!==null){const g=Math.max(0,s.start),y=Math.min(h.count,s.start+s.count);for(let S=g,b=y-1;S<b;S+=f){const v=h.getX(S),x=h.getX(S+1),E=Ry(this,e,R0,l,v,x,S);E&&n.push(E)}if(this.isLineLoop){const S=h.getX(y-1),b=h.getX(g),v=Ry(this,e,R0,l,S,b,y-1);v&&n.push(v)}}else{const g=Math.max(0,s.start),y=Math.min(p.count,s.start+s.count);for(let S=g,b=y-1;S<b;S+=f){const v=Ry(this,e,R0,l,S,S+1,S);v&&n.push(v)}if(this.isLineLoop){const S=Ry(this,e,R0,l,y-1,g,y-1);S&&n.push(S)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function Ry(t,e,n,i,r,a,s){const o=t.geometry.attributes.position;if(eb.fromBufferAttribute(o,r),tb.fromBufferAttribute(o,a),n.distanceSqToSegment(eb,tb,KE,oU)>i)return;KE.applyMatrix4(t.matrixWorld);const f=e.ray.origin.distanceTo(KE);if(!(f<e.near||f>e.far))return{distance:f,point:oU.clone().applyMatrix4(t.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:t}}const lU=new k,cU=new k;class vl extends Bu{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,a=n.count;r<a;r+=2)lU.fromBufferAttribute(n,r),cU.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+lU.distanceTo(cU);e.setAttribute("lineDistance",new Et(i,1))}else ft("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class p7 extends Bu{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class B4 extends Rr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const uU=new Wt,nA=new Fh,Dy=new Vr,Oy=new k;class m7 extends xn{constructor(e=new Zt,n=new B4){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Dy.copy(i.boundingSphere),Dy.applyMatrix4(r),Dy.radius+=a,e.ray.intersectsSphere(Dy)===!1)return;uU.copy(r).invert(),nA.copy(e.ray).applyMatrix4(uU);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,f=i.index,d=i.attributes.position;if(f!==null){const p=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let y=p,S=g;y<S;y++){const b=f.getX(y);Oy.fromBufferAttribute(d,b),fU(Oy,b,l,r,e,n,this)}}else{const p=Math.max(0,s.start),g=Math.min(d.count,s.start+s.count);for(let y=p,S=g;y<S;y++)Oy.fromBufferAttribute(d,y),fU(Oy,y,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function fU(t,e,n,i,r,a,s){const o=nA.distanceSqToPoint(t);if(o<n){const l=new k;nA.closestPointToPoint(t,l),l.applyMatrix4(i);const f=r.ray.origin.distanceTo(l);if(f<r.near||f>r.far)return;a.push({distance:f,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class g7 extends zn{constructor(e,n,i,r,a=rn,s=rn,o,l,f){super(e,n,i,r,a,s,o,l,f),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function d(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class n$ extends g7{constructor(e,n,i,r,a,s,o,l){super({},e,n,i,r,a,s,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class i$ extends zn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=pi,this.minFilter=pi,this.generateMipmaps=!1,this.needsUpdate=!0}}class g2 extends zn{constructor(e,n,i,r,a,s,o,l,f,h,d,p){super(null,s,o,l,f,h,r,a,d,p),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class r$ extends g2{constructor(e,n,i,r,a,s){super(e,n,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Hi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class a$ extends g2{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,No),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class F4 extends zn{constructor(e,n,i,r,a,s,o,l,f){super(e,n,i,r,a,s,o,l,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Fu extends zn{constructor(e,n,i=Fa,r,a,s,o=pi,l=pi,f,h=ul,d=1){if(h!==ul&&h!==tc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const p={width:e,height:n,depth:d};super(p,r,a,s,o,l,h,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new hu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class v7 extends Fu{constructor(e,n=Fa,i=No,r,a,s=pi,o=pi,l,f=ul){const h={width:e,height:e,depth:1},d=[h,h,h,h,h,h];super(e,e,n,i,r,a,s,o,l,f),this.image=d,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class H4 extends zn{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class v2 extends Zt{constructor(e=1,n=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r,heightSegments:a},n=Math.max(0,n),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],o=[],l=[],f=[],h=n/2,d=Math.PI/2*e,p=n,g=2*d+p,y=i*2+a,S=r+1,b=new k,v=new k;for(let x=0;x<=y;x++){let E=0,T=0,w=0,R=0;if(x<=i){const A=x/i,C=A*Math.PI/2;T=-h-e*Math.cos(C),w=e*Math.sin(C),R=-e*Math.cos(C),E=A*d}else if(x<=i+a){const A=(x-i)/a;T=-h+A*n,w=e,R=0,E=d+A*p}else{const A=(x-i-a)/i,C=A*Math.PI/2;T=h+e*Math.sin(C),w=e*Math.cos(C),R=e*Math.sin(C),E=d+p+A*d}const N=Math.max(0,Math.min(1,E/g));let U=0;x===0?U=.5/r:x===y&&(U=-.5/r);for(let A=0;A<=r;A++){const C=A/r,I=C*Math.PI*2,X=Math.sin(I),j=Math.cos(I);v.x=-w*j,v.y=T,v.z=w*X,o.push(v.x,v.y,v.z),b.set(-w*j,R,w*X),b.normalize(),l.push(b.x,b.y,b.z),f.push(C+U,N)}if(x>0){const A=(x-1)*S;for(let C=0;C<r;C++){const I=A+C,X=A+C+1,j=x*S+C,Y=x*S+C+1;s.push(I,X,j),s.push(X,Y,j)}}}this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("normal",new Et(l,3)),this.setAttribute("uv",new Et(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new v2(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class y2 extends Zt{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const a=[],s=[],o=[],l=[],f=new k,h=new xe;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=n;d++,p+=3){const g=i+d/n*r;f.x=e*Math.cos(g),f.y=e*Math.sin(g),s.push(f.x,f.y,f.z),o.push(0,0,1),h.x=(s[p]/e+1)/2,h.y=(s[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=n;d++)a.push(d,d+1,0);this.setIndex(a),this.setAttribute("position",new Et(s,3)),this.setAttribute("normal",new Et(o,3)),this.setAttribute("uv",new Et(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fv extends Zt{constructor(e=1,n=1,i=1,r=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const f=this;r=Math.floor(r),a=Math.floor(a);const h=[],d=[],p=[],g=[];let y=0;const S=[],b=i/2;let v=0;x(),s===!1&&(e>0&&E(!0),n>0&&E(!1)),this.setIndex(h),this.setAttribute("position",new Et(d,3)),this.setAttribute("normal",new Et(p,3)),this.setAttribute("uv",new Et(g,2));function x(){const T=new k,w=new k;let R=0;const N=(n-e)/i;for(let U=0;U<=a;U++){const A=[],C=U/a,I=C*(n-e)+e;for(let X=0;X<=r;X++){const j=X/r,Y=j*l+o,Z=Math.sin(Y),z=Math.cos(Y);w.x=I*Z,w.y=-C*i+b,w.z=I*z,d.push(w.x,w.y,w.z),T.set(Z,N,z).normalize(),p.push(T.x,T.y,T.z),g.push(j,1-C),A.push(y++)}S.push(A)}for(let U=0;U<r;U++)for(let A=0;A<a;A++){const C=S[A][U],I=S[A+1][U],X=S[A+1][U+1],j=S[A][U+1];(e>0||A!==0)&&(h.push(C,I,j),R+=3),(n>0||A!==a-1)&&(h.push(I,X,j),R+=3)}f.addGroup(v,R,0),v+=R}function E(T){const w=y,R=new xe,N=new k;let U=0;const A=T===!0?e:n,C=T===!0?1:-1;for(let X=1;X<=r;X++)d.push(0,b*C,0),p.push(0,C,0),g.push(.5,.5),y++;const I=y;for(let X=0;X<=r;X++){const Y=X/r*l+o,Z=Math.cos(Y),z=Math.sin(Y);N.x=A*z,N.y=b*C,N.z=A*Z,d.push(N.x,N.y,N.z),p.push(0,C,0),R.x=Z*.5+.5,R.y=z*.5*C+.5,g.push(R.x,R.y),y++}for(let X=0;X<r;X++){const j=w+X,Y=I+X;T===!0?h.push(Y,Y+1,j):h.push(Y+1,Y,j),U+=3}f.addGroup(v,U,T===!0?1:2),v+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hv extends Fv{constructor(e=1,n=1,i=32,r=1,a=!1,s=0,o=Math.PI*2){super(0,e,n,i,r,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new Hv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qu extends Zt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const a=[],s=[];o(r),f(i),h(),this.setAttribute("position",new Et(a,3)),this.setAttribute("normal",new Et(a.slice(),3)),this.setAttribute("uv",new Et(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(x){const E=new k,T=new k,w=new k;for(let R=0;R<n.length;R+=3)g(n[R+0],E),g(n[R+1],T),g(n[R+2],w),l(E,T,w,x)}function l(x,E,T,w){const R=w+1,N=[];for(let U=0;U<=R;U++){N[U]=[];const A=x.clone().lerp(T,U/R),C=E.clone().lerp(T,U/R),I=R-U;for(let X=0;X<=I;X++)X===0&&U===R?N[U][X]=A:N[U][X]=A.clone().lerp(C,X/I)}for(let U=0;U<R;U++)for(let A=0;A<2*(R-U)-1;A++){const C=Math.floor(A/2);A%2===0?(p(N[U][C+1]),p(N[U+1][C]),p(N[U][C])):(p(N[U][C+1]),p(N[U+1][C+1]),p(N[U+1][C]))}}function f(x){const E=new k;for(let T=0;T<a.length;T+=3)E.x=a[T+0],E.y=a[T+1],E.z=a[T+2],E.normalize().multiplyScalar(x),a[T+0]=E.x,a[T+1]=E.y,a[T+2]=E.z}function h(){const x=new k;for(let E=0;E<a.length;E+=3){x.x=a[E+0],x.y=a[E+1],x.z=a[E+2];const T=b(x)/2/Math.PI+.5,w=v(x)/Math.PI+.5;s.push(T,1-w)}y(),d()}function d(){for(let x=0;x<s.length;x+=6){const E=s[x+0],T=s[x+2],w=s[x+4],R=Math.max(E,T,w),N=Math.min(E,T,w);R>.9&&N<.1&&(E<.2&&(s[x+0]+=1),T<.2&&(s[x+2]+=1),w<.2&&(s[x+4]+=1))}}function p(x){a.push(x.x,x.y,x.z)}function g(x,E){const T=x*3;E.x=e[T+0],E.y=e[T+1],E.z=e[T+2]}function y(){const x=new k,E=new k,T=new k,w=new k,R=new xe,N=new xe,U=new xe;for(let A=0,C=0;A<a.length;A+=9,C+=6){x.set(a[A+0],a[A+1],a[A+2]),E.set(a[A+3],a[A+4],a[A+5]),T.set(a[A+6],a[A+7],a[A+8]),R.set(s[C+0],s[C+1]),N.set(s[C+2],s[C+3]),U.set(s[C+4],s[C+5]),w.copy(x).add(E).add(T).divideScalar(3);const I=b(w);S(R,C+0,x,I),S(N,C+2,E,I),S(U,C+4,T,I)}}function S(x,E,T,w){w<0&&x.x===1&&(s[E]=x.x-1),T.x===0&&T.z===0&&(s[E]=w/2/Math.PI+.5)}function b(x){return Math.atan2(x.z,-x.x)}function v(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qu(e.vertices,e.indices,e.radius,e.detail)}}class _2 extends Qu{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new _2(e.radius,e.detail)}}const Ny=new k,Uy=new k,QE=new k,Ly=new La;class y7 extends Zt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),a=Math.cos(ch*n),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,f=[0,0,0],h=["a","b","c"],d=new Array(3),p={},g=[];for(let y=0;y<l;y+=3){s?(f[0]=s.getX(y),f[1]=s.getX(y+1),f[2]=s.getX(y+2)):(f[0]=y,f[1]=y+1,f[2]=y+2);const{a:S,b,c:v}=Ly;if(S.fromBufferAttribute(o,f[0]),b.fromBufferAttribute(o,f[1]),v.fromBufferAttribute(o,f[2]),Ly.getNormal(QE),d[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,d[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,d[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let x=0;x<3;x++){const E=(x+1)%3,T=d[x],w=d[E],R=Ly[h[x]],N=Ly[h[E]],U=`${T}_${w}`,A=`${w}_${T}`;A in p&&p[A]?(QE.dot(p[A].normal)<=a&&(g.push(R.x,R.y,R.z),g.push(N.x,N.y,N.z)),p[A]=null):U in p||(p[U]={index0:f[x],index1:f[E],normal:QE.clone()})}}for(const y in p)if(p[y]){const{index0:S,index1:b}=p[y];Ny.fromBufferAttribute(o,S),Uy.fromBufferAttribute(o,b),g.push(Ny.x,Ny.y,Ny.z),g.push(Uy.x,Uy.y,Uy.z)}this.setAttribute("position",new Et(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Io{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ft("Curve: .getPoint() not implemented.")}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),a=0;n.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),n.push(a),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const i=this.getLengths();let r=0;const a=i.length;let s;n?s=n:s=e*i[a-1];let o=0,l=a-1,f;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),f=i[r]-s,f<0)o=r+1;else if(f>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(a-1);const h=i[r],p=i[r+1]-h,g=(s-h)/p;return(r+g)/(a-1)}getTangent(e,n){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),o=this.getPoint(a),l=n||(s.isVector2?new xe:new k);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){const i=new k,r=[],a=[],s=[],o=new k,l=new Wt;for(let g=0;g<=e;g++){const y=g/e;r[g]=this.getTangentAt(y,new k)}a[0]=new k,s[0]=new k;let f=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=f&&(f=h,i.set(1,0,0)),d<=f&&(f=d,i.set(0,1,0)),p<=f&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]);for(let g=1;g<=e;g++){if(a[g]=a[g-1].clone(),s[g]=s[g-1].clone(),o.crossVectors(r[g-1],r[g]),o.length()>Number.EPSILON){o.normalize();const y=Math.acos(jt(r[g-1].dot(r[g]),-1,1));a[g].applyMatrix4(l.makeRotationAxis(o,y))}s[g].crossVectors(r[g],a[g])}if(n===!0){let g=Math.acos(jt(a[0].dot(a[e]),-1,1));g/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(g=-g);for(let y=1;y<=e;y++)a[y].applyMatrix4(l.makeRotationAxis(r[y],g*y)),s[y].crossVectors(r[y],a[y])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class x2 extends Io{constructor(e=0,n=0,i=1,r=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,n=new xe){const i=n,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),f=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,g=f-this.aY;l=p*h-g*d+this.aX,f=p*d+g*h+this.aY}return i.set(l,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _7 extends x2{constructor(e,n,i,r,a,s){super(e,n,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function V4(){let t=0,e=0,n=0,i=0;function r(a,s,o,l){t=a,e=o,n=-3*a+3*s-2*o-l,i=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,f){r(s,o,f*(o-a),f*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,f,h,d){let p=(s-a)/f-(o-a)/(f+h)+(o-s)/h,g=(o-s)/h-(l-s)/(h+d)+(l-o)/d;p*=h,g*=h,r(s,o,p,g)},calc:function(a){const s=a*a,o=s*a;return t+e*a+n*s+i*o}}}const Py=new k,JE=new V4,eM=new V4,tM=new V4;class x7 extends Io{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new k){const i=n,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let f,h;this.closed||o>0?f=r[(o-1)%a]:(Py.subVectors(r[0],r[1]).add(r[0]),f=Py);const d=r[o%a],p=r[(o+1)%a];if(this.closed||o+2<a?h=r[(o+2)%a]:(Py.subVectors(r[a-1],r[a-2]).add(r[a-1]),h=Py),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let y=Math.pow(f.distanceToSquared(d),g),S=Math.pow(d.distanceToSquared(p),g),b=Math.pow(p.distanceToSquared(h),g);S<1e-4&&(S=1),y<1e-4&&(y=S),b<1e-4&&(b=S),JE.initNonuniformCatmullRom(f.x,d.x,p.x,h.x,y,S,b),eM.initNonuniformCatmullRom(f.y,d.y,p.y,h.y,y,S,b),tM.initNonuniformCatmullRom(f.z,d.z,p.z,h.z,y,S,b)}else this.curveType==="catmullrom"&&(JE.initCatmullRom(f.x,d.x,p.x,h.x,this.tension),eM.initCatmullRom(f.y,d.y,p.y,h.y,this.tension),tM.initCatmullRom(f.z,d.z,p.z,h.z,this.tension));return i.set(JE.calc(l),eM.calc(l),tM.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new k().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function hU(t,e,n,i,r){const a=(i-e)*.5,s=(r-n)*.5,o=t*t,l=t*o;return(2*n-2*i+a+s)*l+(-3*n+3*i-2*a-s)*o+a*t+n}function s$(t,e){const n=1-t;return n*n*e}function o$(t,e){return 2*(1-t)*t*e}function l$(t,e){return t*t*e}function _g(t,e,n,i){return s$(t,e)+o$(t,n)+l$(t,i)}function c$(t,e){const n=1-t;return n*n*n*e}function u$(t,e){const n=1-t;return 3*n*n*t*e}function f$(t,e){return 3*(1-t)*t*t*e}function h$(t,e){return t*t*t*e}function xg(t,e,n,i,r){return c$(t,e)+u$(t,n)+f$(t,i)+h$(t,r)}class G4 extends Io{constructor(e=new xe,n=new xe,i=new xe,r=new xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new xe){const i=n,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(xg(e,r.x,a.x,s.x,o.x),xg(e,r.y,a.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class b7 extends Io{constructor(e=new k,n=new k,i=new k,r=new k){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new k){const i=n,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(xg(e,r.x,a.x,s.x,o.x),xg(e,r.y,a.y,s.y,o.y),xg(e,r.z,a.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class k4 extends Io{constructor(e=new xe,n=new xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new xe){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new xe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class S7 extends Io{constructor(e=new k,n=new k){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new k){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new k){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class j4 extends Io{constructor(e=new xe,n=new xe,i=new xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new xe){const i=n,r=this.v0,a=this.v1,s=this.v2;return i.set(_g(e,r.x,a.x,s.x),_g(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class X4 extends Io{constructor(e=new k,n=new k,i=new k){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new k){const i=n,r=this.v0,a=this.v1,s=this.v2;return i.set(_g(e,r.x,a.x,s.x),_g(e,r.y,a.y,s.y),_g(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class W4 extends Io{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new xe){const i=n,r=this.points,a=(r.length-1)*e,s=Math.floor(a),o=a-s,l=r[s===0?s:s-1],f=r[s],h=r[s>r.length-2?r.length-1:s+1],d=r[s>r.length-3?r.length-1:s+2];return i.set(hU(o,l.x,f.x,h.x,d.x),hU(o,l.y,f.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new xe().fromArray(r))}return this}}var nb=Object.freeze({__proto__:null,ArcCurve:_7,CatmullRomCurve3:x7,CubicBezierCurve:G4,CubicBezierCurve3:b7,EllipseCurve:x2,LineCurve:k4,LineCurve3:S7,QuadraticBezierCurve:j4,QuadraticBezierCurve3:X4,SplineCurve:W4});class E7 extends Io{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new nb[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,o=this.curves[a],l=o.getLength(),f=l===0?0:1-s/l;return o.getPointAt(f,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let f=0;f<l.length;f++){const h=l[f];i&&i.equals(h)||(n.push(h),i=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new nb[r.type]().fromJSON(r))}return this}}class ib extends E7{constructor(e){super(),this.type="Path",this.currentPoint=new xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new k4(this.currentPoint.clone(),new xe(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const a=new j4(this.currentPoint.clone(),new xe(e,n),new xe(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,a,s){const o=new G4(this.currentPoint.clone(),new xe(e,n),new xe(i,r),new xe(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new W4(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,n+l,i,r,a,s),this}absarc(e,n,i,r,a,s){return this.absellipse(e,n,i,i,r,a,s),this}ellipse(e,n,i,r,a,s,o,l){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,n+h,i,r,a,s,o,l),this}absellipse(e,n,i,r,a,s,o,l){const f=new x2(e,n,i,r,a,s,o,l);if(this.curves.length>0){const d=f.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Tu extends ib{constructor(e){super(e),this.uuid=vs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new ib().fromJSON(r))}return this}}function d$(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let a=M7(t,0,r,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,f;if(i&&(a=y$(t,e,a,n)),t.length>80*n){o=t[0],l=t[1];let h=o,d=l;for(let p=n;p<r;p+=n){const g=t[p],y=t[p+1];g<o&&(o=g),y<l&&(l=y),g>h&&(h=g),y>d&&(d=y)}f=Math.max(h-o,d-l),f=f!==0?32767/f:0}return tv(a,s,n,o,l,f,0),s}function M7(t,e,n,i,r){let a;if(r===R$(t,e,n,i)>0)for(let s=e;s<n;s+=i)a=dU(s/i|0,t[s],t[s+1],a);else for(let s=n-i;s>=e;s-=i)a=dU(s/i|0,t[s],t[s+1],a);return a&&Kp(a,a.next)&&(iv(a),a=a.next),a}function Mh(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Kp(n,n.next)||Ci(n.prev,n,n.next)===0)){if(iv(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function tv(t,e,n,i,r,a,s){if(!t)return;!s&&a&&E$(t,i,r,a);let o=t;for(;t.prev!==t.next;){const l=t.prev,f=t.next;if(a?m$(t,i,r,a):p$(t)){e.push(l.i,t.i,f.i),iv(t),t=f.next,o=f.next;continue}if(t=f,t===o){s?s===1?(t=g$(Mh(t),e),tv(t,e,n,i,r,a,2)):s===2&&v$(t,e,n,i,r,a):tv(Mh(t),e,n,i,r,a,1);break}}}function p$(t){const e=t.prev,n=t,i=t.next;if(Ci(e,n,i)>=0)return!1;const r=e.x,a=n.x,s=i.x,o=e.y,l=n.y,f=i.y,h=Math.min(r,a,s),d=Math.min(o,l,f),p=Math.max(r,a,s),g=Math.max(o,l,f);let y=i.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=g&&Y0(r,o,a,l,s,f,y.x,y.y)&&Ci(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function m$(t,e,n,i){const r=t.prev,a=t,s=t.next;if(Ci(r,a,s)>=0)return!1;const o=r.x,l=a.x,f=s.x,h=r.y,d=a.y,p=s.y,g=Math.min(o,l,f),y=Math.min(h,d,p),S=Math.max(o,l,f),b=Math.max(h,d,p),v=iA(g,y,e,n,i),x=iA(S,b,e,n,i);let E=t.prevZ,T=t.nextZ;for(;E&&E.z>=v&&T&&T.z<=x;){if(E.x>=g&&E.x<=S&&E.y>=y&&E.y<=b&&E!==r&&E!==s&&Y0(o,h,l,d,f,p,E.x,E.y)&&Ci(E.prev,E,E.next)>=0||(E=E.prevZ,T.x>=g&&T.x<=S&&T.y>=y&&T.y<=b&&T!==r&&T!==s&&Y0(o,h,l,d,f,p,T.x,T.y)&&Ci(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;E&&E.z>=v;){if(E.x>=g&&E.x<=S&&E.y>=y&&E.y<=b&&E!==r&&E!==s&&Y0(o,h,l,d,f,p,E.x,E.y)&&Ci(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=x;){if(T.x>=g&&T.x<=S&&T.y>=y&&T.y<=b&&T!==r&&T!==s&&Y0(o,h,l,d,f,p,T.x,T.y)&&Ci(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function g$(t,e){let n=t;do{const i=n.prev,r=n.next.next;!Kp(i,r)&&A7(i,n,n.next,r)&&nv(i,r)&&nv(r,i)&&(e.push(i.i,n.i,r.i),iv(n),iv(n.next),n=t=r),n=n.next}while(n!==t);return Mh(n)}function v$(t,e,n,i,r,a){let s=t;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&A$(s,o)){let l=w7(s,o);s=Mh(s,s.next),l=Mh(l,l.next),tv(s,e,n,i,r,a,0),tv(l,e,n,i,r,a,0);return}o=o.next}s=s.next}while(s!==t)}function y$(t,e,n,i){const r=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*i,l=a<s-1?e[a+1]*i:t.length,f=M7(t,o,l,i,!1);f===f.next&&(f.steiner=!0),r.push(T$(f))}r.sort(_$);for(let a=0;a<r.length;a++)n=x$(r[a],n);return n}function _$(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const i=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=i-r}return n}function x$(t,e){const n=b$(t,e);if(!n)return e;const i=w7(n,t);return Mh(i,i.next),Mh(n,n.next)}function b$(t,e){let n=e;const i=t.x,r=t.y;let a=-1/0,s;if(Kp(t,n))return n;do{if(Kp(t,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const d=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=i&&d>a&&(a=d,s=n.x<n.next.x?n:n.next,d===i))return s}n=n.next}while(n!==e);if(!s)return null;const o=s,l=s.x,f=s.y;let h=1/0;n=s;do{if(i>=n.x&&n.x>=l&&i!==n.x&&T7(r<f?i:a,r,l,f,r<f?a:i,r,n.x,n.y)){const d=Math.abs(r-n.y)/(i-n.x);nv(n,t)&&(d<h||d===h&&(n.x>s.x||n.x===s.x&&S$(s,n)))&&(s=n,h=d)}n=n.next}while(n!==o);return s}function S$(t,e){return Ci(t.prev,t,e.prev)<0&&Ci(e.next,t,t.next)<0}function E$(t,e,n,i){let r=t;do r.z===0&&(r.z=iA(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,M$(r)}function M$(t){let e,n=1;do{let i=t,r;t=null;let a=null;for(e=0;i;){e++;let s=i,o=0;for(let f=0;f<n&&(o++,s=s.nextZ,!!s);f++);let l=n;for(;o>0||l>0&&s;)o!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,o--):(r=s,s=s.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=s}a.nextZ=null,n*=2}while(e>1);return t}function iA(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function T$(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function T7(t,e,n,i,r,a,s,o){return(r-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(i-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(r-s)*(i-o)}function Y0(t,e,n,i,r,a,s,o){return!(t===s&&e===o)&&T7(t,e,n,i,r,a,s,o)}function A$(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!w$(t,e)&&(nv(t,e)&&nv(e,t)&&C$(t,e)&&(Ci(t.prev,t,e.prev)||Ci(t,e.prev,e))||Kp(t,e)&&Ci(t.prev,t,t.next)>0&&Ci(e.prev,e,e.next)>0)}function Ci(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Kp(t,e){return t.x===e.x&&t.y===e.y}function A7(t,e,n,i){const r=zy(Ci(t,e,n)),a=zy(Ci(t,e,i)),s=zy(Ci(n,i,t)),o=zy(Ci(n,i,e));return!!(r!==a&&s!==o||r===0&&Iy(t,n,e)||a===0&&Iy(t,i,e)||s===0&&Iy(n,t,i)||o===0&&Iy(n,e,i))}function Iy(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function zy(t){return t>0?1:t<0?-1:0}function w$(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&A7(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function nv(t,e){return Ci(t.prev,t,t.next)<0?Ci(t,e,t.next)>=0&&Ci(t,t.prev,e)>=0:Ci(t,e,t.prev)<0||Ci(t,t.next,e)<0}function C$(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function w7(t,e){const n=rA(t.i,t.x,t.y),i=rA(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function dU(t,e,n,i){const r=rA(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function iv(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function rA(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function R$(t,e,n,i){let r=0;for(let a=e,s=n-i;a<n;a+=i)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}class D${static triangulate(e,n,i=2){return d$(e,n,i)}}class Do{static area(e){const n=e.length;let i=0;for(let r=n-1,a=0;a<n;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Do.area(e)<0}static triangulateShape(e,n){const i=[],r=[],a=[];pU(e),mU(i,e);let s=e.length;n.forEach(pU);for(let l=0;l<n.length;l++)r.push(s),s+=n[l].length,mU(i,n[l]);const o=D$.triangulate(i,r);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function pU(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function mU(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Vv extends Zt{constructor(e=new Tu([new xe(.5,.5),new xe(-.5,.5),new xe(-.5,-.5),new xe(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let o=0,l=e.length;o<l;o++){const f=e[o];s(f)}this.setAttribute("position",new Et(r,3)),this.setAttribute("uv",new Et(a,2)),this.computeVertexNormals();function s(o){const l=[],f=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,g=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:g-.1,S=n.bevelOffset!==void 0?n.bevelOffset:0,b=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:O$;let E,T=!1,w,R,N,U;if(v){E=v.getSpacedPoints(h),T=!0,p=!1;const Me=v.isCatmullRomCurve3?v.closed:!1;w=v.computeFrenetFrames(h,Me),R=new k,N=new k,U=new k}p||(b=0,g=0,y=0,S=0);const A=o.extractPoints(f);let C=A.shape;const I=A.holes;if(!Do.isClockWise(C)){C=C.reverse();for(let Me=0,Oe=I.length;Me<Oe;Me++){const we=I[Me];Do.isClockWise(we)&&(I[Me]=we.reverse())}}function j(Me){const we=10000000000000001e-36;let Ge=Me[0];for(let W=1;W<=Me.length;W++){const mt=W%Me.length,Qe=Me[mt],bt=Qe.x-Ge.x,We=Qe.y-Ge.y,B=bt*bt+We*We,L=Math.max(Math.abs(Qe.x),Math.abs(Qe.y),Math.abs(Ge.x),Math.abs(Ge.y)),ne=we*L*L;if(B<=ne){Me.splice(mt,1),W--;continue}Ge=Qe}}j(C),I.forEach(j);const Y=I.length,Z=C;for(let Me=0;Me<Y;Me++){const Oe=I[Me];C=C.concat(Oe)}function z(Me,Oe,we){return Oe||Ut("ExtrudeGeometry: vec does not exist"),Me.clone().addScaledVector(Oe,we)}const G=C.length;function q(Me,Oe,we){let Ge,W,mt;const Qe=Me.x-Oe.x,bt=Me.y-Oe.y,We=we.x-Me.x,B=we.y-Me.y,L=Qe*Qe+bt*bt,ne=Qe*B-bt*We;if(Math.abs(ne)>Number.EPSILON){const pe=Math.sqrt(L),be=Math.sqrt(We*We+B*B),ye=Oe.x-bt/pe,ut=Oe.y+Qe/pe,Je=we.x-B/be,pt=we.y+We/be,At=((Je-ye)*B-(pt-ut)*We)/(Qe*B-bt*We);Ge=ye+Qe*At-Me.x,W=ut+bt*At-Me.y;const Re=Ge*Ge+W*W;if(Re<=2)return new xe(Ge,W);mt=Math.sqrt(Re/2)}else{let pe=!1;Qe>Number.EPSILON?We>Number.EPSILON&&(pe=!0):Qe<-Number.EPSILON?We<-Number.EPSILON&&(pe=!0):Math.sign(bt)===Math.sign(B)&&(pe=!0),pe?(Ge=-bt,W=Qe,mt=Math.sqrt(L)):(Ge=Qe,W=bt,mt=Math.sqrt(L/2))}return new xe(Ge/mt,W/mt)}const se=[];for(let Me=0,Oe=Z.length,we=Oe-1,Ge=Me+1;Me<Oe;Me++,we++,Ge++)we===Oe&&(we=0),Ge===Oe&&(Ge=0),se[Me]=q(Z[Me],Z[we],Z[Ge]);const le=[];let me,Ae=se.concat();for(let Me=0,Oe=Y;Me<Oe;Me++){const we=I[Me];me=[];for(let Ge=0,W=we.length,mt=W-1,Qe=Ge+1;Ge<W;Ge++,mt++,Qe++)mt===W&&(mt=0),Qe===W&&(Qe=0),me[Ge]=q(we[Ge],we[mt],we[Qe]);le.push(me),Ae=Ae.concat(me)}let Le;if(b===0)Le=Do.triangulateShape(Z,I);else{const Me=[],Oe=[];for(let we=0;we<b;we++){const Ge=we/b,W=g*Math.cos(Ge*Math.PI/2),mt=y*Math.sin(Ge*Math.PI/2)+S;for(let Qe=0,bt=Z.length;Qe<bt;Qe++){const We=z(Z[Qe],se[Qe],mt);xt(We.x,We.y,-W),Ge===0&&Me.push(We)}for(let Qe=0,bt=Y;Qe<bt;Qe++){const We=I[Qe];me=le[Qe];const B=[];for(let L=0,ne=We.length;L<ne;L++){const pe=z(We[L],me[L],mt);xt(pe.x,pe.y,-W),Ge===0&&B.push(pe)}Ge===0&&Oe.push(B)}}Le=Do.triangulateShape(Me,Oe)}const Ke=Le.length,yt=y+S;for(let Me=0;Me<G;Me++){const Oe=p?z(C[Me],Ae[Me],yt):C[Me];T?(N.copy(w.normals[0]).multiplyScalar(Oe.x),R.copy(w.binormals[0]).multiplyScalar(Oe.y),U.copy(E[0]).add(N).add(R),xt(U.x,U.y,U.z)):xt(Oe.x,Oe.y,0)}for(let Me=1;Me<=h;Me++)for(let Oe=0;Oe<G;Oe++){const we=p?z(C[Oe],Ae[Oe],yt):C[Oe];T?(N.copy(w.normals[Me]).multiplyScalar(we.x),R.copy(w.binormals[Me]).multiplyScalar(we.y),U.copy(E[Me]).add(N).add(R),xt(U.x,U.y,U.z)):xt(we.x,we.y,d/h*Me)}for(let Me=b-1;Me>=0;Me--){const Oe=Me/b,we=g*Math.cos(Oe*Math.PI/2),Ge=y*Math.sin(Oe*Math.PI/2)+S;for(let W=0,mt=Z.length;W<mt;W++){const Qe=z(Z[W],se[W],Ge);xt(Qe.x,Qe.y,d+we)}for(let W=0,mt=I.length;W<mt;W++){const Qe=I[W];me=le[W];for(let bt=0,We=Qe.length;bt<We;bt++){const B=z(Qe[bt],me[bt],Ge);T?xt(B.x,B.y+E[h-1].y,E[h-1].x+we):xt(B.x,B.y,d+we)}}}he(),Te();function he(){const Me=r.length/3;if(p){let Oe=0,we=G*Oe;for(let Ge=0;Ge<Ke;Ge++){const W=Le[Ge];Ze(W[2]+we,W[1]+we,W[0]+we)}Oe=h+b*2,we=G*Oe;for(let Ge=0;Ge<Ke;Ge++){const W=Le[Ge];Ze(W[0]+we,W[1]+we,W[2]+we)}}else{for(let Oe=0;Oe<Ke;Oe++){const we=Le[Oe];Ze(we[2],we[1],we[0])}for(let Oe=0;Oe<Ke;Oe++){const we=Le[Oe];Ze(we[0]+G*h,we[1]+G*h,we[2]+G*h)}}i.addGroup(Me,r.length/3-Me,0)}function Te(){const Me=r.length/3;let Oe=0;Fe(Z,Oe),Oe+=Z.length;for(let we=0,Ge=I.length;we<Ge;we++){const W=I[we];Fe(W,Oe),Oe+=W.length}i.addGroup(Me,r.length/3-Me,1)}function Fe(Me,Oe){let we=Me.length;for(;--we>=0;){const Ge=we;let W=we-1;W<0&&(W=Me.length-1);for(let mt=0,Qe=h+b*2;mt<Qe;mt++){const bt=G*mt,We=G*(mt+1),B=Oe+Ge+bt,L=Oe+W+bt,ne=Oe+W+We,pe=Oe+Ge+We;ht(B,L,ne,pe)}}}function xt(Me,Oe,we){l.push(Me),l.push(Oe),l.push(we)}function Ze(Me,Oe,we){Ft(Me),Ft(Oe),Ft(we);const Ge=r.length/3,W=x.generateTopUV(i,r,Ge-3,Ge-2,Ge-1);ct(W[0]),ct(W[1]),ct(W[2])}function ht(Me,Oe,we,Ge){Ft(Me),Ft(Oe),Ft(Ge),Ft(Oe),Ft(we),Ft(Ge);const W=r.length/3,mt=x.generateSideWallUV(i,r,W-6,W-3,W-2,W-1);ct(mt[0]),ct(mt[1]),ct(mt[3]),ct(mt[1]),ct(mt[2]),ct(mt[3])}function Ft(Me){r.push(l[Me*3+0]),r.push(l[Me*3+1]),r.push(l[Me*3+2])}function ct(Me){a.push(Me.x),a.push(Me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return N$(n,i,e)}static fromJSON(e,n){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=n[e.shapes[a]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new nb[r.type]().fromJSON(r)),new Vv(i,e.options)}}const O$={generateTopUV:function(t,e,n,i,r){const a=e[n*3],s=e[n*3+1],o=e[i*3],l=e[i*3+1],f=e[r*3],h=e[r*3+1];return[new xe(a,s),new xe(o,l),new xe(f,h)]},generateSideWallUV:function(t,e,n,i,r,a){const s=e[n*3],o=e[n*3+1],l=e[n*3+2],f=e[i*3],h=e[i*3+1],d=e[i*3+2],p=e[r*3],g=e[r*3+1],y=e[r*3+2],S=e[a*3],b=e[a*3+1],v=e[a*3+2];return Math.abs(o-h)<Math.abs(s-f)?[new xe(s,1-l),new xe(f,1-d),new xe(p,1-y),new xe(S,1-v)]:[new xe(o,1-l),new xe(h,1-d),new xe(g,1-y),new xe(b,1-v)]}};function N$(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Gv extends Qu{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Gv(e.radius,e.detail)}}class b2 extends Zt{constructor(e=[new xe(0,-.5),new xe(.5,0),new xe(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=jt(r,0,Math.PI*2);const a=[],s=[],o=[],l=[],f=[],h=1/n,d=new k,p=new xe,g=new k,y=new k,S=new k;let b=0,v=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:b=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,g.x=v*1,g.y=-b,g.z=v*0,S.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:b=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,g.x=v*1,g.y=-b,g.z=v*0,y.copy(g),g.x+=S.x,g.y+=S.y,g.z+=S.z,g.normalize(),l.push(g.x,g.y,g.z),S.copy(y)}for(let x=0;x<=n;x++){const E=i+x*h*r,T=Math.sin(E),w=Math.cos(E);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*T,d.y=e[R].y,d.z=e[R].x*w,s.push(d.x,d.y,d.z),p.x=x/n,p.y=R/(e.length-1),o.push(p.x,p.y);const N=l[3*R+0]*T,U=l[3*R+1],A=l[3*R+0]*w;f.push(N,U,A)}}for(let x=0;x<n;x++)for(let E=0;E<e.length-1;E++){const T=E+x*e.length,w=T,R=T+e.length,N=T+e.length+1,U=T+1;a.push(w,R,U),a.push(N,U,R)}this.setIndex(a),this.setAttribute("position",new Et(s,3)),this.setAttribute("uv",new Et(o,2)),this.setAttribute("normal",new Et(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new b2(e.points,e.segments,e.phiStart,e.phiLength)}}class kv extends Qu{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new kv(e.radius,e.detail)}}class Ju extends Zt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const a=e/2,s=n/2,o=Math.floor(i),l=Math.floor(r),f=o+1,h=l+1,d=e/o,p=n/l,g=[],y=[],S=[],b=[];for(let v=0;v<h;v++){const x=v*p-s;for(let E=0;E<f;E++){const T=E*d-a;y.push(T,-x,0),S.push(0,0,1),b.push(E/o),b.push(1-v/l)}}for(let v=0;v<l;v++)for(let x=0;x<o;x++){const E=x+f*v,T=x+f*(v+1),w=x+1+f*(v+1),R=x+1+f*v;g.push(E,T,R),g.push(T,w,R)}this.setIndex(g),this.setAttribute("position",new Et(y,3)),this.setAttribute("normal",new Et(S,3)),this.setAttribute("uv",new Et(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ju(e.width,e.height,e.widthSegments,e.heightSegments)}}class S2 extends Zt{constructor(e=.5,n=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],f=[],h=[];let d=e;const p=(n-e)/r,g=new k,y=new xe;for(let S=0;S<=r;S++){for(let b=0;b<=i;b++){const v=a+b/i*s;g.x=d*Math.cos(v),g.y=d*Math.sin(v),l.push(g.x,g.y,g.z),f.push(0,0,1),y.x=(g.x/n+1)/2,y.y=(g.y/n+1)/2,h.push(y.x,y.y)}d+=p}for(let S=0;S<r;S++){const b=S*(i+1);for(let v=0;v<i;v++){const x=v+b,E=x,T=x+i+1,w=x+i+2,R=x+1;o.push(E,T,R),o.push(T,w,R)}}this.setIndex(o),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(f,3)),this.setAttribute("uv",new Et(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class E2 extends Zt{constructor(e=new Tu([new xe(0,.5),new xe(-.5,-.5),new xe(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(o,l,h),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Et(r,3)),this.setAttribute("normal",new Et(a,3)),this.setAttribute("uv",new Et(s,2));function f(h){const d=r.length/3,p=h.extractPoints(n);let g=p.shape;const y=p.holes;Do.isClockWise(g)===!1&&(g=g.reverse());for(let b=0,v=y.length;b<v;b++){const x=y[b];Do.isClockWise(x)===!0&&(y[b]=x.reverse())}const S=Do.triangulateShape(g,y);for(let b=0,v=y.length;b<v;b++){const x=y[b];g=g.concat(x)}for(let b=0,v=g.length;b<v;b++){const x=g[b];r.push(x.x,x.y,0),a.push(0,0,1),s.push(x.x,x.y)}for(let b=0,v=S.length;b<v;b++){const x=S[b],E=x[0]+d,T=x[1]+d,w=x[2]+d;i.push(E,T,w),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return U$(n,e)}static fromJSON(e,n){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=n[e.shapes[r]];i.push(s)}return new E2(i,e.curveSegments)}}function U$(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class jv extends Zt{constructor(e=1,n=32,i=16,r=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:o},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(s+o,Math.PI);let f=0;const h=[],d=new k,p=new k,g=[],y=[],S=[],b=[];for(let v=0;v<=i;v++){const x=[],E=v/i;let T=0;v===0&&s===0?T=.5/n:v===i&&l===Math.PI&&(T=-.5/n);for(let w=0;w<=n;w++){const R=w/n;d.x=-e*Math.cos(r+R*a)*Math.sin(s+E*o),d.y=e*Math.cos(s+E*o),d.z=e*Math.sin(r+R*a)*Math.sin(s+E*o),y.push(d.x,d.y,d.z),p.copy(d).normalize(),S.push(p.x,p.y,p.z),b.push(R+T,1-E),x.push(f++)}h.push(x)}for(let v=0;v<i;v++)for(let x=0;x<n;x++){const E=h[v][x+1],T=h[v][x],w=h[v+1][x],R=h[v+1][x+1];(v!==0||s>0)&&g.push(E,T,R),(v!==i-1||l<Math.PI)&&g.push(T,w,R)}this.setIndex(g),this.setAttribute("position",new Et(y,3)),this.setAttribute("normal",new Et(S,3)),this.setAttribute("uv",new Et(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class M2 extends Qu{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new M2(e.radius,e.detail)}}class T2 extends Zt{constructor(e=1,n=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],o=[],l=[],f=[],h=new k,d=new k,p=new k;for(let g=0;g<=i;g++)for(let y=0;y<=r;y++){const S=y/r*a,b=g/i*Math.PI*2;d.x=(e+n*Math.cos(b))*Math.cos(S),d.y=(e+n*Math.cos(b))*Math.sin(S),d.z=n*Math.sin(b),o.push(d.x,d.y,d.z),h.x=e*Math.cos(S),h.y=e*Math.sin(S),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),f.push(y/r),f.push(g/i)}for(let g=1;g<=i;g++)for(let y=1;y<=r;y++){const S=(r+1)*g+y-1,b=(r+1)*(g-1)+y-1,v=(r+1)*(g-1)+y,x=(r+1)*g+y;s.push(S,b,x),s.push(b,v,x)}this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("normal",new Et(l,3)),this.setAttribute("uv",new Et(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class A2 extends Zt{constructor(e=1,n=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],f=[],h=[],d=new k,p=new k,g=new k,y=new k,S=new k,b=new k,v=new k;for(let E=0;E<=i;++E){const T=E/i*a*Math.PI*2;x(T,a,s,e,g),x(T+.01,a,s,e,y),b.subVectors(y,g),v.addVectors(y,g),S.crossVectors(b,v),v.crossVectors(S,b),S.normalize(),v.normalize();for(let w=0;w<=r;++w){const R=w/r*Math.PI*2,N=-n*Math.cos(R),U=n*Math.sin(R);d.x=g.x+(N*v.x+U*S.x),d.y=g.y+(N*v.y+U*S.y),d.z=g.z+(N*v.z+U*S.z),l.push(d.x,d.y,d.z),p.subVectors(d,g).normalize(),f.push(p.x,p.y,p.z),h.push(E/i),h.push(w/r)}}for(let E=1;E<=i;E++)for(let T=1;T<=r;T++){const w=(r+1)*(E-1)+(T-1),R=(r+1)*E+(T-1),N=(r+1)*E+T,U=(r+1)*(E-1)+T;o.push(w,R,U),o.push(R,N,U)}this.setIndex(o),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(f,3)),this.setAttribute("uv",new Et(h,2));function x(E,T,w,R,N){const U=Math.cos(E),A=Math.sin(E),C=w/T*E,I=Math.cos(C);N.x=R*(2+I)*.5*U,N.y=R*(2+I)*A*.5,N.z=R*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new A2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class w2 extends Zt{constructor(e=new X4(new k(-1,-1,0),new k(-1,1,0),new k(1,1,0)),n=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(n,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new k,l=new k,f=new xe;let h=new k;const d=[],p=[],g=[],y=[];S(),this.setIndex(y),this.setAttribute("position",new Et(d,3)),this.setAttribute("normal",new Et(p,3)),this.setAttribute("uv",new Et(g,2));function S(){for(let E=0;E<n;E++)b(E);b(a===!1?n:0),x(),v()}function b(E){h=e.getPointAt(E/n,h);const T=s.normals[E],w=s.binormals[E];for(let R=0;R<=r;R++){const N=R/r*Math.PI*2,U=Math.sin(N),A=-Math.cos(N);l.x=A*T.x+U*w.x,l.y=A*T.y+U*w.y,l.z=A*T.z+U*w.z,l.normalize(),p.push(l.x,l.y,l.z),o.x=h.x+i*l.x,o.y=h.y+i*l.y,o.z=h.z+i*l.z,d.push(o.x,o.y,o.z)}}function v(){for(let E=1;E<=n;E++)for(let T=1;T<=r;T++){const w=(r+1)*(E-1)+(T-1),R=(r+1)*E+(T-1),N=(r+1)*E+T,U=(r+1)*(E-1)+T;y.push(w,R,U),y.push(R,N,U)}}function x(){for(let E=0;E<=n;E++)for(let T=0;T<=r;T++)f.x=E/n,f.y=T/r,g.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new w2(new nb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class C7 extends Zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new k,a=new k;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let f=0,h=l.length;f<h;++f){const d=l[f],p=d.start,g=d.count;for(let y=p,S=p+g;y<S;y+=3)for(let b=0;b<3;b++){const v=o.getX(y+b),x=o.getX(y+(b+1)%3);r.fromBufferAttribute(s,v),a.fromBufferAttribute(s,x),gU(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let f=0;f<3;f++){const h=3*o+f,d=3*o+(f+1)%3;r.fromBufferAttribute(s,h),a.fromBufferAttribute(s,d),gU(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new Et(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function gU(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var vU=Object.freeze({__proto__:null,BoxGeometry:Hh,CapsuleGeometry:v2,CircleGeometry:y2,ConeGeometry:Hv,CylinderGeometry:Fv,DodecahedronGeometry:_2,EdgesGeometry:y7,ExtrudeGeometry:Vv,IcosahedronGeometry:Gv,LatheGeometry:b2,OctahedronGeometry:kv,PlaneGeometry:Ju,PolyhedronGeometry:Qu,RingGeometry:S2,ShapeGeometry:E2,SphereGeometry:jv,TetrahedronGeometry:M2,TorusGeometry:T2,TorusKnotGeometry:A2,TubeGeometry:w2,WireframeGeometry:C7});class R7 extends Rr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new lt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Y4 extends vi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class q4 extends Rr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new lt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class D7 extends q4{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new lt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new lt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new lt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class O7 extends Rr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new lt(16777215),this.specular=new lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=Lv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class N7 extends Rr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Z4 extends Rr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class U7 extends Rr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=Lv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $4 extends Rr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=$u,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class K4 extends Rr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class L7 extends Rr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class P7 extends xa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Jf(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function I7(t){function e(r,a){return t[r]-t[a]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function aA(t,e,n){const i=t.length,r=new t.constructor(i);for(let a=0,s=0;s!==i;++a){const o=n[a]*e;for(let l=0;l!==e;++l)r[s++]=t[o+l]}return r}function Q4(t,e,n,i){let r=1,a=t[0];for(;a!==void 0&&a[i]===void 0;)a=t[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),n.push(...s)),a=t[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(n,n.length)),a=t[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),n.push(s)),a=t[r++];while(a!==void 0)}function L$(t,e,n,i,r=30){const a=t.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const f=a.tracks[l],h=f.getValueSize(),d=[],p=[];for(let g=0;g<f.times.length;++g){const y=f.times[g]*r;if(!(y<n||y>=i)){d.push(f.times[g]);for(let S=0;S<h;++S)p.push(f.values[g*h+S])}}d.length!==0&&(f.times=Jf(d,f.times.constructor),f.values=Jf(p,f.values.constructor),s.push(f))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function P$(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,a=e/i;for(let s=0;s<r;++s){const o=n.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const f=t.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(f===void 0)continue;let h=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const g=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);const y=o.times.length-1;let S;if(a<=o.times[0]){const v=h,x=d-h;S=o.values.slice(v,x)}else if(a>=o.times[y]){const v=y*d+h,x=v+d-h;S=o.values.slice(v,x)}else{const v=o.createInterpolant(),x=h,E=d-h;v.evaluate(a),S=v.resultBuffer.slice(x,E)}l==="quaternion"&&new Jr().fromArray(S).normalize().conjugate().toArray(S);const b=f.times.length;for(let v=0;v<b;++v){const x=v*g+p;if(l==="quaternion")Jr.multiplyQuaternionsFlat(f.values,x,S,0,f.values,x);else{const E=g-p*2;for(let T=0;T<E;++T)f.values[x+T]-=S[T]}}}return t.blendMode=D4,t}class I${static convertArray(e,n){return Jf(e,n)}static isTypedArray(e){return n7(e)}static getKeyframeOrder(e){return I7(e)}static sortedArray(e,n,i){return aA(e,n,i)}static flattenJSON(e,n,i,r){Q4(e,n,i,r)}static subclip(e,n,i,r,a=30){return L$(e,n,i,r,a)}static makeClipAdditive(e,n=0,i=e,r=30){return P$(e,n,i,r)}}class Xv{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],a=n[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<a)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(a=r,r=n[++i],e<r)break t}s=n.length;break n}if(!(e>=a)){const o=n[1];e<o&&(i=2,a=o);for(let l=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=a,a=n[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const o=i+s>>>1;e<n[o]?s=o:i=o+1}if(r=n[i],a=n[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)n[s]=i[a+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class z7 extends Xv{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:$f,endingEnd:$f}}intervalChanged_(e,n,i){const r=this.parameterPositions;let a=e-2,s=e+1,o=r[a],l=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case Kf:a=e,o=2*n-i;break;case $g:a=r.length-2,o=n+r[a]-r[a+1];break;default:a=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Kf:s=e,l=2*i-n;break;case $g:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=n}const f=(i-n)*.5,h=this.valueSize;this._weightPrev=f/(n-o),this._weightNext=f/(l-i),this._offsetPrev=a*h,this._offsetNext=s*h}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,f=l-o,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,g=this._weightNext,y=(i-n)/(r-n),S=y*y,b=S*y,v=-p*b+2*p*S-p*y,x=(1+p)*b+(-1.5-2*p)*S+(-.5+p)*y+1,E=(-1-g)*b+(1.5+g)*S+.5*y,T=g*b-g*S;for(let w=0;w!==o;++w)a[w]=v*s[h+w]+x*s[f+w]+E*s[l+w]+T*s[d+w];return a}}class J4 extends Xv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,f=l-o,h=(i-n)/(r-n),d=1-h;for(let p=0;p!==o;++p)a[p]=s[f+p]*d+s[l+p]*h;return a}}class B7 extends Xv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class uo{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jf(n,this.TimeBufferType),this.values=Jf(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Jf(e.times,Array),values:Jf(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new B7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new J4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new z7(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Zg:n=this.InterpolantFactoryMethodDiscrete;break;case Jx:n=this.InterpolantFactoryMethodLinear;break;case w_:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return ft("KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zg;case this.InterpolantFactoryMethodLinear:return Jx;case this.InterpolantFactoryMethodSmooth:return w_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>n;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(Ut("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(Ut("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){Ut("KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){Ut("KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(r!==void 0&&n7(r))for(let o=0,l=r.length;o!==l;++o){const f=r[o];if(isNaN(f)){Ut("KeyframeTrack: Value is not a valid number.",this,o,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===w_,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const f=e[o],h=e[o+1];if(f!==h&&(o!==1||f!==e[0]))if(r)l=!0;else{const d=o*i,p=d-i,g=d+i;for(let y=0;y!==i;++y){const S=n[d+y];if(S!==n[p+y]||S!==n[g+y]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const d=o*i,p=s*i;for(let g=0;g!==i;++g)n[p+g]=n[d+g]}++s}}if(a>0){e[s]=e[a];for(let o=a*i,l=s*i,f=0;f!==i;++f)n[l+f]=n[o+f];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}uo.prototype.ValueTypeName="";uo.prototype.TimeBufferType=Float32Array;uo.prototype.ValueBufferType=Float32Array;uo.prototype.DefaultInterpolation=Jx;class Vh extends uo{constructor(e,n,i){super(e,n,i)}}Vh.prototype.ValueTypeName="bool";Vh.prototype.ValueBufferType=Array;Vh.prototype.DefaultInterpolation=Zg;Vh.prototype.InterpolantFactoryMethodLinear=void 0;Vh.prototype.InterpolantFactoryMethodSmooth=void 0;class eC extends uo{constructor(e,n,i,r){super(e,n,i,r)}}eC.prototype.ValueTypeName="color";class rv extends uo{constructor(e,n,i,r){super(e,n,i,r)}}rv.prototype.ValueTypeName="number";class F7 extends Xv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(i-n)/(r-n);let f=e*o;for(let h=f+o;f!==h;f+=4)Jr.slerpFlat(a,0,s,f-o,s,f,l);return a}}class Wv extends uo{constructor(e,n,i,r){super(e,n,i,r)}InterpolantFactoryMethodLinear(e){return new F7(this.times,this.values,this.getValueSize(),e)}}Wv.prototype.ValueTypeName="quaternion";Wv.prototype.InterpolantFactoryMethodSmooth=void 0;class Gh extends uo{constructor(e,n,i){super(e,n,i)}}Gh.prototype.ValueTypeName="string";Gh.prototype.ValueBufferType=Array;Gh.prototype.DefaultInterpolation=Zg;Gh.prototype.InterpolantFactoryMethodLinear=void 0;Gh.prototype.InterpolantFactoryMethodSmooth=void 0;class av extends uo{constructor(e,n,i,r){super(e,n,i,r)}}av.prototype.ValueTypeName="vector";class sv{constructor(e="",n=-1,i=[],r=r2){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=vs(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,o=i.length;s!==o;++s)n.push(B$(i[s]).scale(r));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=i.length;a!==s;++a)n.push(uo.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const a=n.length,s=[];for(let o=0;o<a;o++){let l=[],f=[];l.push((o+a-1)%a,o,(o+1)%a),f.push(0,1,0);const h=I7(l);l=aA(l,1,h),f=aA(f,1,h),!r&&l[0]===0&&(l.push(a),f.push(f[0])),s.push(new rv(".morphTargetInfluences["+n[o].name+"]",l,f).scale(1/i))}return new this(e,-1,s)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const f=e[o],h=f.name.match(a);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(f)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],n,i));return s}static parseAnimation(e,n){if(ft("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Ut("AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,g,y,S){if(g.length!==0){const b=[],v=[];Q4(g,b,v,y),b.length!==0&&S.push(new d(p,b,v))}},r=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const f=e.hierarchy||[];for(let d=0;d<f.length;d++){const p=f[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let S=0;S<p[y].morphTargets.length;S++)g[p[y].morphTargets[S]]=-1;for(const S in g){const b=[],v=[];for(let x=0;x!==p[y].morphTargets.length;++x){const E=p[y];b.push(E.time),v.push(E.morphTarget===S?1:0)}r.push(new rv(".morphTargetInfluence["+S+"]",b,v))}l=g.length*s}else{const g=".bones["+n[d].name+"]";i(av,g+".position",p,"pos",r),i(Wv,g+".quaternion",p,"rot",r),i(av,g+".scale",p,"scl",r)}}return r.length===0?null:new this(a,l,r,o)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const n=new this.constructor(this.name,this.duration,e,this.blendMode);return n.userData=JSON.parse(JSON.stringify(this.userData)),n}toJSON(){return this.constructor.toJSON(this)}}function z$(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rv;case"vector":case"vector2":case"vector3":case"vector4":return av;case"color":return eC;case"quaternion":return Wv;case"bool":case"boolean":return Vh;case"string":return Gh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function B$(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=z$(t.type);if(t.times===void 0){const n=[],i=[];Q4(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const al={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class C2{constructor(e,n,i){const r=this;let a=!1,s=0,o=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this._abortController=null,this.itemStart=function(h){o++,a===!1&&r.onStart!==void 0&&r.onStart(h,s,o),a=!0},this.itemEnd=function(h){s++,r.onProgress!==void 0&&r.onProgress(h,s,o),s===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return f.push(h,d),this},this.removeHandler=function(h){const d=f.indexOf(h);return d!==-1&&f.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=f.length;d<p;d+=2){const g=f[d],y=f[d+1];if(g.global&&(g.lastIndex=0),g.test(h))return y}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const H7=new C2;class ba{constructor(e){this.manager=e!==void 0?e:H7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,a){i.load(e,r,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ba.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hl={};class F$ extends Error{constructor(e,n){super(e),this.response=n}}class ys extends ba{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=al.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Hl[e]!==void 0){Hl[e].push({onLoad:n,onProgress:i,onError:r});return}Hl[e]=[],Hl[e].push({onLoad:n,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(s).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&ft("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const h=Hl[e],d=f.body.getReader(),p=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),g=p?parseInt(p):0,y=g!==0;let S=0;const b=new ReadableStream({start(v){x();function x(){d.read().then(({done:E,value:T})=>{if(E)v.close();else{S+=T.byteLength;const w=new ProgressEvent("progress",{lengthComputable:y,loaded:S,total:g});for(let R=0,N=h.length;R<N;R++){const U=h[R];U.onProgress&&U.onProgress(w)}v.enqueue(T),x()}},E=>{v.error(E)})}}});return new Response(b)}else throw new F$(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(l){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return f.json();default:if(o==="")return f.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),p=d&&d[1]?d[1].toLowerCase():void 0,g=new TextDecoder(p);return f.arrayBuffer().then(y=>g.decode(y))}}}).then(f=>{al.add(`file:${e}`,f);const h=Hl[e];delete Hl[e];for(let d=0,p=h.length;d<p;d++){const g=h[d];g.onLoad&&g.onLoad(f)}}).catch(f=>{const h=Hl[e];if(h===void 0)throw this.manager.itemError(e),f;delete Hl[e];for(let d=0,p=h.length;d<p;d++){const g=h[d];g.onError&&g.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class H$ extends ba{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new ys(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):Ut(l),a.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=sv.parse(e[i]);n.push(r)}return n}}class V$ extends ba{constructor(e){super(e)}load(e,n,i,r){const a=this,s=[],o=new g2,l=new ys(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let f=0;function h(d){l.load(e[d],function(p){const g=a.parse(p,!0);s[d]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},f+=1,f===6&&(g.mipmapCount===1&&(o.minFilter=rn),o.image=s,o.format=g.format,o.needsUpdate=!0,n&&n(o))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=a.parse(d,!0);if(p.isCubemap){const g=p.mipmaps.length/p.mipmapCount;for(let y=0;y<g;y++){s[y]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)s[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+S]),s[y].format=p.format,s[y].width=p.width,s[y].height=p.height}o.image=s}else o.image.width=p.width,o.image.height=p.height,o.mipmaps=p.mipmaps;p.mipmapCount===1&&(o.minFilter=rn),o.format=p.format,o.needsUpdate=!0,n&&n(o)},i,r);return o}}const zd=new WeakMap;class ov extends ba{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=al.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0);else{let d=zd.get(s);d===void 0&&(d=[],zd.set(s,d)),d.push({onLoad:n,onError:r})}return s}const o=Jg("img");function l(){h(),n&&n(this);const d=zd.get(this)||[];for(let p=0;p<d.length;p++){const g=d[p];g.onLoad&&g.onLoad(this)}zd.delete(this),a.manager.itemEnd(e)}function f(d){h(),r&&r(d),al.remove(`image:${e}`);const p=zd.get(this)||[];for(let g=0;g<p.length;g++){const y=p[g];y.onError&&y.onError(d)}zd.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){o.removeEventListener("load",l,!1),o.removeEventListener("error",f,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),al.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class V7 extends ba{constructor(e){super(e)}load(e,n,i,r){const a=new Bv;a.colorSpace=En;const s=new ov(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(f){s.load(e[f],function(h){a.images[f]=h,o++,o===6&&(a.needsUpdate=!0,n&&n(a))},void 0,r)}for(let f=0;f<e.length;++f)l(f);return a}}class tC extends ba{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new oo,o=new ys(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let f;try{f=a.parse(l)}catch(h){if(r!==void 0)r(h);else{h(h);return}}f.image!==void 0?s.image=f.image:f.data!==void 0&&(s.image.width=f.width,s.image.height=f.height,s.image.data=f.data),s.wrapS=f.wrapS!==void 0?f.wrapS:Hi,s.wrapT=f.wrapT!==void 0?f.wrapT:Hi,s.magFilter=f.magFilter!==void 0?f.magFilter:rn,s.minFilter=f.minFilter!==void 0?f.minFilter:rn,s.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(s.colorSpace=f.colorSpace),f.flipY!==void 0&&(s.flipY=f.flipY),f.format!==void 0&&(s.format=f.format),f.type!==void 0&&(s.type=f.type),f.mipmaps!==void 0&&(s.mipmaps=f.mipmaps,s.minFilter=rl),f.mipmapCount===1&&(s.minFilter=rn),f.generateMipmaps!==void 0&&(s.generateMipmaps=f.generateMipmaps),s.needsUpdate=!0,n&&n(s,f)},i,r),s}}class G7 extends ba{constructor(e){super(e)}load(e,n,i,r){const a=new zn,s=new ov(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,n!==void 0&&n(a)},i,r),a}}class ef extends xn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new lt(e),this.intensity=n}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,n}}class k7 extends ef{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new lt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}toJSON(e){const n=super.toJSON(e);return n.object.groundColor=this.groundColor.getHex(),n}}const nM=new Wt,yU=new k,_U=new k;class nC{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new xe(512,512),this.mapType=fi,this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Mm,this._frameExtents=new xe(1,1),this._viewportCount=1,this._viewports=[new jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;yU.setFromMatrixPosition(e.matrixWorld),n.position.copy(yU),_U.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(_U),n.updateMatrixWorld(),nM.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nM,n.coordinateSystem,n.reversedDepth),n.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(nM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class G$ extends nC{constructor(){super(new bi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,i=Yp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||n.far;(i!==n.fov||r!==n.aspect||a!==n.far)&&(n.fov=i,n.aspect=r,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class j7 extends ef{constructor(e,n,i=0,r=Math.PI/3,a=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.target=new xn,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new G$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.angle=this.angle,n.object.decay=this.decay,n.object.penumbra=this.penumbra,n.object.target=this.target.uuid,this.map&&this.map.isTexture&&(n.object.map=this.map.toJSON(e).uuid),n.object.shadow=this.shadow.toJSON(),n}}class k$ extends nC{constructor(){super(new bi(90,1,.5,500)),this.isPointLightShadow=!0}}class X7 extends ef{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new k$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.decay=this.decay,n.object.shadow=this.shadow.toJSON(),n}}class _s extends c2{constructor(e=-1,n=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,o=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,s=a+f*this.view.width,o-=h*this.view.offsetY,l=o-h*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class j$ extends nC{constructor(){super(new _s(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class W7 extends ef{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.target=new xn,this.shadow=new j$}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.shadow=this.shadow.toJSON(),n.object.target=this.target.uuid,n}}class Y7 extends ef{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class q7 extends ef{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class iC{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new k)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*r),n.addScaledVector(s[2],.488603*a),n.addScaledVector(s[3],.488603*i),n.addScaledVector(s[4],1.092548*(i*r)),n.addScaledVector(s[5],1.092548*(r*a)),n.addScaledVector(s[6],.315392*(3*a*a-1)),n.addScaledVector(s[7],1.092548*(i*a)),n.addScaledVector(s[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*r),n.addScaledVector(s[2],2*.511664*a),n.addScaledVector(s[3],2*.511664*i),n.addScaledVector(s[4],2*.429043*i*r),n.addScaledVector(s[5],2*.429043*r*a),n.addScaledVector(s[6],.743125*a*a-.247708),n.addScaledVector(s[7],2*.429043*i*a),n.addScaledVector(s[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,a=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*a,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*i*a,n[8]=.546274*(i*i-r*r)}}class Z7 extends ef{constructor(e=new iC,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class R2 extends ba{constructor(e){super(e),this.textures={}}load(e,n,i,r){const a=this,s=new ys(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):Ut(l),a.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(a){return n[a]===void 0&&ft("MaterialLoader: Undefined texture",a),n[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new lt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new lt().setHex(s.value);break;case"v2":r.uniforms[a].value=new xe().fromArray(s.value);break;case"v3":r.uniforms[a].value=new k().fromArray(s.value);break;case"v4":r.uniforms[a].value=new jn().fromArray(s.value);break;case"m3":r.uniforms[a].value=new $t().fromArray(s.value);break;case"m4":r.uniforms[a].value=new Wt().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new xe().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new xe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return R2.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:R7,SpriteMaterial:I4,RawShaderMaterial:Y4,ShaderMaterial:vi,PointsMaterial:B4,MeshPhysicalMaterial:D7,MeshStandardMaterial:q4,MeshPhongMaterial:O7,MeshToonMaterial:N7,MeshNormalMaterial:Z4,MeshLambertMaterial:U7,MeshDepthMaterial:$4,MeshDistanceMaterial:K4,MeshBasicMaterial:bc,MeshMatcapMaterial:L7,LineDashedMaterial:P7,LineBasicMaterial:xa,Material:Rr};return new n[e]}}class sA{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class $7 extends Zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class K7 extends ba{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new ys(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):Ut(l),a.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(g,y){if(n[y]!==void 0)return n[y];const b=g.interleavedBuffers[y],v=a(g,b.buffer),x=hp(b.type,v),E=new d2(x,b.stride);return E.uuid=b.uuid,n[y]=E,E}function a(g,y){if(i[y]!==void 0)return i[y];const b=g.arrayBuffers[y],v=new Uint32Array(b).buffer;return i[y]=v,v}const s=e.isInstancedBufferGeometry?new $7:new Zt,o=e.data.index;if(o!==void 0){const g=hp(o.type,o.array);s.setIndex(new Bn(g,1))}const l=e.data.attributes;for(const g in l){const y=l[g];let S;if(y.isInterleavedBufferAttribute){const b=r(e.data,y.data);S=new Eh(b,y.itemSize,y.offset,y.normalized)}else{const b=hp(y.type,y.array),v=y.isInstancedBufferAttribute?$p:Bn;S=new v(b,y.itemSize,y.normalized)}y.name!==void 0&&(S.name=y.name),y.usage!==void 0&&S.setUsage(y.usage),s.setAttribute(g,S)}const f=e.data.morphAttributes;if(f)for(const g in f){const y=f[g],S=[];for(let b=0,v=y.length;b<v;b++){const x=y[b];let E;if(x.isInterleavedBufferAttribute){const T=r(e.data,x.data);E=new Eh(T,x.itemSize,x.offset,x.normalized)}else{const T=hp(x.type,x.array);E=new Bn(T,x.itemSize,x.normalized)}x.name!==void 0&&(E.name=x.name),S.push(E)}s.morphAttributes[g]=S}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let g=0,y=d.length;g!==y;++g){const S=d[g];s.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;return p!==void 0&&(s.boundingSphere=new Vr().fromJSON(p)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class X$ extends ba{constructor(e){super(e)}load(e,n,i,r){const a=this,s=this.path===""?sA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new ys(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let f=null;try{f=JSON.parse(l)}catch(d){r!==void 0&&r(d),d("ObjectLoader: Can't parse "+e+".",d.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),Ut("ObjectLoader: Can't load "+e);return}a.parse(f,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?sA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new ys(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,n),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){n!==void 0&&n(f)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,a,l,o,i),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),this.bindLightTargets(f),n!==void 0){let d=!1;for(const p in s)if(s[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(f)}return f}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,n),f=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,f),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new Tu().fromJSON(e[i]);n[a.uuid]=a}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new p2().fromJSON(e[a],r);i[o.uuid]=o}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new K7;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in vU?o=vU[l.type].fromJSON(l,n):ft(`ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const a=new R2;a.setTextures(n);for(let s=0,o=e.length;s<o;s++){const l=e[s];i[l.uuid]===void 0&&(i[l.uuid]=a.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=sv.parse(r);n[a.uuid]=a}return n}parseImages(e,n){const i=this,r={};let a;function s(l){return i.manager.itemStart(l),a.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const f=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return s(h)}else return l.data?{data:hp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new C2(n);a=new ov(l),a.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const d=e[f],p=d.url;if(Array.isArray(p)){const g=[];for(let y=0,S=p.length;y<S;y++){const b=p[y],v=o(b);v!==null&&(v instanceof HTMLImageElement?g.push(v):g.push(new oo(v.data,v.width,v.height)))}r[d.uuid]=new hu(g)}else{const g=o(d.url);r[d.uuid]=new hu(g)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await r.loadAsync(l)}else return s.data?{data:hp(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new ov(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],f=l.url;if(Array.isArray(f)){const h=[];for(let d=0,p=f.length;d<p;d++){const g=f[d],y=await a(g);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new oo(y.data,y.width,y.height)))}i[l.uuid]=new hu(h)}else{const h=await a(l.url);i[l.uuid]=new hu(h)}}}return i}parseTextures(e,n){function i(a,s){return typeof a=="number"?a:(ft("ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&ft('ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&ft("ObjectLoader: Undefined image",o.image);const l=n[o.image],f=l.data;let h;Array.isArray(f)?(h=new Bv,f.length===6&&(h.needsUpdate=!0)):(f&&f.data?h=new oo:h=new zn,f&&(h.needsUpdate=!0)),h.source=l,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=i(o.mapping,W$)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=i(o.wrap[0],xU),h.wrapT=i(o.wrap[1],xU)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.minFilter!==void 0&&(h.minFilter=i(o.minFilter,bU)),o.magFilter!==void 0&&(h.magFilter=i(o.magFilter,bU)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),r[o.uuid]=h}return r}parseObject(e,n,i,r,a){let s;function o(p){return n[p]===void 0&&ft("ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const g=[];for(let y=0,S=p.length;y<S;y++){const b=p[y];i[b]===void 0&&ft("ObjectLoader: Undefined material",b),g.push(i[b])}return g}return i[p]===void 0&&ft("ObjectLoader: Undefined material",p),i[p]}}function f(p){return r[p]===void 0&&ft("ObjectLoader: Undefined texture",p),r[p]}let h,d;switch(e.type){case"Scene":s=new Sh,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new lt(e.background):s.background=f(e.background)),e.environment!==void 0&&(s.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new h2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new f2(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new bi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new _s(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Y7(e.color,e.intensity);break;case"DirectionalLight":s=new W7(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new X7(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new q7(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new j7(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new k7(e.color,e.groundColor,e.intensity);break;case"LightProbe":const p=new iC().fromArray(e.sh);s=new Z7(p,e.intensity);break;case"SkinnedMesh":h=o(e.geometry),d=l(e.material),s=new f7(h,d),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),d=l(e.material),s=new Mi(h,d);break;case"InstancedMesh":h=o(e.geometry),d=l(e.material);const g=e.count,y=e.instanceMatrix,S=e.instanceColor;s=new h7(h,d,g),s.instanceMatrix=new $p(new Float32Array(y.array),16),S!==void 0&&(s.instanceColor=new $p(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":h=o(e.geometry),d=l(e.material),s=new d7(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),s.geometry=h,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(b=>{let v=null,x=null;return b.boundingBox!==void 0&&(v=new ea().fromJSON(b.boundingBox)),b.boundingSphere!==void 0&&(x=new Vr().fromJSON(b.boundingSphere)),{...b,boundingBox:v,boundingSphere:x}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=f(e.matricesTexture.uuid),s._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new Vr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new ea().fromJSON(e.boundingBox));break;case"LOD":s=new u7;break;case"Line":s=new Bu(o(e.geometry),l(e.material));break;case"LineLoop":s=new p7(o(e.geometry),l(e.material));break;case"LineSegments":s=new vl(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new m7(o(e.geometry),l(e.material));break;case"Sprite":s=new c7(l(e.material));break;case"Group":s=new dp;break;case"Bone":s=new z4;break;default:s=new xn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let g=0;g<p.length;g++)s.add(this.parseObject(p[g],n,i,r,a))}if(e.animations!==void 0){const p=e.animations;for(let g=0;g<p.length;g++){const y=p[g];s.animations.push(a[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const p=e.levels;for(let g=0;g<p.length;g++){const y=p[g],S=s.getObjectByProperty("uuid",y.object);S!==void 0&&s.addLevel(S,y.distance,y.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?ft("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new xn}})}}const W$={UVMapping:Pu,CubeReflectionMapping:No,CubeRefractionMapping:Iu,EquirectangularReflectionMapping:kp,EquirectangularRefractionMapping:Wg,CubeUVReflectionMapping:Em},xU={RepeatWrapping:Yg,ClampToEdgeWrapping:Hi,MirroredRepeatWrapping:qg},bU={NearestFilter:pi,NearestMipmapNearestFilter:T4,NearestMipmapLinearFilter:fp,LinearFilter:rn,LinearMipmapNearestFilter:dg,LinearMipmapLinearFilter:rl},iM=new WeakMap;class Y$ extends ba{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ft("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ft("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=al.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(f=>{if(iM.has(s)===!0)r&&r(iM.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return n&&n(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return al.add(`image-bitmap:${e}`,f),n&&n(f),a.manager.itemEnd(e),f}).catch(function(f){r&&r(f),iM.set(l,f),al.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});al.add(`image-bitmap:${e}`,l),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let By;class rC{static getContext(){return By===void 0&&(By=new(window.AudioContext||window.webkitAudioContext)),By}static setContext(e){By=e}}class q$ extends ba{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new ys(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const f=l.slice(0);rC.getContext().decodeAudioData(f,function(d){n(d)}).catch(o)}catch(f){o(f)}},i,r);function o(l){r?r(l):Ut(l),a.manager.itemError(e)}}}const SU=new Wt,EU=new Wt,Df=new Wt;class Z${constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new bi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new bi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Df.copy(e.projectionMatrix);const r=n.eyeSep/2,a=r*n.near/n.focus,s=n.near*Math.tan(ch*n.fov*.5)/n.zoom;let o,l;EU.elements[12]=-r,SU.elements[12]=r,o=-s*n.aspect+a,l=s*n.aspect+a,Df.elements[0]=2*n.near/(l-o),Df.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Df),o=-s*n.aspect-a,l=s*n.aspect-a,Df.elements[0]=2*n.near/(l-o),Df.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Df)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(EU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(SU)}}class Q7 extends bi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class aC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}const Of=new k,rM=new Jr,$$=new k,Nf=new k,Uf=new k;class K$ extends xn{constructor(){super(),this.type="AudioListener",this.context=rC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new aC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Of,rM,$$),Nf.set(0,0,-1).applyQuaternion(rM),Uf.set(0,1,0).applyQuaternion(rM),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Of.x,i),n.positionY.linearRampToValueAtTime(Of.y,i),n.positionZ.linearRampToValueAtTime(Of.z,i),n.forwardX.linearRampToValueAtTime(Nf.x,i),n.forwardY.linearRampToValueAtTime(Nf.y,i),n.forwardZ.linearRampToValueAtTime(Nf.z,i),n.upX.linearRampToValueAtTime(Uf.x,i),n.upY.linearRampToValueAtTime(Uf.y,i),n.upZ.linearRampToValueAtTime(Uf.z,i)}else n.setPosition(Of.x,Of.y,Of.z),n.setOrientation(Nf.x,Nf.y,Nf.z,Uf.x,Uf.y,Uf.z)}}class J7 extends xn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){ft("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(ft("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(ft("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Lf=new k,MU=new Jr,Q$=new k,Pf=new k;class J$ extends J7{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Lf,MU,Q$),Pf.set(0,0,1).applyQuaternion(MU);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Lf.x,i),n.positionY.linearRampToValueAtTime(Lf.y,i),n.positionZ.linearRampToValueAtTime(Lf.z,i),n.orientationX.linearRampToValueAtTime(Pf.x,i),n.orientationY.linearRampToValueAtTime(Pf.y,i),n.orientationZ.linearRampToValueAtTime(Pf.z,i)}else n.setPosition(Lf.x,Lf.y,Lf.z),n.setOrientation(Pf.x,Pf.y,Pf.z)}}class eK{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class eF{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,a,s;switch(n){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)i[a+o]=i[o];s=n}else{s+=n;const o=n/s;this._mixBufferRegion(i,a,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-a,n)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,f=n+n;l!==f;++l)if(i[l]!==i[l+n]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let a=i,s=r;a!==s;++a)n[a]=n[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[n+s]=e[i+s]}_slerp(e,n,i,r){Jr.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,a){const s=this._workIndex*a;Jr.multiplyQuaternionsFlat(e,s,e,n,e,i),Jr.slerpFlat(e,n,e,n,e,s,r)}_lerp(e,n,i,r,a){const s=1-r;for(let o=0;o!==a;++o){const l=n+o;e[l]=e[l]*s+e[i+o]*r}}_lerpAdditive(e,n,i,r,a){for(let s=0;s!==a;++s){const o=n+s;e[o]=e[o]+e[i+s]*r}}}const sC="\\[\\]\\.:\\/",tK=new RegExp("["+sC+"]","g"),oC="[^"+sC+"]",nK="[^"+sC.replace("\\.","")+"]",iK=/((?:WC+[\/:])*)/.source.replace("WC",oC),rK=/(WCOD+)?/.source.replace("WCOD",nK),aK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oC),sK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oC),oK=new RegExp("^"+iK+rK+aK+sK+"$"),lK=["material","materials","bones","map"];class cK{constructor(e,n,i){const r=i||Sn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class Sn{constructor(e,n,i){this.path=n,this.parsedPath=i||Sn.parseTrackName(n),this.node=Sn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new Sn.Composite(e,n,i):new Sn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(tK,"")}static parseTrackName(e){const n=oK.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);lK.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===n||o.uuid===n)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let a=n.propertyIndex;if(e||(e=Sn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){ft("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=n.objectIndex;switch(i){case"materials":if(!e.material){Ut("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Ut("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Ut("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Ut("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Ut("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Ut("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){Ut("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const s=e[r];if(s===void 0){const f=n.nodeName;Ut("PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){Ut("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Ut("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Sn.Composite=cK;Sn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Sn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Sn.prototype.GetterByBindingType=[Sn.prototype._getValue_direct,Sn.prototype._getValue_array,Sn.prototype._getValue_arrayElement,Sn.prototype._getValue_toArray];Sn.prototype.SetterByBindingTypeAndVersioning=[[Sn.prototype._setValue_direct,Sn.prototype._setValue_direct_setNeedsUpdate,Sn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_array,Sn.prototype._setValue_array_setNeedsUpdate,Sn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_arrayElement,Sn.prototype._setValue_arrayElement_setNeedsUpdate,Sn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_fromArray,Sn.prototype._setValue_fromArray_setNeedsUpdate,Sn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class uK{constructor(){this.isAnimationObjectGroup=!0,this.uuid=vs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,f=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],g=p.uuid;let y=n[g];if(y===void 0){y=l++,n[g]=y,e.push(p);for(let S=0,b=s;S!==b;++S)a[S].push(new Sn(p,i[S],r[S]))}else if(y<f){o=e[y];const S=--f,b=e[S];n[b.uuid]=y,e[y]=b,n[g]=S,e[S]=p;for(let v=0,x=s;v!==x;++v){const E=a[v],T=E[S];let w=E[y];E[y]=T,w===void 0&&(w=new Sn(p,i[v],r[v])),E[S]=w}}else e[y]!==o&&Ut("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],f=l.uuid,h=n[f];if(h!==void 0&&h>=a){const d=a++,p=e[d];n[p.uuid]=h,e[h]=p,n[f]=d,e[d]=l;for(let g=0,y=r;g!==y;++g){const S=i[g],b=S[d],v=S[h];S[h]=b,S[d]=v}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const f=arguments[o],h=f.uuid,d=n[h];if(d!==void 0)if(delete n[h],d<a){const p=--a,g=e[p],y=--s,S=e[y];n[g.uuid]=d,e[d]=g,n[S.uuid]=p,e[p]=S,e.pop();for(let b=0,v=r;b!==v;++b){const x=i[b],E=x[p],T=x[y];x[d]=E,x[p]=T,x.pop()}}else{const p=--s,g=e[p];p>0&&(n[g.uuid]=d),e[d]=g,e.pop();for(let y=0,S=r;y!==S;++y){const b=i[y];b[d]=b[p],b.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,o=this._parsedPaths,l=this._objects,f=l.length,h=this.nCachedObjects_,d=new Array(f);r=a.length,i[e]=r,s.push(e),o.push(n),a.push(d);for(let p=h,g=l.length;p!==g;++p){const y=l[p];d[p]=new Sn(y,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],f=e[o];n[f]=i,s[i]=l,s.pop(),a[i]=a[o],a.pop(),r[i]=r[o],r.pop()}}}class tF{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const a=n.tracks,s=a.length,o=new Array(s),l={endingStart:$f,endingEnd:$f};for(let f=0;f!==s;++f){const h=a[f].createInterpolant(null);o[f]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=WB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i=!1){if(e.fadeOut(n),this.fadeIn(n),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,o=r/a;e.warp(1,s,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,i=!1){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,a=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,f=o.sampleValues;return l[0]=a,l[1]=a+i,f[0]=e/s,f[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),o=this._updateWeight(e);if(o>0){const l=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case D4:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(s),f[h].accumulateAdditive(o);break;case r2:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(s),f[h].accumulate(r,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===YB;if(e===0)return a===-1?r:s&&(a&1)===1?n-r:r;if(i===XB){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=n||r<0){const o=Math.floor(r/n);r-=n*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const f=e<0;this._setEndings(f,!f,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(a&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Kf,r.endingEnd=Kf):(e?r.endingStart=this.zeroSlopeAtStart?Kf:$f:r.endingStart=$g,n?r.endingEnd=this.zeroSlopeAtEnd?Kf:$f:r.endingEnd=$g)}_scheduleFading(e,n,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=n,o[1]=a+e,l[1]=i,this}}const fK=new Float32Array(1);class hK extends ws{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,o=e._interpolants,l=i.uuid,f=this._bindingsByRootAndName;let h=f[l];h===void 0&&(h={},f[l]=h);for(let d=0;d!==a;++d){const p=r[d],g=p.name;let y=h[g];if(y!==void 0)++y.referenceCount,s[d]=y;else{if(y=s[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,g));continue}const S=n&&n._propertyBindings[d].binding.parsedPath;y=new eF(Sn.create(i,g,S),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,g),s[d]=y}o[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,a=this._actionsByClip;let s=a[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,f=l[l.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,l[h]=f,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[n];s===void 0&&(s={},r[n]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,o=s[r],l=n[n.length-1],f=e._cacheIndex;l._cacheIndex=f,n[f]=l,n.pop(),delete o[a],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new J4(new Float32Array(2),new Float32Array(2),1,fK),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=n[r];e.__cacheIndex=r,n[r]=e,a.__cacheIndex=i,n[i]=a}clipAction(e,n,i){const r=n||this._root,a=r.uuid;let s=typeof e=="string"?sv.findByName(r,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let f=null;if(i===void 0&&(s!==null?i=s.blendMode:i=r2),l!==void 0){const d=l.actionByRoot[a];if(d!==void 0&&d.blendMode===i)return d;f=l.knownActions[0],s===null&&(s=f._clip)}if(s===null)return null;const h=new tF(this,s,n,i);return this._bindAction(h,f),this._addInactiveAction(h,o,a),h}existingAction(e,n){const i=n||this._root,r=i.uuid,a=typeof e=="string"?sv.findByName(i,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let f=0;f!==i;++f)n[f]._update(r,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let f=0;f!==l;++f)o[f].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const f=s[o];this._deactivateAction(f);const h=f._cacheIndex,d=n[n.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,d._cacheIndex=h,n[h]=d,n.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const s in i){const o=i[s].actionByRoot,l=o[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,a=r[n];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class dK extends N4{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new l2(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class mn{constructor(e){this.value=e}clone(){return new mn(this.value.clone===void 0?this.value:this.value.clone())}}let pK=0;class mK extends ws{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:pK++}),this.name="",this.usage=Qg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const a=Array.isArray(n[i])?n[i]:[n[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class gK extends d2{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class vK{constructor(e,n,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const TU=new Wt;class lC{constructor(e,n,i=0,r=1/0){this.ray=new Fh(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new qp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):Ut("Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return TU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(TU),this}intersectObject(e,n=!0,i=[]){return oA(e,this,i,n),i.sort(AU),i}intersectObjects(e,n=!0,i=[]){for(let r=0,a=e.length;r<a;r++)oA(e[r],this,i,n);return i.sort(AU),i}}function AU(t,e){return t.distance-e.distance}function oA(t,e,n,i){let r=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){const a=t.children;for(let s=0,o=a.length;s<o;s++)oA(a[s],e,n,!0)}}let yK=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=_K.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function _K(){this._document.hidden===!1&&this.reset()}class lA{constructor(e=1,n=0,i=0){this.radius=e,this.phi=n,this.theta=i}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(jt(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class xK{constructor(e=1,n=0,i=0){this.radius=e,this.theta=n,this.y=i}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}class cC{constructor(e,n,i,r){cC.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,r){const a=this.elements;return a[0]=e,a[2]=n,a[1]=i,a[3]=r,this}}const wU=new xe;class bK{constructor(e=new xe(1/0,1/0),n=new xe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=wU.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const CU=new k,Fy=new k,Bd=new k,Fd=new k,aM=new k,SK=new k,EK=new k;class MK{constructor(e=new k,n=new k){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){CU.subVectors(e,this.start),Fy.subVectors(this.end,this.start);const i=Fy.dot(Fy);let a=Fy.dot(CU)/i;return n&&(a=jt(a,0,1)),a}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,n=SK,i=EK){const r=10000000000000001e-32;let a,s;const o=this.start,l=e.start,f=this.end,h=e.end;Bd.subVectors(f,o),Fd.subVectors(h,l),aM.subVectors(o,l);const d=Bd.dot(Bd),p=Fd.dot(Fd),g=Fd.dot(aM);if(d<=r&&p<=r)return n.copy(o),i.copy(l),n.sub(i),n.dot(n);if(d<=r)a=0,s=g/p,s=jt(s,0,1);else{const y=Bd.dot(aM);if(p<=r)s=0,a=jt(-y/d,0,1);else{const S=Bd.dot(Fd),b=d*p-S*S;b!==0?a=jt((S*g-y*p)/b,0,1):a=0,s=(S*a+g)/p,s<0?(s=0,a=jt(-y/d,0,1)):s>1&&(s=1,a=jt((S-y)/d,0,1))}}return n.copy(o).add(Bd.multiplyScalar(a)),i.copy(l).add(Fd.multiplyScalar(s)),n.sub(i),n.dot(n)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const RU=new k;class TK extends xn{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new Zt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const f=s/l*Math.PI*2,h=o/l*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Et(r,3));const a=new xa({fog:!1,toneMapped:!1});this.cone=new vl(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),RU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(RU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qc=new k,Hy=new Wt,sM=new Wt;class AK extends vl{constructor(e){const n=nF(e),i=new Zt,r=[],a=[];for(let f=0;f<n.length;f++){const h=n[f];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new Et(r,3)),i.setAttribute("color",new Et(a,3));const s=new xa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new lt(255),l=new lt(65280);this.setColors(o,l)}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");sM.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<n.length;a++){const o=n[a];o.parent&&o.parent.isBone&&(Hy.multiplyMatrices(sM,o.matrixWorld),qc.setFromMatrixPosition(Hy),r.setXYZ(s,qc.x,qc.y,qc.z),Hy.multiplyMatrices(sM,o.parent.matrixWorld),qc.setFromMatrixPosition(Hy),r.setXYZ(s+1,qc.x,qc.y,qc.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,n){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,n.r,n.g,n.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function nF(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(...nF(t.children[n]));return e}class wK extends Mi{constructor(e,n,i){const r=new jv(n,4,2),a=new bc({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const CK=new k,DU=new lt,OU=new lt;class RK extends xn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new kv(n);r.rotateY(Math.PI*.5),this.material=new bc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new Bn(s,3)),this.add(new Mi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");DU.copy(this.light.color),OU.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const a=i<r/2?DU:OU;n.setXYZ(i,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(CK.setFromMatrixPosition(this.light.matrixWorld).negate())}}class DK extends vl{constructor(e=10,n=10,i=4473924,r=8947848){i=new lt(i),r=new lt(r);const a=n/2,s=e/n,o=e/2,l=[],f=[];for(let p=0,g=0,y=-o;p<=n;p++,y+=s){l.push(-o,0,y,o,0,y),l.push(y,0,-o,y,0,o);const S=p===a?i:r;S.toArray(f,g),g+=3,S.toArray(f,g),g+=3,S.toArray(f,g),g+=3,S.toArray(f,g),g+=3}const h=new Zt;h.setAttribute("position",new Et(l,3)),h.setAttribute("color",new Et(f,3));const d=new xa({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class OK extends vl{constructor(e=10,n=16,i=8,r=64,a=4473924,s=8947848){a=new lt(a),s=new lt(s);const o=[],l=[];if(n>1)for(let d=0;d<n;d++){const p=d/n*(Math.PI*2),g=Math.sin(p)*e,y=Math.cos(p)*e;o.push(0,0,0),o.push(g,0,y);const S=d&1?a:s;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let d=0;d<i;d++){const p=d&1?a:s,g=e-e/i*d;for(let y=0;y<r;y++){let S=y/r*(Math.PI*2),b=Math.sin(S)*g,v=Math.cos(S)*g;o.push(b,0,v),l.push(p.r,p.g,p.b),S=(y+1)/r*(Math.PI*2),b=Math.sin(S)*g,v=Math.cos(S)*g,o.push(b,0,v),l.push(p.r,p.g,p.b)}}const f=new Zt;f.setAttribute("position",new Et(o,3)),f.setAttribute("color",new Et(l,3));const h=new xa({vertexColors:!0,toneMapped:!1});super(f,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const NU=new k,Vy=new k,UU=new k;class NK extends xn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new Zt;r.setAttribute("position",new Et([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new xa({fog:!1,toneMapped:!1});this.lightPlane=new Bu(r,a),this.add(this.lightPlane),r=new Zt,r.setAttribute("position",new Et([0,0,0,0,0,1],3)),this.targetLine=new Bu(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),NU.setFromMatrixPosition(this.light.matrixWorld),Vy.setFromMatrixPosition(this.light.target.matrixWorld),UU.subVectors(Vy,NU),this.lightPlane.lookAt(Vy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Vy),this.targetLine.scale.z=UU.length()}}const Gy=new k,Pi=new c2;class UK extends vl{constructor(e){const n=new Zt,i=new xa({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(y,S){l(y),l(S)}function l(y){r.push(0,0,0),a.push(0,0,0),s[y]===void 0&&(s[y]=[]),s[y].push(r.length/3-1)}n.setAttribute("position",new Et(r,3)),n.setAttribute("color",new Et(a,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const f=new lt(16755200),h=new lt(16711680),d=new lt(43775),p=new lt(16777215),g=new lt(3355443);this.setColors(f,h,d,p,g)}setColors(e,n,i,r,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;let a,s;if(Pi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===us)a=-1,s=1;else if(this.camera.coordinateSystem===Xp)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Xi("c",n,e,Pi,0,0,a),Xi("t",n,e,Pi,0,0,s),Xi("n1",n,e,Pi,-i,-r,a),Xi("n2",n,e,Pi,i,-r,a),Xi("n3",n,e,Pi,-i,r,a),Xi("n4",n,e,Pi,i,r,a),Xi("f1",n,e,Pi,-i,-r,s),Xi("f2",n,e,Pi,i,-r,s),Xi("f3",n,e,Pi,-i,r,s),Xi("f4",n,e,Pi,i,r,s),Xi("u1",n,e,Pi,i*.7,r*1.1,a),Xi("u2",n,e,Pi,-i*.7,r*1.1,a),Xi("u3",n,e,Pi,0,r*2,a),Xi("cf1",n,e,Pi,-i,0,s),Xi("cf2",n,e,Pi,i,0,s),Xi("cf3",n,e,Pi,0,-r,s),Xi("cf4",n,e,Pi,0,r,s),Xi("cn1",n,e,Pi,-i,0,a),Xi("cn2",n,e,Pi,i,0,a),Xi("cn3",n,e,Pi,0,-r,a),Xi("cn4",n,e,Pi,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xi(t,e,n,i,r,a,s){Gy.set(r,a,s).unproject(i);const o=e[t];if(o!==void 0){const l=n.getAttribute("position");for(let f=0,h=o.length;f<h;f++)l.setXYZ(o[f],Gy.x,Gy.y,Gy.z)}}const ky=new ea;class LK extends vl{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),a=new Zt;a.setIndex(new Bn(i,1)),a.setAttribute("position",new Bn(r,3)),super(a,new xa({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&ky.setFromObject(this.object),ky.isEmpty())return;const e=ky.min,n=ky.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class PK extends vl{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Zt;a.setIndex(new Bn(i,1)),a.setAttribute("position",new Et(r,3)),super(a,new xa({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class IK extends Bu{constructor(e,n=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Zt;s.setAttribute("position",new Et(a,3)),s.computeBoundingSphere(),super(s,new xa({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Zt;l.setAttribute("position",new Et(o,3)),l.computeBoundingSphere(),this.add(new Mi(l,new bc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const LU=new k;let jy,oM;class zK extends xn{constructor(e=new k(0,0,1),n=new k(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",jy===void 0&&(jy=new Zt,jy.setAttribute("position",new Et([0,0,0,0,1,0],3)),oM=new Hv(.5,1,5,1),oM.translate(0,-.5,0)),this.position.copy(n),this.line=new Bu(jy,new xa({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mi(oM,new bc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{LU.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(LU,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class BK extends vl{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Zt;r.setAttribute("position",new Et(n,3)),r.setAttribute("color",new Et(i,3));const a=new xa({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,n,i){const r=new lt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(n),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class FK{constructor(){this.type="ShapePath",this.color=new lt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new ib,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,a,s){return this.currentPath.bezierCurveTo(e,n,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const x=[];for(let E=0,T=v.length;E<T;E++){const w=v[E],R=new Tu;R.curves=w.curves,x.push(R)}return x}function i(v,x){const E=x.length;let T=!1;for(let w=E-1,R=0;R<E;w=R++){let N=x[w],U=x[R],A=U.x-N.x,C=U.y-N.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(N=x[R],A=-A,U=x[w],C=-C),v.y<N.y||v.y>U.y)continue;if(v.y===N.y){if(v.x===N.x)return!0}else{const I=C*(v.x-N.x)-A*(v.y-N.y);if(I===0)return!0;if(I<0)continue;T=!T}}else{if(v.y!==N.y)continue;if(U.x<=v.x&&v.x<=N.x||N.x<=v.x&&v.x<=U.x)return!0}}return T}const r=Do.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const f=[];if(a.length===1)return o=a[0],l=new Tu,l.curves=o.curves,f.push(l),f;let h=!r(a[0].getPoints());h=e?!h:h;const d=[],p=[];let g=[],y=0,S;p[y]=void 0,g[y]=[];for(let v=0,x=a.length;v<x;v++)o=a[v],S=o.getPoints(),s=r(S),s=e?!s:s,s?(!h&&p[y]&&y++,p[y]={s:new Tu,p:S},p[y].s.curves=o.curves,h&&y++,g[y]=[]):g[y].push({h:o,p:S[0]});if(!p[0])return n(a);if(p.length>1){let v=!1,x=0;for(let E=0,T=p.length;E<T;E++)d[E]=[];for(let E=0,T=p.length;E<T;E++){const w=g[E];for(let R=0;R<w.length;R++){const N=w[R];let U=!0;for(let A=0;A<p.length;A++)i(N.p,p[A].p)&&(E!==A&&x++,U?(U=!1,d[A].push(N)):v=!0);U&&d[E].push(N)}}x>0&&v===!1&&(g=d)}let b;for(let v=0,x=p.length;v<x;v++){l=p[v].s,f.push(l),b=g[v];for(let E=0,T=b.length;E<T;E++)l.holes.push(b[E].h)}return f}}class HK extends ws{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ft("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function VK(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function GK(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function kK(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function cA(t,e,n,i){const r=jK(i);switch(n){case C4:return t*e;case Iv:return t*e/r.components*r.byteLength;case zv:return t*e/r.components*r.byteLength;case bh:return t*e*2/r.components*r.byteLength;case n2:return t*e*2/r.components*r.byteLength;case R4:return t*e*3/r.components*r.byteLength;case Zi:return t*e*4/r.components*r.byteLength;case i2:return t*e*4/r.components*r.byteLength;case pg:case mg:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case gg:case vg:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Sx:case Mx:return Math.max(t,16)*Math.max(e,8)/4;case bx:case Ex:return Math.max(t,8)*Math.max(e,8)/2;case Tx:case Ax:case Cx:case Rx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case wx:case Dx:case Ox:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Nx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Ux:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case Lx:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Px:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Ix:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case zx:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case Bx:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Fx:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Hx:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Vx:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Gx:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case kx:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case jx:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case Xx:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Wx:case Yx:case qx:return Math.ceil(t/4)*Math.ceil(e/4)*16;case Zx:case $x:return Math.ceil(t/4)*Math.ceil(e/4)*8;case Kx:case Qx:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function jK(t){switch(t){case fi:case Qb:return{byteLength:1,components:1};case jp:case Jb:case Ei:return{byteLength:2,components:1};case e2:case t2:return{byteLength:2,components:4};case Fa:case Pv:case ai:return{byteLength:4,components:1};case A4:case w4:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}class XK{static contain(e,n){return VK(e,n)}static cover(e,n){return GK(e,n)}static fill(e){return kK(e)}static getByteLength(e,n,i,r){return cA(e,n,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Bh}}));typeof window<"u"&&(window.__THREE__?ft("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Bh);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function iF(){let t=null,e=!1,n=null,i=null;function r(a,s){n(a,s),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function WK(t){const e=new WeakMap;function n(o,l){const f=o.array,h=o.usage,d=f.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,f,h),o.onUploadCallback();let g;if(f instanceof Float32Array)g=t.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)g=t.HALF_FLOAT;else if(f instanceof Uint16Array)o.isFloat16BufferAttribute?g=t.HALF_FLOAT:g=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)g=t.SHORT;else if(f instanceof Uint32Array)g=t.UNSIGNED_INT;else if(f instanceof Int32Array)g=t.INT;else if(f instanceof Int8Array)g=t.BYTE;else if(f instanceof Uint8Array)g=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)g=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:p,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,l,f){const h=l.array,d=l.updateRanges;if(t.bindBuffer(f,o),d.length===0)t.bufferSubData(f,0,h);else{d.sort((g,y)=>g.start-y.start);let p=0;for(let g=1;g<d.length;g++){const y=d[p],S=d[g];S.start<=y.start+y.count+1?y.count=Math.max(y.count,S.start+S.count-y.start):(++p,d[p]=S)}d.length=p+1;for(let g=0,y=d.length;g<y;g++){const S=d[g];t.bufferSubData(f,S.start*h.BYTES_PER_ELEMENT,h,S.start,S.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const f=e.get(o);if(f===void 0)e.set(o,n(o,l));else if(f.version<o.version){if(f.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,o,l),f.version=o.version}}return{get:r,remove:a,update:s}}var YK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,qK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,ZK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,$K=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KK=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,QK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,JK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,eQ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,tQ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,nQ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,iQ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,rQ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,aQ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,sQ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,oQ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lQ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,cQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fQ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,hQ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,dQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,mQ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,gQ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,vQ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yQ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,_Q=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xQ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,bQ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,SQ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,EQ="gl_FragColor = linearToOutputTexel( gl_FragColor );",MQ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,TQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,AQ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,wQ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CQ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,DQ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,OQ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,NQ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,UQ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,LQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,PQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,IQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,zQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,BQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,FQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,HQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,VQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,GQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,kQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,jQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,XQ=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,WQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,YQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,ZQ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,$Q=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KQ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,QQ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,JQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,eJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,tJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nJ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,aJ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,sJ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,oJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,lJ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,cJ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,uJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,fJ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,hJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,mJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,gJ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,vJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,yJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,_J=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xJ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,bJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,SJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,EJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MJ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,TJ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,AJ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,wJ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,RJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,DJ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,OJ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,NJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,UJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,LJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,PJ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IJ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,zJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,BJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,FJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,HJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,VJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,GJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,jJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,XJ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const WJ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,YJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ZJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$J=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,QJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,JJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,eee=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,tee=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,nee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,iee=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ree=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,aee=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,see=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,oee=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lee=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cee=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uee=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fee=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hee=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,dee=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pee=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mee=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gee=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,vee=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yee=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_ee=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xee=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,bee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,See=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Eee=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mee=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Tee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nn={alphahash_fragment:YK,alphahash_pars_fragment:qK,alphamap_fragment:ZK,alphamap_pars_fragment:$K,alphatest_fragment:KK,alphatest_pars_fragment:QK,aomap_fragment:JK,aomap_pars_fragment:eQ,batching_pars_vertex:tQ,batching_vertex:nQ,begin_vertex:iQ,beginnormal_vertex:rQ,bsdfs:aQ,iridescence_fragment:sQ,bumpmap_pars_fragment:oQ,clipping_planes_fragment:lQ,clipping_planes_pars_fragment:cQ,clipping_planes_pars_vertex:uQ,clipping_planes_vertex:fQ,color_fragment:hQ,color_pars_fragment:dQ,color_pars_vertex:pQ,color_vertex:mQ,common:gQ,cube_uv_reflection_fragment:vQ,defaultnormal_vertex:yQ,displacementmap_pars_vertex:_Q,displacementmap_vertex:xQ,emissivemap_fragment:bQ,emissivemap_pars_fragment:SQ,colorspace_fragment:EQ,colorspace_pars_fragment:MQ,envmap_fragment:TQ,envmap_common_pars_fragment:AQ,envmap_pars_fragment:wQ,envmap_pars_vertex:CQ,envmap_physical_pars_fragment:FQ,envmap_vertex:RQ,fog_vertex:DQ,fog_pars_vertex:OQ,fog_fragment:NQ,fog_pars_fragment:UQ,gradientmap_pars_fragment:LQ,lightmap_pars_fragment:PQ,lights_lambert_fragment:IQ,lights_lambert_pars_fragment:zQ,lights_pars_begin:BQ,lights_toon_fragment:HQ,lights_toon_pars_fragment:VQ,lights_phong_fragment:GQ,lights_phong_pars_fragment:kQ,lights_physical_fragment:jQ,lights_physical_pars_fragment:XQ,lights_fragment_begin:WQ,lights_fragment_maps:YQ,lights_fragment_end:qQ,logdepthbuf_fragment:ZQ,logdepthbuf_pars_fragment:$Q,logdepthbuf_pars_vertex:KQ,logdepthbuf_vertex:QQ,map_fragment:JQ,map_pars_fragment:eJ,map_particle_fragment:tJ,map_particle_pars_fragment:nJ,metalnessmap_fragment:iJ,metalnessmap_pars_fragment:rJ,morphinstance_vertex:aJ,morphcolor_vertex:sJ,morphnormal_vertex:oJ,morphtarget_pars_vertex:lJ,morphtarget_vertex:cJ,normal_fragment_begin:uJ,normal_fragment_maps:fJ,normal_pars_fragment:hJ,normal_pars_vertex:dJ,normal_vertex:pJ,normalmap_pars_fragment:mJ,clearcoat_normal_fragment_begin:gJ,clearcoat_normal_fragment_maps:vJ,clearcoat_pars_fragment:yJ,iridescence_pars_fragment:_J,opaque_fragment:xJ,packing:bJ,premultiplied_alpha_fragment:SJ,project_vertex:EJ,dithering_fragment:MJ,dithering_pars_fragment:TJ,roughnessmap_fragment:AJ,roughnessmap_pars_fragment:wJ,shadowmap_pars_fragment:CJ,shadowmap_pars_vertex:RJ,shadowmap_vertex:DJ,shadowmask_pars_fragment:OJ,skinbase_vertex:NJ,skinning_pars_vertex:UJ,skinning_vertex:LJ,skinnormal_vertex:PJ,specularmap_fragment:IJ,specularmap_pars_fragment:zJ,tonemapping_fragment:BJ,tonemapping_pars_fragment:FJ,transmission_fragment:HJ,transmission_pars_fragment:VJ,uv_pars_fragment:GJ,uv_pars_vertex:kJ,uv_vertex:jJ,worldpos_vertex:XJ,background_vert:WJ,background_frag:YJ,backgroundCube_vert:qJ,backgroundCube_frag:ZJ,cube_vert:$J,cube_frag:KJ,depth_vert:QJ,depth_frag:JJ,distance_vert:eee,distance_frag:tee,equirect_vert:nee,equirect_frag:iee,linedashed_vert:ree,linedashed_frag:aee,meshbasic_vert:see,meshbasic_frag:oee,meshlambert_vert:lee,meshlambert_frag:cee,meshmatcap_vert:uee,meshmatcap_frag:fee,meshnormal_vert:hee,meshnormal_frag:dee,meshphong_vert:pee,meshphong_frag:mee,meshphysical_vert:gee,meshphysical_frag:vee,meshtoon_vert:yee,meshtoon_frag:_ee,points_vert:xee,points_frag:bee,shadow_vert:See,shadow_frag:Eee,sprite_vert:Mee,sprite_frag:Tee},dt={common:{diffuse:{value:new lt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $t}},envmap:{envMap:{value:null},envMapRotation:{value:new $t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $t},normalScale:{value:new xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0},uvTransform:{value:new $t}},sprite:{diffuse:{value:new lt(16777215)},opacity:{value:1},center:{value:new xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}}},Co={basic:{uniforms:ca([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:ca([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new lt(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:ca([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new lt(0)},specular:{value:new lt(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:ca([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:ca([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new lt(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:ca([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:ca([dt.points,dt.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:ca([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:ca([dt.common,dt.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:ca([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:ca([dt.sprite,dt.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new $t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $t}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distance:{uniforms:ca([dt.common,dt.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distance_vert,fragmentShader:nn.distance_frag},shadow:{uniforms:ca([dt.lights,dt.fog,{color:{value:new lt(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};Co.physical={uniforms:ca([Co.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $t},clearcoatNormalScale:{value:new xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $t},sheen:{value:0},sheenColor:{value:new lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $t},transmissionSamplerSize:{value:new xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $t},attenuationDistance:{value:0},attenuationColor:{value:new lt(0)},specularColor:{value:new lt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $t},anisotropyVector:{value:new xe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $t}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const Xy={r:0,b:0,g:0},If=new Ts,Aee=new Wt;function wee(t,e,n,i,r,a,s){const o=new lt(0);let l=a===!0?0:1,f,h,d=null,p=0,g=null;function y(E){let T=E.isScene===!0?E.background:null;return T&&T.isTexture&&(T=(E.backgroundBlurriness>0?n:e).get(T)),T}function S(E){let T=!1;const w=y(E);w===null?v(o,l):w&&w.isColor&&(v(w,1),T=!0);const R=t.xr.getEnvironmentBlendMode();R==="additive"?i.buffers.color.setClear(0,0,0,1,s):R==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(t.autoClear||T)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function b(E,T){const w=y(T);w&&(w.isCubeTexture||w.mapping===Em)?(h===void 0&&(h=new Mi(new Hh(1,1,1),new vi({name:"BackgroundCubeMaterial",uniforms:Zp(Co.backgroundCube.uniforms),vertexShader:Co.backgroundCube.vertexShader,fragmentShader:Co.backgroundCube.fragmentShader,side:lr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(R,N,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),If.copy(T.backgroundRotation),If.x*=-1,If.y*=-1,If.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(If.y*=-1,If.z*=-1),h.material.uniforms.envMap.value=w,h.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(Aee.makeRotationFromEuler(If)),h.material.toneMapped=pn.getTransfer(w.colorSpace)!==Ln,(d!==w||p!==w.version||g!==t.toneMapping)&&(h.material.needsUpdate=!0,d=w,p=w.version,g=t.toneMapping),h.layers.enableAll(),E.unshift(h,h.geometry,h.material,0,0,null)):w&&w.isTexture&&(f===void 0&&(f=new Mi(new Ju(2,2),new vi({name:"BackgroundMaterial",uniforms:Zp(Co.background.uniforms),vertexShader:Co.background.vertexShader,fragmentShader:Co.background.fragmentShader,side:Oo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=w,f.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,f.material.toneMapped=pn.getTransfer(w.colorSpace)!==Ln,w.matrixAutoUpdate===!0&&w.updateMatrix(),f.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||p!==w.version||g!==t.toneMapping)&&(f.material.needsUpdate=!0,d=w,p=w.version,g=t.toneMapping),f.layers.enableAll(),E.unshift(f,f.geometry,f.material,0,0,null))}function v(E,T){E.getRGB(Xy,s7(t)),i.buffers.color.setClear(Xy.r,Xy.g,Xy.b,T,s)}function x(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return o},setClearColor:function(E,T=1){o.set(E),l=T,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,v(o,l)},render:S,addToRenderList:b,dispose:x}}function Cee(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=p(null);let a=r,s=!1;function o(C,I,X,j,Y){let Z=!1;const z=d(j,X,I);a!==z&&(a=z,f(a.object)),Z=g(C,j,X,Y),Z&&y(C,j,X,Y),Y!==null&&e.update(Y,t.ELEMENT_ARRAY_BUFFER),(Z||s)&&(s=!1,T(C,I,X,j),Y!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))}function l(){return t.createVertexArray()}function f(C){return t.bindVertexArray(C)}function h(C){return t.deleteVertexArray(C)}function d(C,I,X){const j=X.wireframe===!0;let Y=i[C.id];Y===void 0&&(Y={},i[C.id]=Y);let Z=Y[I.id];Z===void 0&&(Z={},Y[I.id]=Z);let z=Z[j];return z===void 0&&(z=p(l()),Z[j]=z),z}function p(C){const I=[],X=[],j=[];for(let Y=0;Y<n;Y++)I[Y]=0,X[Y]=0,j[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:X,attributeDivisors:j,object:C,attributes:{},index:null}}function g(C,I,X,j){const Y=a.attributes,Z=I.attributes;let z=0;const G=X.getAttributes();for(const q in G)if(G[q].location>=0){const le=Y[q];let me=Z[q];if(me===void 0&&(q==="instanceMatrix"&&C.instanceMatrix&&(me=C.instanceMatrix),q==="instanceColor"&&C.instanceColor&&(me=C.instanceColor)),le===void 0||le.attribute!==me||me&&le.data!==me.data)return!0;z++}return a.attributesNum!==z||a.index!==j}function y(C,I,X,j){const Y={},Z=I.attributes;let z=0;const G=X.getAttributes();for(const q in G)if(G[q].location>=0){let le=Z[q];le===void 0&&(q==="instanceMatrix"&&C.instanceMatrix&&(le=C.instanceMatrix),q==="instanceColor"&&C.instanceColor&&(le=C.instanceColor));const me={};me.attribute=le,le&&le.data&&(me.data=le.data),Y[q]=me,z++}a.attributes=Y,a.attributesNum=z,a.index=j}function S(){const C=a.newAttributes;for(let I=0,X=C.length;I<X;I++)C[I]=0}function b(C){v(C,0)}function v(C,I){const X=a.newAttributes,j=a.enabledAttributes,Y=a.attributeDivisors;X[C]=1,j[C]===0&&(t.enableVertexAttribArray(C),j[C]=1),Y[C]!==I&&(t.vertexAttribDivisor(C,I),Y[C]=I)}function x(){const C=a.newAttributes,I=a.enabledAttributes;for(let X=0,j=I.length;X<j;X++)I[X]!==C[X]&&(t.disableVertexAttribArray(X),I[X]=0)}function E(C,I,X,j,Y,Z,z){z===!0?t.vertexAttribIPointer(C,I,X,Y,Z):t.vertexAttribPointer(C,I,X,j,Y,Z)}function T(C,I,X,j){S();const Y=j.attributes,Z=X.getAttributes(),z=I.defaultAttributeValues;for(const G in Z){const q=Z[G];if(q.location>=0){let se=Y[G];if(se===void 0&&(G==="instanceMatrix"&&C.instanceMatrix&&(se=C.instanceMatrix),G==="instanceColor"&&C.instanceColor&&(se=C.instanceColor)),se!==void 0){const le=se.normalized,me=se.itemSize,Ae=e.get(se);if(Ae===void 0)continue;const Le=Ae.buffer,Ke=Ae.type,yt=Ae.bytesPerElement,he=Ke===t.INT||Ke===t.UNSIGNED_INT||se.gpuType===Pv;if(se.isInterleavedBufferAttribute){const Te=se.data,Fe=Te.stride,xt=se.offset;if(Te.isInstancedInterleavedBuffer){for(let Ze=0;Ze<q.locationSize;Ze++)v(q.location+Ze,Te.meshPerAttribute);C.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Ze=0;Ze<q.locationSize;Ze++)b(q.location+Ze);t.bindBuffer(t.ARRAY_BUFFER,Le);for(let Ze=0;Ze<q.locationSize;Ze++)E(q.location+Ze,me/q.locationSize,Ke,le,Fe*yt,(xt+me/q.locationSize*Ze)*yt,he)}else{if(se.isInstancedBufferAttribute){for(let Te=0;Te<q.locationSize;Te++)v(q.location+Te,se.meshPerAttribute);C.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Te=0;Te<q.locationSize;Te++)b(q.location+Te);t.bindBuffer(t.ARRAY_BUFFER,Le);for(let Te=0;Te<q.locationSize;Te++)E(q.location+Te,me/q.locationSize,Ke,le,me*yt,me/q.locationSize*Te*yt,he)}}else if(z!==void 0){const le=z[G];if(le!==void 0)switch(le.length){case 2:t.vertexAttrib2fv(q.location,le);break;case 3:t.vertexAttrib3fv(q.location,le);break;case 4:t.vertexAttrib4fv(q.location,le);break;default:t.vertexAttrib1fv(q.location,le)}}}}x()}function w(){U();for(const C in i){const I=i[C];for(const X in I){const j=I[X];for(const Y in j)h(j[Y].object),delete j[Y];delete I[X]}delete i[C]}}function R(C){if(i[C.id]===void 0)return;const I=i[C.id];for(const X in I){const j=I[X];for(const Y in j)h(j[Y].object),delete j[Y];delete I[X]}delete i[C.id]}function N(C){for(const I in i){const X=i[I];if(X[C.id]===void 0)continue;const j=X[C.id];for(const Y in j)h(j[Y].object),delete j[Y];delete X[C.id]}}function U(){A(),s=!0,a!==r&&(a=r,f(a.object))}function A(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:U,resetDefaultState:A,dispose:w,releaseStatesOfGeometry:R,releaseStatesOfProgram:N,initAttributes:S,enableAttribute:b,disableUnusedAttributes:x}}function Ree(t,e,n){let i;function r(f){i=f}function a(f,h){t.drawArrays(i,f,h),n.update(h,i,1)}function s(f,h,d){d!==0&&(t.drawArraysInstanced(i,f,h,d),n.update(h,i,d))}function o(f,h,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,h,0,d);let g=0;for(let y=0;y<d;y++)g+=h[y];n.update(g,i,1)}function l(f,h,d,p){if(d===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let y=0;y<f.length;y++)s(f[y],h[y],p[y]);else{g.multiDrawArraysInstancedWEBGL(i,f,0,h,0,p,0,d);let y=0;for(let S=0;S<d;S++)y+=h[S]*p[S];n.update(y,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Dee(t,e,n,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(N){return!(N!==Zi&&i.convert(N)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(N){const U=N===Ei&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==fi&&i.convert(N)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==ai&&!U)}function l(N){if(N==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=n.precision!==void 0?n.precision:"highp";const h=l(f);h!==f&&(ft("WebGLRenderer:",f,"not supported, using",h,"instead."),f=h);const d=n.logarithmicDepthBuffer===!0,p=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),g=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=t.getParameter(t.MAX_TEXTURE_SIZE),b=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),E=t.getParameter(t.MAX_VARYING_VECTORS),T=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),w=t.getParameter(t.MAX_SAMPLES),R=t.getParameter(t.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:f,logarithmicDepthBuffer:d,reversedDepthBuffer:p,maxTextures:g,maxVertexTextures:y,maxTextureSize:S,maxCubemapSize:b,maxAttributes:v,maxVertexUniforms:x,maxVaryings:E,maxFragmentUniforms:T,maxSamples:w,samples:R}}function Oee(t){const e=this;let n=null,i=0,r=!1,a=!1;const s=new Xl,o=new $t,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const g=d.length!==0||p||i!==0||r;return r=p,i=d.length,g},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,p){n=h(d,p,0)},this.setState=function(d,p,g){const y=d.clippingPlanes,S=d.clipIntersection,b=d.clipShadows,v=t.get(d);if(!r||y===null||y.length===0||a&&!b)a?h(null):f();else{const x=a?0:i,E=x*4;let T=v.clippingState||null;l.value=T,T=h(y,p,E,g);for(let w=0;w!==E;++w)T[w]=n[w];v.clippingState=T,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=x}};function f(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,p,g,y){const S=d!==null?d.length:0;let b=null;if(S!==0){if(b=l.value,y!==!0||b===null){const v=g+S*4,x=p.matrixWorldInverse;o.getNormalMatrix(x),(b===null||b.length<v)&&(b=new Float32Array(v));for(let E=0,T=g;E!==S;++E,T+=4)s.copy(d[E]).applyMatrix4(x,o),s.normal.toArray(b,T),b[T+3]=s.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,b}}function Nee(t){let e=new WeakMap;function n(s,o){return o===kp?s.mapping=No:o===Wg&&(s.mapping=Iu),s}function i(s){if(s&&s.isTexture){const o=s.mapping;if(o===kp||o===Wg)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const f=new u2(l.height);return f.fromEquirectangularTexture(t,s),e.set(s,f),s.addEventListener("dispose",r),n(f.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const du=4,PU=[.125,.215,.35,.446,.526,.582],qf=20,Uee=256,D0=new _s,IU=new lt;let lM=null,cM=0,uM=0,fM=!1;const Lee=new k;class uA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,i=.1,r=100,a={}){const{size:s=256,position:o=Lee}=a;lM=this._renderer.getRenderTarget(),cM=this._renderer.getActiveCubeFace(),uM=this._renderer.getActiveMipmapLevel(),fM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,o),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=FU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=BU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(lM,cM,uM),this._renderer.xr.enabled=fM,e.scissorTest=!1,Hd(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===No||e.mapping===Iu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),lM=this._renderer.getRenderTarget(),cM=this._renderer.getActiveCubeFace(),uM=this._renderer.getActiveMipmapLevel(),fM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:rn,minFilter:rn,generateMipmaps:!1,type:Ei,format:Zi,colorSpace:Ms,depthBuffer:!1},r=zU(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=zU(e,n,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=Pee(a)),this._blurMaterial=zee(a,e,n),this._ggxMaterial=Iee(a,e,n)}return r}_compileMaterial(e){const n=new Mi(new Zt,e);this._renderer.compile(n,D0)}_sceneToCubeUV(e,n,i,r,a){const l=new bi(90,1,n,i),f=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,g=d.toneMapping;d.getClearColor(IU),d.toneMapping=gs,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Mi(new Hh,new bc({name:"PMREM.Background",side:lr,depthWrite:!1,depthTest:!1})));const S=this._backgroundBox,b=S.material;let v=!1;const x=e.background;x?x.isColor&&(b.color.copy(x),e.background=null,v=!0):(b.color.copy(IU),v=!0);for(let E=0;E<6;E++){const T=E%3;T===0?(l.up.set(0,f[E],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x+h[E],a.y,a.z)):T===1?(l.up.set(0,0,f[E]),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y+h[E],a.z)):(l.up.set(0,f[E],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y,a.z+h[E]));const w=this._cubeSize;Hd(r,T*w,E>2?w:0,w,w),d.setRenderTarget(r),v&&d.render(S,l),d.render(e,l)}d.toneMapping=g,d.autoClear=p,e.background=x}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===No||e.mapping===Iu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=FU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=BU());const a=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;Hd(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(s,D0)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodMeshes.length;for(let a=1;a<r;a++)this._applyGGXFilter(e,a-1,a);n.autoClear=i}_applyGGXFilter(e,n,i){const r=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,o=this._lodMeshes[i];o.material=s;const l=s.uniforms,f=i/(this._lodMeshes.length-1),h=n/(this._lodMeshes.length-1),d=Math.sqrt(f*f-h*h),p=0+f*1.25,g=d*p,{_lodMax:y}=this,S=this._sizeLods[i],b=3*S*(i>y-du?i-y+du:0),v=4*(this._cubeSize-S);l.envMap.value=e.texture,l.roughness.value=g,l.mipInt.value=y-n,Hd(a,b,v,3*S,2*S),r.setRenderTarget(a),r.render(o,D0),l.envMap.value=a.texture,l.roughness.value=0,l.mipInt.value=y-i,Hd(e,b,v,3*S,2*S),r.setRenderTarget(e),r.render(o,D0)}_blur(e,n,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,n,i,r,a,s,o){const l=this._renderer,f=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&Ut("blur direction must be either latitudinal or longitudinal!");const h=3,d=this._lodMeshes[r];d.material=f;const p=f.uniforms,g=this._sizeLods[i]-1,y=isFinite(a)?Math.PI/(2*g):2*Math.PI/(2*qf-1),S=a/y,b=isFinite(a)?1+Math.floor(h*S):qf;b>qf&&ft(`sigmaRadians, ${a}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${qf}`);const v=[];let x=0;for(let N=0;N<qf;++N){const U=N/S,A=Math.exp(-U*U/2);v.push(A),N===0?x+=A:N<b&&(x+=2*A)}for(let N=0;N<v.length;N++)v[N]=v[N]/x;p.envMap.value=e.texture,p.samples.value=b,p.weights.value=v,p.latitudinal.value=s==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:E}=this;p.dTheta.value=y,p.mipInt.value=E-i;const T=this._sizeLods[r],w=3*T*(r>E-du?r-E+du:0),R=4*(this._cubeSize-T);Hd(n,w,R,3*T,2*T),l.setRenderTarget(n),l.render(d,D0)}}function Pee(t){const e=[],n=[],i=[];let r=t;const a=t-du+1+PU.length;for(let s=0;s<a;s++){const o=Math.pow(2,r);e.push(o);let l=1/o;s>t-du?l=PU[s-t+du-1]:s===0&&(l=0),n.push(l);const f=1/(o-2),h=-f,d=1+f,p=[h,h,d,h,d,d,h,h,d,d,h,d],g=6,y=6,S=3,b=2,v=1,x=new Float32Array(S*y*g),E=new Float32Array(b*y*g),T=new Float32Array(v*y*g);for(let R=0;R<g;R++){const N=R%3*2/3-1,U=R>2?0:-1,A=[N,U,0,N+2/3,U,0,N+2/3,U+1,0,N,U,0,N+2/3,U+1,0,N,U+1,0];x.set(A,S*y*R),E.set(p,b*y*R);const C=[R,R,R,R,R,R];T.set(C,v*y*R)}const w=new Zt;w.setAttribute("position",new Bn(x,S)),w.setAttribute("uv",new Bn(E,b)),w.setAttribute("faceIndex",new Bn(T,v)),i.push(new Mi(w,null)),r>du&&r--}return{lodMeshes:i,sizeLods:e,sigmas:n}}function zU(t,e,n){const i=new si(t,e,n);return i.texture.mapping=Em,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Hd(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Iee(t,e,n){return new vi({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:Uee,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:D2(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function zee(t,e,n){const i=new Float32Array(qf),r=new k(0,1,0);return new vi({name:"SphericalGaussianBlur",defines:{n:qf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:D2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function BU(){return new vi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:D2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function FU(){return new vi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:D2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Hr,depthTest:!1,depthWrite:!1})}function D2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Bee(t){let e=new WeakMap,n=null;function i(o){if(o&&o.isTexture){const l=o.mapping,f=l===kp||l===Wg,h=l===No||l===Iu;if(f||h){let d=e.get(o);const p=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==p)return n===null&&(n=new uA(t)),d=f?n.fromEquirectangular(o,d):n.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const g=o.image;return f&&g&&g.height>0||h&&g&&r(g)?(n===null&&(n=new uA(t)),d=f?n.fromEquirectangular(o):n.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",a),d.texture):null}}}return o}function r(o){let l=0;const f=6;for(let h=0;h<f;h++)o[h]!==void 0&&l++;return l===f}function a(o){const l=o.target;l.removeEventListener("dispose",a);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:s}}function Fee(t){const e={};function n(i){if(e[i]!==void 0)return e[i];const r=t.getExtension(i);return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&Wp("WebGLRenderer: "+i+" extension not supported."),r}}}function Hee(t,e,n,i){const r={},a=new WeakMap;function s(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);p.removeEventListener("dispose",s),delete r[p.id];const g=a.get(p);g&&(e.remove(g),a.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function o(d,p){return r[p.id]===!0||(p.addEventListener("dispose",s),r[p.id]=!0,n.memory.geometries++),p}function l(d){const p=d.attributes;for(const g in p)e.update(p[g],t.ARRAY_BUFFER)}function f(d){const p=[],g=d.index,y=d.attributes.position;let S=0;if(g!==null){const x=g.array;S=g.version;for(let E=0,T=x.length;E<T;E+=3){const w=x[E+0],R=x[E+1],N=x[E+2];p.push(w,R,R,N,N,w)}}else if(y!==void 0){const x=y.array;S=y.version;for(let E=0,T=x.length/3-1;E<T;E+=3){const w=E+0,R=E+1,N=E+2;p.push(w,R,R,N,N,w)}}else return;const b=new(t7(p)?L4:U4)(p,1);b.version=S;const v=a.get(d);v&&e.remove(v),a.set(d,b)}function h(d){const p=a.get(d);if(p){const g=d.index;g!==null&&p.version<g.version&&f(d)}else f(d);return a.get(d)}return{get:o,update:l,getWireframeAttribute:h}}function Vee(t,e,n){let i;function r(p){i=p}let a,s;function o(p){a=p.type,s=p.bytesPerElement}function l(p,g){t.drawElements(i,g,a,p*s),n.update(g,i,1)}function f(p,g,y){y!==0&&(t.drawElementsInstanced(i,g,a,p*s,y),n.update(g,i,y))}function h(p,g,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,a,p,0,y);let b=0;for(let v=0;v<y;v++)b+=g[v];n.update(b,i,1)}function d(p,g,y,S){if(y===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let v=0;v<p.length;v++)f(p[v]/s,g[v],S[v]);else{b.multiDrawElementsInstancedWEBGL(i,g,0,a,p,0,S,0,y);let v=0;for(let x=0;x<y;x++)v+=g[x]*S[x];n.update(v,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=f,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function Gee(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,o){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=o*(a/3);break;case t.LINES:n.lines+=o*(a/2);break;case t.LINE_STRIP:n.lines+=o*(a-1);break;case t.LINE_LOOP:n.lines+=o*a;break;case t.POINTS:n.points+=o*a;break;default:Ut("WebGLInfo: Unknown draw mode:",s);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function kee(t,e,n){const i=new WeakMap,r=new jn;function a(s,o,l){const f=s.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=h!==void 0?h.length:0;let p=i.get(o);if(p===void 0||p.count!==d){let C=function(){U.dispose(),i.delete(o),o.removeEventListener("dispose",C)};var g=C;p!==void 0&&p.texture.dispose();const y=o.morphAttributes.position!==void 0,S=o.morphAttributes.normal!==void 0,b=o.morphAttributes.color!==void 0,v=o.morphAttributes.position||[],x=o.morphAttributes.normal||[],E=o.morphAttributes.color||[];let T=0;y===!0&&(T=1),S===!0&&(T=2),b===!0&&(T=3);let w=o.attributes.position.count*T,R=1;w>e.maxTextureSize&&(R=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const N=new Float32Array(w*R*4*d),U=new o2(N,w,R,d);U.type=ai,U.needsUpdate=!0;const A=T*4;for(let I=0;I<d;I++){const X=v[I],j=x[I],Y=E[I],Z=w*R*4*I;for(let z=0;z<X.count;z++){const G=z*A;y===!0&&(r.fromBufferAttribute(X,z),N[Z+G+0]=r.x,N[Z+G+1]=r.y,N[Z+G+2]=r.z,N[Z+G+3]=0),S===!0&&(r.fromBufferAttribute(j,z),N[Z+G+4]=r.x,N[Z+G+5]=r.y,N[Z+G+6]=r.z,N[Z+G+7]=0),b===!0&&(r.fromBufferAttribute(Y,z),N[Z+G+8]=r.x,N[Z+G+9]=r.y,N[Z+G+10]=r.z,N[Z+G+11]=Y.itemSize===4?r.w:1)}}p={count:d,texture:U,size:new xe(w,R)},i.set(o,p),o.addEventListener("dispose",C)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let y=0;for(let b=0;b<f.length;b++)y+=f[b];const S=o.morphTargetsRelative?1:1-y;l.getUniforms().setValue(t,"morphTargetBaseInfluence",S),l.getUniforms().setValue(t,"morphTargetInfluences",f)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:a}}function jee(t,e,n,i){let r=new WeakMap;function a(l){const f=i.render.frame,h=l.geometry,d=e.get(l,h);if(r.get(d)!==f&&(e.update(d),r.set(d,f)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==f&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,f))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==f&&(p.update(),r.set(p,f))}return d}function s(){r=new WeakMap}function o(l){const f=l.target;f.removeEventListener("dispose",o),n.remove(f.instanceMatrix),f.instanceColor!==null&&n.remove(f.instanceColor)}return{update:a,dispose:s}}const Xee={[_4]:"LINEAR_TONE_MAPPING",[x4]:"REINHARD_TONE_MAPPING",[b4]:"CINEON_TONE_MAPPING",[Kb]:"ACES_FILMIC_TONE_MAPPING",[E4]:"AGX_TONE_MAPPING",[M4]:"NEUTRAL_TONE_MAPPING",[S4]:"CUSTOM_TONE_MAPPING"};function Wee(t,e,n,i,r){const a=new si(e,n,{type:t,depthBuffer:i,stencilBuffer:r}),s=new si(e,n,{type:Ei,depthBuffer:!1,stencilBuffer:!1}),o=new Zt;o.setAttribute("position",new Et([-1,3,0,-1,-1,0,3,-1,0],3)),o.setAttribute("uv",new Et([0,2,0,0,2,0],2));const l=new Y4({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),f=new Mi(o,l),h=new _s(-1,1,1,-1,0,1);let d=null,p=null,g=!1,y,S=null,b=[],v=!1;this.setSize=function(x,E){a.setSize(x,E),s.setSize(x,E);for(let T=0;T<b.length;T++){const w=b[T];w.setSize&&w.setSize(x,E)}},this.setEffects=function(x){b=x,v=b.length>0&&b[0].isRenderPass===!0;const E=a.width,T=a.height;for(let w=0;w<b.length;w++){const R=b[w];R.setSize&&R.setSize(E,T)}},this.begin=function(x,E){if(g||x.toneMapping===gs&&b.length===0)return!1;if(S=E,E!==null){const T=E.width,w=E.height;(a.width!==T||a.height!==w)&&this.setSize(T,w)}return v===!1&&x.setRenderTarget(a),y=x.toneMapping,x.toneMapping=gs,!0},this.hasRenderPass=function(){return v},this.end=function(x,E){x.toneMapping=y,g=!0;let T=a,w=s;for(let R=0;R<b.length;R++){const N=b[R];if(N.enabled!==!1&&(N.render(x,w,T,E),N.needsSwap!==!1)){const U=T;T=w,w=U}}if(d!==x.outputColorSpace||p!==x.toneMapping){d=x.outputColorSpace,p=x.toneMapping,l.defines={},pn.getTransfer(d)===Ln&&(l.defines.SRGB_TRANSFER="");const R=Xee[p];R&&(l.defines[R]=""),l.needsUpdate=!0}l.uniforms.tDiffuse.value=T.texture,x.setRenderTarget(S),x.render(f,h),S=null,g=!1},this.isCompositing=function(){return g},this.dispose=function(){a.dispose(),s.dispose(),o.dispose(),l.dispose()}}const rF=new zn,fA=new Fu(1,1),aF=new o2,sF=new l2,oF=new Bv,HU=[],VU=[],GU=new Float32Array(16),kU=new Float32Array(9),jU=new Float32Array(4);function Tm(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=HU[r];if(a===void 0&&(a=new Float32Array(r),HU[r]=a),e!==0){i.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function yr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function _r(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function O2(t,e){let n=VU[e];n===void 0&&(n=new Int32Array(e),VU[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Yee(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function qee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yr(n,e))return;t.uniform2fv(this.addr,e),_r(n,e)}}function Zee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(yr(n,e))return;t.uniform3fv(this.addr,e),_r(n,e)}}function $ee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yr(n,e))return;t.uniform4fv(this.addr,e),_r(n,e)}}function Kee(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(yr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),_r(n,e)}else{if(yr(n,i))return;jU.set(i),t.uniformMatrix2fv(this.addr,!1,jU),_r(n,i)}}function Qee(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(yr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),_r(n,e)}else{if(yr(n,i))return;kU.set(i),t.uniformMatrix3fv(this.addr,!1,kU),_r(n,i)}}function Jee(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(yr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),_r(n,e)}else{if(yr(n,i))return;GU.set(i),t.uniformMatrix4fv(this.addr,!1,GU),_r(n,i)}}function ete(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function tte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yr(n,e))return;t.uniform2iv(this.addr,e),_r(n,e)}}function nte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yr(n,e))return;t.uniform3iv(this.addr,e),_r(n,e)}}function ite(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yr(n,e))return;t.uniform4iv(this.addr,e),_r(n,e)}}function rte(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ate(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yr(n,e))return;t.uniform2uiv(this.addr,e),_r(n,e)}}function ste(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yr(n,e))return;t.uniform3uiv(this.addr,e),_r(n,e)}}function ote(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yr(n,e))return;t.uniform4uiv(this.addr,e),_r(n,e)}}function lte(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let a;this.type===t.SAMPLER_2D_SHADOW?(fA.compareFunction=n.isReversedDepthBuffer()?s2:a2,a=fA):a=rF,n.setTexture2D(e||a,r)}function cte(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||sF,r)}function ute(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||oF,r)}function fte(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||aF,r)}function hte(t){switch(t){case 5126:return Yee;case 35664:return qee;case 35665:return Zee;case 35666:return $ee;case 35674:return Kee;case 35675:return Qee;case 35676:return Jee;case 5124:case 35670:return ete;case 35667:case 35671:return tte;case 35668:case 35672:return nte;case 35669:case 35673:return ite;case 5125:return rte;case 36294:return ate;case 36295:return ste;case 36296:return ote;case 35678:case 36198:case 36298:case 36306:case 35682:return lte;case 35679:case 36299:case 36307:return cte;case 35680:case 36300:case 36308:case 36293:return ute;case 36289:case 36303:case 36311:case 36292:return fte}}function dte(t,e){t.uniform1fv(this.addr,e)}function pte(t,e){const n=Tm(e,this.size,2);t.uniform2fv(this.addr,n)}function mte(t,e){const n=Tm(e,this.size,3);t.uniform3fv(this.addr,n)}function gte(t,e){const n=Tm(e,this.size,4);t.uniform4fv(this.addr,n)}function vte(t,e){const n=Tm(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function yte(t,e){const n=Tm(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function _te(t,e){const n=Tm(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function xte(t,e){t.uniform1iv(this.addr,e)}function bte(t,e){t.uniform2iv(this.addr,e)}function Ste(t,e){t.uniform3iv(this.addr,e)}function Ete(t,e){t.uniform4iv(this.addr,e)}function Mte(t,e){t.uniform1uiv(this.addr,e)}function Tte(t,e){t.uniform2uiv(this.addr,e)}function Ate(t,e){t.uniform3uiv(this.addr,e)}function wte(t,e){t.uniform4uiv(this.addr,e)}function Cte(t,e,n){const i=this.cache,r=e.length,a=O2(n,r);yr(i,a)||(t.uniform1iv(this.addr,a),_r(i,a));let s;this.type===t.SAMPLER_2D_SHADOW?s=fA:s=rF;for(let o=0;o!==r;++o)n.setTexture2D(e[o]||s,a[o])}function Rte(t,e,n){const i=this.cache,r=e.length,a=O2(n,r);yr(i,a)||(t.uniform1iv(this.addr,a),_r(i,a));for(let s=0;s!==r;++s)n.setTexture3D(e[s]||sF,a[s])}function Dte(t,e,n){const i=this.cache,r=e.length,a=O2(n,r);yr(i,a)||(t.uniform1iv(this.addr,a),_r(i,a));for(let s=0;s!==r;++s)n.setTextureCube(e[s]||oF,a[s])}function Ote(t,e,n){const i=this.cache,r=e.length,a=O2(n,r);yr(i,a)||(t.uniform1iv(this.addr,a),_r(i,a));for(let s=0;s!==r;++s)n.setTexture2DArray(e[s]||aF,a[s])}function Nte(t){switch(t){case 5126:return dte;case 35664:return pte;case 35665:return mte;case 35666:return gte;case 35674:return vte;case 35675:return yte;case 35676:return _te;case 5124:case 35670:return xte;case 35667:case 35671:return bte;case 35668:case 35672:return Ste;case 35669:case 35673:return Ete;case 5125:return Mte;case 36294:return Tte;case 36295:return Ate;case 36296:return wte;case 35678:case 36198:case 36298:case 36306:case 35682:return Cte;case 35679:case 36299:case 36307:return Rte;case 35680:case 36300:case 36308:case 36293:return Dte;case 36289:case 36303:case 36311:case 36292:return Ote}}class Ute{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=hte(n.type)}}class Lte{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Nte(n.type)}}class Pte{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const o=r[a];o.setValue(e,n[o.id],i)}}}const hM=/(\w+)(\])?(\[|\.)?/g;function XU(t,e){t.seq.push(e),t.map[e.id]=e}function Ite(t,e,n){const i=t.name,r=i.length;for(hM.lastIndex=0;;){const a=hM.exec(i),s=hM.lastIndex;let o=a[1];const l=a[2]==="]",f=a[3];if(l&&(o=o|0),f===void 0||f==="["&&s+2===r){XU(n,f===void 0?new Ute(o,t,e):new Lte(o,t,e));break}else{let d=n.map[o];d===void 0&&(d=new Pte(o),XU(n,d)),n=d}}}class R_{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const o=e.getActiveUniform(n,s),l=e.getUniformLocation(n,o.name);Ite(o,l,this)}const r=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(s):a.push(s);r.length>0&&(this.seq=r.concat(a))}setValue(e,n,i,r){const a=this.map[n];a!==void 0&&a.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let a=0,s=n.length;a!==s;++a){const o=n[a],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in n&&i.push(s)}return i}}function WU(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const zte=37297;let Bte=0;function Fte(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=r;s<a;s++){const o=s+1;i.push(`${o===e?">":" "} ${o}: ${n[s]}`)}return i.join(`
`)}const YU=new $t;function Hte(t){pn._getMatrix(YU,pn.workingColorSpace,t);const e=`mat3( ${YU.elements.map(n=>n.toFixed(4))} )`;switch(pn.getTransfer(t)){case Kg:return[e,"LinearTransferOETF"];case Ln:return[e,"sRGBTransferOETF"];default:return ft("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function qU(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),a=(t.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+a+`

`+Fte(t.getShaderSource(e),o)}else return a}function Vte(t,e){const n=Hte(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}const Gte={[_4]:"Linear",[x4]:"Reinhard",[b4]:"Cineon",[Kb]:"ACESFilmic",[E4]:"AgX",[M4]:"Neutral",[S4]:"Custom"};function kte(t,e){const n=Gte[e];return n===void 0?(ft("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+t+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Wy=new k;function jte(){pn.getLuminanceCoefficients(Wy);const t=Wy.x.toFixed(4),e=Wy.y.toFixed(4),n=Wy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Xte(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(q0).join(`
`)}function Wte(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function Yte(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=t.getActiveAttrib(e,r),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}function q0(t){return t!==""}function ZU(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function $U(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const qte=/^[ \t]*#include +<([\w\d./]+)>/gm;function hA(t){return t.replace(qte,$te)}const Zte=new Map;function $te(t,e){let n=nn[e];if(n===void 0){const i=Zte.get(e);if(i!==void 0)n=nn[i],ft('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return hA(n)}const Kte=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function KU(t){return t.replace(Kte,Qte)}function Qte(t,e,n,i){let r="";for(let a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function QU(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const Jte={[Ep]:"SHADOWMAP_TYPE_PCF",[Zf]:"SHADOWMAP_TYPE_VSM"};function ene(t){return Jte[t.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const tne={[No]:"ENVMAP_TYPE_CUBE",[Iu]:"ENVMAP_TYPE_CUBE",[Em]:"ENVMAP_TYPE_CUBE_UV"};function nne(t){return t.envMap===!1?"ENVMAP_TYPE_CUBE":tne[t.envMapMode]||"ENVMAP_TYPE_CUBE"}const ine={[Iu]:"ENVMAP_MODE_REFRACTION"};function rne(t){return t.envMap===!1?"ENVMAP_MODE_REFLECTION":ine[t.envMapMode]||"ENVMAP_MODE_REFLECTION"}const ane={[Lv]:"ENVMAP_BLENDING_MULTIPLY",[GB]:"ENVMAP_BLENDING_MIX",[kB]:"ENVMAP_BLENDING_ADD"};function sne(t){return t.envMap===!1?"ENVMAP_BLENDING_NONE":ane[t.combine]||"ENVMAP_BLENDING_NONE"}function one(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function lne(t,e,n,i){const r=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=ene(n),f=nne(n),h=rne(n),d=sne(n),p=one(n),g=Xte(n),y=Wte(a),S=r.createProgram();let b,v,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(b=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(q0).join(`
`),b.length>0&&(b+=`
`),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(q0).join(`
`),v.length>0&&(v+=`
`)):(b=[QU(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(q0).join(`
`),v=[QU(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==gs?"#define TONE_MAPPING":"",n.toneMapping!==gs?nn.tonemapping_pars_fragment:"",n.toneMapping!==gs?kte("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",nn.colorspace_pars_fragment,Vte("linearToOutputTexel",n.outputColorSpace),jte(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(q0).join(`
`)),s=hA(s),s=ZU(s,n),s=$U(s,n),o=hA(o),o=ZU(o,n),o=$U(o,n),s=KU(s),o=KU(o),n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,b=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,v=["#define varying in",n.glslVersion===tA?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===tA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const E=x+b+s,T=x+v+o,w=WU(r,r.VERTEX_SHADER,E),R=WU(r,r.FRAGMENT_SHADER,T);r.attachShader(S,w),r.attachShader(S,R),n.index0AttributeName!==void 0?r.bindAttribLocation(S,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S);function N(I){if(t.debug.checkShaderErrors){const X=r.getProgramInfoLog(S)||"",j=r.getShaderInfoLog(w)||"",Y=r.getShaderInfoLog(R)||"",Z=X.trim(),z=j.trim(),G=Y.trim();let q=!0,se=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(q=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,S,w,R);else{const le=qU(r,w,"vertex"),me=qU(r,R,"fragment");Ut("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+Z+`
`+le+`
`+me)}else Z!==""?ft("WebGLProgram: Program Info Log:",Z):(z===""||G==="")&&(se=!1);se&&(I.diagnostics={runnable:q,programLog:Z,vertexShader:{log:z,prefix:b},fragmentShader:{log:G,prefix:v}})}r.deleteShader(w),r.deleteShader(R),U=new R_(r,S),A=Yte(r,S)}let U;this.getUniforms=function(){return U===void 0&&N(this),U};let A;this.getAttributes=function(){return A===void 0&&N(this),A};let C=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=r.getProgramParameter(S,zte)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Bte++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=w,this.fragmentShader=R,this}let cne=0;class une{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new fne(e),n.set(e,i)),i}}class fne{constructor(e){this.id=cne++,this.code=e,this.usedTimes=0}}function hne(t,e,n,i,r,a,s){const o=new qp,l=new une,f=new Set,h=[],d=new Map,p=r.logarithmicDepthBuffer;let g=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(A){return f.add(A),A===0?"uv":`uv${A}`}function b(A,C,I,X,j){const Y=X.fog,Z=j.geometry,z=A.isMeshStandardMaterial?X.environment:null,G=(A.isMeshStandardMaterial?n:e).get(A.envMap||z),q=G&&G.mapping===Em?G.image.height:null,se=y[A.type];A.precision!==null&&(g=r.getMaxPrecision(A.precision),g!==A.precision&&ft("WebGLProgram.getParameters:",A.precision,"not supported, using",g,"instead."));const le=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,me=le!==void 0?le.length:0;let Ae=0;Z.morphAttributes.position!==void 0&&(Ae=1),Z.morphAttributes.normal!==void 0&&(Ae=2),Z.morphAttributes.color!==void 0&&(Ae=3);let Le,Ke,yt,he;if(se){const Qt=Co[se];Le=Qt.vertexShader,Ke=Qt.fragmentShader}else Le=A.vertexShader,Ke=A.fragmentShader,l.update(A),yt=l.getVertexShaderID(A),he=l.getFragmentShaderID(A);const Te=t.getRenderTarget(),Fe=t.state.buffers.depth.getReversed(),xt=j.isInstancedMesh===!0,Ze=j.isBatchedMesh===!0,ht=!!A.map,Ft=!!A.matcap,ct=!!G,Me=!!A.aoMap,Oe=!!A.lightMap,we=!!A.bumpMap,Ge=!!A.normalMap,W=!!A.displacementMap,mt=!!A.emissiveMap,Qe=!!A.metalnessMap,bt=!!A.roughnessMap,We=A.anisotropy>0,B=A.clearcoat>0,L=A.dispersion>0,ne=A.iridescence>0,pe=A.sheen>0,be=A.transmission>0,ye=We&&!!A.anisotropyMap,ut=B&&!!A.clearcoatMap,Je=B&&!!A.clearcoatNormalMap,pt=B&&!!A.clearcoatRoughnessMap,At=ne&&!!A.iridescenceMap,Re=ne&&!!A.iridescenceThicknessMap,Pe=pe&&!!A.sheenColorMap,ot=pe&&!!A.sheenRoughnessMap,Q=!!A.specularMap,ce=!!A.specularColorMap,Ue=!!A.specularIntensityMap,ee=be&&!!A.transmissionMap,de=be&&!!A.thicknessMap,Ie=!!A.gradientMap,rt=!!A.alphaMap,He=A.alphaTest>0,De=!!A.alphaHash,Ye=!!A.extensions;let Ct=gs;A.toneMapped&&(Te===null||Te.isXRRenderTarget===!0)&&(Ct=t.toneMapping);const an={shaderID:se,shaderType:A.type,shaderName:A.name,vertexShader:Le,fragmentShader:Ke,defines:A.defines,customVertexShaderID:yt,customFragmentShaderID:he,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:g,batching:Ze,batchingColor:Ze&&j._colorsTexture!==null,instancing:xt,instancingColor:xt&&j.instanceColor!==null,instancingMorph:xt&&j.morphTexture!==null,outputColorSpace:Te===null?t.outputColorSpace:Te.isXRRenderTarget===!0?Te.texture.colorSpace:Ms,alphaToCoverage:!!A.alphaToCoverage,map:ht,matcap:Ft,envMap:ct,envMapMode:ct&&G.mapping,envMapCubeUVHeight:q,aoMap:Me,lightMap:Oe,bumpMap:we,normalMap:Ge,displacementMap:W,emissiveMap:mt,normalMapObjectSpace:Ge&&A.normalMapType===qB,normalMapTangentSpace:Ge&&A.normalMapType===Ku,metalnessMap:Qe,roughnessMap:bt,anisotropy:We,anisotropyMap:ye,clearcoat:B,clearcoatMap:ut,clearcoatNormalMap:Je,clearcoatRoughnessMap:pt,dispersion:L,iridescence:ne,iridescenceMap:At,iridescenceThicknessMap:Re,sheen:pe,sheenColorMap:Pe,sheenRoughnessMap:ot,specularMap:Q,specularColorMap:ce,specularIntensityMap:Ue,transmission:be,transmissionMap:ee,thicknessMap:de,gradientMap:Ie,opaque:A.transparent===!1&&A.blending===Mu&&A.alphaToCoverage===!1,alphaMap:rt,alphaTest:He,alphaHash:De,combine:A.combine,mapUv:ht&&S(A.map.channel),aoMapUv:Me&&S(A.aoMap.channel),lightMapUv:Oe&&S(A.lightMap.channel),bumpMapUv:we&&S(A.bumpMap.channel),normalMapUv:Ge&&S(A.normalMap.channel),displacementMapUv:W&&S(A.displacementMap.channel),emissiveMapUv:mt&&S(A.emissiveMap.channel),metalnessMapUv:Qe&&S(A.metalnessMap.channel),roughnessMapUv:bt&&S(A.roughnessMap.channel),anisotropyMapUv:ye&&S(A.anisotropyMap.channel),clearcoatMapUv:ut&&S(A.clearcoatMap.channel),clearcoatNormalMapUv:Je&&S(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pt&&S(A.clearcoatRoughnessMap.channel),iridescenceMapUv:At&&S(A.iridescenceMap.channel),iridescenceThicknessMapUv:Re&&S(A.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&S(A.sheenColorMap.channel),sheenRoughnessMapUv:ot&&S(A.sheenRoughnessMap.channel),specularMapUv:Q&&S(A.specularMap.channel),specularColorMapUv:ce&&S(A.specularColorMap.channel),specularIntensityMapUv:Ue&&S(A.specularIntensityMap.channel),transmissionMapUv:ee&&S(A.transmissionMap.channel),thicknessMapUv:de&&S(A.thicknessMap.channel),alphaMapUv:rt&&S(A.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(Ge||We),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!Z.attributes.uv&&(ht||rt),fog:!!Y,useFog:A.fog===!0,fogExp2:!!Y&&Y.isFogExp2,flatShading:A.flatShading===!0&&A.wireframe===!1,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:p,reversedDepthBuffer:Fe,skinning:j.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:me,morphTextureStride:Ae,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:A.dithering,shadowMapEnabled:t.shadowMap.enabled&&I.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ct,decodeVideoTexture:ht&&A.map.isVideoTexture===!0&&pn.getTransfer(A.map.colorSpace)===Ln,decodeVideoTextureEmissive:mt&&A.emissiveMap.isVideoTexture===!0&&pn.getTransfer(A.emissiveMap.colorSpace)===Ln,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===zr,flipSided:A.side===lr,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Ye&&A.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ye&&A.extensions.multiDraw===!0||Ze)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return an.vertexUv1s=f.has(1),an.vertexUv2s=f.has(2),an.vertexUv3s=f.has(3),f.clear(),an}function v(A){const C=[];if(A.shaderID?C.push(A.shaderID):(C.push(A.customVertexShaderID),C.push(A.customFragmentShaderID)),A.defines!==void 0)for(const I in A.defines)C.push(I),C.push(A.defines[I]);return A.isRawShaderMaterial===!1&&(x(C,A),E(C,A),C.push(t.outputColorSpace)),C.push(A.customProgramCacheKey),C.join()}function x(A,C){A.push(C.precision),A.push(C.outputColorSpace),A.push(C.envMapMode),A.push(C.envMapCubeUVHeight),A.push(C.mapUv),A.push(C.alphaMapUv),A.push(C.lightMapUv),A.push(C.aoMapUv),A.push(C.bumpMapUv),A.push(C.normalMapUv),A.push(C.displacementMapUv),A.push(C.emissiveMapUv),A.push(C.metalnessMapUv),A.push(C.roughnessMapUv),A.push(C.anisotropyMapUv),A.push(C.clearcoatMapUv),A.push(C.clearcoatNormalMapUv),A.push(C.clearcoatRoughnessMapUv),A.push(C.iridescenceMapUv),A.push(C.iridescenceThicknessMapUv),A.push(C.sheenColorMapUv),A.push(C.sheenRoughnessMapUv),A.push(C.specularMapUv),A.push(C.specularColorMapUv),A.push(C.specularIntensityMapUv),A.push(C.transmissionMapUv),A.push(C.thicknessMapUv),A.push(C.combine),A.push(C.fogExp2),A.push(C.sizeAttenuation),A.push(C.morphTargetsCount),A.push(C.morphAttributeCount),A.push(C.numDirLights),A.push(C.numPointLights),A.push(C.numSpotLights),A.push(C.numSpotLightMaps),A.push(C.numHemiLights),A.push(C.numRectAreaLights),A.push(C.numDirLightShadows),A.push(C.numPointLightShadows),A.push(C.numSpotLightShadows),A.push(C.numSpotLightShadowsWithMaps),A.push(C.numLightProbes),A.push(C.shadowMapType),A.push(C.toneMapping),A.push(C.numClippingPlanes),A.push(C.numClipIntersection),A.push(C.depthPacking)}function E(A,C){o.disableAll(),C.instancing&&o.enable(0),C.instancingColor&&o.enable(1),C.instancingMorph&&o.enable(2),C.matcap&&o.enable(3),C.envMap&&o.enable(4),C.normalMapObjectSpace&&o.enable(5),C.normalMapTangentSpace&&o.enable(6),C.clearcoat&&o.enable(7),C.iridescence&&o.enable(8),C.alphaTest&&o.enable(9),C.vertexColors&&o.enable(10),C.vertexAlphas&&o.enable(11),C.vertexUv1s&&o.enable(12),C.vertexUv2s&&o.enable(13),C.vertexUv3s&&o.enable(14),C.vertexTangents&&o.enable(15),C.anisotropy&&o.enable(16),C.alphaHash&&o.enable(17),C.batching&&o.enable(18),C.dispersion&&o.enable(19),C.batchingColor&&o.enable(20),C.gradientMap&&o.enable(21),A.push(o.mask),o.disableAll(),C.fog&&o.enable(0),C.useFog&&o.enable(1),C.flatShading&&o.enable(2),C.logarithmicDepthBuffer&&o.enable(3),C.reversedDepthBuffer&&o.enable(4),C.skinning&&o.enable(5),C.morphTargets&&o.enable(6),C.morphNormals&&o.enable(7),C.morphColors&&o.enable(8),C.premultipliedAlpha&&o.enable(9),C.shadowMapEnabled&&o.enable(10),C.doubleSided&&o.enable(11),C.flipSided&&o.enable(12),C.useDepthPacking&&o.enable(13),C.dithering&&o.enable(14),C.transmission&&o.enable(15),C.sheen&&o.enable(16),C.opaque&&o.enable(17),C.pointsUvs&&o.enable(18),C.decodeVideoTexture&&o.enable(19),C.decodeVideoTextureEmissive&&o.enable(20),C.alphaToCoverage&&o.enable(21),A.push(o.mask)}function T(A){const C=y[A.type];let I;if(C){const X=Co[C];I=P4.clone(X.uniforms)}else I=A.uniforms;return I}function w(A,C){let I=d.get(C);return I!==void 0?++I.usedTimes:(I=new lne(t,C,A,a),h.push(I),d.set(C,I)),I}function R(A){if(--A.usedTimes===0){const C=h.indexOf(A);h[C]=h[h.length-1],h.pop(),d.delete(A.cacheKey),A.destroy()}}function N(A){l.remove(A)}function U(){l.dispose()}return{getParameters:b,getProgramCacheKey:v,getUniforms:T,acquireProgram:w,releaseProgram:R,releaseShaderCache:N,programs:h,dispose:U}}function dne(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function i(s){t.delete(s)}function r(s,o,l){t.get(s)[o]=l}function a(){t=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:a}}function pne(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function JU(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function e6(){const t=[];let e=0;const n=[],i=[],r=[];function a(){e=0,n.length=0,i.length=0,r.length=0}function s(d,p,g,y,S,b){let v=t[e];return v===void 0?(v={id:d.id,object:d,geometry:p,material:g,groupOrder:y,renderOrder:d.renderOrder,z:S,group:b},t[e]=v):(v.id=d.id,v.object=d,v.geometry=p,v.material=g,v.groupOrder=y,v.renderOrder=d.renderOrder,v.z=S,v.group=b),e++,v}function o(d,p,g,y,S,b){const v=s(d,p,g,y,S,b);g.transmission>0?i.push(v):g.transparent===!0?r.push(v):n.push(v)}function l(d,p,g,y,S,b){const v=s(d,p,g,y,S,b);g.transmission>0?i.unshift(v):g.transparent===!0?r.unshift(v):n.unshift(v)}function f(d,p){n.length>1&&n.sort(d||pne),i.length>1&&i.sort(p||JU),r.length>1&&r.sort(p||JU)}function h(){for(let d=e,p=t.length;d<p;d++){const g=t[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:o,unshift:l,finish:h,sort:f}}function mne(){let t=new WeakMap;function e(i,r){const a=t.get(i);let s;return a===void 0?(s=new e6,t.set(i,[s])):r>=a.length?(s=new e6,a.push(s)):s=a[r],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function gne(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new k,color:new lt};break;case"SpotLight":n={position:new k,direction:new k,color:new lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new k,color:new lt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new k,skyColor:new lt,groundColor:new lt};break;case"RectAreaLight":n={color:new lt,position:new k,halfWidth:new k,halfHeight:new k};break}return t[e.id]=n,n}}}function vne(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let yne=0;function _ne(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function xne(t){const e=new gne,n=vne(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new k);const r=new k,a=new Wt,s=new Wt;function o(f){let h=0,d=0,p=0;for(let A=0;A<9;A++)i.probe[A].set(0,0,0);let g=0,y=0,S=0,b=0,v=0,x=0,E=0,T=0,w=0,R=0,N=0;f.sort(_ne);for(let A=0,C=f.length;A<C;A++){const I=f[A],X=I.color,j=I.intensity,Y=I.distance;let Z=null;if(I.shadow&&I.shadow.map&&(I.shadow.map.texture.format===bh?Z=I.shadow.map.texture:Z=I.shadow.map.depthTexture||I.shadow.map.texture),I.isAmbientLight)h+=X.r*j,d+=X.g*j,p+=X.b*j;else if(I.isLightProbe){for(let z=0;z<9;z++)i.probe[z].addScaledVector(I.sh.coefficients[z],j);N++}else if(I.isDirectionalLight){const z=e.get(I);if(z.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){const G=I.shadow,q=n.get(I);q.shadowIntensity=G.intensity,q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,i.directionalShadow[g]=q,i.directionalShadowMap[g]=Z,i.directionalShadowMatrix[g]=I.shadow.matrix,x++}i.directional[g]=z,g++}else if(I.isSpotLight){const z=e.get(I);z.position.setFromMatrixPosition(I.matrixWorld),z.color.copy(X).multiplyScalar(j),z.distance=Y,z.coneCos=Math.cos(I.angle),z.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),z.decay=I.decay,i.spot[S]=z;const G=I.shadow;if(I.map&&(i.spotLightMap[w]=I.map,w++,G.updateMatrices(I),I.castShadow&&R++),i.spotLightMatrix[S]=G.matrix,I.castShadow){const q=n.get(I);q.shadowIntensity=G.intensity,q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,i.spotShadow[S]=q,i.spotShadowMap[S]=Z,T++}S++}else if(I.isRectAreaLight){const z=e.get(I);z.color.copy(X).multiplyScalar(j),z.halfWidth.set(I.width*.5,0,0),z.halfHeight.set(0,I.height*.5,0),i.rectArea[b]=z,b++}else if(I.isPointLight){const z=e.get(I);if(z.color.copy(I.color).multiplyScalar(I.intensity),z.distance=I.distance,z.decay=I.decay,I.castShadow){const G=I.shadow,q=n.get(I);q.shadowIntensity=G.intensity,q.shadowBias=G.bias,q.shadowNormalBias=G.normalBias,q.shadowRadius=G.radius,q.shadowMapSize=G.mapSize,q.shadowCameraNear=G.camera.near,q.shadowCameraFar=G.camera.far,i.pointShadow[y]=q,i.pointShadowMap[y]=Z,i.pointShadowMatrix[y]=I.shadow.matrix,E++}i.point[y]=z,y++}else if(I.isHemisphereLight){const z=e.get(I);z.skyColor.copy(I.color).multiplyScalar(j),z.groundColor.copy(I.groundColor).multiplyScalar(j),i.hemi[v]=z,v++}}b>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_FLOAT_1,i.rectAreaLTC2=dt.LTC_FLOAT_2):(i.rectAreaLTC1=dt.LTC_HALF_1,i.rectAreaLTC2=dt.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const U=i.hash;(U.directionalLength!==g||U.pointLength!==y||U.spotLength!==S||U.rectAreaLength!==b||U.hemiLength!==v||U.numDirectionalShadows!==x||U.numPointShadows!==E||U.numSpotShadows!==T||U.numSpotMaps!==w||U.numLightProbes!==N)&&(i.directional.length=g,i.spot.length=S,i.rectArea.length=b,i.point.length=y,i.hemi.length=v,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=T+w-R,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=N,U.directionalLength=g,U.pointLength=y,U.spotLength=S,U.rectAreaLength=b,U.hemiLength=v,U.numDirectionalShadows=x,U.numPointShadows=E,U.numSpotShadows=T,U.numSpotMaps=w,U.numLightProbes=N,i.version=yne++)}function l(f,h){let d=0,p=0,g=0,y=0,S=0;const b=h.matrixWorldInverse;for(let v=0,x=f.length;v<x;v++){const E=f[v];if(E.isDirectionalLight){const T=i.directional[d];T.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(b),d++}else if(E.isSpotLight){const T=i.spot[g];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(b),T.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(b),g++}else if(E.isRectAreaLight){const T=i.rectArea[y];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(b),s.identity(),a.copy(E.matrixWorld),a.premultiply(b),s.extractRotation(a),T.halfWidth.set(E.width*.5,0,0),T.halfHeight.set(0,E.height*.5,0),T.halfWidth.applyMatrix4(s),T.halfHeight.applyMatrix4(s),y++}else if(E.isPointLight){const T=i.point[p];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(b),p++}else if(E.isHemisphereLight){const T=i.hemi[S];T.direction.setFromMatrixPosition(E.matrixWorld),T.direction.transformDirection(b),S++}}}return{setup:o,setupView:l,state:i}}function t6(t){const e=new xne(t),n=[],i=[];function r(h){f.camera=h,n.length=0,i.length=0}function a(h){n.push(h)}function s(h){i.push(h)}function o(){e.setup(n)}function l(h){e.setupView(n,h)}const f={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function bne(t){let e=new WeakMap;function n(r,a=0){const s=e.get(r);let o;return s===void 0?(o=new t6(t),e.set(r,[o])):a>=s.length?(o=new t6(t),s.push(o)):o=s[a],o}function i(){e=new WeakMap}return{get:n,dispose:i}}const Sne=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ene=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Mne=[new k(1,0,0),new k(-1,0,0),new k(0,1,0),new k(0,-1,0),new k(0,0,1),new k(0,0,-1)],Tne=[new k(0,-1,0),new k(0,-1,0),new k(0,0,1),new k(0,0,-1),new k(0,-1,0),new k(0,-1,0)],n6=new Wt,O0=new k,dM=new k;function Ane(t,e,n){let i=new Mm;const r=new xe,a=new xe,s=new jn,o=new $4,l=new K4,f={},h=n.maxTextureSize,d={[Oo]:lr,[lr]:Oo,[zr]:zr},p=new vi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new xe},radius:{value:4}},vertexShader:Sne,fragmentShader:Ene}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const y=new Zt;y.setAttribute("position",new Bn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Mi(y,p),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ep;let v=this.type;this.render=function(R,N,U){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||R.length===0)return;R.type===hg&&(ft("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),R.type=Ep);const A=t.getRenderTarget(),C=t.getActiveCubeFace(),I=t.getActiveMipmapLevel(),X=t.state;X.setBlending(Hr),X.buffers.depth.getReversed()===!0?X.buffers.color.setClear(0,0,0,0):X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);const j=v!==this.type;j&&N.traverse(function(Y){Y.material&&(Array.isArray(Y.material)?Y.material.forEach(Z=>Z.needsUpdate=!0):Y.material.needsUpdate=!0)});for(let Y=0,Z=R.length;Y<Z;Y++){const z=R[Y],G=z.shadow;if(G===void 0){ft("WebGLShadowMap:",z,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;r.copy(G.mapSize);const q=G.getFrameExtents();if(r.multiply(q),a.copy(G.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(a.x=Math.floor(h/q.x),r.x=a.x*q.x,G.mapSize.x=a.x),r.y>h&&(a.y=Math.floor(h/q.y),r.y=a.y*q.y,G.mapSize.y=a.y)),G.map===null||j===!0){if(G.map!==null&&(G.map.depthTexture!==null&&(G.map.depthTexture.dispose(),G.map.depthTexture=null),G.map.dispose()),this.type===Zf){if(z.isPointLight){ft("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}G.map=new si(r.x,r.y,{format:bh,type:Ei,minFilter:rn,magFilter:rn,generateMipmaps:!1}),G.map.texture.name=z.name+".shadowMap",G.map.depthTexture=new Fu(r.x,r.y,ai),G.map.depthTexture.name=z.name+".shadowMapDepth",G.map.depthTexture.format=ul,G.map.depthTexture.compareFunction=null,G.map.depthTexture.minFilter=pi,G.map.depthTexture.magFilter=pi}else{z.isPointLight?(G.map=new u2(r.x),G.map.depthTexture=new v7(r.x,Fa)):(G.map=new si(r.x,r.y),G.map.depthTexture=new Fu(r.x,r.y,Fa)),G.map.depthTexture.name=z.name+".shadowMap",G.map.depthTexture.format=ul;const le=t.state.buffers.depth.getReversed();this.type===Ep?(G.map.depthTexture.compareFunction=le?s2:a2,G.map.depthTexture.minFilter=rn,G.map.depthTexture.magFilter=rn):(G.map.depthTexture.compareFunction=null,G.map.depthTexture.minFilter=pi,G.map.depthTexture.magFilter=pi)}G.camera.updateProjectionMatrix()}const se=G.map.isWebGLCubeRenderTarget?6:1;for(let le=0;le<se;le++){if(G.map.isWebGLCubeRenderTarget)t.setRenderTarget(G.map,le),t.clear();else{le===0&&(t.setRenderTarget(G.map),t.clear());const me=G.getViewport(le);s.set(a.x*me.x,a.y*me.y,a.x*me.z,a.y*me.w),X.viewport(s)}if(z.isPointLight){const me=G.camera,Ae=G.matrix,Le=z.distance||me.far;Le!==me.far&&(me.far=Le,me.updateProjectionMatrix()),O0.setFromMatrixPosition(z.matrixWorld),me.position.copy(O0),dM.copy(me.position),dM.add(Mne[le]),me.up.copy(Tne[le]),me.lookAt(dM),me.updateMatrixWorld(),Ae.makeTranslation(-O0.x,-O0.y,-O0.z),n6.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),G._frustum.setFromProjectionMatrix(n6,me.coordinateSystem,me.reversedDepth)}else G.updateMatrices(z);i=G.getFrustum(),T(N,U,G.camera,z,this.type)}G.isPointLightShadow!==!0&&this.type===Zf&&x(G,U),G.needsUpdate=!1}v=this.type,b.needsUpdate=!1,t.setRenderTarget(A,C,I)};function x(R,N){const U=e.update(S);p.defines.VSM_SAMPLES!==R.blurSamples&&(p.defines.VSM_SAMPLES=R.blurSamples,g.defines.VSM_SAMPLES=R.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new si(r.x,r.y,{format:bh,type:Ei})),p.uniforms.shadow_pass.value=R.map.depthTexture,p.uniforms.resolution.value=R.mapSize,p.uniforms.radius.value=R.radius,t.setRenderTarget(R.mapPass),t.clear(),t.renderBufferDirect(N,null,U,p,S,null),g.uniforms.shadow_pass.value=R.mapPass.texture,g.uniforms.resolution.value=R.mapSize,g.uniforms.radius.value=R.radius,t.setRenderTarget(R.map),t.clear(),t.renderBufferDirect(N,null,U,g,S,null)}function E(R,N,U,A){let C=null;const I=U.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(I!==void 0)C=I;else if(C=U.isPointLight===!0?l:o,t.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0||N.alphaToCoverage===!0){const X=C.uuid,j=N.uuid;let Y=f[X];Y===void 0&&(Y={},f[X]=Y);let Z=Y[j];Z===void 0&&(Z=C.clone(),Y[j]=Z,N.addEventListener("dispose",w)),C=Z}if(C.visible=N.visible,C.wireframe=N.wireframe,A===Zf?C.side=N.shadowSide!==null?N.shadowSide:N.side:C.side=N.shadowSide!==null?N.shadowSide:d[N.side],C.alphaMap=N.alphaMap,C.alphaTest=N.alphaToCoverage===!0?.5:N.alphaTest,C.map=N.map,C.clipShadows=N.clipShadows,C.clippingPlanes=N.clippingPlanes,C.clipIntersection=N.clipIntersection,C.displacementMap=N.displacementMap,C.displacementScale=N.displacementScale,C.displacementBias=N.displacementBias,C.wireframeLinewidth=N.wireframeLinewidth,C.linewidth=N.linewidth,U.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const X=t.properties.get(C);X.light=U}return C}function T(R,N,U,A,C){if(R.visible===!1)return;if(R.layers.test(N.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&C===Zf)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,R.matrixWorld);const j=e.update(R),Y=R.material;if(Array.isArray(Y)){const Z=j.groups;for(let z=0,G=Z.length;z<G;z++){const q=Z[z],se=Y[q.materialIndex];if(se&&se.visible){const le=E(R,se,A,C);R.onBeforeShadow(t,R,N,U,j,le,q),t.renderBufferDirect(U,null,j,le,R,q),R.onAfterShadow(t,R,N,U,j,le,q)}}}else if(Y.visible){const Z=E(R,Y,A,C);R.onBeforeShadow(t,R,N,U,j,Z,null),t.renderBufferDirect(U,null,j,Z,R,null),R.onAfterShadow(t,R,N,U,j,Z,null)}}const X=R.children;for(let j=0,Y=X.length;j<Y;j++)T(X[j],N,U,A,C)}function w(R){R.target.removeEventListener("dispose",w);for(const U in f){const A=f[U],C=R.target.uuid;C in A&&(A[C].dispose(),delete A[C])}}}const wne={[mx]:Xg,[gx]:_x,[vx]:xx,[_h]:yx,[Xg]:mx,[_x]:gx,[xx]:vx,[yx]:_h};function Cne(t,e){function n(){let ee=!1;const de=new jn;let Ie=null;const rt=new jn(0,0,0,0);return{setMask:function(He){Ie!==He&&!ee&&(t.colorMask(He,He,He,He),Ie=He)},setLocked:function(He){ee=He},setClear:function(He,De,Ye,Ct,an){an===!0&&(He*=Ct,De*=Ct,Ye*=Ct),de.set(He,De,Ye,Ct),rt.equals(de)===!1&&(t.clearColor(He,De,Ye,Ct),rt.copy(de))},reset:function(){ee=!1,Ie=null,rt.set(-1,0,0,0)}}}function i(){let ee=!1,de=!1,Ie=null,rt=null,He=null;return{setReversed:function(De){if(de!==De){const Ye=e.get("EXT_clip_control");De?Ye.clipControlEXT(Ye.LOWER_LEFT_EXT,Ye.ZERO_TO_ONE_EXT):Ye.clipControlEXT(Ye.LOWER_LEFT_EXT,Ye.NEGATIVE_ONE_TO_ONE_EXT),de=De;const Ct=He;He=null,this.setClear(Ct)}},getReversed:function(){return de},setTest:function(De){De?Te(t.DEPTH_TEST):Fe(t.DEPTH_TEST)},setMask:function(De){Ie!==De&&!ee&&(t.depthMask(De),Ie=De)},setFunc:function(De){if(de&&(De=wne[De]),rt!==De){switch(De){case mx:t.depthFunc(t.NEVER);break;case Xg:t.depthFunc(t.ALWAYS);break;case gx:t.depthFunc(t.LESS);break;case _h:t.depthFunc(t.LEQUAL);break;case vx:t.depthFunc(t.EQUAL);break;case yx:t.depthFunc(t.GEQUAL);break;case _x:t.depthFunc(t.GREATER);break;case xx:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}rt=De}},setLocked:function(De){ee=De},setClear:function(De){He!==De&&(de&&(De=1-De),t.clearDepth(De),He=De)},reset:function(){ee=!1,Ie=null,rt=null,He=null,de=!1}}}function r(){let ee=!1,de=null,Ie=null,rt=null,He=null,De=null,Ye=null,Ct=null,an=null;return{setTest:function(Qt){ee||(Qt?Te(t.STENCIL_TEST):Fe(t.STENCIL_TEST))},setMask:function(Qt){de!==Qt&&!ee&&(t.stencilMask(Qt),de=Qt)},setFunc:function(Qt,ki,fr){(Ie!==Qt||rt!==ki||He!==fr)&&(t.stencilFunc(Qt,ki,fr),Ie=Qt,rt=ki,He=fr)},setOp:function(Qt,ki,fr){(De!==Qt||Ye!==ki||Ct!==fr)&&(t.stencilOp(Qt,ki,fr),De=Qt,Ye=ki,Ct=fr)},setLocked:function(Qt){ee=Qt},setClear:function(Qt){an!==Qt&&(t.clearStencil(Qt),an=Qt)},reset:function(){ee=!1,de=null,Ie=null,rt=null,He=null,De=null,Ye=null,Ct=null,an=null}}}const a=new n,s=new i,o=new r,l=new WeakMap,f=new WeakMap;let h={},d={},p=new WeakMap,g=[],y=null,S=!1,b=null,v=null,x=null,E=null,T=null,w=null,R=null,N=new lt(0,0,0),U=0,A=!1,C=null,I=null,X=null,j=null,Y=null;const Z=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,G=0;const q=t.getParameter(t.VERSION);q.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(q)[1]),z=G>=1):q.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),z=G>=2);let se=null,le={};const me=t.getParameter(t.SCISSOR_BOX),Ae=t.getParameter(t.VIEWPORT),Le=new jn().fromArray(me),Ke=new jn().fromArray(Ae);function yt(ee,de,Ie,rt){const He=new Uint8Array(4),De=t.createTexture();t.bindTexture(ee,De),t.texParameteri(ee,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ee,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ye=0;Ye<Ie;Ye++)ee===t.TEXTURE_3D||ee===t.TEXTURE_2D_ARRAY?t.texImage3D(de,0,t.RGBA,1,1,rt,0,t.RGBA,t.UNSIGNED_BYTE,He):t.texImage2D(de+Ye,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,He);return De}const he={};he[t.TEXTURE_2D]=yt(t.TEXTURE_2D,t.TEXTURE_2D,1),he[t.TEXTURE_CUBE_MAP]=yt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[t.TEXTURE_2D_ARRAY]=yt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),he[t.TEXTURE_3D]=yt(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Te(t.DEPTH_TEST),s.setFunc(_h),we(!1),Ge(ZT),Te(t.CULL_FACE),Me(Hr);function Te(ee){h[ee]!==!0&&(t.enable(ee),h[ee]=!0)}function Fe(ee){h[ee]!==!1&&(t.disable(ee),h[ee]=!1)}function xt(ee,de){return d[ee]!==de?(t.bindFramebuffer(ee,de),d[ee]=de,ee===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=de),ee===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=de),!0):!1}function Ze(ee,de){let Ie=g,rt=!1;if(ee){Ie=p.get(de),Ie===void 0&&(Ie=[],p.set(de,Ie));const He=ee.textures;if(Ie.length!==He.length||Ie[0]!==t.COLOR_ATTACHMENT0){for(let De=0,Ye=He.length;De<Ye;De++)Ie[De]=t.COLOR_ATTACHMENT0+De;Ie.length=He.length,rt=!0}}else Ie[0]!==t.BACK&&(Ie[0]=t.BACK,rt=!0);rt&&t.drawBuffers(Ie)}function ht(ee){return y!==ee?(t.useProgram(ee),y=ee,!0):!1}const Ft={[ru]:t.FUNC_ADD,[TB]:t.FUNC_SUBTRACT,[AB]:t.FUNC_REVERSE_SUBTRACT};Ft[wB]=t.MIN,Ft[CB]=t.MAX;const ct={[RB]:t.ZERO,[DB]:t.ONE,[OB]:t.SRC_COLOR,[dx]:t.SRC_ALPHA,[zB]:t.SRC_ALPHA_SATURATE,[PB]:t.DST_COLOR,[UB]:t.DST_ALPHA,[NB]:t.ONE_MINUS_SRC_COLOR,[px]:t.ONE_MINUS_SRC_ALPHA,[IB]:t.ONE_MINUS_DST_COLOR,[LB]:t.ONE_MINUS_DST_ALPHA,[BB]:t.CONSTANT_COLOR,[FB]:t.ONE_MINUS_CONSTANT_COLOR,[HB]:t.CONSTANT_ALPHA,[VB]:t.ONE_MINUS_CONSTANT_ALPHA};function Me(ee,de,Ie,rt,He,De,Ye,Ct,an,Qt){if(ee===Hr){S===!0&&(Fe(t.BLEND),S=!1);return}if(S===!1&&(Te(t.BLEND),S=!0),ee!==MB){if(ee!==b||Qt!==A){if((v!==ru||T!==ru)&&(t.blendEquation(t.FUNC_ADD),v=ru,T=ru),Qt)switch(ee){case Mu:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case jg:t.blendFunc(t.ONE,t.ONE);break;case $T:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case KT:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:Ut("WebGLState: Invalid blending: ",ee);break}else switch(ee){case Mu:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case jg:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case $T:Ut("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case KT:Ut("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Ut("WebGLState: Invalid blending: ",ee);break}x=null,E=null,w=null,R=null,N.set(0,0,0),U=0,b=ee,A=Qt}return}He=He||de,De=De||Ie,Ye=Ye||rt,(de!==v||He!==T)&&(t.blendEquationSeparate(Ft[de],Ft[He]),v=de,T=He),(Ie!==x||rt!==E||De!==w||Ye!==R)&&(t.blendFuncSeparate(ct[Ie],ct[rt],ct[De],ct[Ye]),x=Ie,E=rt,w=De,R=Ye),(Ct.equals(N)===!1||an!==U)&&(t.blendColor(Ct.r,Ct.g,Ct.b,an),N.copy(Ct),U=an),b=ee,A=!1}function Oe(ee,de){ee.side===zr?Fe(t.CULL_FACE):Te(t.CULL_FACE);let Ie=ee.side===lr;de&&(Ie=!Ie),we(Ie),ee.blending===Mu&&ee.transparent===!1?Me(Hr):Me(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),s.setFunc(ee.depthFunc),s.setTest(ee.depthTest),s.setMask(ee.depthWrite),a.setMask(ee.colorWrite);const rt=ee.stencilWrite;o.setTest(rt),rt&&(o.setMask(ee.stencilWriteMask),o.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),o.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),mt(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?Te(t.SAMPLE_ALPHA_TO_COVERAGE):Fe(t.SAMPLE_ALPHA_TO_COVERAGE)}function we(ee){C!==ee&&(ee?t.frontFace(t.CW):t.frontFace(t.CCW),C=ee)}function Ge(ee){ee!==bB?(Te(t.CULL_FACE),ee!==I&&(ee===ZT?t.cullFace(t.BACK):ee===SB?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Fe(t.CULL_FACE),I=ee}function W(ee){ee!==X&&(z&&t.lineWidth(ee),X=ee)}function mt(ee,de,Ie){ee?(Te(t.POLYGON_OFFSET_FILL),(j!==de||Y!==Ie)&&(t.polygonOffset(de,Ie),j=de,Y=Ie)):Fe(t.POLYGON_OFFSET_FILL)}function Qe(ee){ee?Te(t.SCISSOR_TEST):Fe(t.SCISSOR_TEST)}function bt(ee){ee===void 0&&(ee=t.TEXTURE0+Z-1),se!==ee&&(t.activeTexture(ee),se=ee)}function We(ee,de,Ie){Ie===void 0&&(se===null?Ie=t.TEXTURE0+Z-1:Ie=se);let rt=le[Ie];rt===void 0&&(rt={type:void 0,texture:void 0},le[Ie]=rt),(rt.type!==ee||rt.texture!==de)&&(se!==Ie&&(t.activeTexture(Ie),se=Ie),t.bindTexture(ee,de||he[ee]),rt.type=ee,rt.texture=de)}function B(){const ee=le[se];ee!==void 0&&ee.type!==void 0&&(t.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function L(){try{t.compressedTexImage2D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function ne(){try{t.compressedTexImage3D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function pe(){try{t.texSubImage2D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function be(){try{t.texSubImage3D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function ye(){try{t.compressedTexSubImage2D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function ut(){try{t.compressedTexSubImage3D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function Je(){try{t.texStorage2D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function pt(){try{t.texStorage3D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function At(){try{t.texImage2D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function Re(){try{t.texImage3D(...arguments)}catch(ee){Ut("WebGLState:",ee)}}function Pe(ee){Le.equals(ee)===!1&&(t.scissor(ee.x,ee.y,ee.z,ee.w),Le.copy(ee))}function ot(ee){Ke.equals(ee)===!1&&(t.viewport(ee.x,ee.y,ee.z,ee.w),Ke.copy(ee))}function Q(ee,de){let Ie=f.get(de);Ie===void 0&&(Ie=new WeakMap,f.set(de,Ie));let rt=Ie.get(ee);rt===void 0&&(rt=t.getUniformBlockIndex(de,ee.name),Ie.set(ee,rt))}function ce(ee,de){const rt=f.get(de).get(ee);l.get(de)!==rt&&(t.uniformBlockBinding(de,rt,ee.__bindingPointIndex),l.set(de,rt))}function Ue(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},se=null,le={},d={},p=new WeakMap,g=[],y=null,S=!1,b=null,v=null,x=null,E=null,T=null,w=null,R=null,N=new lt(0,0,0),U=0,A=!1,C=null,I=null,X=null,j=null,Y=null,Le.set(0,0,t.canvas.width,t.canvas.height),Ke.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:Te,disable:Fe,bindFramebuffer:xt,drawBuffers:Ze,useProgram:ht,setBlending:Me,setMaterial:Oe,setFlipSided:we,setCullFace:Ge,setLineWidth:W,setPolygonOffset:mt,setScissorTest:Qe,activeTexture:bt,bindTexture:We,unbindTexture:B,compressedTexImage2D:L,compressedTexImage3D:ne,texImage2D:At,texImage3D:Re,updateUBOMapping:Q,uniformBlockBinding:ce,texStorage2D:Je,texStorage3D:pt,texSubImage2D:pe,texSubImage3D:be,compressedTexSubImage2D:ye,compressedTexSubImage3D:ut,scissor:Pe,viewport:ot,reset:Ue}}function Rne(t,e,n,i,r,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new xe,h=new WeakMap;let d;const p=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(B,L){return g?new OffscreenCanvas(B,L):Jg("canvas")}function S(B,L,ne){let pe=1;const be=We(B);if((be.width>ne||be.height>ne)&&(pe=ne/Math.max(be.width,be.height)),pe<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const ye=Math.floor(pe*be.width),ut=Math.floor(pe*be.height);d===void 0&&(d=y(ye,ut));const Je=L?y(ye,ut):d;return Je.width=ye,Je.height=ut,Je.getContext("2d").drawImage(B,0,0,ye,ut),ft("WebGLRenderer: Texture has been resized from ("+be.width+"x"+be.height+") to ("+ye+"x"+ut+")."),Je}else return"data"in B&&ft("WebGLRenderer: Image in DataTexture is too big ("+be.width+"x"+be.height+")."),B;return B}function b(B){return B.generateMipmaps}function v(B){t.generateMipmap(B)}function x(B){return B.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:B.isWebGL3DRenderTarget?t.TEXTURE_3D:B.isWebGLArrayRenderTarget||B.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function E(B,L,ne,pe,be=!1){if(B!==null){if(t[B]!==void 0)return t[B];ft("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let ye=L;if(L===t.RED&&(ne===t.FLOAT&&(ye=t.R32F),ne===t.HALF_FLOAT&&(ye=t.R16F),ne===t.UNSIGNED_BYTE&&(ye=t.R8)),L===t.RED_INTEGER&&(ne===t.UNSIGNED_BYTE&&(ye=t.R8UI),ne===t.UNSIGNED_SHORT&&(ye=t.R16UI),ne===t.UNSIGNED_INT&&(ye=t.R32UI),ne===t.BYTE&&(ye=t.R8I),ne===t.SHORT&&(ye=t.R16I),ne===t.INT&&(ye=t.R32I)),L===t.RG&&(ne===t.FLOAT&&(ye=t.RG32F),ne===t.HALF_FLOAT&&(ye=t.RG16F),ne===t.UNSIGNED_BYTE&&(ye=t.RG8)),L===t.RG_INTEGER&&(ne===t.UNSIGNED_BYTE&&(ye=t.RG8UI),ne===t.UNSIGNED_SHORT&&(ye=t.RG16UI),ne===t.UNSIGNED_INT&&(ye=t.RG32UI),ne===t.BYTE&&(ye=t.RG8I),ne===t.SHORT&&(ye=t.RG16I),ne===t.INT&&(ye=t.RG32I)),L===t.RGB_INTEGER&&(ne===t.UNSIGNED_BYTE&&(ye=t.RGB8UI),ne===t.UNSIGNED_SHORT&&(ye=t.RGB16UI),ne===t.UNSIGNED_INT&&(ye=t.RGB32UI),ne===t.BYTE&&(ye=t.RGB8I),ne===t.SHORT&&(ye=t.RGB16I),ne===t.INT&&(ye=t.RGB32I)),L===t.RGBA_INTEGER&&(ne===t.UNSIGNED_BYTE&&(ye=t.RGBA8UI),ne===t.UNSIGNED_SHORT&&(ye=t.RGBA16UI),ne===t.UNSIGNED_INT&&(ye=t.RGBA32UI),ne===t.BYTE&&(ye=t.RGBA8I),ne===t.SHORT&&(ye=t.RGBA16I),ne===t.INT&&(ye=t.RGBA32I)),L===t.RGB&&(ne===t.UNSIGNED_INT_5_9_9_9_REV&&(ye=t.RGB9_E5),ne===t.UNSIGNED_INT_10F_11F_11F_REV&&(ye=t.R11F_G11F_B10F)),L===t.RGBA){const ut=be?Kg:pn.getTransfer(pe);ne===t.FLOAT&&(ye=t.RGBA32F),ne===t.HALF_FLOAT&&(ye=t.RGBA16F),ne===t.UNSIGNED_BYTE&&(ye=ut===Ln?t.SRGB8_ALPHA8:t.RGBA8),ne===t.UNSIGNED_SHORT_4_4_4_4&&(ye=t.RGBA4),ne===t.UNSIGNED_SHORT_5_5_5_1&&(ye=t.RGB5_A1)}return(ye===t.R16F||ye===t.R32F||ye===t.RG16F||ye===t.RG32F||ye===t.RGBA16F||ye===t.RGBA32F)&&e.get("EXT_color_buffer_float"),ye}function T(B,L){let ne;return B?L===null||L===Fa||L===xh?ne=t.DEPTH24_STENCIL8:L===ai?ne=t.DEPTH32F_STENCIL8:L===jp&&(ne=t.DEPTH24_STENCIL8,ft("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):L===null||L===Fa||L===xh?ne=t.DEPTH_COMPONENT24:L===ai?ne=t.DEPTH_COMPONENT32F:L===jp&&(ne=t.DEPTH_COMPONENT16),ne}function w(B,L){return b(B)===!0||B.isFramebufferTexture&&B.minFilter!==pi&&B.minFilter!==rn?Math.log2(Math.max(L.width,L.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?L.mipmaps.length:1}function R(B){const L=B.target;L.removeEventListener("dispose",R),U(L),L.isVideoTexture&&h.delete(L)}function N(B){const L=B.target;L.removeEventListener("dispose",N),C(L)}function U(B){const L=i.get(B);if(L.__webglInit===void 0)return;const ne=B.source,pe=p.get(ne);if(pe){const be=pe[L.__cacheKey];be.usedTimes--,be.usedTimes===0&&A(B),Object.keys(pe).length===0&&p.delete(ne)}i.remove(B)}function A(B){const L=i.get(B);t.deleteTexture(L.__webglTexture);const ne=B.source,pe=p.get(ne);delete pe[L.__cacheKey],s.memory.textures--}function C(B){const L=i.get(B);if(B.depthTexture&&(B.depthTexture.dispose(),i.remove(B.depthTexture)),B.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++){if(Array.isArray(L.__webglFramebuffer[pe]))for(let be=0;be<L.__webglFramebuffer[pe].length;be++)t.deleteFramebuffer(L.__webglFramebuffer[pe][be]);else t.deleteFramebuffer(L.__webglFramebuffer[pe]);L.__webglDepthbuffer&&t.deleteRenderbuffer(L.__webglDepthbuffer[pe])}else{if(Array.isArray(L.__webglFramebuffer))for(let pe=0;pe<L.__webglFramebuffer.length;pe++)t.deleteFramebuffer(L.__webglFramebuffer[pe]);else t.deleteFramebuffer(L.__webglFramebuffer);if(L.__webglDepthbuffer&&t.deleteRenderbuffer(L.__webglDepthbuffer),L.__webglMultisampledFramebuffer&&t.deleteFramebuffer(L.__webglMultisampledFramebuffer),L.__webglColorRenderbuffer)for(let pe=0;pe<L.__webglColorRenderbuffer.length;pe++)L.__webglColorRenderbuffer[pe]&&t.deleteRenderbuffer(L.__webglColorRenderbuffer[pe]);L.__webglDepthRenderbuffer&&t.deleteRenderbuffer(L.__webglDepthRenderbuffer)}const ne=B.textures;for(let pe=0,be=ne.length;pe<be;pe++){const ye=i.get(ne[pe]);ye.__webglTexture&&(t.deleteTexture(ye.__webglTexture),s.memory.textures--),i.remove(ne[pe])}i.remove(B)}let I=0;function X(){I=0}function j(){const B=I;return B>=r.maxTextures&&ft("WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+r.maxTextures),I+=1,B}function Y(B){const L=[];return L.push(B.wrapS),L.push(B.wrapT),L.push(B.wrapR||0),L.push(B.magFilter),L.push(B.minFilter),L.push(B.anisotropy),L.push(B.internalFormat),L.push(B.format),L.push(B.type),L.push(B.generateMipmaps),L.push(B.premultiplyAlpha),L.push(B.flipY),L.push(B.unpackAlignment),L.push(B.colorSpace),L.join()}function Z(B,L){const ne=i.get(B);if(B.isVideoTexture&&Qe(B),B.isRenderTargetTexture===!1&&B.isExternalTexture!==!0&&B.version>0&&ne.__version!==B.version){const pe=B.image;if(pe===null)ft("WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)ft("WebGLRenderer: Texture marked for update but image is incomplete");else{he(ne,B,L);return}}else B.isExternalTexture&&(ne.__webglTexture=B.sourceTexture?B.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,ne.__webglTexture,t.TEXTURE0+L)}function z(B,L){const ne=i.get(B);if(B.isRenderTargetTexture===!1&&B.version>0&&ne.__version!==B.version){he(ne,B,L);return}else B.isExternalTexture&&(ne.__webglTexture=B.sourceTexture?B.sourceTexture:null);n.bindTexture(t.TEXTURE_2D_ARRAY,ne.__webglTexture,t.TEXTURE0+L)}function G(B,L){const ne=i.get(B);if(B.isRenderTargetTexture===!1&&B.version>0&&ne.__version!==B.version){he(ne,B,L);return}n.bindTexture(t.TEXTURE_3D,ne.__webglTexture,t.TEXTURE0+L)}function q(B,L){const ne=i.get(B);if(B.isCubeDepthTexture!==!0&&B.version>0&&ne.__version!==B.version){Te(ne,B,L);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ne.__webglTexture,t.TEXTURE0+L)}const se={[Yg]:t.REPEAT,[Hi]:t.CLAMP_TO_EDGE,[qg]:t.MIRRORED_REPEAT},le={[pi]:t.NEAREST,[T4]:t.NEAREST_MIPMAP_NEAREST,[fp]:t.NEAREST_MIPMAP_LINEAR,[rn]:t.LINEAR,[dg]:t.LINEAR_MIPMAP_NEAREST,[rl]:t.LINEAR_MIPMAP_LINEAR},me={[ZB]:t.NEVER,[e7]:t.ALWAYS,[$B]:t.LESS,[a2]:t.LEQUAL,[KB]:t.EQUAL,[s2]:t.GEQUAL,[QB]:t.GREATER,[JB]:t.NOTEQUAL};function Ae(B,L){if(L.type===ai&&e.has("OES_texture_float_linear")===!1&&(L.magFilter===rn||L.magFilter===dg||L.magFilter===fp||L.magFilter===rl||L.minFilter===rn||L.minFilter===dg||L.minFilter===fp||L.minFilter===rl)&&ft("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(B,t.TEXTURE_WRAP_S,se[L.wrapS]),t.texParameteri(B,t.TEXTURE_WRAP_T,se[L.wrapT]),(B===t.TEXTURE_3D||B===t.TEXTURE_2D_ARRAY)&&t.texParameteri(B,t.TEXTURE_WRAP_R,se[L.wrapR]),t.texParameteri(B,t.TEXTURE_MAG_FILTER,le[L.magFilter]),t.texParameteri(B,t.TEXTURE_MIN_FILTER,le[L.minFilter]),L.compareFunction&&(t.texParameteri(B,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(B,t.TEXTURE_COMPARE_FUNC,me[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(L.magFilter===pi||L.minFilter!==fp&&L.minFilter!==rl||L.type===ai&&e.has("OES_texture_float_linear")===!1)return;if(L.anisotropy>1||i.get(L).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");t.texParameterf(B,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,r.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy}}}function Le(B,L){let ne=!1;B.__webglInit===void 0&&(B.__webglInit=!0,L.addEventListener("dispose",R));const pe=L.source;let be=p.get(pe);be===void 0&&(be={},p.set(pe,be));const ye=Y(L);if(ye!==B.__cacheKey){be[ye]===void 0&&(be[ye]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,ne=!0),be[ye].usedTimes++;const ut=be[B.__cacheKey];ut!==void 0&&(be[B.__cacheKey].usedTimes--,ut.usedTimes===0&&A(L)),B.__cacheKey=ye,B.__webglTexture=be[ye].texture}return ne}function Ke(B,L,ne){return Math.floor(Math.floor(B/ne)/L)}function yt(B,L,ne,pe){const ye=B.updateRanges;if(ye.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,L.width,L.height,ne,pe,L.data);else{ye.sort((Re,Pe)=>Re.start-Pe.start);let ut=0;for(let Re=1;Re<ye.length;Re++){const Pe=ye[ut],ot=ye[Re],Q=Pe.start+Pe.count,ce=Ke(ot.start,L.width,4),Ue=Ke(Pe.start,L.width,4);ot.start<=Q+1&&ce===Ue&&Ke(ot.start+ot.count-1,L.width,4)===ce?Pe.count=Math.max(Pe.count,ot.start+ot.count-Pe.start):(++ut,ye[ut]=ot)}ye.length=ut+1;const Je=t.getParameter(t.UNPACK_ROW_LENGTH),pt=t.getParameter(t.UNPACK_SKIP_PIXELS),At=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,L.width);for(let Re=0,Pe=ye.length;Re<Pe;Re++){const ot=ye[Re],Q=Math.floor(ot.start/4),ce=Math.ceil(ot.count/4),Ue=Q%L.width,ee=Math.floor(Q/L.width),de=ce,Ie=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,Ue),t.pixelStorei(t.UNPACK_SKIP_ROWS,ee),n.texSubImage2D(t.TEXTURE_2D,0,Ue,ee,de,Ie,ne,pe,L.data)}B.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,Je),t.pixelStorei(t.UNPACK_SKIP_PIXELS,pt),t.pixelStorei(t.UNPACK_SKIP_ROWS,At)}}function he(B,L,ne){let pe=t.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(pe=t.TEXTURE_2D_ARRAY),L.isData3DTexture&&(pe=t.TEXTURE_3D);const be=Le(B,L),ye=L.source;n.bindTexture(pe,B.__webglTexture,t.TEXTURE0+ne);const ut=i.get(ye);if(ye.version!==ut.__version||be===!0){n.activeTexture(t.TEXTURE0+ne);const Je=pn.getPrimaries(pn.workingColorSpace),pt=L.colorSpace===Ro?null:pn.getPrimaries(L.colorSpace),At=L.colorSpace===Ro||Je===pt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,At);let Re=S(L.image,!1,r.maxTextureSize);Re=bt(L,Re);const Pe=a.convert(L.format,L.colorSpace),ot=a.convert(L.type);let Q=E(L.internalFormat,Pe,ot,L.colorSpace,L.isVideoTexture);Ae(pe,L);let ce;const Ue=L.mipmaps,ee=L.isVideoTexture!==!0,de=ut.__version===void 0||be===!0,Ie=ye.dataReady,rt=w(L,Re);if(L.isDepthTexture)Q=T(L.format===tc,L.type),de&&(ee?n.texStorage2D(t.TEXTURE_2D,1,Q,Re.width,Re.height):n.texImage2D(t.TEXTURE_2D,0,Q,Re.width,Re.height,0,Pe,ot,null));else if(L.isDataTexture)if(Ue.length>0){ee&&de&&n.texStorage2D(t.TEXTURE_2D,rt,Q,Ue[0].width,Ue[0].height);for(let He=0,De=Ue.length;He<De;He++)ce=Ue[He],ee?Ie&&n.texSubImage2D(t.TEXTURE_2D,He,0,0,ce.width,ce.height,Pe,ot,ce.data):n.texImage2D(t.TEXTURE_2D,He,Q,ce.width,ce.height,0,Pe,ot,ce.data);L.generateMipmaps=!1}else ee?(de&&n.texStorage2D(t.TEXTURE_2D,rt,Q,Re.width,Re.height),Ie&&yt(L,Re,Pe,ot)):n.texImage2D(t.TEXTURE_2D,0,Q,Re.width,Re.height,0,Pe,ot,Re.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){ee&&de&&n.texStorage3D(t.TEXTURE_2D_ARRAY,rt,Q,Ue[0].width,Ue[0].height,Re.depth);for(let He=0,De=Ue.length;He<De;He++)if(ce=Ue[He],L.format!==Zi)if(Pe!==null)if(ee){if(Ie)if(L.layerUpdates.size>0){const Ye=cA(ce.width,ce.height,L.format,L.type);for(const Ct of L.layerUpdates){const an=ce.data.subarray(Ct*Ye/ce.data.BYTES_PER_ELEMENT,(Ct+1)*Ye/ce.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,He,0,0,Ct,ce.width,ce.height,1,Pe,an)}L.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,He,0,0,0,ce.width,ce.height,Re.depth,Pe,ce.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,He,Q,ce.width,ce.height,Re.depth,0,ce.data,0,0);else ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ee?Ie&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,He,0,0,0,ce.width,ce.height,Re.depth,Pe,ot,ce.data):n.texImage3D(t.TEXTURE_2D_ARRAY,He,Q,ce.width,ce.height,Re.depth,0,Pe,ot,ce.data)}else{ee&&de&&n.texStorage2D(t.TEXTURE_2D,rt,Q,Ue[0].width,Ue[0].height);for(let He=0,De=Ue.length;He<De;He++)ce=Ue[He],L.format!==Zi?Pe!==null?ee?Ie&&n.compressedTexSubImage2D(t.TEXTURE_2D,He,0,0,ce.width,ce.height,Pe,ce.data):n.compressedTexImage2D(t.TEXTURE_2D,He,Q,ce.width,ce.height,0,ce.data):ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ee?Ie&&n.texSubImage2D(t.TEXTURE_2D,He,0,0,ce.width,ce.height,Pe,ot,ce.data):n.texImage2D(t.TEXTURE_2D,He,Q,ce.width,ce.height,0,Pe,ot,ce.data)}else if(L.isDataArrayTexture)if(ee){if(de&&n.texStorage3D(t.TEXTURE_2D_ARRAY,rt,Q,Re.width,Re.height,Re.depth),Ie)if(L.layerUpdates.size>0){const He=cA(Re.width,Re.height,L.format,L.type);for(const De of L.layerUpdates){const Ye=Re.data.subarray(De*He/Re.data.BYTES_PER_ELEMENT,(De+1)*He/Re.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,De,Re.width,Re.height,1,Pe,ot,Ye)}L.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,Pe,ot,Re.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Q,Re.width,Re.height,Re.depth,0,Pe,ot,Re.data);else if(L.isData3DTexture)ee?(de&&n.texStorage3D(t.TEXTURE_3D,rt,Q,Re.width,Re.height,Re.depth),Ie&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,Pe,ot,Re.data)):n.texImage3D(t.TEXTURE_3D,0,Q,Re.width,Re.height,Re.depth,0,Pe,ot,Re.data);else if(L.isFramebufferTexture){if(de)if(ee)n.texStorage2D(t.TEXTURE_2D,rt,Q,Re.width,Re.height);else{let He=Re.width,De=Re.height;for(let Ye=0;Ye<rt;Ye++)n.texImage2D(t.TEXTURE_2D,Ye,Q,He,De,0,Pe,ot,null),He>>=1,De>>=1}}else if(Ue.length>0){if(ee&&de){const He=We(Ue[0]);n.texStorage2D(t.TEXTURE_2D,rt,Q,He.width,He.height)}for(let He=0,De=Ue.length;He<De;He++)ce=Ue[He],ee?Ie&&n.texSubImage2D(t.TEXTURE_2D,He,0,0,Pe,ot,ce):n.texImage2D(t.TEXTURE_2D,He,Q,Pe,ot,ce);L.generateMipmaps=!1}else if(ee){if(de){const He=We(Re);n.texStorage2D(t.TEXTURE_2D,rt,Q,He.width,He.height)}Ie&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Pe,ot,Re)}else n.texImage2D(t.TEXTURE_2D,0,Q,Pe,ot,Re);b(L)&&v(pe),ut.__version=ye.version,L.onUpdate&&L.onUpdate(L)}B.__version=L.version}function Te(B,L,ne){if(L.image.length!==6)return;const pe=Le(B,L),be=L.source;n.bindTexture(t.TEXTURE_CUBE_MAP,B.__webglTexture,t.TEXTURE0+ne);const ye=i.get(be);if(be.version!==ye.__version||pe===!0){n.activeTexture(t.TEXTURE0+ne);const ut=pn.getPrimaries(pn.workingColorSpace),Je=L.colorSpace===Ro?null:pn.getPrimaries(L.colorSpace),pt=L.colorSpace===Ro||ut===Je?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,pt);const At=L.isCompressedTexture||L.image[0].isCompressedTexture,Re=L.image[0]&&L.image[0].isDataTexture,Pe=[];for(let De=0;De<6;De++)!At&&!Re?Pe[De]=S(L.image[De],!0,r.maxCubemapSize):Pe[De]=Re?L.image[De].image:L.image[De],Pe[De]=bt(L,Pe[De]);const ot=Pe[0],Q=a.convert(L.format,L.colorSpace),ce=a.convert(L.type),Ue=E(L.internalFormat,Q,ce,L.colorSpace),ee=L.isVideoTexture!==!0,de=ye.__version===void 0||pe===!0,Ie=be.dataReady;let rt=w(L,ot);Ae(t.TEXTURE_CUBE_MAP,L);let He;if(At){ee&&de&&n.texStorage2D(t.TEXTURE_CUBE_MAP,rt,Ue,ot.width,ot.height);for(let De=0;De<6;De++){He=Pe[De].mipmaps;for(let Ye=0;Ye<He.length;Ye++){const Ct=He[Ye];L.format!==Zi?Q!==null?ee?Ie&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ye,0,0,Ct.width,Ct.height,Q,Ct.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ye,Ue,Ct.width,Ct.height,0,Ct.data):ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ee?Ie&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ye,0,0,Ct.width,Ct.height,Q,ce,Ct.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ye,Ue,Ct.width,Ct.height,0,Q,ce,Ct.data)}}}else{if(He=L.mipmaps,ee&&de){He.length>0&&rt++;const De=We(Pe[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,rt,Ue,De.width,De.height)}for(let De=0;De<6;De++)if(Re){ee?Ie&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,0,0,Pe[De].width,Pe[De].height,Q,ce,Pe[De].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,Ue,Pe[De].width,Pe[De].height,0,Q,ce,Pe[De].data);for(let Ye=0;Ye<He.length;Ye++){const an=He[Ye].image[De].image;ee?Ie&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ye+1,0,0,an.width,an.height,Q,ce,an.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ye+1,Ue,an.width,an.height,0,Q,ce,an.data)}}else{ee?Ie&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,0,0,Q,ce,Pe[De]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,Ue,Q,ce,Pe[De]);for(let Ye=0;Ye<He.length;Ye++){const Ct=He[Ye];ee?Ie&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ye+1,0,0,Q,ce,Ct.image[De]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ye+1,Ue,Q,ce,Ct.image[De])}}}b(L)&&v(t.TEXTURE_CUBE_MAP),ye.__version=be.version,L.onUpdate&&L.onUpdate(L)}B.__version=L.version}function Fe(B,L,ne,pe,be,ye){const ut=a.convert(ne.format,ne.colorSpace),Je=a.convert(ne.type),pt=E(ne.internalFormat,ut,Je,ne.colorSpace),At=i.get(L),Re=i.get(ne);if(Re.__renderTarget=L,!At.__hasExternalTextures){const Pe=Math.max(1,L.width>>ye),ot=Math.max(1,L.height>>ye);be===t.TEXTURE_3D||be===t.TEXTURE_2D_ARRAY?n.texImage3D(be,ye,pt,Pe,ot,L.depth,0,ut,Je,null):n.texImage2D(be,ye,pt,Pe,ot,0,ut,Je,null)}n.bindFramebuffer(t.FRAMEBUFFER,B),mt(L)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,pe,be,Re.__webglTexture,0,W(L)):(be===t.TEXTURE_2D||be>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&be<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,pe,be,Re.__webglTexture,ye),n.bindFramebuffer(t.FRAMEBUFFER,null)}function xt(B,L,ne){if(t.bindRenderbuffer(t.RENDERBUFFER,B),L.depthBuffer){const pe=L.depthTexture,be=pe&&pe.isDepthTexture?pe.type:null,ye=T(L.stencilBuffer,be),ut=L.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;mt(L)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,W(L),ye,L.width,L.height):ne?t.renderbufferStorageMultisample(t.RENDERBUFFER,W(L),ye,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,ye,L.width,L.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,ut,t.RENDERBUFFER,B)}else{const pe=L.textures;for(let be=0;be<pe.length;be++){const ye=pe[be],ut=a.convert(ye.format,ye.colorSpace),Je=a.convert(ye.type),pt=E(ye.internalFormat,ut,Je,ye.colorSpace);mt(L)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,W(L),pt,L.width,L.height):ne?t.renderbufferStorageMultisample(t.RENDERBUFFER,W(L),pt,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,pt,L.width,L.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ze(B,L,ne){const pe=L.isWebGLCubeRenderTarget===!0;if(n.bindFramebuffer(t.FRAMEBUFFER,B),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const be=i.get(L.depthTexture);if(be.__renderTarget=L,(!be.__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),pe){if(be.__webglInit===void 0&&(be.__webglInit=!0,L.depthTexture.addEventListener("dispose",R)),be.__webglTexture===void 0){be.__webglTexture=t.createTexture(),n.bindTexture(t.TEXTURE_CUBE_MAP,be.__webglTexture),Ae(t.TEXTURE_CUBE_MAP,L.depthTexture);const At=a.convert(L.depthTexture.format),Re=a.convert(L.depthTexture.type);let Pe;L.depthTexture.format===ul?Pe=t.DEPTH_COMPONENT24:L.depthTexture.format===tc&&(Pe=t.DEPTH24_STENCIL8);for(let ot=0;ot<6;ot++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ot,0,Pe,L.width,L.height,0,At,Re,null)}}else Z(L.depthTexture,0);const ye=be.__webglTexture,ut=W(L),Je=pe?t.TEXTURE_CUBE_MAP_POSITIVE_X+ne:t.TEXTURE_2D,pt=L.depthTexture.format===tc?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(L.depthTexture.format===ul)mt(L)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,pt,Je,ye,0,ut):t.framebufferTexture2D(t.FRAMEBUFFER,pt,Je,ye,0);else if(L.depthTexture.format===tc)mt(L)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,pt,Je,ye,0,ut):t.framebufferTexture2D(t.FRAMEBUFFER,pt,Je,ye,0);else throw new Error("Unknown depthTexture format")}function ht(B){const L=i.get(B),ne=B.isWebGLCubeRenderTarget===!0;if(L.__boundDepthTexture!==B.depthTexture){const pe=B.depthTexture;if(L.__depthDisposeCallback&&L.__depthDisposeCallback(),pe){const be=()=>{delete L.__boundDepthTexture,delete L.__depthDisposeCallback,pe.removeEventListener("dispose",be)};pe.addEventListener("dispose",be),L.__depthDisposeCallback=be}L.__boundDepthTexture=pe}if(B.depthTexture&&!L.__autoAllocateDepthBuffer)if(ne)for(let pe=0;pe<6;pe++)Ze(L.__webglFramebuffer[pe],B,pe);else{const pe=B.texture.mipmaps;pe&&pe.length>0?Ze(L.__webglFramebuffer[0],B,0):Ze(L.__webglFramebuffer,B,0)}else if(ne){L.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)if(n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[pe]),L.__webglDepthbuffer[pe]===void 0)L.__webglDepthbuffer[pe]=t.createRenderbuffer(),xt(L.__webglDepthbuffer[pe],B,!1);else{const be=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ye=L.__webglDepthbuffer[pe];t.bindRenderbuffer(t.RENDERBUFFER,ye),t.framebufferRenderbuffer(t.FRAMEBUFFER,be,t.RENDERBUFFER,ye)}}else{const pe=B.texture.mipmaps;if(pe&&pe.length>0?n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer===void 0)L.__webglDepthbuffer=t.createRenderbuffer(),xt(L.__webglDepthbuffer,B,!1);else{const be=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ye=L.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,ye),t.framebufferRenderbuffer(t.FRAMEBUFFER,be,t.RENDERBUFFER,ye)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ft(B,L,ne){const pe=i.get(B);L!==void 0&&Fe(pe.__webglFramebuffer,B,B.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ne!==void 0&&ht(B)}function ct(B){const L=B.texture,ne=i.get(B),pe=i.get(L);B.addEventListener("dispose",N);const be=B.textures,ye=B.isWebGLCubeRenderTarget===!0,ut=be.length>1;if(ut||(pe.__webglTexture===void 0&&(pe.__webglTexture=t.createTexture()),pe.__version=L.version,s.memory.textures++),ye){ne.__webglFramebuffer=[];for(let Je=0;Je<6;Je++)if(L.mipmaps&&L.mipmaps.length>0){ne.__webglFramebuffer[Je]=[];for(let pt=0;pt<L.mipmaps.length;pt++)ne.__webglFramebuffer[Je][pt]=t.createFramebuffer()}else ne.__webglFramebuffer[Je]=t.createFramebuffer()}else{if(L.mipmaps&&L.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Je=0;Je<L.mipmaps.length;Je++)ne.__webglFramebuffer[Je]=t.createFramebuffer()}else ne.__webglFramebuffer=t.createFramebuffer();if(ut)for(let Je=0,pt=be.length;Je<pt;Je++){const At=i.get(be[Je]);At.__webglTexture===void 0&&(At.__webglTexture=t.createTexture(),s.memory.textures++)}if(B.samples>0&&mt(B)===!1){ne.__webglMultisampledFramebuffer=t.createFramebuffer(),ne.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Je=0;Je<be.length;Je++){const pt=be[Je];ne.__webglColorRenderbuffer[Je]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ne.__webglColorRenderbuffer[Je]);const At=a.convert(pt.format,pt.colorSpace),Re=a.convert(pt.type),Pe=E(pt.internalFormat,At,Re,pt.colorSpace,B.isXRRenderTarget===!0),ot=W(B);t.renderbufferStorageMultisample(t.RENDERBUFFER,ot,Pe,B.width,B.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.RENDERBUFFER,ne.__webglColorRenderbuffer[Je])}t.bindRenderbuffer(t.RENDERBUFFER,null),B.depthBuffer&&(ne.__webglDepthRenderbuffer=t.createRenderbuffer(),xt(ne.__webglDepthRenderbuffer,B,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(ye){n.bindTexture(t.TEXTURE_CUBE_MAP,pe.__webglTexture),Ae(t.TEXTURE_CUBE_MAP,L);for(let Je=0;Je<6;Je++)if(L.mipmaps&&L.mipmaps.length>0)for(let pt=0;pt<L.mipmaps.length;pt++)Fe(ne.__webglFramebuffer[Je][pt],B,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Je,pt);else Fe(ne.__webglFramebuffer[Je],B,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Je,0);b(L)&&v(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ut){for(let Je=0,pt=be.length;Je<pt;Je++){const At=be[Je],Re=i.get(At);let Pe=t.TEXTURE_2D;(B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(Pe=B.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Pe,Re.__webglTexture),Ae(Pe,At),Fe(ne.__webglFramebuffer,B,At,t.COLOR_ATTACHMENT0+Je,Pe,0),b(At)&&v(Pe)}n.unbindTexture()}else{let Je=t.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(Je=B.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Je,pe.__webglTexture),Ae(Je,L),L.mipmaps&&L.mipmaps.length>0)for(let pt=0;pt<L.mipmaps.length;pt++)Fe(ne.__webglFramebuffer[pt],B,L,t.COLOR_ATTACHMENT0,Je,pt);else Fe(ne.__webglFramebuffer,B,L,t.COLOR_ATTACHMENT0,Je,0);b(L)&&v(Je),n.unbindTexture()}B.depthBuffer&&ht(B)}function Me(B){const L=B.textures;for(let ne=0,pe=L.length;ne<pe;ne++){const be=L[ne];if(b(be)){const ye=x(B),ut=i.get(be).__webglTexture;n.bindTexture(ye,ut),v(ye),n.unbindTexture()}}}const Oe=[],we=[];function Ge(B){if(B.samples>0){if(mt(B)===!1){const L=B.textures,ne=B.width,pe=B.height;let be=t.COLOR_BUFFER_BIT;const ye=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ut=i.get(B),Je=L.length>1;if(Je)for(let At=0;At<L.length;At++)n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+At,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+At,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,ut.__webglMultisampledFramebuffer);const pt=B.texture.mipmaps;pt&&pt.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ut.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ut.__webglFramebuffer);for(let At=0;At<L.length;At++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(be|=t.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(be|=t.STENCIL_BUFFER_BIT)),Je){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,ut.__webglColorRenderbuffer[At]);const Re=i.get(L[At]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Re,0)}t.blitFramebuffer(0,0,ne,pe,0,0,ne,pe,be,t.NEAREST),l===!0&&(Oe.length=0,we.length=0,Oe.push(t.COLOR_ATTACHMENT0+At),B.depthBuffer&&B.resolveDepthBuffer===!1&&(Oe.push(ye),we.push(ye),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,we)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Oe))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Je)for(let At=0;At<L.length;At++){n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+At,t.RENDERBUFFER,ut.__webglColorRenderbuffer[At]);const Re=i.get(L[At]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+At,t.TEXTURE_2D,Re,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ut.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&l){const L=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[L])}}}function W(B){return Math.min(r.maxSamples,B.samples)}function mt(B){const L=i.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function Qe(B){const L=s.render.frame;h.get(B)!==L&&(h.set(B,L),B.update())}function bt(B,L){const ne=B.colorSpace,pe=B.format,be=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||ne!==Ms&&ne!==Ro&&(pn.getTransfer(ne)===Ln?(pe!==Zi||be!==fi)&&ft("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Ut("WebGLTextures: Unsupported texture color space:",ne)),L}function We(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(f.width=B.naturalWidth||B.width,f.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(f.width=B.displayWidth,f.height=B.displayHeight):(f.width=B.width,f.height=B.height),f}this.allocateTextureUnit=j,this.resetTextureUnits=X,this.setTexture2D=Z,this.setTexture2DArray=z,this.setTexture3D=G,this.setTextureCube=q,this.rebindTextures=Ft,this.setupRenderTarget=ct,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=Ge,this.setupDepthRenderbuffer=ht,this.setupFrameBufferTexture=Fe,this.useMultisampledRTT=mt,this.isReversedDepthBuffer=function(){return n.buffers.depth.getReversed()}}function lF(t,e){function n(i,r=Ro){let a;const s=pn.getTransfer(r);if(i===fi)return t.UNSIGNED_BYTE;if(i===e2)return t.UNSIGNED_SHORT_4_4_4_4;if(i===t2)return t.UNSIGNED_SHORT_5_5_5_1;if(i===A4)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===w4)return t.UNSIGNED_INT_10F_11F_11F_REV;if(i===Qb)return t.BYTE;if(i===Jb)return t.SHORT;if(i===jp)return t.UNSIGNED_SHORT;if(i===Pv)return t.INT;if(i===Fa)return t.UNSIGNED_INT;if(i===ai)return t.FLOAT;if(i===Ei)return t.HALF_FLOAT;if(i===C4)return t.ALPHA;if(i===R4)return t.RGB;if(i===Zi)return t.RGBA;if(i===ul)return t.DEPTH_COMPONENT;if(i===tc)return t.DEPTH_STENCIL;if(i===Iv)return t.RED;if(i===zv)return t.RED_INTEGER;if(i===bh)return t.RG;if(i===n2)return t.RG_INTEGER;if(i===i2)return t.RGBA_INTEGER;if(i===pg||i===mg||i===gg||i===vg)if(s===Ln)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===pg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===mg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===gg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===vg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===pg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===mg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===gg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===vg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===bx||i===Sx||i===Ex||i===Mx)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===bx)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Sx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ex)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Mx)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Tx||i===Ax||i===wx||i===Cx||i===Rx||i===Dx||i===Ox)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===Tx||i===Ax)return s===Ln?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===wx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(i===Cx)return a.COMPRESSED_R11_EAC;if(i===Rx)return a.COMPRESSED_SIGNED_R11_EAC;if(i===Dx)return a.COMPRESSED_RG11_EAC;if(i===Ox)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===Nx||i===Ux||i===Lx||i===Px||i===Ix||i===zx||i===Bx||i===Fx||i===Hx||i===Vx||i===Gx||i===kx||i===jx||i===Xx)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===Nx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Ux)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Lx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Px)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Ix)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===zx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Bx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Fx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Hx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Vx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Gx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===kx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===jx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Xx)return s===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Wx||i===Yx||i===qx)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===Wx)return s===Ln?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Yx)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===qx)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Zx||i===$x||i===Kx||i===Qx)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===Zx)return a.COMPRESSED_RED_RGTC1_EXT;if(i===$x)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Kx)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Qx)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===xh?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}const Dne=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,One=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Nne{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const i=new H4(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new vi({vertexShader:Dne,fragmentShader:One,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Mi(new Ju(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Une extends ws{constructor(e,n){super();const i=this;let r=null,a=1,s=null,o="local-floor",l=1,f=null,h=null,d=null,p=null,g=null,y=null;const S=typeof XRWebGLBinding<"u",b=new Nne,v={},x=n.getContextAttributes();let E=null,T=null;const w=[],R=[],N=new xe;let U=null;const A=new bi;A.viewport=new jn;const C=new bi;C.viewport=new jn;const I=[A,C],X=new Q7;let j=null,Y=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let Te=w[he];return Te===void 0&&(Te=new C_,w[he]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(he){let Te=w[he];return Te===void 0&&(Te=new C_,w[he]=Te),Te.getGripSpace()},this.getHand=function(he){let Te=w[he];return Te===void 0&&(Te=new C_,w[he]=Te),Te.getHandSpace()};function Z(he){const Te=R.indexOf(he.inputSource);if(Te===-1)return;const Fe=w[Te];Fe!==void 0&&(Fe.update(he.inputSource,he.frame,f||s),Fe.dispatchEvent({type:he.type,data:he.inputSource}))}function z(){r.removeEventListener("select",Z),r.removeEventListener("selectstart",Z),r.removeEventListener("selectend",Z),r.removeEventListener("squeeze",Z),r.removeEventListener("squeezestart",Z),r.removeEventListener("squeezeend",Z),r.removeEventListener("end",z),r.removeEventListener("inputsourceschange",G);for(let he=0;he<w.length;he++){const Te=R[he];Te!==null&&(R[he]=null,w[he].disconnect(Te))}j=null,Y=null,b.reset();for(const he in v)delete v[he];e.setRenderTarget(E),g=null,p=null,d=null,r=null,T=null,yt.stop(),i.isPresenting=!1,e.setPixelRatio(U),e.setSize(N.width,N.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){a=he,i.isPresenting===!0&&ft("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){o=he,i.isPresenting===!0&&ft("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||s},this.setReferenceSpace=function(he){f=he},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return d===null&&S&&(d=new XRWebGLBinding(r,n)),d},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(he){if(r=he,r!==null){if(E=e.getRenderTarget(),r.addEventListener("select",Z),r.addEventListener("selectstart",Z),r.addEventListener("selectend",Z),r.addEventListener("squeeze",Z),r.addEventListener("squeezestart",Z),r.addEventListener("squeezeend",Z),r.addEventListener("end",z),r.addEventListener("inputsourceschange",G),x.xrCompatible!==!0&&await n.makeXRCompatible(),U=e.getPixelRatio(),e.getSize(N),S&&"createProjectionLayer"in XRWebGLBinding.prototype){let Fe=null,xt=null,Ze=null;x.depth&&(Ze=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Fe=x.stencil?tc:ul,xt=x.stencil?xh:Fa);const ht={colorFormat:n.RGBA8,depthFormat:Ze,scaleFactor:a};d=this.getBinding(),p=d.createProjectionLayer(ht),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),T=new si(p.textureWidth,p.textureHeight,{format:Zi,type:fi,depthTexture:new Fu(p.textureWidth,p.textureHeight,xt,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{const Fe={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:a};g=new XRWebGLLayer(r,n,Fe),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),T=new si(g.framebufferWidth,g.framebufferHeight,{format:Zi,type:fi,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),f=null,s=await r.requestReferenceSpace(o),yt.setContext(r),yt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function G(he){for(let Te=0;Te<he.removed.length;Te++){const Fe=he.removed[Te],xt=R.indexOf(Fe);xt>=0&&(R[xt]=null,w[xt].disconnect(Fe))}for(let Te=0;Te<he.added.length;Te++){const Fe=he.added[Te];let xt=R.indexOf(Fe);if(xt===-1){for(let ht=0;ht<w.length;ht++)if(ht>=R.length){R.push(Fe),xt=ht;break}else if(R[ht]===null){R[ht]=Fe,xt=ht;break}if(xt===-1)break}const Ze=w[xt];Ze&&Ze.connect(Fe)}}const q=new k,se=new k;function le(he,Te,Fe){q.setFromMatrixPosition(Te.matrixWorld),se.setFromMatrixPosition(Fe.matrixWorld);const xt=q.distanceTo(se),Ze=Te.projectionMatrix.elements,ht=Fe.projectionMatrix.elements,Ft=Ze[14]/(Ze[10]-1),ct=Ze[14]/(Ze[10]+1),Me=(Ze[9]+1)/Ze[5],Oe=(Ze[9]-1)/Ze[5],we=(Ze[8]-1)/Ze[0],Ge=(ht[8]+1)/ht[0],W=Ft*we,mt=Ft*Ge,Qe=xt/(-we+Ge),bt=Qe*-we;if(Te.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(bt),he.translateZ(Qe),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert(),Ze[10]===-1)he.projectionMatrix.copy(Te.projectionMatrix),he.projectionMatrixInverse.copy(Te.projectionMatrixInverse);else{const We=Ft+Qe,B=ct+Qe,L=W-bt,ne=mt+(xt-bt),pe=Me*ct/B*We,be=Oe*ct/B*We;he.projectionMatrix.makePerspective(L,ne,pe,be,We,B),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}}function me(he,Te){Te===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(Te.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(r===null)return;let Te=he.near,Fe=he.far;b.texture!==null&&(b.depthNear>0&&(Te=b.depthNear),b.depthFar>0&&(Fe=b.depthFar)),X.near=C.near=A.near=Te,X.far=C.far=A.far=Fe,(j!==X.near||Y!==X.far)&&(r.updateRenderState({depthNear:X.near,depthFar:X.far}),j=X.near,Y=X.far),X.layers.mask=he.layers.mask|6,A.layers.mask=X.layers.mask&3,C.layers.mask=X.layers.mask&5;const xt=he.parent,Ze=X.cameras;me(X,xt);for(let ht=0;ht<Ze.length;ht++)me(Ze[ht],xt);Ze.length===2?le(X,A,C):X.projectionMatrix.copy(A.projectionMatrix),Ae(he,X,xt)};function Ae(he,Te,Fe){Fe===null?he.matrix.copy(Te.matrixWorld):(he.matrix.copy(Fe.matrixWorld),he.matrix.invert(),he.matrix.multiply(Te.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(Te.projectionMatrix),he.projectionMatrixInverse.copy(Te.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=Yp*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return X},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(he){l=he,p!==null&&(p.fixedFoveation=he),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=he)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(X)},this.getCameraTexture=function(he){return v[he]};let Le=null;function Ke(he,Te){if(h=Te.getViewerPose(f||s),y=Te,h!==null){const Fe=h.views;g!==null&&(e.setRenderTargetFramebuffer(T,g.framebuffer),e.setRenderTarget(T));let xt=!1;Fe.length!==X.cameras.length&&(X.cameras.length=0,xt=!0);for(let ct=0;ct<Fe.length;ct++){const Me=Fe[ct];let Oe=null;if(g!==null)Oe=g.getViewport(Me);else{const Ge=d.getViewSubImage(p,Me);Oe=Ge.viewport,ct===0&&(e.setRenderTargetTextures(T,Ge.colorTexture,Ge.depthStencilTexture),e.setRenderTarget(T))}let we=I[ct];we===void 0&&(we=new bi,we.layers.enable(ct),we.viewport=new jn,I[ct]=we),we.matrix.fromArray(Me.transform.matrix),we.matrix.decompose(we.position,we.quaternion,we.scale),we.projectionMatrix.fromArray(Me.projectionMatrix),we.projectionMatrixInverse.copy(we.projectionMatrix).invert(),we.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),ct===0&&(X.matrix.copy(we.matrix),X.matrix.decompose(X.position,X.quaternion,X.scale)),xt===!0&&X.cameras.push(we)}const Ze=r.enabledFeatures;if(Ze&&Ze.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&S){d=i.getBinding();const ct=d.getDepthInformation(Fe[0]);ct&&ct.isValid&&ct.texture&&b.init(ct,r.renderState)}if(Ze&&Ze.includes("camera-access")&&S){e.state.unbindTexture(),d=i.getBinding();for(let ct=0;ct<Fe.length;ct++){const Me=Fe[ct].camera;if(Me){let Oe=v[Me];Oe||(Oe=new H4,v[Me]=Oe);const we=d.getCameraImage(Me);Oe.sourceTexture=we}}}}for(let Fe=0;Fe<w.length;Fe++){const xt=R[Fe],Ze=w[Fe];xt!==null&&Ze!==void 0&&Ze.update(xt,Te,f||s)}Le&&Le(he,Te),Te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Te}),y=null}const yt=new iF;yt.setAnimationLoop(Ke),this.setAnimationLoop=function(he){Le=he},this.dispose=function(){}}}const zf=new Ts,Lne=new Wt;function Pne(t,e){function n(b,v){b.matrixAutoUpdate===!0&&b.updateMatrix(),v.value.copy(b.matrix)}function i(b,v){v.color.getRGB(b.fogColor.value,s7(t)),v.isFog?(b.fogNear.value=v.near,b.fogFar.value=v.far):v.isFogExp2&&(b.fogDensity.value=v.density)}function r(b,v,x,E,T){v.isMeshBasicMaterial||v.isMeshLambertMaterial?a(b,v):v.isMeshToonMaterial?(a(b,v),d(b,v)):v.isMeshPhongMaterial?(a(b,v),h(b,v)):v.isMeshStandardMaterial?(a(b,v),p(b,v),v.isMeshPhysicalMaterial&&g(b,v,T)):v.isMeshMatcapMaterial?(a(b,v),y(b,v)):v.isMeshDepthMaterial?a(b,v):v.isMeshDistanceMaterial?(a(b,v),S(b,v)):v.isMeshNormalMaterial?a(b,v):v.isLineBasicMaterial?(s(b,v),v.isLineDashedMaterial&&o(b,v)):v.isPointsMaterial?l(b,v,x,E):v.isSpriteMaterial?f(b,v):v.isShadowMaterial?(b.color.value.copy(v.color),b.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function a(b,v){b.opacity.value=v.opacity,v.color&&b.diffuse.value.copy(v.color),v.emissive&&b.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(b.map.value=v.map,n(v.map,b.mapTransform)),v.alphaMap&&(b.alphaMap.value=v.alphaMap,n(v.alphaMap,b.alphaMapTransform)),v.bumpMap&&(b.bumpMap.value=v.bumpMap,n(v.bumpMap,b.bumpMapTransform),b.bumpScale.value=v.bumpScale,v.side===lr&&(b.bumpScale.value*=-1)),v.normalMap&&(b.normalMap.value=v.normalMap,n(v.normalMap,b.normalMapTransform),b.normalScale.value.copy(v.normalScale),v.side===lr&&b.normalScale.value.negate()),v.displacementMap&&(b.displacementMap.value=v.displacementMap,n(v.displacementMap,b.displacementMapTransform),b.displacementScale.value=v.displacementScale,b.displacementBias.value=v.displacementBias),v.emissiveMap&&(b.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,b.emissiveMapTransform)),v.specularMap&&(b.specularMap.value=v.specularMap,n(v.specularMap,b.specularMapTransform)),v.alphaTest>0&&(b.alphaTest.value=v.alphaTest);const x=e.get(v),E=x.envMap,T=x.envMapRotation;E&&(b.envMap.value=E,zf.copy(T),zf.x*=-1,zf.y*=-1,zf.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(zf.y*=-1,zf.z*=-1),b.envMapRotation.value.setFromMatrix4(Lne.makeRotationFromEuler(zf)),b.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=v.reflectivity,b.ior.value=v.ior,b.refractionRatio.value=v.refractionRatio),v.lightMap&&(b.lightMap.value=v.lightMap,b.lightMapIntensity.value=v.lightMapIntensity,n(v.lightMap,b.lightMapTransform)),v.aoMap&&(b.aoMap.value=v.aoMap,b.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,b.aoMapTransform))}function s(b,v){b.diffuse.value.copy(v.color),b.opacity.value=v.opacity,v.map&&(b.map.value=v.map,n(v.map,b.mapTransform))}function o(b,v){b.dashSize.value=v.dashSize,b.totalSize.value=v.dashSize+v.gapSize,b.scale.value=v.scale}function l(b,v,x,E){b.diffuse.value.copy(v.color),b.opacity.value=v.opacity,b.size.value=v.size*x,b.scale.value=E*.5,v.map&&(b.map.value=v.map,n(v.map,b.uvTransform)),v.alphaMap&&(b.alphaMap.value=v.alphaMap,n(v.alphaMap,b.alphaMapTransform)),v.alphaTest>0&&(b.alphaTest.value=v.alphaTest)}function f(b,v){b.diffuse.value.copy(v.color),b.opacity.value=v.opacity,b.rotation.value=v.rotation,v.map&&(b.map.value=v.map,n(v.map,b.mapTransform)),v.alphaMap&&(b.alphaMap.value=v.alphaMap,n(v.alphaMap,b.alphaMapTransform)),v.alphaTest>0&&(b.alphaTest.value=v.alphaTest)}function h(b,v){b.specular.value.copy(v.specular),b.shininess.value=Math.max(v.shininess,1e-4)}function d(b,v){v.gradientMap&&(b.gradientMap.value=v.gradientMap)}function p(b,v){b.metalness.value=v.metalness,v.metalnessMap&&(b.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,b.metalnessMapTransform)),b.roughness.value=v.roughness,v.roughnessMap&&(b.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,b.roughnessMapTransform)),v.envMap&&(b.envMapIntensity.value=v.envMapIntensity)}function g(b,v,x){b.ior.value=v.ior,v.sheen>0&&(b.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),b.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(b.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,b.sheenColorMapTransform)),v.sheenRoughnessMap&&(b.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,b.sheenRoughnessMapTransform))),v.clearcoat>0&&(b.clearcoat.value=v.clearcoat,b.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(b.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,b.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(b.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===lr&&b.clearcoatNormalScale.value.negate())),v.dispersion>0&&(b.dispersion.value=v.dispersion),v.iridescence>0&&(b.iridescence.value=v.iridescence,b.iridescenceIOR.value=v.iridescenceIOR,b.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(b.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,b.iridescenceMapTransform)),v.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),v.transmission>0&&(b.transmission.value=v.transmission,b.transmissionSamplerMap.value=x.texture,b.transmissionSamplerSize.value.set(x.width,x.height),v.transmissionMap&&(b.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,b.transmissionMapTransform)),b.thickness.value=v.thickness,v.thicknessMap&&(b.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=v.attenuationDistance,b.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(b.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(b.anisotropyMap.value=v.anisotropyMap,n(v.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=v.specularIntensity,b.specularColor.value.copy(v.specularColor),v.specularColorMap&&(b.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,b.specularColorMapTransform)),v.specularIntensityMap&&(b.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,b.specularIntensityMapTransform))}function y(b,v){v.matcap&&(b.matcap.value=v.matcap)}function S(b,v){const x=e.get(v).light;b.referencePosition.value.setFromMatrixPosition(x.matrixWorld),b.nearDistance.value=x.shadow.camera.near,b.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Ine(t,e,n,i){let r={},a={},s=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,E){const T=E.program;i.uniformBlockBinding(x,T)}function f(x,E){let T=r[x.id];T===void 0&&(y(x),T=h(x),r[x.id]=T,x.addEventListener("dispose",b));const w=E.program;i.updateUBOMapping(x,w);const R=e.render.frame;a[x.id]!==R&&(p(x),a[x.id]=R)}function h(x){const E=d();x.__bindingPointIndex=E;const T=t.createBuffer(),w=x.__size,R=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,T),t.bufferData(t.UNIFORM_BUFFER,w,R),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,E,T),T}function d(){for(let x=0;x<o;x++)if(s.indexOf(x)===-1)return s.push(x),x;return Ut("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const E=r[x.id],T=x.uniforms,w=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,E);for(let R=0,N=T.length;R<N;R++){const U=Array.isArray(T[R])?T[R]:[T[R]];for(let A=0,C=U.length;A<C;A++){const I=U[A];if(g(I,R,A,w)===!0){const X=I.__offset,j=Array.isArray(I.value)?I.value:[I.value];let Y=0;for(let Z=0;Z<j.length;Z++){const z=j[Z],G=S(z);typeof z=="number"||typeof z=="boolean"?(I.__data[0]=z,t.bufferSubData(t.UNIFORM_BUFFER,X+Y,I.__data)):z.isMatrix3?(I.__data[0]=z.elements[0],I.__data[1]=z.elements[1],I.__data[2]=z.elements[2],I.__data[3]=0,I.__data[4]=z.elements[3],I.__data[5]=z.elements[4],I.__data[6]=z.elements[5],I.__data[7]=0,I.__data[8]=z.elements[6],I.__data[9]=z.elements[7],I.__data[10]=z.elements[8],I.__data[11]=0):(z.toArray(I.__data,Y),Y+=G.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,X,I.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function g(x,E,T,w){const R=x.value,N=E+"_"+T;if(w[N]===void 0)return typeof R=="number"||typeof R=="boolean"?w[N]=R:w[N]=R.clone(),!0;{const U=w[N];if(typeof R=="number"||typeof R=="boolean"){if(U!==R)return w[N]=R,!0}else if(U.equals(R)===!1)return U.copy(R),!0}return!1}function y(x){const E=x.uniforms;let T=0;const w=16;for(let N=0,U=E.length;N<U;N++){const A=Array.isArray(E[N])?E[N]:[E[N]];for(let C=0,I=A.length;C<I;C++){const X=A[C],j=Array.isArray(X.value)?X.value:[X.value];for(let Y=0,Z=j.length;Y<Z;Y++){const z=j[Y],G=S(z),q=T%w,se=q%G.boundary,le=q+se;T+=se,le!==0&&w-le<G.storage&&(T+=w-le),X.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),X.__offset=T,T+=G.storage}}}const R=T%w;return R>0&&(T+=w-R),x.__size=T,x.__cache={},this}function S(x){const E={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(E.boundary=4,E.storage=4):x.isVector2?(E.boundary=8,E.storage=8):x.isVector3||x.isColor?(E.boundary=16,E.storage=12):x.isVector4?(E.boundary=16,E.storage=16):x.isMatrix3?(E.boundary=48,E.storage=48):x.isMatrix4?(E.boundary=64,E.storage=64):x.isTexture?ft("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ft("WebGLRenderer: Unsupported uniform value type.",x),E}function b(x){const E=x.target;E.removeEventListener("dispose",b);const T=s.indexOf(E.__bindingPointIndex);s.splice(T,1),t.deleteBuffer(r[E.id]),delete r[E.id],delete a[E.id]}function v(){for(const x in r)t.deleteBuffer(r[x]);s=[],r={},a={}}return{bind:l,update:f,dispose:v}}const zne=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let qo=null;function Bne(){return qo===null&&(qo=new oo(zne,16,16,bh,Ei),qo.name="DFG_LUT",qo.minFilter=rn,qo.magFilter=rn,qo.wrapS=Hi,qo.wrapT=Hi,qo.generateMipmaps=!1,qo.needsUpdate=!0),qo}class uC{constructor(e={}){const{canvas:n=i7(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:f=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:p=!1,outputBufferType:g=fi}=e;this.isWebGLRenderer=!0;let y;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=s;const S=g,b=new Set([i2,n2,zv]),v=new Set([fi,Fa,jp,xh,e2,t2]),x=new Uint32Array(4),E=new Int32Array(4);let T=null,w=null;const R=[],N=[];let U=null;this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=gs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const A=this;let C=!1;this._outputColorSpace=En;let I=0,X=0,j=null,Y=-1,Z=null;const z=new jn,G=new jn;let q=null;const se=new lt(0);let le=0,me=n.width,Ae=n.height,Le=1,Ke=null,yt=null;const he=new jn(0,0,me,Ae),Te=new jn(0,0,me,Ae);let Fe=!1;const xt=new Mm;let Ze=!1,ht=!1;const Ft=new Wt,ct=new k,Me=new jn,Oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let we=!1;function Ge(){return j===null?Le:1}let W=i;function mt(F,K){return n.getContext(F,K)}try{const F={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:f,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Bh}`),n.addEventListener("webglcontextlost",Ct,!1),n.addEventListener("webglcontextrestored",an,!1),n.addEventListener("webglcontextcreationerror",Qt,!1),W===null){const K="webgl2";if(W=mt(K,F),W===null)throw mt(K)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw Ut("WebGLRenderer: "+F.message),F}let Qe,bt,We,B,L,ne,pe,be,ye,ut,Je,pt,At,Re,Pe,ot,Q,ce,Ue,ee,de,Ie,rt,He;function De(){Qe=new Fee(W),Qe.init(),Ie=new lF(W,Qe),bt=new Dee(W,Qe,e,Ie),We=new Cne(W,Qe),bt.reversedDepthBuffer&&p&&We.buffers.depth.setReversed(!0),B=new Gee(W),L=new dne,ne=new Rne(W,Qe,We,L,bt,Ie,B),pe=new Nee(A),be=new Bee(A),ye=new WK(W),rt=new Cee(W,ye),ut=new Hee(W,ye,B,rt),Je=new jee(W,ut,ye,B),Ue=new kee(W,bt,ne),ot=new Oee(L),pt=new hne(A,pe,be,Qe,bt,rt,ot),At=new Pne(A,L),Re=new mne,Pe=new bne(Qe),ce=new wee(A,pe,be,We,Je,y,l),Q=new Ane(A,Je,bt),He=new Ine(W,B,bt,We),ee=new Ree(W,Qe,B),de=new Vee(W,Qe,B),B.programs=pt.programs,A.capabilities=bt,A.extensions=Qe,A.properties=L,A.renderLists=Re,A.shadowMap=Q,A.state=We,A.info=B}De(),S!==fi&&(U=new Wee(S,n.width,n.height,r,a));const Ye=new Une(A,W);this.xr=Ye,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const F=Qe.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=Qe.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return Le},this.setPixelRatio=function(F){F!==void 0&&(Le=F,this.setSize(me,Ae,!1))},this.getSize=function(F){return F.set(me,Ae)},this.setSize=function(F,K,ae=!0){if(Ye.isPresenting){ft("WebGLRenderer: Can't change size while VR device is presenting.");return}me=F,Ae=K,n.width=Math.floor(F*Le),n.height=Math.floor(K*Le),ae===!0&&(n.style.width=F+"px",n.style.height=K+"px"),U!==null&&U.setSize(n.width,n.height),this.setViewport(0,0,F,K)},this.getDrawingBufferSize=function(F){return F.set(me*Le,Ae*Le).floor()},this.setDrawingBufferSize=function(F,K,ae){me=F,Ae=K,Le=ae,n.width=Math.floor(F*ae),n.height=Math.floor(K*ae),this.setViewport(0,0,F,K)},this.setEffects=function(F){if(S===fi){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(F){for(let K=0;K<F.length;K++)if(F[K].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}U.setEffects(F||[])},this.getCurrentViewport=function(F){return F.copy(z)},this.getViewport=function(F){return F.copy(he)},this.setViewport=function(F,K,ae,oe){F.isVector4?he.set(F.x,F.y,F.z,F.w):he.set(F,K,ae,oe),We.viewport(z.copy(he).multiplyScalar(Le).round())},this.getScissor=function(F){return F.copy(Te)},this.setScissor=function(F,K,ae,oe){F.isVector4?Te.set(F.x,F.y,F.z,F.w):Te.set(F,K,ae,oe),We.scissor(G.copy(Te).multiplyScalar(Le).round())},this.getScissorTest=function(){return Fe},this.setScissorTest=function(F){We.setScissorTest(Fe=F)},this.setOpaqueSort=function(F){Ke=F},this.setTransparentSort=function(F){yt=F},this.getClearColor=function(F){return F.copy(ce.getClearColor())},this.setClearColor=function(){ce.setClearColor(...arguments)},this.getClearAlpha=function(){return ce.getClearAlpha()},this.setClearAlpha=function(){ce.setClearAlpha(...arguments)},this.clear=function(F=!0,K=!0,ae=!0){let oe=0;if(F){let re=!1;if(j!==null){const ze=j.texture.format;re=b.has(ze)}if(re){const ze=j.texture.type,je=v.has(ze),Xe=ce.getClearColor(),at=ce.getClearAlpha(),it=Xe.r,wt=Xe.g,st=Xe.b;je?(x[0]=it,x[1]=wt,x[2]=st,x[3]=at,W.clearBufferuiv(W.COLOR,0,x)):(E[0]=it,E[1]=wt,E[2]=st,E[3]=at,W.clearBufferiv(W.COLOR,0,E))}else oe|=W.COLOR_BUFFER_BIT}K&&(oe|=W.DEPTH_BUFFER_BIT),ae&&(oe|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ct,!1),n.removeEventListener("webglcontextrestored",an,!1),n.removeEventListener("webglcontextcreationerror",Qt,!1),ce.dispose(),Re.dispose(),Pe.dispose(),L.dispose(),pe.dispose(),be.dispose(),Je.dispose(),rt.dispose(),He.dispose(),pt.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",mo),Ye.removeEventListener("sessionend",Dr),Ht.stop()};function Ct(F){F.preventDefault(),ev("WebGLRenderer: Context Lost."),C=!0}function an(){ev("WebGLRenderer: Context Restored."),C=!1;const F=B.autoReset,K=Q.enabled,ae=Q.autoUpdate,oe=Q.needsUpdate,re=Q.type;De(),B.autoReset=F,Q.enabled=K,Q.autoUpdate=ae,Q.needsUpdate=oe,Q.type=re}function Qt(F){Ut("WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function ki(F){const K=F.target;K.removeEventListener("dispose",ki),fr(K)}function fr(F){Wh(F),L.remove(F)}function Wh(F){const K=L.get(F).programs;K!==void 0&&(K.forEach(function(ae){pt.releaseProgram(ae)}),F.isShaderMaterial&&pt.releaseShaderCache(F))}this.renderBufferDirect=function(F,K,ae,oe,re,ze){K===null&&(K=Oe);const je=re.isMesh&&re.matrixWorld.determinant()<0,Xe=qe(F,K,ae,oe,re);We.setMaterial(oe,je);let at=ae.index,it=1;if(oe.wireframe===!0){if(at=ut.getWireframeAttribute(ae),at===void 0)return;it=2}const wt=ae.drawRange,st=ae.attributes.position;let Dt=wt.start*it,sn=(wt.start+wt.count)*it;ze!==null&&(Dt=Math.max(Dt,ze.start*it),sn=Math.min(sn,(ze.start+ze.count)*it)),at!==null?(Dt=Math.max(Dt,0),sn=Math.min(sn,at.count)):st!=null&&(Dt=Math.max(Dt,0),sn=Math.min(sn,st.count));const Dn=sn-Dt;if(Dn<0||Dn===1/0)return;rt.setup(re,oe,Xe,ae,at);let ln,Nt=ee;if(at!==null&&(ln=ye.get(at),Nt=de,Nt.setIndex(ln)),re.isMesh)oe.wireframe===!0?(We.setLineWidth(oe.wireframeLinewidth*Ge()),Nt.setMode(W.LINES)):Nt.setMode(W.TRIANGLES);else if(re.isLine){let gt=oe.linewidth;gt===void 0&&(gt=1),We.setLineWidth(gt*Ge()),re.isLineSegments?Nt.setMode(W.LINES):re.isLineLoop?Nt.setMode(W.LINE_LOOP):Nt.setMode(W.LINE_STRIP)}else re.isPoints?Nt.setMode(W.POINTS):re.isSprite&&Nt.setMode(W.TRIANGLES);if(re.isBatchedMesh)if(re._multiDrawInstances!==null)Wp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Nt.renderMultiDrawInstances(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount,re._multiDrawInstances);else if(Qe.get("WEBGL_multi_draw"))Nt.renderMultiDraw(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount);else{const gt=re._multiDrawStarts,Lt=re._multiDrawCounts,Mt=re._multiDrawCount,Fn=at?ye.get(at).bytesPerElement:1,Or=L.get(oe).currentProgram.getUniforms();for(let Un=0;Un<Mt;Un++)Or.setValue(W,"_gl_DrawID",Un),Nt.render(gt[Un]/Fn,Lt[Un])}else if(re.isInstancedMesh)Nt.renderInstances(Dt,Dn,re.count);else if(ae.isInstancedBufferGeometry){const gt=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,Lt=Math.min(ae.instanceCount,gt);Nt.renderInstances(Dt,Dn,Lt)}else Nt.render(Dt,Dn)};function Tc(F,K,ae){F.transparent===!0&&F.side===zr&&F.forceSinglePass===!1?(F.side=lr,F.needsUpdate=!0,ge(F,K,ae),F.side=Oo,F.needsUpdate=!0,ge(F,K,ae),F.side=zr):ge(F,K,ae)}this.compile=function(F,K,ae=null){ae===null&&(ae=F),w=Pe.get(ae),w.init(K),N.push(w),ae.traverseVisible(function(re){re.isLight&&re.layers.test(K.layers)&&(w.pushLight(re),re.castShadow&&w.pushShadow(re))}),F!==ae&&F.traverseVisible(function(re){re.isLight&&re.layers.test(K.layers)&&(w.pushLight(re),re.castShadow&&w.pushShadow(re))}),w.setupLights();const oe=new Set;return F.traverse(function(re){if(!(re.isMesh||re.isPoints||re.isLine||re.isSprite))return;const ze=re.material;if(ze)if(Array.isArray(ze))for(let je=0;je<ze.length;je++){const Xe=ze[je];Tc(Xe,ae,re),oe.add(Xe)}else Tc(ze,ae,re),oe.add(ze)}),w=N.pop(),oe},this.compileAsync=function(F,K,ae=null){const oe=this.compile(F,K,ae);return new Promise(re=>{function ze(){if(oe.forEach(function(je){L.get(je).currentProgram.isReady()&&oe.delete(je)}),oe.size===0){re(F);return}setTimeout(ze,10)}Qe.get("KHR_parallel_shader_compile")!==null?ze():setTimeout(ze,10)})};let Os=null;function Ns(F){Os&&Os(F)}function mo(){Ht.stop()}function Dr(){Ht.start()}const Ht=new iF;Ht.setAnimationLoop(Ns),typeof self<"u"&&Ht.setContext(self),this.setAnimationLoop=function(F){Os=F,Ye.setAnimationLoop(F),F===null?Ht.stop():Ht.start()},Ye.addEventListener("sessionstart",mo),Ye.addEventListener("sessionend",Dr),this.render=function(F,K){if(K!==void 0&&K.isCamera!==!0){Ut("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;const ae=Ye.enabled===!0&&Ye.isPresenting===!0,oe=U!==null&&(j===null||ae)&&U.begin(A,j);if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),K.parent===null&&K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(U===null||U.isCompositing()===!1)&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(K),K=Ye.getCamera()),F.isScene===!0&&F.onBeforeRender(A,F,K,j),w=Pe.get(F,N.length),w.init(K),N.push(w),Ft.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),xt.setFromProjectionMatrix(Ft,us,K.reversedDepth),ht=this.localClippingEnabled,Ze=ot.init(this.clippingPlanes,ht),T=Re.get(F,R.length),T.init(),R.push(T),Ye.enabled===!0&&Ye.isPresenting===!0){const je=A.xr.getDepthSensingMesh();je!==null&&go(je,K,-1/0,A.sortObjects)}go(F,K,0,A.sortObjects),T.finish(),A.sortObjects===!0&&T.sort(Ke,yt),we=Ye.enabled===!1||Ye.isPresenting===!1||Ye.hasDepthSensing()===!1,we&&ce.addToRenderList(T,F),this.info.render.frame++,Ze===!0&&ot.beginShadows();const re=w.state.shadowsArray;if(Q.render(re,F,K),Ze===!0&&ot.endShadows(),this.info.autoReset===!0&&this.info.reset(),(oe&&U.hasRenderPass())===!1){const je=T.opaque,Xe=T.transmissive;if(w.setupLights(),K.isArrayCamera){const at=K.cameras;if(Xe.length>0)for(let it=0,wt=at.length;it<wt;it++){const st=at[it];P(je,Xe,F,st)}we&&ce.render(F);for(let it=0,wt=at.length;it<wt;it++){const st=at[it];Jn(T,F,st,st.viewport)}}else Xe.length>0&&P(je,Xe,F,K),we&&ce.render(F),Jn(T,F,K)}j!==null&&X===0&&(ne.updateMultisampleRenderTarget(j),ne.updateRenderTargetMipmap(j)),oe&&U.end(A),F.isScene===!0&&F.onAfterRender(A,F,K),rt.resetDefaultState(),Y=-1,Z=null,N.pop(),N.length>0?(w=N[N.length-1],Ze===!0&&ot.setGlobalState(A.clippingPlanes,w.state.camera)):w=null,R.pop(),R.length>0?T=R[R.length-1]:T=null};function go(F,K,ae,oe){if(F.visible===!1)return;if(F.layers.test(K.layers)){if(F.isGroup)ae=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(K);else if(F.isLight)w.pushLight(F),F.castShadow&&w.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||xt.intersectsSprite(F)){oe&&Me.setFromMatrixPosition(F.matrixWorld).applyMatrix4(Ft);const je=Je.update(F),Xe=F.material;Xe.visible&&T.push(F,je,Xe,ae,Me.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||xt.intersectsObject(F))){const je=Je.update(F),Xe=F.material;if(oe&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),Me.copy(F.boundingSphere.center)):(je.boundingSphere===null&&je.computeBoundingSphere(),Me.copy(je.boundingSphere.center)),Me.applyMatrix4(F.matrixWorld).applyMatrix4(Ft)),Array.isArray(Xe)){const at=je.groups;for(let it=0,wt=at.length;it<wt;it++){const st=at[it],Dt=Xe[st.materialIndex];Dt&&Dt.visible&&T.push(F,je,Dt,ae,Me.z,st)}}else Xe.visible&&T.push(F,je,Xe,ae,Me.z,null)}}const ze=F.children;for(let je=0,Xe=ze.length;je<Xe;je++)go(ze[je],K,ae,oe)}function Jn(F,K,ae,oe){const{opaque:re,transmissive:ze,transparent:je}=F;w.setupLightsView(ae),Ze===!0&&ot.setGlobalState(A.clippingPlanes,ae),oe&&We.viewport(z.copy(oe)),re.length>0&&V(re,K,ae),ze.length>0&&V(ze,K,ae),je.length>0&&V(je,K,ae),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function P(F,K,ae,oe){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;if(w.state.transmissionRenderTarget[oe.id]===void 0){const Dt=Qe.has("EXT_color_buffer_half_float")||Qe.has("EXT_color_buffer_float");w.state.transmissionRenderTarget[oe.id]=new si(1,1,{generateMipmaps:!0,type:Dt?Ei:fi,minFilter:rl,samples:bt.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:pn.workingColorSpace})}const ze=w.state.transmissionRenderTarget[oe.id],je=oe.viewport||z;ze.setSize(je.z*A.transmissionResolutionScale,je.w*A.transmissionResolutionScale);const Xe=A.getRenderTarget(),at=A.getActiveCubeFace(),it=A.getActiveMipmapLevel();A.setRenderTarget(ze),A.getClearColor(se),le=A.getClearAlpha(),le<1&&A.setClearColor(16777215,.5),A.clear(),we&&ce.render(ae);const wt=A.toneMapping;A.toneMapping=gs;const st=oe.viewport;if(oe.viewport!==void 0&&(oe.viewport=void 0),w.setupLightsView(oe),Ze===!0&&ot.setGlobalState(A.clippingPlanes,oe),V(F,ae,oe),ne.updateMultisampleRenderTarget(ze),ne.updateRenderTargetMipmap(ze),Qe.has("WEBGL_multisampled_render_to_texture")===!1){let Dt=!1;for(let sn=0,Dn=K.length;sn<Dn;sn++){const ln=K[sn],{object:Nt,geometry:gt,material:Lt,group:Mt}=ln;if(Lt.side===zr&&Nt.layers.test(oe.layers)){const Fn=Lt.side;Lt.side=lr,Lt.needsUpdate=!0,ie(Nt,ae,oe,gt,Lt,Mt),Lt.side=Fn,Lt.needsUpdate=!0,Dt=!0}}Dt===!0&&(ne.updateMultisampleRenderTarget(ze),ne.updateRenderTargetMipmap(ze))}A.setRenderTarget(Xe,at,it),A.setClearColor(se,le),st!==void 0&&(oe.viewport=st),A.toneMapping=wt}function V(F,K,ae){const oe=K.isScene===!0?K.overrideMaterial:null;for(let re=0,ze=F.length;re<ze;re++){const je=F[re],{object:Xe,geometry:at,group:it}=je;let wt=je.material;wt.allowOverride===!0&&oe!==null&&(wt=oe),Xe.layers.test(ae.layers)&&ie(Xe,K,ae,at,wt,it)}}function ie(F,K,ae,oe,re,ze){F.onBeforeRender(A,K,ae,oe,re,ze),F.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),re.onBeforeRender(A,K,ae,oe,F,ze),re.transparent===!0&&re.side===zr&&re.forceSinglePass===!1?(re.side=lr,re.needsUpdate=!0,A.renderBufferDirect(ae,K,oe,re,F,ze),re.side=Oo,re.needsUpdate=!0,A.renderBufferDirect(ae,K,oe,re,F,ze),re.side=zr):A.renderBufferDirect(ae,K,oe,re,F,ze),F.onAfterRender(A,K,ae,oe,re,ze)}function ge(F,K,ae){K.isScene!==!0&&(K=Oe);const oe=L.get(F),re=w.state.lights,ze=w.state.shadowsArray,je=re.state.version,Xe=pt.getParameters(F,re.state,ze,K,ae),at=pt.getProgramCacheKey(Xe);let it=oe.programs;oe.environment=F.isMeshStandardMaterial?K.environment:null,oe.fog=K.fog,oe.envMap=(F.isMeshStandardMaterial?be:pe).get(F.envMap||oe.environment),oe.envMapRotation=oe.environment!==null&&F.envMap===null?K.environmentRotation:F.envMapRotation,it===void 0&&(F.addEventListener("dispose",ki),it=new Map,oe.programs=it);let wt=it.get(at);if(wt!==void 0){if(oe.currentProgram===wt&&oe.lightsStateVersion===je)return Se(F,Xe),wt}else Xe.uniforms=pt.getUniforms(F),F.onBeforeCompile(Xe,A),wt=pt.acquireProgram(Xe,at),it.set(at,wt),oe.uniforms=Xe.uniforms;const st=oe.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(st.clippingPlanes=ot.uniform),Se(F,Xe),oe.needsLights=ke(F),oe.lightsStateVersion=je,oe.needsLights&&(st.ambientLightColor.value=re.state.ambient,st.lightProbe.value=re.state.probe,st.directionalLights.value=re.state.directional,st.directionalLightShadows.value=re.state.directionalShadow,st.spotLights.value=re.state.spot,st.spotLightShadows.value=re.state.spotShadow,st.rectAreaLights.value=re.state.rectArea,st.ltc_1.value=re.state.rectAreaLTC1,st.ltc_2.value=re.state.rectAreaLTC2,st.pointLights.value=re.state.point,st.pointLightShadows.value=re.state.pointShadow,st.hemisphereLights.value=re.state.hemi,st.directionalShadowMap.value=re.state.directionalShadowMap,st.directionalShadowMatrix.value=re.state.directionalShadowMatrix,st.spotShadowMap.value=re.state.spotShadowMap,st.spotLightMatrix.value=re.state.spotLightMatrix,st.spotLightMap.value=re.state.spotLightMap,st.pointShadowMap.value=re.state.pointShadowMap,st.pointShadowMatrix.value=re.state.pointShadowMatrix),oe.currentProgram=wt,oe.uniformsList=null,wt}function Ee(F){if(F.uniformsList===null){const K=F.currentProgram.getUniforms();F.uniformsList=R_.seqWithValue(K.seq,F.uniforms)}return F.uniformsList}function Se(F,K){const ae=L.get(F);ae.outputColorSpace=K.outputColorSpace,ae.batching=K.batching,ae.batchingColor=K.batchingColor,ae.instancing=K.instancing,ae.instancingColor=K.instancingColor,ae.instancingMorph=K.instancingMorph,ae.skinning=K.skinning,ae.morphTargets=K.morphTargets,ae.morphNormals=K.morphNormals,ae.morphColors=K.morphColors,ae.morphTargetsCount=K.morphTargetsCount,ae.numClippingPlanes=K.numClippingPlanes,ae.numIntersection=K.numClipIntersection,ae.vertexAlphas=K.vertexAlphas,ae.vertexTangents=K.vertexTangents,ae.toneMapping=K.toneMapping}function qe(F,K,ae,oe,re){K.isScene!==!0&&(K=Oe),ne.resetTextureUnits();const ze=K.fog,je=oe.isMeshStandardMaterial?K.environment:null,Xe=j===null?A.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:Ms,at=(oe.isMeshStandardMaterial?be:pe).get(oe.envMap||je),it=oe.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,wt=!!ae.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),st=!!ae.morphAttributes.position,Dt=!!ae.morphAttributes.normal,sn=!!ae.morphAttributes.color;let Dn=gs;oe.toneMapped&&(j===null||j.isXRRenderTarget===!0)&&(Dn=A.toneMapping);const ln=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Nt=ln!==void 0?ln.length:0,gt=L.get(oe),Lt=w.state.lights;if(Ze===!0&&(ht===!0||F!==Z)){const Qi=F===Z&&oe.id===Y;ot.setState(oe,F,Qi)}let Mt=!1;oe.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==Lt.state.version||gt.outputColorSpace!==Xe||re.isBatchedMesh&&gt.batching===!1||!re.isBatchedMesh&&gt.batching===!0||re.isBatchedMesh&&gt.batchingColor===!0&&re.colorTexture===null||re.isBatchedMesh&&gt.batchingColor===!1&&re.colorTexture!==null||re.isInstancedMesh&&gt.instancing===!1||!re.isInstancedMesh&&gt.instancing===!0||re.isSkinnedMesh&&gt.skinning===!1||!re.isSkinnedMesh&&gt.skinning===!0||re.isInstancedMesh&&gt.instancingColor===!0&&re.instanceColor===null||re.isInstancedMesh&&gt.instancingColor===!1&&re.instanceColor!==null||re.isInstancedMesh&&gt.instancingMorph===!0&&re.morphTexture===null||re.isInstancedMesh&&gt.instancingMorph===!1&&re.morphTexture!==null||gt.envMap!==at||oe.fog===!0&&gt.fog!==ze||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==ot.numPlanes||gt.numIntersection!==ot.numIntersection)||gt.vertexAlphas!==it||gt.vertexTangents!==wt||gt.morphTargets!==st||gt.morphNormals!==Dt||gt.morphColors!==sn||gt.toneMapping!==Dn||gt.morphTargetsCount!==Nt)&&(Mt=!0):(Mt=!0,gt.__version=oe.version);let Fn=gt.currentProgram;Mt===!0&&(Fn=ge(oe,K,re));let Or=!1,Un=!1,Gr=!1;const Hn=Fn.getUniforms(),ji=gt.uniforms;if(We.useProgram(Fn.program)&&(Or=!0,Un=!0,Gr=!0),oe.id!==Y&&(Y=oe.id,Un=!0),Or||Z!==F){We.buffers.depth.getReversed()&&F.reversedDepth!==!0&&(F._reversedDepth=!0,F.updateProjectionMatrix()),Hn.setValue(W,"projectionMatrix",F.projectionMatrix),Hn.setValue(W,"viewMatrix",F.matrixWorldInverse);const hr=Hn.map.cameraPosition;hr!==void 0&&hr.setValue(W,ct.setFromMatrixPosition(F.matrixWorld)),bt.logarithmicDepthBuffer&&Hn.setValue(W,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&Hn.setValue(W,"isOrthographic",F.isOrthographicCamera===!0),Z!==F&&(Z=F,Un=!0,Gr=!0)}if(gt.needsLights&&(Lt.state.directionalShadowMap.length>0&&Hn.setValue(W,"directionalShadowMap",Lt.state.directionalShadowMap,ne),Lt.state.spotShadowMap.length>0&&Hn.setValue(W,"spotShadowMap",Lt.state.spotShadowMap,ne),Lt.state.pointShadowMap.length>0&&Hn.setValue(W,"pointShadowMap",Lt.state.pointShadowMap,ne)),re.isSkinnedMesh){Hn.setOptional(W,re,"bindMatrix"),Hn.setOptional(W,re,"bindMatrixInverse");const Qi=re.skeleton;Qi&&(Qi.boneTexture===null&&Qi.computeBoneTexture(),Hn.setValue(W,"boneTexture",Qi.boneTexture,ne))}re.isBatchedMesh&&(Hn.setOptional(W,re,"batchingTexture"),Hn.setValue(W,"batchingTexture",re._matricesTexture,ne),Hn.setOptional(W,re,"batchingIdTexture"),Hn.setValue(W,"batchingIdTexture",re._indirectTexture,ne),Hn.setOptional(W,re,"batchingColorTexture"),re._colorsTexture!==null&&Hn.setValue(W,"batchingColorTexture",re._colorsTexture,ne));const ia=ae.morphAttributes;if((ia.position!==void 0||ia.normal!==void 0||ia.color!==void 0)&&Ue.update(re,ae,Fn),(Un||gt.receiveShadow!==re.receiveShadow)&&(gt.receiveShadow=re.receiveShadow,Hn.setValue(W,"receiveShadow",re.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(ji.envMap.value=at,ji.flipEnvMap.value=at.isCubeTexture&&at.isRenderTargetTexture===!1?-1:1),oe.isMeshStandardMaterial&&oe.envMap===null&&K.environment!==null&&(ji.envMapIntensity.value=K.environmentIntensity),ji.dfgLUT!==void 0&&(ji.dfgLUT.value=Bne()),Un&&(Hn.setValue(W,"toneMappingExposure",A.toneMappingExposure),gt.needsLights&&Ve(ji,Gr),ze&&oe.fog===!0&&At.refreshFogUniforms(ji,ze),At.refreshMaterialUniforms(ji,oe,Le,Ae,w.state.transmissionRenderTarget[F.id]),R_.upload(W,Ee(gt),ji,ne)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(R_.upload(W,Ee(gt),ji,ne),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&Hn.setValue(W,"center",re.center),Hn.setValue(W,"modelViewMatrix",re.modelViewMatrix),Hn.setValue(W,"normalMatrix",re.normalMatrix),Hn.setValue(W,"modelMatrix",re.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const Qi=oe.uniformsGroups;for(let hr=0,Yh=Qi.length;hr<Yh;hr++){const vo=Qi[hr];He.update(vo,Fn),He.bind(vo,Fn)}}return Fn}function Ve(F,K){F.ambientLightColor.needsUpdate=K,F.lightProbe.needsUpdate=K,F.directionalLights.needsUpdate=K,F.directionalLightShadows.needsUpdate=K,F.pointLights.needsUpdate=K,F.pointLightShadows.needsUpdate=K,F.spotLights.needsUpdate=K,F.spotLightShadows.needsUpdate=K,F.rectAreaLights.needsUpdate=K,F.hemisphereLights.needsUpdate=K}function ke(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return X},this.getRenderTarget=function(){return j},this.setRenderTargetTextures=function(F,K,ae){const oe=L.get(F);oe.__autoAllocateDepthBuffer=F.resolveDepthBuffer===!1,oe.__autoAllocateDepthBuffer===!1&&(oe.__useRenderToTexture=!1),L.get(F.texture).__webglTexture=K,L.get(F.depthTexture).__webglTexture=oe.__autoAllocateDepthBuffer?void 0:ae,oe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(F,K){const ae=L.get(F);ae.__webglFramebuffer=K,ae.__useDefaultFramebuffer=K===void 0};const Be=W.createFramebuffer();this.setRenderTarget=function(F,K=0,ae=0){j=F,I=K,X=ae;let oe=null,re=!1,ze=!1;if(F){const Xe=L.get(F);if(Xe.__useDefaultFramebuffer!==void 0){We.bindFramebuffer(W.FRAMEBUFFER,Xe.__webglFramebuffer),z.copy(F.viewport),G.copy(F.scissor),q=F.scissorTest,We.viewport(z),We.scissor(G),We.setScissorTest(q),Y=-1;return}else if(Xe.__webglFramebuffer===void 0)ne.setupRenderTarget(F);else if(Xe.__hasExternalTextures)ne.rebindTextures(F,L.get(F.texture).__webglTexture,L.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){const wt=F.depthTexture;if(Xe.__boundDepthTexture!==wt){if(wt!==null&&L.has(wt)&&(F.width!==wt.image.width||F.height!==wt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ne.setupDepthRenderbuffer(F)}}const at=F.texture;(at.isData3DTexture||at.isDataArrayTexture||at.isCompressedArrayTexture)&&(ze=!0);const it=L.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(it[K])?oe=it[K][ae]:oe=it[K],re=!0):F.samples>0&&ne.useMultisampledRTT(F)===!1?oe=L.get(F).__webglMultisampledFramebuffer:Array.isArray(it)?oe=it[ae]:oe=it,z.copy(F.viewport),G.copy(F.scissor),q=F.scissorTest}else z.copy(he).multiplyScalar(Le).floor(),G.copy(Te).multiplyScalar(Le).floor(),q=Fe;if(ae!==0&&(oe=Be),We.bindFramebuffer(W.FRAMEBUFFER,oe)&&We.drawBuffers(F,oe),We.viewport(z),We.scissor(G),We.setScissorTest(q),re){const Xe=L.get(F.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+K,Xe.__webglTexture,ae)}else if(ze){const Xe=K;for(let at=0;at<F.textures.length;at++){const it=L.get(F.textures[at]);W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+at,it.__webglTexture,ae,Xe)}}else if(F!==null&&ae!==0){const Xe=L.get(F.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,Xe.__webglTexture,ae)}Y=-1},this.readRenderTargetPixels=function(F,K,ae,oe,re,ze,je,Xe=0){if(!(F&&F.isWebGLRenderTarget)){Ut("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let at=L.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&je!==void 0&&(at=at[je]),at){We.bindFramebuffer(W.FRAMEBUFFER,at);try{const it=F.textures[Xe],wt=it.format,st=it.type;if(!bt.textureFormatReadable(wt)){Ut("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!bt.textureTypeReadable(st)){Ut("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}K>=0&&K<=F.width-oe&&ae>=0&&ae<=F.height-re&&(F.textures.length>1&&W.readBuffer(W.COLOR_ATTACHMENT0+Xe),W.readPixels(K,ae,oe,re,Ie.convert(wt),Ie.convert(st),ze))}finally{const it=j!==null?L.get(j).__webglFramebuffer:null;We.bindFramebuffer(W.FRAMEBUFFER,it)}}},this.readRenderTargetPixelsAsync=async function(F,K,ae,oe,re,ze,je,Xe=0){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let at=L.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&je!==void 0&&(at=at[je]),at)if(K>=0&&K<=F.width-oe&&ae>=0&&ae<=F.height-re){We.bindFramebuffer(W.FRAMEBUFFER,at);const it=F.textures[Xe],wt=it.format,st=it.type;if(!bt.textureFormatReadable(wt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!bt.textureTypeReadable(st))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Dt=W.createBuffer();W.bindBuffer(W.PIXEL_PACK_BUFFER,Dt),W.bufferData(W.PIXEL_PACK_BUFFER,ze.byteLength,W.STREAM_READ),F.textures.length>1&&W.readBuffer(W.COLOR_ATTACHMENT0+Xe),W.readPixels(K,ae,oe,re,Ie.convert(wt),Ie.convert(st),0);const sn=j!==null?L.get(j).__webglFramebuffer:null;We.bindFramebuffer(W.FRAMEBUFFER,sn);const Dn=W.fenceSync(W.SYNC_GPU_COMMANDS_COMPLETE,0);return W.flush(),await Jq(W,Dn,4),W.bindBuffer(W.PIXEL_PACK_BUFFER,Dt),W.getBufferSubData(W.PIXEL_PACK_BUFFER,0,ze),W.deleteBuffer(Dt),W.deleteSync(Dn),ze}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(F,K=null,ae=0){const oe=Math.pow(2,-ae),re=Math.floor(F.image.width*oe),ze=Math.floor(F.image.height*oe),je=K!==null?K.x:0,Xe=K!==null?K.y:0;ne.setTexture2D(F,0),W.copyTexSubImage2D(W.TEXTURE_2D,ae,0,0,je,Xe,re,ze),We.unbindTexture()};const nt=W.createFramebuffer(),et=W.createFramebuffer();this.copyTextureToTexture=function(F,K,ae=null,oe=null,re=0,ze=null){ze===null&&(re!==0?(Wp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ze=re,re=0):ze=0);let je,Xe,at,it,wt,st,Dt,sn,Dn;const ln=F.isCompressedTexture?F.mipmaps[ze]:F.image;if(ae!==null)je=ae.max.x-ae.min.x,Xe=ae.max.y-ae.min.y,at=ae.isBox3?ae.max.z-ae.min.z:1,it=ae.min.x,wt=ae.min.y,st=ae.isBox3?ae.min.z:0;else{const ia=Math.pow(2,-re);je=Math.floor(ln.width*ia),Xe=Math.floor(ln.height*ia),F.isDataArrayTexture?at=ln.depth:F.isData3DTexture?at=Math.floor(ln.depth*ia):at=1,it=0,wt=0,st=0}oe!==null?(Dt=oe.x,sn=oe.y,Dn=oe.z):(Dt=0,sn=0,Dn=0);const Nt=Ie.convert(K.format),gt=Ie.convert(K.type);let Lt;K.isData3DTexture?(ne.setTexture3D(K,0),Lt=W.TEXTURE_3D):K.isDataArrayTexture||K.isCompressedArrayTexture?(ne.setTexture2DArray(K,0),Lt=W.TEXTURE_2D_ARRAY):(ne.setTexture2D(K,0),Lt=W.TEXTURE_2D),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,K.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,K.unpackAlignment);const Mt=W.getParameter(W.UNPACK_ROW_LENGTH),Fn=W.getParameter(W.UNPACK_IMAGE_HEIGHT),Or=W.getParameter(W.UNPACK_SKIP_PIXELS),Un=W.getParameter(W.UNPACK_SKIP_ROWS),Gr=W.getParameter(W.UNPACK_SKIP_IMAGES);W.pixelStorei(W.UNPACK_ROW_LENGTH,ln.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,ln.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,it),W.pixelStorei(W.UNPACK_SKIP_ROWS,wt),W.pixelStorei(W.UNPACK_SKIP_IMAGES,st);const Hn=F.isDataArrayTexture||F.isData3DTexture,ji=K.isDataArrayTexture||K.isData3DTexture;if(F.isDepthTexture){const ia=L.get(F),Qi=L.get(K),hr=L.get(ia.__renderTarget),Yh=L.get(Qi.__renderTarget);We.bindFramebuffer(W.READ_FRAMEBUFFER,hr.__webglFramebuffer),We.bindFramebuffer(W.DRAW_FRAMEBUFFER,Yh.__webglFramebuffer);for(let vo=0;vo<at;vo++)Hn&&(W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,L.get(F).__webglTexture,re,st+vo),W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,L.get(K).__webglTexture,ze,Dn+vo)),W.blitFramebuffer(it,wt,je,Xe,Dt,sn,je,Xe,W.DEPTH_BUFFER_BIT,W.NEAREST);We.bindFramebuffer(W.READ_FRAMEBUFFER,null),We.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else if(re!==0||F.isRenderTargetTexture||L.has(F)){const ia=L.get(F),Qi=L.get(K);We.bindFramebuffer(W.READ_FRAMEBUFFER,nt),We.bindFramebuffer(W.DRAW_FRAMEBUFFER,et);for(let hr=0;hr<at;hr++)Hn?W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,ia.__webglTexture,re,st+hr):W.framebufferTexture2D(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,ia.__webglTexture,re),ji?W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,Qi.__webglTexture,ze,Dn+hr):W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,Qi.__webglTexture,ze),re!==0?W.blitFramebuffer(it,wt,je,Xe,Dt,sn,je,Xe,W.COLOR_BUFFER_BIT,W.NEAREST):ji?W.copyTexSubImage3D(Lt,ze,Dt,sn,Dn+hr,it,wt,je,Xe):W.copyTexSubImage2D(Lt,ze,Dt,sn,it,wt,je,Xe);We.bindFramebuffer(W.READ_FRAMEBUFFER,null),We.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else ji?F.isDataTexture||F.isData3DTexture?W.texSubImage3D(Lt,ze,Dt,sn,Dn,je,Xe,at,Nt,gt,ln.data):K.isCompressedArrayTexture?W.compressedTexSubImage3D(Lt,ze,Dt,sn,Dn,je,Xe,at,Nt,ln.data):W.texSubImage3D(Lt,ze,Dt,sn,Dn,je,Xe,at,Nt,gt,ln):F.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,ze,Dt,sn,je,Xe,Nt,gt,ln.data):F.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,ze,Dt,sn,ln.width,ln.height,Nt,ln.data):W.texSubImage2D(W.TEXTURE_2D,ze,Dt,sn,je,Xe,Nt,gt,ln);W.pixelStorei(W.UNPACK_ROW_LENGTH,Mt),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Fn),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Or),W.pixelStorei(W.UNPACK_SKIP_ROWS,Un),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Gr),ze===0&&K.generateMipmaps&&W.generateMipmap(Lt),We.unbindTexture()},this.initRenderTarget=function(F){L.get(F).__webglFramebuffer===void 0&&ne.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?ne.setTextureCube(F,0):F.isData3DTexture?ne.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?ne.setTexture2DArray(F,0):ne.setTexture2D(F,0),We.unbindTexture()},this.resetState=function(){I=0,X=0,j=null,We.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return us}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=pn._getDrawingBufferColorSpace(e),n.unpackColorSpace=pn._getUnpackColorSpace()}}const Fne=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Kb,AddEquation:ru,AddOperation:kB,AdditiveAnimationBlendMode:D4,AdditiveBlending:jg,AgXToneMapping:E4,AlphaFormat:C4,AlwaysCompare:e7,AlwaysDepth:Xg,AlwaysStencilFunc:eA,AmbientLight:Y7,AnimationAction:tF,AnimationClip:sv,AnimationLoader:H$,AnimationMixer:hK,AnimationObjectGroup:uK,AnimationUtils:I$,ArcCurve:_7,ArrayCamera:Q7,ArrowHelper:zK,AttachedBindMode:QT,Audio:J7,AudioAnalyser:eK,AudioContext:rC,AudioListener:K$,AudioLoader:q$,AxesHelper:BK,BackSide:lr,BasicDepthPacking:$u,BasicShadowMap:EB,BatchedMesh:d7,Bone:z4,BooleanKeyframeTrack:Vh,Box2:bK,Box3:ea,Box3Helper:PK,BoxGeometry:Hh,BoxHelper:LK,BufferAttribute:Bn,BufferGeometry:Zt,BufferGeometryLoader:K7,ByteType:Qb,Cache:al,Camera:c2,CameraHelper:UK,CanvasTexture:F4,CapsuleGeometry:v2,CatmullRomCurve3:x7,CineonToneMapping:b4,CircleGeometry:y2,ClampToEdgeWrapping:Hi,Clock:aC,Color:lt,ColorKeyframeTrack:eC,ColorManagement:pn,CompressedArrayTexture:r$,CompressedCubeTexture:a$,CompressedTexture:g2,CompressedTextureLoader:V$,ConeGeometry:Hv,ConstantAlphaFactor:HB,ConstantColorFactor:BB,Controls:HK,CubeCamera:o7,CubeDepthTexture:v7,CubeReflectionMapping:No,CubeRefractionMapping:Iu,CubeTexture:Bv,CubeTextureLoader:V7,CubeUVReflectionMapping:Em,CubicBezierCurve:G4,CubicBezierCurve3:b7,CubicInterpolant:z7,CullFaceBack:ZT,CullFaceFront:SB,CullFaceFrontBack:uq,CullFaceNone:bB,Curve:Io,CurvePath:E7,CustomBlending:MB,CustomToneMapping:S4,CylinderGeometry:Fv,Cylindrical:xK,Data3DTexture:l2,DataArrayTexture:o2,DataTexture:oo,DataTextureLoader:tC,DataUtils:Qf,DecrementStencilOp:wq,DecrementWrapStencilOp:Rq,DefaultLoadingManager:H7,DepthFormat:ul,DepthStencilFormat:tc,DepthTexture:Fu,DetachedBindMode:jB,DirectionalLight:W7,DirectionalLightHelper:NK,DiscreteInterpolant:B7,DodecahedronGeometry:_2,DoubleSide:zr,DstAlphaFactor:UB,DstColorFactor:PB,DynamicCopyUsage:jq,DynamicDrawUsage:Bq,DynamicReadUsage:Vq,EdgesGeometry:y7,EllipseCurve:x2,EqualCompare:KB,EqualDepth:vx,EqualStencilFunc:Uq,EquirectangularReflectionMapping:kp,EquirectangularRefractionMapping:Wg,Euler:Ts,EventDispatcher:ws,ExternalTexture:H4,ExtrudeGeometry:Vv,FileLoader:ys,Float16BufferAttribute:IZ,Float32BufferAttribute:Et,FloatType:ai,Fog:h2,FogExp2:f2,FramebufferTexture:i$,FrontSide:Oo,Frustum:Mm,FrustumArray:m2,GLBufferAttribute:vK,GLSL1:Wq,GLSL3:tA,GreaterCompare:QB,GreaterDepth:_x,GreaterEqualCompare:s2,GreaterEqualDepth:yx,GreaterEqualStencilFunc:zq,GreaterStencilFunc:Pq,GridHelper:DK,Group:dp,HalfFloatType:Ei,HemisphereLight:k7,HemisphereLightHelper:RK,IcosahedronGeometry:Gv,ImageBitmapLoader:Y$,ImageLoader:ov,ImageUtils:r7,IncrementStencilOp:Aq,IncrementWrapStencilOp:Cq,InstancedBufferAttribute:$p,InstancedBufferGeometry:$7,InstancedInterleavedBuffer:gK,InstancedMesh:h7,Int16BufferAttribute:LZ,Int32BufferAttribute:PZ,Int8BufferAttribute:OZ,IntType:Pv,InterleavedBuffer:d2,InterleavedBufferAttribute:Eh,Interpolant:Xv,InterpolateDiscrete:Zg,InterpolateLinear:Jx,InterpolateSmooth:w_,InterpolationSamplingMode:Zq,InterpolationSamplingType:qq,InvertStencilOp:Dq,KeepStencilOp:Wf,KeyframeTrack:uo,LOD:u7,LatheGeometry:b2,Layers:qp,LessCompare:$B,LessDepth:gx,LessEqualCompare:a2,LessEqualDepth:_h,LessEqualStencilFunc:Lq,LessStencilFunc:Nq,Light:ef,LightProbe:Z7,Line:Bu,Line3:MK,LineBasicMaterial:xa,LineCurve:k4,LineCurve3:S7,LineDashedMaterial:P7,LineLoop:p7,LineSegments:vl,LinearFilter:rn,LinearInterpolant:J4,LinearMipMapLinearFilter:JT,LinearMipMapNearestFilter:dq,LinearMipmapLinearFilter:rl,LinearMipmapNearestFilter:dg,LinearSRGBColorSpace:Ms,LinearToneMapping:_4,LinearTransfer:Kg,Loader:ba,LoaderUtils:sA,LoadingManager:C2,LoopOnce:XB,LoopPingPong:YB,LoopRepeat:WB,MOUSE:jf,Material:Rr,MaterialLoader:R2,MathUtils:fs,Matrix2:cC,Matrix3:$t,Matrix4:Wt,MaxEquation:CB,Mesh:Mi,MeshBasicMaterial:bc,MeshDepthMaterial:$4,MeshDistanceMaterial:K4,MeshLambertMaterial:U7,MeshMatcapMaterial:L7,MeshNormalMaterial:Z4,MeshPhongMaterial:O7,MeshPhysicalMaterial:D7,MeshStandardMaterial:q4,MeshToonMaterial:N7,MinEquation:wB,MirroredRepeatWrapping:qg,MixOperation:GB,MultiplyBlending:KT,MultiplyOperation:Lv,NearestFilter:pi,NearestMipMapLinearFilter:hq,NearestMipMapNearestFilter:fq,NearestMipmapLinearFilter:fp,NearestMipmapNearestFilter:T4,NeutralToneMapping:M4,NeverCompare:ZB,NeverDepth:mx,NeverStencilFunc:Oq,NoBlending:Hr,NoColorSpace:Ro,NoNormalPacking:bq,NoToneMapping:gs,NormalAnimationBlendMode:r2,NormalBlending:Mu,NormalGAPacking:Eq,NormalRGPacking:Sq,NotEqualCompare:JB,NotEqualDepth:xx,NotEqualStencilFunc:Iq,NumberKeyframeTrack:rv,Object3D:xn,ObjectLoader:X$,ObjectSpaceNormalMap:qB,OctahedronGeometry:kv,OneFactor:DB,OneMinusConstantAlphaFactor:VB,OneMinusConstantColorFactor:FB,OneMinusDstAlphaFactor:LB,OneMinusDstColorFactor:IB,OneMinusSrcAlphaFactor:px,OneMinusSrcColorFactor:NB,OrthographicCamera:_s,PCFShadowMap:Ep,PCFSoftShadowMap:hg,PMREMGenerator:uA,Path:ib,PerspectiveCamera:bi,Plane:Xl,PlaneGeometry:Ju,PlaneHelper:IK,PointLight:X7,PointLightHelper:wK,Points:m7,PointsMaterial:B4,PolarGridHelper:OK,PolyhedronGeometry:Qu,PositionalAudio:J$,PropertyBinding:Sn,PropertyMixer:eF,QuadraticBezierCurve:j4,QuadraticBezierCurve3:X4,Quaternion:Jr,QuaternionKeyframeTrack:Wv,QuaternionLinearInterpolant:F7,R11_EAC_Format:Cx,RED_GREEN_RGTC2_Format:Kx,RED_RGTC1_Format:Zx,REVISION:Bh,RG11_EAC_Format:Dx,RGBADepthPacking:yq,RGBAFormat:Zi,RGBAIntegerFormat:i2,RGBA_ASTC_10x10_Format:kx,RGBA_ASTC_10x5_Format:Hx,RGBA_ASTC_10x6_Format:Vx,RGBA_ASTC_10x8_Format:Gx,RGBA_ASTC_12x10_Format:jx,RGBA_ASTC_12x12_Format:Xx,RGBA_ASTC_4x4_Format:Nx,RGBA_ASTC_5x4_Format:Ux,RGBA_ASTC_5x5_Format:Lx,RGBA_ASTC_6x5_Format:Px,RGBA_ASTC_6x6_Format:Ix,RGBA_ASTC_8x5_Format:zx,RGBA_ASTC_8x6_Format:Bx,RGBA_ASTC_8x8_Format:Fx,RGBA_BPTC_Format:Wx,RGBA_ETC2_EAC_Format:wx,RGBA_PVRTC_2BPPV1_Format:Mx,RGBA_PVRTC_4BPPV1_Format:Ex,RGBA_S3TC_DXT1_Format:mg,RGBA_S3TC_DXT3_Format:gg,RGBA_S3TC_DXT5_Format:vg,RGBDepthPacking:_q,RGBFormat:R4,RGBIntegerFormat:pq,RGB_BPTC_SIGNED_Format:Yx,RGB_BPTC_UNSIGNED_Format:qx,RGB_ETC1_Format:Tx,RGB_ETC2_Format:Ax,RGB_PVRTC_2BPPV1_Format:Sx,RGB_PVRTC_4BPPV1_Format:bx,RGB_S3TC_DXT1_Format:pg,RGDepthPacking:xq,RGFormat:bh,RGIntegerFormat:n2,RawShaderMaterial:Y4,Ray:Fh,Raycaster:lC,RectAreaLight:q7,RedFormat:Iv,RedIntegerFormat:zv,ReinhardToneMapping:x4,RenderTarget:N4,RenderTarget3D:dK,RepeatWrapping:Yg,ReplaceStencilOp:Tq,ReverseSubtractEquation:AB,RingGeometry:S2,SIGNED_R11_EAC_Format:Rx,SIGNED_RED_GREEN_RGTC2_Format:Qx,SIGNED_RED_RGTC1_Format:$x,SIGNED_RG11_EAC_Format:Ox,SRGBColorSpace:En,SRGBTransfer:Ln,Scene:Sh,ShaderChunk:nn,ShaderLib:Co,ShaderMaterial:vi,ShadowMaterial:R7,Shape:Tu,ShapeGeometry:E2,ShapePath:FK,ShapeUtils:Do,ShortType:Jb,Skeleton:p2,SkeletonHelper:AK,SkinnedMesh:f7,Source:hu,Sphere:Vr,SphereGeometry:jv,Spherical:lA,SphericalHarmonics3:iC,SplineCurve:W4,SpotLight:j7,SpotLightHelper:TK,Sprite:c7,SpriteMaterial:I4,SrcAlphaFactor:dx,SrcAlphaSaturateFactor:zB,SrcColorFactor:OB,StaticCopyUsage:kq,StaticDrawUsage:Qg,StaticReadUsage:Hq,StereoCamera:Z$,StreamCopyUsage:Xq,StreamDrawUsage:Fq,StreamReadUsage:Gq,StringKeyframeTrack:Gh,SubtractEquation:TB,SubtractiveBlending:$T,TOUCH:Xf,TangentSpaceNormalMap:Ku,TetrahedronGeometry:M2,Texture:zn,TextureLoader:G7,TextureUtils:XK,Timer:yK,TimestampQuery:Yq,TorusGeometry:T2,TorusKnotGeometry:A2,Triangle:La,TriangleFanDrawMode:vq,TriangleStripDrawMode:gq,TrianglesDrawMode:mq,TubeGeometry:w2,UVMapping:Pu,Uint16BufferAttribute:U4,Uint32BufferAttribute:L4,Uint8BufferAttribute:NZ,Uint8ClampedBufferAttribute:UZ,Uniform:mn,UniformsGroup:mK,UniformsLib:dt,UniformsUtils:P4,UnsignedByteType:fi,UnsignedInt101111Type:w4,UnsignedInt248Type:xh,UnsignedInt5999Type:A4,UnsignedIntType:Fa,UnsignedShort4444Type:e2,UnsignedShort5551Type:t2,UnsignedShortType:jp,VSMShadowMap:Zf,Vector2:xe,Vector3:k,Vector4:jn,VectorKeyframeTrack:av,VideoFrameTexture:n$,VideoTexture:g7,WebGL3DRenderTarget:xZ,WebGLArrayRenderTarget:_Z,WebGLCoordinateSystem:us,WebGLCubeRenderTarget:u2,WebGLRenderTarget:si,WebGLRenderer:uC,WebGLUtils:lF,WebGPUCoordinateSystem:Xp,WebXRController:C_,WireframeGeometry:C7,WrapAroundEnding:$g,ZeroCurvatureEnding:$f,ZeroFactor:RB,ZeroSlopeEnding:Kf,ZeroStencilOp:Mq,createCanvasElement:i7,error:Ut,getConsoleFunction:Qq,log:ev,setConsoleFunction:Kq,warn:ft,warnOnce:Wp},Symbol.toStringTag,{value:"Module"}));var cF={exports:{}},uF={},fF={exports:{}},hF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=O;function Hne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vne=typeof Object.is=="function"?Object.is:Hne,Gne=Qp.useState,kne=Qp.useEffect,jne=Qp.useLayoutEffect,Xne=Qp.useDebugValue;function Wne(t,e){var n=e(),i=Gne({inst:{value:n,getSnapshot:e}}),r=i[0].inst,a=i[1];return jne(function(){r.value=n,r.getSnapshot=e,pM(r)&&a({inst:r})},[t,n,e]),kne(function(){return pM(r)&&a({inst:r}),t(function(){pM(r)&&a({inst:r})})},[t]),Xne(n),n}function pM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vne(t,n)}catch{return!0}}function Yne(t,e){return e()}var qne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Yne:Wne;hF.useSyncExternalStore=Qp.useSyncExternalStore!==void 0?Qp.useSyncExternalStore:qne;fF.exports=hF;var Zne=fF.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2=O,$ne=Zne;function Kne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qne=typeof Object.is=="function"?Object.is:Kne,Jne=$ne.useSyncExternalStore,eie=N2.useRef,tie=N2.useEffect,nie=N2.useMemo,iie=N2.useDebugValue;uF.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var a=eie(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=nie(function(){function l(g){if(!f){if(f=!0,h=g,g=i(g),r!==void 0&&s.hasValue){var y=s.value;if(r(y,g))return d=y}return d=g}if(y=d,Qne(h,g))return y;var S=i(g);return r!==void 0&&r(y,S)?(h=g,y):(h=g,d=S)}var f=!1,h,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,i,r]);var o=Jne(t,a[0],a[1]);return tie(function(){s.hasValue=!0,s.value=o},[o]),iie(o),o};cF.exports=uF;var rie=cF.exports;const aie=Nh(rie),i6=t=>{let e;const n=new Set,i=(f,h)=>{const d=typeof f=="function"?f(e):f;if(!Object.is(d,e)){const p=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(g=>g(e,p))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>l,subscribe:f=>(n.add(f),()=>n.delete(f))},l=e=t(i,r,o);return o},sie=t=>t?i6(t):i6,{useSyncExternalStoreWithSelector:oie}=aie,lie=t=>t;function cie(t,e=lie,n){const i=oie(t.subscribe,t.getState,t.getInitialState,e,n);return J.useDebugValue(i),i}const r6=(t,e)=>{const n=sie(t),i=(r,a=e)=>cie(n,r,a);return Object.assign(i,n),i},dF=(t,e)=>t?r6(t,e):r6,uie=t=>typeof t=="object"&&typeof t.then=="function",eh=[];function pF(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function mF(t,e=null,n=!1,i={}){e===null&&(e=[t]);for(const a of eh)if(pF(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=eh.indexOf(r);a!==-1&&eh.splice(a,1)},promise:(uie(t)?t:t(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(eh.push(r),!n)throw r.promise}const fie=(t,e,n)=>mF(t,e,!1,n),hie=(t,e,n)=>void mF(t,e,!0,n),die=t=>{if(t===void 0||t.length===0)eh.splice(0,eh.length);else{const e=eh.find(n=>pF(t,n.keys,n.equal));e&&e.remove()}};var gF={exports:{}},vF={exports:{}},yF={exports:{}},_F={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var q=z.length;z.push(G);e:for(;0<q;){var se=q-1>>>1,le=z[se];if(0<r(le,G))z[se]=G,z[q]=le,q=se;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var G=z[0],q=z.pop();if(q!==G){z[0]=q;e:for(var se=0,le=z.length,me=le>>>1;se<me;){var Ae=2*(se+1)-1,Le=z[Ae],Ke=Ae+1,yt=z[Ke];if(0>r(Le,q))Ke<le&&0>r(yt,Le)?(z[se]=yt,z[Ke]=q,se=Ke):(z[se]=Le,z[Ae]=q,se=Ae);else if(Ke<le&&0>r(yt,q))z[se]=yt,z[Ke]=q,se=Ke;else break e}}return G}function r(z,G){var q=z.sortIndex-G.sortIndex;return q!==0?q:z.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],f=[],h=1,d=null,p=3,g=!1,y=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function E(z){for(var G=n(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=z)i(f),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(f)}}function T(z){if(S=!1,E(z),!y)if(n(l)!==null)y=!0,Y();else{var G=n(f);G!==null&&Z(T,G.startTime-z)}}var w=!1,R=-1,N=5,U=-1;function A(){return!(t.unstable_now()-U<N)}function C(){if(w){var z=t.unstable_now();U=z;var G=!0;try{e:{y=!1,S&&(S=!1,v(R),R=-1),g=!0;var q=p;try{t:{for(E(z),d=n(l);d!==null&&!(d.expirationTime>z&&A());){var se=d.callback;if(typeof se=="function"){d.callback=null,p=d.priorityLevel;var le=se(d.expirationTime<=z);if(z=t.unstable_now(),typeof le=="function"){d.callback=le,E(z),G=!0;break t}d===n(l)&&i(l),E(z)}else i(l);d=n(l)}if(d!==null)G=!0;else{var me=n(f);me!==null&&Z(T,me.startTime-z),G=!1}}break e}finally{d=null,p=q,g=!1}G=void 0}}finally{G?I():w=!1}}}var I;if(typeof x=="function")I=function(){x(C)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,j=X.port2;X.port1.onmessage=C,I=function(){j.postMessage(null)}}else I=function(){b(C,0)};function Y(){w||(w=!0,I())}function Z(z,G){R=b(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Y())},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var q=p;p=G;try{return z()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=p;p=z;try{return G()}finally{p=q}},t.unstable_scheduleCallback=function(z,G,q){var se=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,z){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=q+le,z={id:h++,callback:G,priorityLevel:z,startTime:q,expirationTime:le,sortIndex:-1},q>se?(z.sortIndex=q,e(f,z),n(l)===null&&z===n(f)&&(S?(v(R),R=-1):S=!0,Z(T,q-se))):(z.sortIndex=le,e(l,z),y||g||(y=!0,Y())),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var G=p;return function(){var q=p;p=G;try{return z.apply(this,arguments)}finally{p=q}}}})(_F);yF.exports=_F;var dA=yF.exports;/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){t.exports=function(e){function n(c,u,m,_){return new wk(c,u,m,_)}function i(){}function r(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return c===null||typeof c!="object"?null:(c=bO&&c[bO]||c["@@iterator"],typeof c=="function"?c:null)}function s(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Uk?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case Jh:return"Fragment";case Qh:return"Portal";case c3:return"Profiler";case yO:return"StrictMode";case f3:return"Suspense";case h3:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case Oc:return(c.displayName||"Context")+".Provider";case _O:return(c._context.displayName||"Context")+".Consumer";case u3:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case d3:return u=c.displayName||null,u!==null?u:s(c.type)||"Memo";case Nc:u=c._payload,c=c._init;try{return s(c(u))}catch{}}return null}function o(c){if(p3===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);p3=u&&u[1]||"",SO=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+p3+c+SO}function l(c,u){if(!c||m3)return"";m3=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(u){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(Jt){var _t=Jt}Reflect.construct(c,[],vt)}else{try{vt.call()}catch(Jt){_t=Jt}c.call(vt.prototype)}}else{try{throw Error()}catch(Jt){_t=Jt}(vt=c())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(Jt){if(Jt&&_t&&typeof Jt.stack=="string")return[Jt.stack,_t.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=_.DetermineComponentFrameRoot(),H=D[0],te=D[1];if(H&&te){var fe=H.split(`
`),Ce=te.split(`
`);for(M=_=0;_<fe.length&&!fe[_].includes("DetermineComponentFrameRoot");)_++;for(;M<Ce.length&&!Ce[M].includes("DetermineComponentFrameRoot");)M++;if(_===fe.length||M===Ce.length)for(_=fe.length-1,M=Ce.length-1;1<=_&&0<=M&&fe[_]!==Ce[M];)M--;for(;1<=_&&0<=M;_--,M--)if(fe[_]!==Ce[M]){if(_!==1||M!==1)do if(_--,M--,0>M||fe[_]!==Ce[M]){var tt=`
`+fe[_].replace(" at new "," at ");return c.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",c.displayName)),tt}while(1<=_&&0<=M);break}}}finally{m3=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?o(m):""}function f(c){switch(c.tag){case 26:case 27:case 5:return o(c.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return c=l(c.type,!1),c;case 11:return c=l(c.type.render,!1),c;case 1:return c=l(c.type,!0),c;default:return""}}function h(c){try{var u="";do u+=f(c),c=c.return;while(c);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function d(c){var u=c,m=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,u.flags&4098&&(m=u.return),c=u.return;while(c)}return u.tag===3?m:null}function p(c){if(d(c)!==c)throw Error(r(188))}function g(c){var u=c.alternate;if(!u){if(u=d(c),u===null)throw Error(r(188));return u!==c?null:c}for(var m=c,_=u;;){var M=m.return;if(M===null)break;var D=M.alternate;if(D===null){if(_=M.return,_!==null){m=_;continue}break}if(M.child===D.child){for(D=M.child;D;){if(D===m)return p(M),c;if(D===_)return p(M),u;D=D.sibling}throw Error(r(188))}if(m.return!==_.return)m=M,_=D;else{for(var H=!1,te=M.child;te;){if(te===m){H=!0,m=M,_=D;break}if(te===_){H=!0,_=M,m=D;break}te=te.sibling}if(!H){for(te=D.child;te;){if(te===m){H=!0,m=D,_=M;break}if(te===_){H=!0,_=D,m=M;break}te=te.sibling}if(!H)throw Error(r(189))}}if(m.alternate!==_)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:u}function y(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(u=y(c),u!==null)return u;c=c.sibling}return null}function S(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(u=S(c),u!==null))return u;c=c.sibling}return null}function b(c){return{current:c}}function v(c){0>td||(c.current=b3[td],b3[td]=null,td--)}function x(c,u){td++,b3[td]=c.current,c.current=u}function E(c){return c>>>=0,c===0?32:31-(qj(c)/Zj|0)|0}function T(c){var u=c&42;if(u!==0)return u;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function w(c,u){var m=c.pendingLanes;if(m===0)return 0;var _=0,M=c.suspendedLanes,D=c.pingedLanes,H=c.warmLanes;c=c.finishedLanes!==0;var te=m&134217727;return te!==0?(m=te&~M,m!==0?_=T(m):(D&=te,D!==0?_=T(D):c||(H=te&~H,H!==0&&(_=T(H))))):(te=m&~M,te!==0?_=T(te):D!==0?_=T(D):c||(H=m&~H,H!==0&&(_=T(H)))),_===0?0:u!==0&&u!==_&&!(u&M)&&(M=_&-_,H=u&-u,M>=H||M===32&&(H&4194176)!==0)?u:_}function R(c,u){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&u)===0}function N(c,u){switch(c){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var c=b1;return b1<<=1,!(b1&4194176)&&(b1=128),c}function A(){var c=S1;return S1<<=1,!(S1&62914560)&&(S1=4194304),c}function C(c){for(var u=[],m=0;31>m;m++)u.push(c);return u}function I(c,u){c.pendingLanes|=u,u!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function X(c,u,m,_,M,D){var H=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var te=c.entanglements,fe=c.expirationTimes,Ce=c.hiddenUpdates;for(m=H&~m;0<m;){var tt=31-Za(m),vt=1<<tt;te[tt]=0,fe[tt]=-1;var _t=Ce[tt];if(_t!==null)for(Ce[tt]=null,tt=0;tt<_t.length;tt++){var Jt=_t[tt];Jt!==null&&(Jt.lane&=-536870913)}m&=~vt}_!==0&&j(c,_,0),D!==0&&M===0&&c.tag!==0&&(c.suspendedLanes|=D&~(H&~u))}function j(c,u,m){c.pendingLanes|=u,c.suspendedLanes&=~u;var _=31-Za(u);c.entangledLanes|=u,c.entanglements[_]=c.entanglements[_]|1073741824|m&4194218}function Y(c,u){var m=c.entangledLanes|=u;for(c=c.entanglements;m;){var _=31-Za(m),M=1<<_;M&u|c[_]&u&&(c[_]|=u),m&=~M}}function Z(c){return c&=-c,2<c?8<c?c&134217727?32:268435456:8:2}function z(c){if($a&&typeof $a.onCommitFiberRoot=="function")try{$a.onCommitFiberRoot(e0,c,void 0,(c.current.flags&128)===128)}catch{}}function G(c){if(typeof eX=="function"&&tX(c),$a&&typeof $a.setStrictMode=="function")try{$a.setStrictMode(e0,c)}catch{}}function q(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}function se(c,u){if(typeof c=="object"&&c!==null){var m=qO.get(c);return m!==void 0?m:(u={value:c,source:u,stack:h(u)},qO.set(c,u),u)}return{value:c,source:u,stack:h(u)}}function le(c,u){id[rd++]=T1,id[rd++]=M1,M1=c,T1=u}function me(c,u,m){Ps[Is++]=Tl,Ps[Is++]=Al,Ps[Is++]=df,df=c;var _=Tl;c=Al;var M=32-Za(_)-1;_&=~(1<<M),m+=1;var D=32-Za(u)+M;if(30<D){var H=M-M%5;D=(_&(1<<H)-1).toString(32),_>>=H,M-=H,Tl=1<<32-Za(u)+M|m<<M|_,Al=D+c}else Tl=1<<D|m<<M|_,Al=c}function Ae(c){c.return!==null&&(le(c,1),me(c,1,0))}function Le(c){for(;c===M1;)M1=id[--rd],id[rd]=null,T1=id[--rd],id[rd]=null;for(;c===df;)df=Ps[--Is],Ps[Is]=null,Al=Ps[--Is],Ps[Is]=null,Tl=Ps[--Is],Ps[Is]=null}function Ke(c,u){x(Lc,u),x(t0,c),x(Ur,null),c=Ik(u),v(Ur),x(Ur,c)}function yt(){v(Ur),v(t0),v(Lc)}function he(c){c.memoizedState!==null&&x(A1,c);var u=Ur.current,m=zk(u,c.type);u!==m&&(x(t0,c),x(Ur,m))}function Te(c){t0.current===c&&(v(Ur),v(t0)),A1.current===c&&(v(A1),Ml?hf._currentValue=ed:hf._currentValue2=ed)}function Fe(c){var u=Error(r(418,""));throw ct(se(u,c)),M3}function xt(c,u){if(!Us)throw Error(r(175));Dj(c.stateNode,c.type,c.memoizedProps,u,c)||Fe(c)}function Ze(c){for(aa=c.return;aa;)switch(aa.tag){case 3:case 27:Go=!0;return;case 5:case 13:Go=!1;return;default:aa=aa.return}}function ht(c){if(!Us||c!==aa)return!1;if(!Tn)return Ze(c),Tn=!0,!1;var u=!1;if(Xr?c.tag!==3&&c.tag!==27&&(c.tag!==5||zO(c.type)&&!x1(c.type,c.memoizedProps))&&(u=!0):c.tag!==3&&(c.tag!==5||zO(c.type)&&!x1(c.type,c.memoizedProps))&&(u=!0),u&&Wr&&Fe(c),Ze(c),c.tag===13){if(!Us)throw Error(r(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));Wr=Uj(c)}else Wr=aa?PO(c.stateNode):null;return!0}function Ft(){Us&&(Wr=aa=null,Tn=!1)}function ct(c){xo===null?xo=[c]:xo.push(c)}function Me(){for(var c=ad,u=T3=ad=0;u<c;){var m=zs[u];zs[u++]=null;var _=zs[u];zs[u++]=null;var M=zs[u];zs[u++]=null;var D=zs[u];if(zs[u++]=null,_!==null&&M!==null){var H=_.pending;H===null?M.next=M:(M.next=H.next,H.next=M),_.pending=M}D!==0&&W(m,M,D)}}function Oe(c,u,m,_){zs[ad++]=c,zs[ad++]=u,zs[ad++]=m,zs[ad++]=_,T3|=_,c.lanes|=_,c=c.alternate,c!==null&&(c.lanes|=_)}function we(c,u,m,_){return Oe(c,u,m,_),mt(c)}function Ge(c,u){return Oe(c,null,null,u),mt(c)}function W(c,u,m){c.lanes|=m;var _=c.alternate;_!==null&&(_.lanes|=m);for(var M=!1,D=c.return;D!==null;)D.childLanes|=m,_=D.alternate,_!==null&&(_.childLanes|=m),D.tag===22&&(c=D.stateNode,c===null||c._visibility&1||(M=!0)),c=D,D=D.return;M&&u!==null&&c.tag===3&&(D=c.stateNode,M=31-Za(m),D=D.hiddenUpdates,c=D[M],c===null?D[M]=[u]:c.push(u),u.lane=m|536870912)}function mt(c){if(50<u0)throw u0=0,V3=null,Error(r(185));for(var u=c.return;u!==null;)c=u,u=c.return;return c.tag===3?c.stateNode:null}function Qe(c){c!==sd&&c.next===null&&(sd===null?w1=sd=c:sd=sd.next=c),C1=!0,A3||(A3=!0,pe(We))}function bt(c,u){if(!w3&&C1){w3=!0;do for(var m=!1,_=w1;_!==null;){if(c!==0){var M=_.pendingLanes;if(M===0)var D=0;else{var H=_.suspendedLanes,te=_.pingedLanes;D=(1<<31-Za(42|c)+1)-1,D&=M&~(H&~te),D=D&201326677?D&201326677|1:D?D|2:0}D!==0&&(m=!0,ne(_,D))}else D=bn,D=w(_,_===ei?D:0),!(D&3)||R(_,D)||(m=!0,ne(_,D));_=_.next}while(m);w3=!1}}function We(){C1=A3=!1;var c=0;od!==0&&(Xk()&&(c=od),od=0);for(var u=_o(),m=null,_=w1;_!==null;){var M=_.next,D=B(_,u);D===0?(_.next=null,m===null?w1=M:m.next=M,M===null&&(sd=m)):(m=_,(c!==0||D&3)&&(C1=!0)),_=M}bt(c)}function B(c,u){for(var m=c.suspendedLanes,_=c.pingedLanes,M=c.expirationTimes,D=c.pendingLanes&-62914561;0<D;){var H=31-Za(D),te=1<<H,fe=M[H];fe===-1?(!(te&m)||te&_)&&(M[H]=N(te,u)):fe<=u&&(c.expiredLanes|=te),D&=~te}if(u=ei,m=bn,m=w(c,c===u?m:0),_=c.callbackNode,m===0||c===u&&ti===2||c.cancelPendingCommit!==null)return _!==null&&_!==null&&S3(_),c.callbackNode=null,c.callbackPriority=0;if(!(m&3)||R(c,m)){if(u=m&-m,u===c.callbackPriority)return u;switch(_!==null&&S3(_),Z(m)){case 2:case 8:m=Qj;break;case 32:m=E3;break;case 268435456:m=Jj;break;default:m=E3}return _=L.bind(null,c),m=E1(m,_),c.callbackPriority=u,c.callbackNode=m,u}return _!==null&&_!==null&&S3(_),c.callbackPriority=2,c.callbackNode=null,2}function L(c,u){var m=c.callbackNode;if(cf()&&c.callbackNode!==m)return null;var _=bn;return _=w(c,c===ei?_:0),_===0?null:(KD(c,_,u),B(c,_o()),c.callbackNode!=null&&c.callbackNode===m?L.bind(null,c):null)}function ne(c,u){if(cf())return null;KD(c,u,!0)}function pe(c){Kk?Qk(function(){Wn&6?E1(YO,c):c()}):E1(YO,c)}function be(){return od===0&&(od=U()),od}function ye(c,u){if(n0===null){var m=n0=[];C3=0,ld=be(),cd={status:"pending",value:void 0,then:function(_){m.push(_)}}}return C3++,u.then(ut,ut),u}function ut(){if(--C3===0&&n0!==null){cd!==null&&(cd.status="fulfilled");var c=n0;n0=null,ld=0,cd=null;for(var u=0;u<c.length;u++)(0,c[u])()}}function Je(c,u){var m=[],_={status:"pending",value:null,reason:null,then:function(M){m.push(M)}};return c.then(function(){_.status="fulfilled",_.value=u;for(var M=0;M<m.length;M++)(0,m[M])(u)},function(M){for(_.status="rejected",_.reason=M,M=0;M<m.length;M++)(0,m[M])(void 0)}),_}function pt(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function At(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Re(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Pe(c,u,m){var _=c.updateQueue;if(_===null)return null;if(_=_.shared,Wn&2){var M=_.pending;return M===null?u.next=u:(u.next=M.next,M.next=u),_.pending=u,u=mt(c),W(c,null,m),u}return Oe(c,_,u,m),mt(c)}function ot(c,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194176)!==0)){var _=u.lanes;_&=c.pendingLanes,m|=_,u.lanes=m,Y(c,m)}}function Q(c,u){var m=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var M=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var H={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};D===null?M=D=H:D=D.next=H,m=m.next}while(m!==null);D===null?M=D=u:D=D.next=u}else M=D=u;m={baseState:_.baseState,firstBaseUpdate:M,lastBaseUpdate:D,shared:_.shared,callbacks:_.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=u:c.next=u,m.lastBaseUpdate=u}function ce(){if(R3){var c=cd;if(c!==null)throw c}}function Ue(c,u,m,_){R3=!1;var M=c.updateQueue;Pc=!1;var D=M.firstBaseUpdate,H=M.lastBaseUpdate,te=M.shared.pending;if(te!==null){M.shared.pending=null;var fe=te,Ce=fe.next;fe.next=null,H===null?D=Ce:H.next=Ce,H=fe;var tt=c.alternate;tt!==null&&(tt=tt.updateQueue,te=tt.lastBaseUpdate,te!==H&&(te===null?tt.firstBaseUpdate=Ce:te.next=Ce,tt.lastBaseUpdate=fe))}if(D!==null){var vt=M.baseState;H=0,tt=Ce=fe=null,te=D;do{var _t=te.lane&-536870913,Jt=_t!==te.lane;if(Jt?(bn&_t)===_t:(_&_t)===_t){_t!==0&&_t===ld&&(R3=!0),tt!==null&&(tt=tt.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Hs=c,f0=te;_t=u;var Sf=m;switch(f0.tag){case 1:if(Hs=f0.payload,typeof Hs=="function"){vt=Hs.call(Sf,vt,_t);break e}vt=Hs;break e;case 3:Hs.flags=Hs.flags&-65537|128;case 0:if(Hs=f0.payload,_t=typeof Hs=="function"?Hs.call(Sf,vt,_t):Hs,_t==null)break e;vt=l3({},vt,_t);break e;case 2:Pc=!0}}_t=te.callback,_t!==null&&(c.flags|=64,Jt&&(c.flags|=8192),Jt=M.callbacks,Jt===null?M.callbacks=[_t]:Jt.push(_t))}else Jt={lane:_t,tag:te.tag,payload:te.payload,callback:te.callback,next:null},tt===null?(Ce=tt=Jt,fe=vt):tt=tt.next=Jt,H|=_t;if(te=te.next,te===null){if(te=M.shared.pending,te===null)break;Jt=te,te=Jt.next,Jt.next=null,M.lastBaseUpdate=Jt,M.shared.pending=null}}while(!0);tt===null&&(fe=vt),M.baseState=fe,M.firstBaseUpdate=Ce,M.lastBaseUpdate=tt,D===null&&(M.shared.lanes=0),Bc|=H,c.lanes=H,c.memoizedState=vt}}function ee(c,u){if(typeof c!="function")throw Error(r(191,c));c.call(u)}function de(c,u){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)ee(m[c],u)}function Ie(c,u){if(Ka(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var m=Object.keys(c),_=Object.keys(u);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var M=m[_];if(!nX.call(u,M)||!Ka(c[M],u[M]))return!1}return!0}function rt(c){return c=c.status,c==="fulfilled"||c==="rejected"}function He(){}function De(c,u,m){switch(m=c[m],m===void 0?c.push(u):m!==u&&(u.then(He,He),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,c===i0?Error(r(483)):c;default:if(typeof u.status=="string")u.then(He,He);else{if(c=ei,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=u,c.status="pending",c.then(function(_){if(u.status==="pending"){var M=u;M.status="fulfilled",M.value=_}},function(_){if(u.status==="pending"){var M=u;M.status="rejected",M.reason=_}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,c===i0?Error(r(483)):c}throw ud=u,i0}}function Ye(){if(ud===null)throw Error(r(459));var c=ud;return ud=null,c}function Ct(c){var u=r0;return r0+=1,fd===null&&(fd=[]),De(fd,c,u)}function an(c,u){u=u.props.ref,c.ref=u!==void 0?u:null}function Qt(c,u){throw u.$$typeof===Dk?Error(r(525)):(c=Object.prototype.toString.call(u),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c)))}function ki(c){var u=c._init;return u(c._payload)}function fr(c){function u(ve,ue){if(c){var _e=ve.deletions;_e===null?(ve.deletions=[ue],ve.flags|=16):_e.push(ue)}}function m(ve,ue){if(!c)return null;for(;ue!==null;)u(ve,ue),ue=ue.sibling;return null}function _(ve){for(var ue=new Map;ve!==null;)ve.key!==null?ue.set(ve.key,ve):ue.set(ve.index,ve),ve=ve.sibling;return ue}function M(ve,ue){return ve=Dc(ve,ue),ve.index=0,ve.sibling=null,ve}function D(ve,ue,_e){return ve.index=_e,c?(_e=ve.alternate,_e!==null?(_e=_e.index,_e<ue?(ve.flags|=33554434,ue):_e):(ve.flags|=33554434,ue)):(ve.flags|=1048576,ue)}function H(ve){return c&&ve.alternate===null&&(ve.flags|=33554434),ve}function te(ve,ue,_e,$e){return ue===null||ue.tag!==6?(ue=a3(_e,ve.mode,$e),ue.return=ve,ue):(ue=M(ue,_e),ue.return=ve,ue)}function fe(ve,ue,_e,$e){var zt=_e.type;return zt===Jh?tt(ve,ue,_e.props.children,$e,_e.key):ue!==null&&(ue.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===Nc&&ki(zt)===ue.type)?(ue=M(ue,_e.props),an(ue,_e),ue.return=ve,ue):(ue=v1(_e.type,_e.key,_e.props,null,ve.mode,$e),an(ue,_e),ue.return=ve,ue)}function Ce(ve,ue,_e,$e){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==_e.containerInfo||ue.stateNode.implementation!==_e.implementation?(ue=s3(_e,ve.mode,$e),ue.return=ve,ue):(ue=M(ue,_e.children||[]),ue.return=ve,ue)}function tt(ve,ue,_e,$e,zt){return ue===null||ue.tag!==7?(ue=uf(_e,ve.mode,$e,zt),ue.return=ve,ue):(ue=M(ue,_e),ue.return=ve,ue)}function vt(ve,ue,_e){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=a3(""+ue,ve.mode,_e),ue.return=ve,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case y1:return _e=v1(ue.type,ue.key,ue.props,null,ve.mode,_e),an(_e,ue),_e.return=ve,_e;case Qh:return ue=s3(ue,ve.mode,_e),ue.return=ve,ue;case Nc:var $e=ue._init;return ue=$e(ue._payload),vt(ve,ue,_e)}if(_1(ue)||a(ue))return ue=uf(ue,ve.mode,_e,null),ue.return=ve,ue;if(typeof ue.then=="function")return vt(ve,Ct(ue),_e);if(ue.$$typeof===Oc)return vt(ve,f1(ve,ue),_e);Qt(ve,ue)}return null}function _t(ve,ue,_e,$e){var zt=ue!==null?ue.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return zt!==null?null:te(ve,ue,""+_e,$e);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case y1:return _e.key===zt?fe(ve,ue,_e,$e):null;case Qh:return _e.key===zt?Ce(ve,ue,_e,$e):null;case Nc:return zt=_e._init,_e=zt(_e._payload),_t(ve,ue,_e,$e)}if(_1(_e)||a(_e))return zt!==null?null:tt(ve,ue,_e,$e,null);if(typeof _e.then=="function")return _t(ve,ue,Ct(_e),$e);if(_e.$$typeof===Oc)return _t(ve,ue,f1(ve,_e),$e);Qt(ve,_e)}return null}function Jt(ve,ue,_e,$e,zt){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return ve=ve.get(_e)||null,te(ue,ve,""+$e,zt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case y1:return ve=ve.get($e.key===null?_e:$e.key)||null,fe(ue,ve,$e,zt);case Qh:return ve=ve.get($e.key===null?_e:$e.key)||null,Ce(ue,ve,$e,zt);case Nc:var li=$e._init;return $e=li($e._payload),Jt(ve,ue,_e,$e,zt)}if(_1($e)||a($e))return ve=ve.get(_e)||null,tt(ue,ve,$e,zt,null);if(typeof $e.then=="function")return Jt(ve,ue,_e,Ct($e),zt);if($e.$$typeof===Oc)return Jt(ve,ue,_e,f1(ue,$e),zt);Qt(ue,$e)}return null}function Hs(ve,ue,_e,$e){for(var zt=null,li=null,Yt=ue,An=ue=0,Sr=null;Yt!==null&&An<_e.length;An++){Yt.index>An?(Sr=Yt,Yt=null):Sr=Yt.sibling;var wn=_t(ve,Yt,_e[An],$e);if(wn===null){Yt===null&&(Yt=Sr);break}c&&Yt&&wn.alternate===null&&u(ve,Yt),ue=D(wn,ue,An),li===null?zt=wn:li.sibling=wn,li=wn,Yt=Sr}if(An===_e.length)return m(ve,Yt),Tn&&le(ve,An),zt;if(Yt===null){for(;An<_e.length;An++)Yt=vt(ve,_e[An],$e),Yt!==null&&(ue=D(Yt,ue,An),li===null?zt=Yt:li.sibling=Yt,li=Yt);return Tn&&le(ve,An),zt}for(Yt=_(Yt);An<_e.length;An++)Sr=Jt(Yt,ve,An,_e[An],$e),Sr!==null&&(c&&Sr.alternate!==null&&Yt.delete(Sr.key===null?An:Sr.key),ue=D(Sr,ue,An),li===null?zt=Sr:li.sibling=Sr,li=Sr);return c&&Yt.forEach(function(Hc){return u(ve,Hc)}),Tn&&le(ve,An),zt}function f0(ve,ue,_e,$e){if(_e==null)throw Error(r(151));for(var zt=null,li=null,Yt=ue,An=ue=0,Sr=null,wn=_e.next();Yt!==null&&!wn.done;An++,wn=_e.next()){Yt.index>An?(Sr=Yt,Yt=null):Sr=Yt.sibling;var Hc=_t(ve,Yt,wn.value,$e);if(Hc===null){Yt===null&&(Yt=Sr);break}c&&Yt&&Hc.alternate===null&&u(ve,Yt),ue=D(Hc,ue,An),li===null?zt=Hc:li.sibling=Hc,li=Hc,Yt=Sr}if(wn.done)return m(ve,Yt),Tn&&le(ve,An),zt;if(Yt===null){for(;!wn.done;An++,wn=_e.next())wn=vt(ve,wn.value,$e),wn!==null&&(ue=D(wn,ue,An),li===null?zt=wn:li.sibling=wn,li=wn);return Tn&&le(ve,An),zt}for(Yt=_(Yt);!wn.done;An++,wn=_e.next())wn=Jt(Yt,ve,An,wn.value,$e),wn!==null&&(c&&wn.alternate!==null&&Yt.delete(wn.key===null?An:wn.key),ue=D(wn,ue,An),li===null?zt=wn:li.sibling=wn,li=wn);return c&&Yt.forEach(function(cX){return u(ve,cX)}),Tn&&le(ve,An),zt}function Sf(ve,ue,_e,$e){if(typeof _e=="object"&&_e!==null&&_e.type===Jh&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case y1:e:{for(var zt=_e.key;ue!==null;){if(ue.key===zt){if(zt=_e.type,zt===Jh){if(ue.tag===7){m(ve,ue.sibling),$e=M(ue,_e.props.children),$e.return=ve,ve=$e;break e}}else if(ue.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===Nc&&ki(zt)===ue.type){m(ve,ue.sibling),$e=M(ue,_e.props),an($e,_e),$e.return=ve,ve=$e;break e}m(ve,ue);break}else u(ve,ue);ue=ue.sibling}_e.type===Jh?($e=uf(_e.props.children,ve.mode,$e,_e.key),$e.return=ve,ve=$e):($e=v1(_e.type,_e.key,_e.props,null,ve.mode,$e),an($e,_e),$e.return=ve,ve=$e)}return H(ve);case Qh:e:{for(zt=_e.key;ue!==null;){if(ue.key===zt)if(ue.tag===4&&ue.stateNode.containerInfo===_e.containerInfo&&ue.stateNode.implementation===_e.implementation){m(ve,ue.sibling),$e=M(ue,_e.children||[]),$e.return=ve,ve=$e;break e}else{m(ve,ue);break}else u(ve,ue);ue=ue.sibling}$e=s3(_e,ve.mode,$e),$e.return=ve,ve=$e}return H(ve);case Nc:return zt=_e._init,_e=zt(_e._payload),Sf(ve,ue,_e,$e)}if(_1(_e))return Hs(ve,ue,_e,$e);if(a(_e)){if(zt=a(_e),typeof zt!="function")throw Error(r(150));return _e=zt.call(_e),f0(ve,ue,_e,$e)}if(typeof _e.then=="function")return Sf(ve,ue,Ct(_e),$e);if(_e.$$typeof===Oc)return Sf(ve,ue,f1(ve,_e),$e);Qt(ve,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint"?(_e=""+_e,ue!==null&&ue.tag===6?(m(ve,ue.sibling),$e=M(ue,_e),$e.return=ve,ve=$e):(m(ve,ue),$e=a3(_e,ve.mode,$e),$e.return=ve,ve=$e),H(ve)):m(ve,ue)}return function(ve,ue,_e,$e){try{r0=0;var zt=Sf(ve,ue,_e,$e);return fd=null,zt}catch(Yt){if(Yt===i0)throw Yt;var li=n(29,Yt,null,ve.mode);return li.lanes=$e,li.return=ve,li}finally{}}}function Wh(c,u){c=Dl,x(D1,c),x(hd,u),Dl=c|u.baseLanes}function Tc(){x(D1,Dl),x(hd,hd.current)}function Os(){Dl=D1.current,v(hd),v(D1)}function Ns(c){var u=c.alternate;x(dr,dr.current&1),x(Bs,c),ko===null&&(u===null||hd.current!==null||u.memoizedState!==null)&&(ko=c)}function mo(c){if(c.tag===22){if(x(dr,dr.current),x(Bs,c),ko===null){var u=c.alternate;u!==null&&u.memoizedState!==null&&(ko=c)}}else Dr()}function Dr(){x(dr,dr.current),x(Bs,Bs.current)}function Ht(c){v(Bs),ko===c&&(ko=null),v(dr)}function go(c){for(var u=c;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||y3(m)||_3(m)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Jn(){throw Error(r(321))}function P(c,u){if(u===null)return!1;for(var m=0;m<u.length&&m<c.length;m++)if(!Ka(c[m],u[m]))return!1;return!0}function V(c,u,m,_,M,D){return Ic=D,on=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,qt.H=c===null||c.memoizedState===null?gf:zc,mf=!1,D=m(_,M),mf=!1,dd&&(D=ge(u,m,_,M)),ie(c),D}function ie(c){qt.H=jo;var u=Xn!==null&&Xn.next!==null;if(Ic=0,Ji=Xn=on=null,O1=!1,a0=0,pd=null,u)throw Error(r(300));c===null||xr||(c=c.dependencies,c!==null&&u1(c)&&(xr=!0))}function ge(c,u,m,_){on=c;var M=0;do{if(dd&&(pd=null),a0=0,dd=!1,25<=M)throw Error(r(301));if(M+=1,Ji=Xn=null,c.updateQueue!=null){var D=c.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}qt.H=vf,D=u(m,_)}while(dd);return D}function Ee(){var c=qt.H,u=c.useState()[0];return u=typeof u.then=="function"?nt(u):u,c=c.useState()[0],(Xn!==null?Xn.memoizedState:null)!==c&&(on.flags|=1024),u}function Se(){var c=N1!==0;return N1=0,c}function qe(c,u,m){u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~m}function Ve(c){if(O1){for(c=c.memoizedState;c!==null;){var u=c.queue;u!==null&&(u.pending=null),c=c.next}O1=!1}Ic=0,Ji=Xn=on=null,dd=!1,a0=N1=0,pd=null}function ke(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ji===null?on.memoizedState=Ji=c:Ji=Ji.next=c,Ji}function Be(){if(Xn===null){var c=on.alternate;c=c!==null?c.memoizedState:null}else c=Xn.next;var u=Ji===null?on.memoizedState:Ji.next;if(u!==null)Ji=u,Xn=c;else{if(c===null)throw on.alternate===null?Error(r(467)):Error(r(310));Xn=c,c={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},Ji===null?on.memoizedState=Ji=c:Ji=Ji.next=c}return Ji}function nt(c){var u=a0;return a0+=1,pd===null&&(pd=[]),c=De(pd,c,u),u=on,(Ji===null?u.memoizedState:Ji.next)===null&&(u=u.alternate,qt.H=u===null||u.memoizedState===null?gf:zc),c}function et(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return nt(c);if(c.$$typeof===Oc)return kr(c)}throw Error(r(438,String(c)))}function F(c){var u=null,m=on.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var _=on.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(u={data:_.data.map(function(M){return M.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=O3(),on.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(c),_=0;_<c;_++)m[_]=Nk;return u.index++,m}function K(c,u){return typeof u=="function"?u(c):u}function ae(c){var u=Be();return oe(u,Xn,c)}function oe(c,u,m){var _=c.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=m;var M=c.baseQueue,D=_.pending;if(D!==null){if(M!==null){var H=M.next;M.next=D.next,D.next=H}u.baseQueue=M=D,_.pending=null}if(D=c.baseState,M===null)c.memoizedState=D;else{u=M.next;var te=H=null,fe=null,Ce=u,tt=!1;do{var vt=Ce.lane&-536870913;if(vt!==Ce.lane?(bn&vt)===vt:(Ic&vt)===vt){var _t=Ce.revertLane;if(_t===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),vt===ld&&(tt=!0);else if((Ic&_t)===_t){Ce=Ce.next,_t===ld&&(tt=!0);continue}else vt={lane:0,revertLane:Ce.revertLane,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},fe===null?(te=fe=vt,H=D):fe=fe.next=vt,on.lanes|=_t,Bc|=_t;vt=Ce.action,mf&&m(D,vt),D=Ce.hasEagerState?Ce.eagerState:m(D,vt)}else _t={lane:vt,revertLane:Ce.revertLane,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},fe===null?(te=fe=_t,H=D):fe=fe.next=_t,on.lanes|=vt,Bc|=vt;Ce=Ce.next}while(Ce!==null&&Ce!==u);if(fe===null?H=D:fe.next=te,!Ka(D,c.memoizedState)&&(xr=!0,tt&&(m=cd,m!==null)))throw m;c.memoizedState=D,c.baseState=H,c.baseQueue=fe,_.lastRenderedState=D}return M===null&&(_.lanes=0),[c.memoizedState,_.dispatch]}function re(c){var u=Be(),m=u.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var _=m.dispatch,M=m.pending,D=u.memoizedState;if(M!==null){m.pending=null;var H=M=M.next;do D=c(D,H.action),H=H.next;while(H!==M);Ka(D,u.memoizedState)||(xr=!0),u.memoizedState=D,u.baseQueue===null&&(u.baseState=D),m.lastRenderedState=D}return[D,_]}function ze(c,u,m){var _=on,M=Be(),D=Tn;if(D){if(m===void 0)throw Error(r(407));m=m()}else m=u();var H=!Ka((Xn||M).memoizedState,m);if(H&&(M.memoizedState=m,xr=!0),M=M.queue,vo(at.bind(null,_,M,c),[c]),M.getSnapshot!==u||H||Ji!==null&&Ji.memoizedState.tag&1){if(_.flags|=2048,ji(9,Xe.bind(null,_,M,m,u),{destroy:void 0},null),ei===null)throw Error(r(349));D||Ic&60||je(_,u,m)}return m}function je(c,u,m){c.flags|=16384,c={getSnapshot:u,value:m},u=on.updateQueue,u===null?(u=O3(),on.updateQueue=u,u.stores=[c]):(m=u.stores,m===null?u.stores=[c]:m.push(c))}function Xe(c,u,m,_){u.value=m,u.getSnapshot=_,it(u)&&wt(c)}function at(c,u,m){return m(function(){it(u)&&wt(c)})}function it(c){var u=c.getSnapshot;c=c.value;try{var m=u();return!Ka(c,m)}catch{return!0}}function wt(c){var u=Ge(c,2);u!==null&&ra(u,c,2)}function st(c){var u=ke();if(typeof c=="function"){var m=c;if(c=m(),mf){G(!0);try{m()}finally{G(!1)}}}return u.memoizedState=u.baseState=c,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:K,lastRenderedState:c},u}function Dt(c,u,m,_){return c.baseState=m,oe(c,Xn,typeof _=="function"?_:K)}function sn(c,u,m,_,M){if(l1(c))throw Error(r(485));if(c=u.action,c!==null){var D={payload:M,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){D.listeners.push(H)}};qt.T!==null?m(!0):D.isTransition=!1,_(D),m=u.pending,m===null?(D.next=u.pending=D,Dn(u,D)):(D.next=m.next,u.pending=m.next=D)}}function Dn(c,u){var m=u.action,_=u.payload,M=c.state;if(u.isTransition){var D=qt.T,H={};qt.T=H;try{var te=m(M,_),fe=qt.S;fe!==null&&fe(H,te),ln(c,u,te)}catch(Ce){gt(c,u,Ce)}finally{qt.T=D}}else try{D=m(M,_),ln(c,u,D)}catch(Ce){gt(c,u,Ce)}}function ln(c,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(_){Nt(c,u,_)},function(_){return gt(c,u,_)}):Nt(c,u,m)}function Nt(c,u,m){u.status="fulfilled",u.value=m,Lt(u),c.state=m,u=c.pending,u!==null&&(m=u.next,m===u?c.pending=null:(m=m.next,u.next=m,Dn(c,m)))}function gt(c,u,m){var _=c.pending;if(c.pending=null,_!==null){_=_.next;do u.status="rejected",u.reason=m,Lt(u),u=u.next;while(u!==_)}c.action=null}function Lt(c){c=c.listeners;for(var u=0;u<c.length;u++)(0,c[u])()}function Mt(c,u){return u}function Fn(c,u){if(Tn){var m=ei.formState;if(m!==null){e:{var _=on;if(Tn){if(Wr){var M=Ej(Wr,Go);if(M){Wr=PO(M),_=Mj(M);break e}}Fe(_)}_=!1}_&&(u=m[0])}}m=ke(),m.memoizedState=m.baseState=u,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mt,lastRenderedState:u},m.queue=_,m=sD.bind(null,on,_),_.dispatch=m,_=st(!1);var D=TS.bind(null,on,!1,_.queue);return _=ke(),M={state:u,dispatch:null,action:c,pending:null},_.queue=M,m=sn.bind(null,on,M,D,m),M.dispatch=m,_.memoizedState=c,[u,m,!1]}function Or(c){var u=Be();return Un(u,Xn,c)}function Un(c,u,m){u=oe(c,u,Mt)[0],c=ae(K)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?nt(u):u;var _=Be(),M=_.queue,D=M.dispatch;return m!==_.memoizedState&&(on.flags|=2048,ji(9,Gr.bind(null,M,m),{destroy:void 0},null)),[u,D,c]}function Gr(c,u){c.action=u}function Hn(c){var u=Be(),m=Xn;if(m!==null)return Un(u,m,c);Be(),u=u.memoizedState,m=Be();var _=m.queue.dispatch;return m.memoizedState=c,[u,_,!1]}function ji(c,u,m,_){return c={tag:c,create:u,inst:m,deps:_,next:null},u=on.updateQueue,u===null&&(u=O3(),on.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=c.next=c:(_=m.next,m.next=c,c.next=_,u.lastEffect=c),c}function ia(){return Be().memoizedState}function Qi(c,u,m,_){var M=ke();on.flags|=c,M.memoizedState=ji(1|u,m,{destroy:void 0},_===void 0?null:_)}function hr(c,u,m,_){var M=Be();_=_===void 0?null:_;var D=M.memoizedState.inst;Xn!==null&&_!==null&&P(_,Xn.memoizedState.deps)?M.memoizedState=ji(u,m,D,_):(on.flags|=c,M.memoizedState=ji(1|u,m,D,_))}function Yh(c,u){Qi(8390656,8,c,u)}function vo(c,u){hr(2048,8,c,u)}function ZR(c,u){return hr(4,2,c,u)}function $R(c,u){return hr(4,4,c,u)}function KR(c,u){if(typeof u=="function"){c=c();var m=u(c);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function QR(c,u,m){m=m!=null?m.concat([c]):null,hr(4,4,KR.bind(null,u,c),m)}function SS(){}function JR(c,u){var m=Be();u=u===void 0?null:u;var _=m.memoizedState;return u!==null&&P(u,_[1])?_[0]:(m.memoizedState=[c,u],c)}function eD(c,u){var m=Be();u=u===void 0?null:u;var _=m.memoizedState;if(u!==null&&P(u,_[1]))return _[0];if(_=c(),mf){G(!0);try{c()}finally{G(!1)}}return m.memoizedState=[_,u],_}function ES(c,u,m){return m===void 0||Ic&1073741824?c.memoizedState=u:(c.memoizedState=m,c=$D(),on.lanes|=c,Bc|=c,m)}function tD(c,u,m,_){return Ka(m,u)?m:hd.current!==null?(c=ES(c,m,_),Ka(c,u)||(xr=!0),c):Ic&42?(c=$D(),on.lanes|=c,Bc|=c,u):(xr=!0,c.memoizedState=m)}function nD(c,u,m,_,M){var D=ff();Ta(D!==0&&8>D?D:8);var H=qt.T,te={};qt.T=te,TS(c,!1,u,m);try{var fe=M(),Ce=qt.S;if(Ce!==null&&Ce(te,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var tt=Je(fe,_);km(c,u,tt,Ya(c))}else km(c,u,_,Ya(c))}catch(vt){km(c,u,{then:function(){},status:"rejected",reason:vt},Ya())}finally{Ta(D),qt.T=H}}function iD(c){var u=c.memoizedState;if(u!==null)return u;u={memoizedState:ed,baseState:ed,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:K,lastRenderedState:ed},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:K,lastRenderedState:m},next:null},c.memoizedState=u,c=c.alternate,c!==null&&(c.memoizedState=u),u}function MS(){return kr(hf)}function rD(){return Be().memoizedState}function aD(){return Be().memoizedState}function uk(c){for(var u=c.return;u!==null;){switch(u.tag){case 24:case 3:var m=Ya();c=Re(m);var _=Pe(u,c,m);_!==null&&(ra(_,u,m),ot(_,u,m)),u={cache:BS()},c.payload=u;return}u=u.return}}function fk(c,u,m){var _=Ya();m={lane:_,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},l1(c)?oD(u,m):(m=we(c,u,m,_),m!==null&&(ra(m,c,_),lD(m,u,_)))}function sD(c,u,m){var _=Ya();km(c,u,m,_)}function km(c,u,m,_){var M={lane:_,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(l1(c))oD(u,M);else{var D=c.alternate;if(c.lanes===0&&(D===null||D.lanes===0)&&(D=u.lastRenderedReducer,D!==null))try{var H=u.lastRenderedState,te=D(H,m);if(M.hasEagerState=!0,M.eagerState=te,Ka(te,H))return Oe(c,u,M,0),ei===null&&Me(),!1}catch{}finally{}if(m=we(c,u,M,_),m!==null)return ra(m,c,_),lD(m,u,_),!0}return!1}function TS(c,u,m,_){if(_={lane:2,revertLane:be(),action:_,hasEagerState:!1,eagerState:null,next:null},l1(c)){if(u)throw Error(r(479))}else u=we(c,m,_,2),u!==null&&ra(u,c,2)}function l1(c){var u=c.alternate;return c===on||u!==null&&u===on}function oD(c,u){dd=O1=!0;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}function lD(c,u,m){if(m&4194176){var _=u.lanes;_&=c.pendingLanes,m|=_,u.lanes=m,Y(c,m)}}function AS(c,u,m,_){u=c.memoizedState,m=m(_,u),m=m==null?u:l3({},u,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}function cD(c,u,m,_,M,D,H){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,D,H):u.prototype&&u.prototype.isPureReactComponent?!Ie(m,_)||!Ie(M,D):!0}function uD(c,u,m,_){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,_),u.state!==c&&N3.enqueueReplaceState(u,u.state,null)}function af(c,u){var m=u;if("ref"in u){m={};for(var _ in u)_!=="ref"&&(m[_]=u[_])}if(c=c.defaultProps){m===u&&(m=l3({},m));for(var M in c)m[M]===void 0&&(m[M]=c[M])}return m}function c1(c,u){try{var m=c.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(_){setTimeout(function(){throw _})}}function fD(c,u,m){try{var _=c.onCaughtError;_(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function wS(c,u,m){return m=Re(m),m.tag=3,m.payload={element:null},m.callback=function(){c1(c,u)},m}function hD(c){return c=Re(c),c.tag=3,c}function dD(c,u,m,_){var M=m.type.getDerivedStateFromError;if(typeof M=="function"){var D=_.value;c.payload=function(){return M(D)},c.callback=function(){fD(u,m,_)}}var H=m.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(c.callback=function(){fD(u,m,_),typeof M!="function"&&(Fc===null?Fc=new Set([this]):Fc.add(this));var te=_.stack;this.componentDidCatch(_.value,{componentStack:te!==null?te:""})})}function hk(c,u,m,_,M){if(m.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(u=m.alternate,u!==null&&Xm(u,m,M,!0),m=Bs.current,m!==null){switch(m.tag){case 13:return ko===null?t3():m.alternate===null&&Ui===0&&(Ui=3),m.flags&=-257,m.flags|=65536,m.lanes=M,_===R1?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([_]):u.add(_),i3(c,_,M)),!1;case 22:return m.flags|=65536,_===R1?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([_])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([_]):m.add(_)),i3(c,_,M)),!1}throw Error(r(435,m.tag))}return i3(c,_,M),t3(),!1}if(Tn)return u=Bs.current,u!==null?(!(u.flags&65536)&&(u.flags|=256),u.flags|=65536,u.lanes=M,_!==M3&&(c=Error(r(422),{cause:_}),ct(se(c,m)))):(_!==M3&&(u=Error(r(423),{cause:_}),ct(se(u,m))),c=c.current.alternate,c.flags|=65536,M&=-M,c.lanes|=M,_=se(_,m),M=wS(c.stateNode,_,M),Q(c,M),Ui!==4&&(Ui=2)),!1;var D=Error(r(520),{cause:_});if(D=se(D,m),o0===null?o0=[D]:o0.push(D),Ui!==4&&(Ui=2),u===null)return!0;_=se(_,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,c=M&-M,m.lanes|=c,c=wS(m.stateNode,_,c),Q(m,c),!1;case 1:if(u=m.type,D=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Fc===null||!Fc.has(D))))return m.flags|=65536,M&=-M,m.lanes|=M,M=hD(M),dD(M,c,m,_),Q(m,M),!1}m=m.return}while(m!==null);return!1}function Nr(c,u,m,_){u.child=c===null?ZO(u,null,m,_):pf(u,c.child,m,_)}function pD(c,u,m,_,M){m=m.render;var D=u.ref;if("ref"in _){var H={};for(var te in _)te!=="ref"&&(H[te]=_[te])}else H=_;return sf(u),_=V(c,u,m,H,D,M),te=Se(),c!==null&&!xr?(qe(c,u,M),xl(c,u,M)):(Tn&&te&&Ae(u),u.flags|=1,Nr(c,u,_,M),u.child)}function mD(c,u,m,_,M){if(c===null){var D=m.type;return typeof D=="function"&&!r3(D)&&D.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=D,gD(c,u,D,_,M)):(c=v1(m.type,null,_,u,u.mode,M),c.ref=u.ref,c.return=u,u.child=c)}if(D=c.child,!PS(c,M)){var H=D.memoizedProps;if(m=m.compare,m=m!==null?m:Ie,m(H,_)&&c.ref===u.ref)return xl(c,u,M)}return u.flags|=1,c=Dc(D,_),c.ref=u.ref,c.return=u,u.child=c}function gD(c,u,m,_,M){if(c!==null){var D=c.memoizedProps;if(Ie(D,_)&&c.ref===u.ref)if(xr=!1,u.pendingProps=_=D,PS(c,M))c.flags&131072&&(xr=!0);else return u.lanes=c.lanes,xl(c,u,M)}return CS(c,u,m,_,M)}function vD(c,u,m){var _=u.pendingProps,M=_.children,D=(u.stateNode._pendingVisibility&2)!==0,H=c!==null?c.memoizedState:null;if(jm(c,u),_.mode==="hidden"||D){if(u.flags&128){if(_=H!==null?H.baseLanes|m:m,c!==null){for(M=u.child=c.child,D=0;M!==null;)D=D|M.lanes|M.childLanes,M=M.sibling;u.childLanes=D&~_}else u.childLanes=0,u.child=null;return yD(c,u,_,m)}if(m&536870912)u.memoizedState={baseLanes:0,cachePool:null},c!==null&&h1(u,H!==null?H.cachePool:null),H!==null?Wh(u,H):Tc(),mo(u);else return u.lanes=u.childLanes=536870912,yD(c,u,H!==null?H.baseLanes|m:m,m)}else H!==null?(h1(u,H.cachePool),Wh(u,H),Dr(),u.memoizedState=null):(c!==null&&h1(u,null),Tc(),Dr());return Nr(c,u,M,m),u.child}function yD(c,u,m,_){var M=FS();return M=M===null?null:{parent:Ml?Oi._currentValue:Oi._currentValue2,pool:M},u.memoizedState={baseLanes:m,cachePool:M},c!==null&&h1(u,null),Tc(),mo(u),c!==null&&Xm(c,u,_,!0),null}function jm(c,u){var m=u.ref;if(m===null)c!==null&&c.ref!==null&&(u.flags|=2097664);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(c===null||c.ref!==m)&&(u.flags|=2097664)}}function CS(c,u,m,_,M){return sf(u),m=V(c,u,m,_,void 0,M),_=Se(),c!==null&&!xr?(qe(c,u,M),xl(c,u,M)):(Tn&&_&&Ae(u),u.flags|=1,Nr(c,u,m,M),u.child)}function _D(c,u,m,_,M,D){return sf(u),u.updateQueue=null,m=ge(u,_,m,M),ie(c),_=Se(),c!==null&&!xr?(qe(c,u,D),xl(c,u,D)):(Tn&&_&&Ae(u),u.flags|=1,Nr(c,u,m,D),u.child)}function xD(c,u,m,_,M){if(sf(u),u.stateNode===null){var D=nd,H=m.contextType;typeof H=="object"&&H!==null&&(D=kr(H)),D=new m(_,D),u.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=N3,u.stateNode=D,D._reactInternals=u,D=u.stateNode,D.props=_,D.state=u.memoizedState,D.refs={},pt(u),H=m.contextType,D.context=typeof H=="object"&&H!==null?kr(H):nd,D.state=u.memoizedState,H=m.getDerivedStateFromProps,typeof H=="function"&&(AS(u,m,H,_),D.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(H=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),H!==D.state&&N3.enqueueReplaceState(D,D.state,null),Ue(u,_,D,M),ce(),D.state=u.memoizedState),typeof D.componentDidMount=="function"&&(u.flags|=4194308),_=!0}else if(c===null){D=u.stateNode;var te=u.memoizedProps,fe=af(m,te);D.props=fe;var Ce=D.context,tt=m.contextType;H=nd,typeof tt=="object"&&tt!==null&&(H=kr(tt));var vt=m.getDerivedStateFromProps;tt=typeof vt=="function"||typeof D.getSnapshotBeforeUpdate=="function",te=u.pendingProps!==te,tt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(te||Ce!==H)&&uD(u,D,_,H),Pc=!1;var _t=u.memoizedState;D.state=_t,Ue(u,_,D,M),ce(),Ce=u.memoizedState,te||_t!==Ce||Pc?(typeof vt=="function"&&(AS(u,m,vt,_),Ce=u.memoizedState),(fe=Pc||cD(u,m,fe,_,_t,Ce,H))?(tt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(u.flags|=4194308)):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=Ce),D.props=_,D.state=Ce,D.context=H,_=fe):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{D=u.stateNode,At(c,u),H=u.memoizedProps,tt=af(m,H),D.props=tt,vt=u.pendingProps,_t=D.context,Ce=m.contextType,fe=nd,typeof Ce=="object"&&Ce!==null&&(fe=kr(Ce)),te=m.getDerivedStateFromProps,(Ce=typeof te=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(H!==vt||_t!==fe)&&uD(u,D,_,fe),Pc=!1,_t=u.memoizedState,D.state=_t,Ue(u,_,D,M),ce();var Jt=u.memoizedState;H!==vt||_t!==Jt||Pc||c!==null&&c.dependencies!==null&&u1(c.dependencies)?(typeof te=="function"&&(AS(u,m,te,_),Jt=u.memoizedState),(tt=Pc||cD(u,m,tt,_,_t,Jt,fe)||c!==null&&c.dependencies!==null&&u1(c.dependencies))?(Ce||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(_,Jt,fe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(_,Jt,fe)),typeof D.componentDidUpdate=="function"&&(u.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof D.componentDidUpdate!="function"||H===c.memoizedProps&&_t===c.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===c.memoizedProps&&_t===c.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=Jt),D.props=_,D.state=Jt,D.context=fe,_=tt):(typeof D.componentDidUpdate!="function"||H===c.memoizedProps&&_t===c.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===c.memoizedProps&&_t===c.memoizedState||(u.flags|=1024),_=!1)}return D=_,jm(c,u),_=(u.flags&128)!==0,D||_?(D=u.stateNode,m=_&&typeof m.getDerivedStateFromError!="function"?null:D.render(),u.flags|=1,c!==null&&_?(u.child=pf(u,c.child,null,M),u.child=pf(u,null,m,M)):Nr(c,u,m,M),u.memoizedState=D.state,c=u.child):c=xl(c,u,M),c}function bD(c,u,m,_){return Ft(),u.flags|=256,Nr(c,u,m,_),u.child}function RS(c){return{baseLanes:c,cachePool:wD()}}function DS(c,u,m){return c=c!==null?c.childLanes&~m:0,u&&(c|=Fs),c}function SD(c,u,m){var _=u.pendingProps,M=!1,D=(u.flags&128)!==0,H;if((H=D)||(H=c!==null&&c.memoizedState===null?!1:(dr.current&2)!==0),H&&(M=!0,u.flags&=-129),H=(u.flags&32)!==0,u.flags&=-33,c===null){if(Tn){if(M?Ns(u):Dr(),Tn){var te=Wr,fe;(fe=te)&&(te=Rj(te,Go),te!==null?(u.memoizedState={dehydrated:te,treeContext:df!==null?{id:Tl,overflow:Al}:null,retryLane:536870912},fe=n(18,null,null,0),fe.stateNode=te,fe.return=u,u.child=fe,aa=u,Wr=null,fe=!0):fe=!1),fe||Fe(u)}if(te=u.memoizedState,te!==null&&(te=te.dehydrated,te!==null))return _3(te)?u.lanes=16:u.lanes=536870912,null;Ht(u)}return te=_.children,_=_.fallback,M?(Dr(),M=u.mode,te=NS({mode:"hidden",children:te},M),_=uf(_,M,m,null),te.return=u,_.return=u,te.sibling=_,u.child=te,M=u.child,M.memoizedState=RS(m),M.childLanes=DS(c,H,m),u.memoizedState=U3,_):(Ns(u),OS(u,te))}if(fe=c.memoizedState,fe!==null&&(te=fe.dehydrated,te!==null)){if(D)u.flags&256?(Ns(u),u.flags&=-257,u=US(c,u,m)):u.memoizedState!==null?(Dr(),u.child=c.child,u.flags|=128,u=null):(Dr(),M=_.fallback,te=u.mode,_=NS({mode:"visible",children:_.children},te),M=uf(M,te,m,null),M.flags|=2,_.return=u,M.return=u,_.sibling=M,u.child=_,pf(u,c.child,null,m),_=u.child,_.memoizedState=RS(m),_.childLanes=DS(c,H,m),u.memoizedState=U3,u=M);else if(Ns(u),_3(te))H=bj(te).digest,_=Error(r(419)),_.stack="",_.digest=H,ct({value:_,source:null,stack:null}),u=US(c,u,m);else if(xr||Xm(c,u,m,!1),H=(m&c.childLanes)!==0,xr||H){if(H=ei,H!==null){if(_=m&-m,_&42)_=1;else switch(_){case 2:_=1;break;case 8:_=4;break;case 32:_=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:_=64;break;case 268435456:_=134217728;break;default:_=0}if(_=_&(H.suspendedLanes|m)?0:_,_!==0&&_!==fe.retryLane)throw fe.retryLane=_,Ge(c,_),ra(H,c,_),KO}y3(te)||t3(),u=US(c,u,m)}else y3(te)?(u.flags|=128,u.child=c.child,u=Mk.bind(null,c),Sj(te,u),u=null):(c=fe.treeContext,Us&&(Wr=Aj(te),aa=u,Tn=!0,xo=null,Go=!1,c!==null&&(Ps[Is++]=Tl,Ps[Is++]=Al,Ps[Is++]=df,Tl=c.id,Al=c.overflow,df=u)),u=OS(u,_.children),u.flags|=4096);return u}return M?(Dr(),M=_.fallback,te=u.mode,fe=c.child,D=fe.sibling,_=Dc(fe,{mode:"hidden",children:_.children}),_.subtreeFlags=fe.subtreeFlags&31457280,D!==null?M=Dc(D,M):(M=uf(M,te,m,null),M.flags|=2),M.return=u,_.return=u,_.sibling=M,u.child=_,_=M,M=u.child,te=c.child.memoizedState,te===null?te=RS(m):(fe=te.cachePool,fe!==null?(D=Ml?Oi._currentValue:Oi._currentValue2,fe=fe.parent!==D?{parent:D,pool:D}:fe):fe=wD(),te={baseLanes:te.baseLanes|m,cachePool:fe}),M.memoizedState=te,M.childLanes=DS(c,H,m),u.memoizedState=U3,_):(Ns(u),m=c.child,c=m.sibling,m=Dc(m,{mode:"visible",children:_.children}),m.return=u,m.sibling=null,c!==null&&(H=u.deletions,H===null?(u.deletions=[c],u.flags|=16):H.push(c)),u.child=m,u.memoizedState=null,m)}function OS(c,u){return u=NS({mode:"visible",children:u},c.mode),u.return=c,c.child=u}function NS(c,u){return hO(c,u,0,null)}function US(c,u,m){return pf(u,c.child,null,m),c=OS(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function ED(c,u,m){c.lanes|=u;var _=c.alternate;_!==null&&(_.lanes|=u),IS(c.return,u,m)}function LS(c,u,m,_,M){var D=c.memoizedState;D===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:M}:(D.isBackwards=u,D.rendering=null,D.renderingStartTime=0,D.last=_,D.tail=m,D.tailMode=M)}function MD(c,u,m){var _=u.pendingProps,M=_.revealOrder,D=_.tail;if(Nr(c,u,_.children,m),_=dr.current,_&2)_=_&1|2,u.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&ED(c,m,u);else if(c.tag===19)ED(c,m,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}_&=1}switch(x(dr,_),M){case"forwards":for(m=u.child,M=null;m!==null;)c=m.alternate,c!==null&&go(c)===null&&(M=m),m=m.sibling;m=M,m===null?(M=u.child,u.child=null):(M=m.sibling,m.sibling=null),LS(u,!1,M,m,D);break;case"backwards":for(m=null,M=u.child,u.child=null;M!==null;){if(c=M.alternate,c!==null&&go(c)===null){u.child=M;break}c=M.sibling,M.sibling=m,m=M,M=c}LS(u,!0,m,null,D);break;case"together":LS(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function xl(c,u,m){if(c!==null&&(u.dependencies=c.dependencies),Bc|=u.lanes,!(m&u.childLanes))if(c!==null){if(Xm(c,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(c!==null&&u.child!==c.child)throw Error(r(153));if(u.child!==null){for(c=u.child,m=Dc(c,c.pendingProps),u.child=m,m.return=u;c.sibling!==null;)c=c.sibling,m=m.sibling=Dc(c,c.pendingProps),m.return=u;m.sibling=null}return u.child}function PS(c,u){return c.lanes&u?!0:(c=c.dependencies,!!(c!==null&&u1(c)))}function dk(c,u,m){switch(u.tag){case 3:Ke(u,u.stateNode.containerInfo),Ac(u,Oi,c.memoizedState.cache),Ft();break;case 27:case 5:he(u);break;case 4:Ke(u,u.stateNode.containerInfo);break;case 10:Ac(u,u.type,u.memoizedProps.value);break;case 13:var _=u.memoizedState;if(_!==null)return _.dehydrated!==null?(Ns(u),u.flags|=128,null):m&u.child.childLanes?SD(c,u,m):(Ns(u),c=xl(c,u,m),c!==null?c.sibling:null);Ns(u);break;case 19:var M=(c.flags&128)!==0;if(_=(m&u.childLanes)!==0,_||(Xm(c,u,m,!1),_=(m&u.childLanes)!==0),M){if(_)return MD(c,u,m);u.flags|=128}if(M=u.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),x(dr,dr.current),_)break;return null;case 22:case 23:return u.lanes=0,vD(c,u,m);case 24:Ac(u,Oi,c.memoizedState.cache)}return xl(c,u,m)}function TD(c,u,m){if(c!==null)if(c.memoizedProps!==u.pendingProps)xr=!0;else{if(!PS(c,m)&&!(u.flags&128))return xr=!1,dk(c,u,m);xr=!!(c.flags&131072)}else xr=!1,Tn&&u.flags&1048576&&me(u,T1,u.index);switch(u.lanes=0,u.tag){case 16:e:{c=u.pendingProps;var _=u.elementType,M=_._init;if(_=M(_._payload),u.type=_,typeof _=="function")r3(_)?(c=af(_,c),u.tag=1,u=xD(null,u,_,c,m)):(u.tag=0,u=CS(null,u,_,c,m));else{if(_!=null){if(M=_.$$typeof,M===u3){u.tag=11,u=pD(null,u,_,c,m);break e}else if(M===d3){u.tag=14,u=mD(null,u,_,c,m);break e}}throw u=s(_)||_,Error(r(306,u,""))}}return u;case 0:return CS(c,u,u.type,u.pendingProps,m);case 1:return _=u.type,M=af(_,u.pendingProps),xD(c,u,_,M,m);case 3:e:{if(Ke(u,u.stateNode.containerInfo),c===null)throw Error(r(387));var D=u.pendingProps;M=u.memoizedState,_=M.element,At(c,u),Ue(u,D,null,m);var H=u.memoizedState;if(D=H.cache,Ac(u,Oi,D),D!==M.cache&&zS(u,[Oi],m,!0),ce(),D=H.element,Us&&M.isDehydrated)if(M={element:D,isDehydrated:!1,cache:H.cache},u.updateQueue.baseState=M,u.memoizedState=M,u.flags&256){u=bD(c,u,D,m);break e}else if(D!==_){_=se(Error(r(424)),u),ct(_),u=bD(c,u,D,m);break e}else for(Us&&(Wr=Tj(u.stateNode.containerInfo),aa=u,Tn=!0,xo=null,Go=!0),m=ZO(u,null,D,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Ft(),D===_){u=xl(c,u,m);break e}Nr(c,u,D,m)}u=u.child}return u;case 26:if(Ls)return jm(c,u),c===null?(m=FO(u.type,null,u.pendingProps,null))?u.memoizedState=m:Tn||(u.stateNode=Vj(u.type,u.pendingProps,Lc.current,u)):u.memoizedState=FO(u.type,c.memoizedProps,u.pendingProps,c.memoizedState),null;case 27:if(Xr)return he(u),c===null&&Xr&&Tn&&(_=u.stateNode=XO(u.type,u.pendingProps,Lc.current,Ur.current,!1),aa=u,Go=!0,Wr=IO(_)),_=u.pendingProps.children,c!==null||Tn?Nr(c,u,_,m):u.child=pf(u,null,_,m),jm(c,u),u.child;case 5:return c===null&&Tn&&(Bj(u.type,u.pendingProps,Ur.current),(M=_=Wr)&&(_=wj(_,u.type,u.pendingProps,Go),_!==null?(u.stateNode=_,aa=u,Wr=IO(_),Go=!1,M=!0):M=!1),M||Fe(u)),he(u),M=u.type,D=u.pendingProps,H=c!==null?c.memoizedProps:null,_=D.children,x1(M,D)?_=null:H!==null&&x1(M,H)&&(u.flags|=32),u.memoizedState!==null&&(M=V(c,u,Ee,null,null,m),Ml?hf._currentValue=M:hf._currentValue2=M),jm(c,u),Nr(c,u,_,m),u.child;case 6:return c===null&&Tn&&(Fj(u.pendingProps,Ur.current),(c=m=Wr)&&(m=Cj(m,u.pendingProps,Go),m!==null?(u.stateNode=m,aa=u,Wr=null,c=!0):c=!1),c||Fe(u)),null;case 13:return SD(c,u,m);case 4:return Ke(u,u.stateNode.containerInfo),_=u.pendingProps,c===null?u.child=pf(u,null,_,m):Nr(c,u,_,m),u.child;case 11:return pD(c,u,u.type,u.pendingProps,m);case 7:return Nr(c,u,u.pendingProps,m),u.child;case 8:return Nr(c,u,u.pendingProps.children,m),u.child;case 12:return Nr(c,u,u.pendingProps.children,m),u.child;case 10:return _=u.pendingProps,Ac(u,u.type,_.value),Nr(c,u,_.children,m),u.child;case 9:return M=u.type._context,_=u.pendingProps.children,sf(u),M=kr(M),_=_(M),u.flags|=1,Nr(c,u,_,m),u.child;case 14:return mD(c,u,u.type,u.pendingProps,m);case 15:return gD(c,u,u.type,u.pendingProps,m);case 19:return MD(c,u,m);case 22:return vD(c,u,m);case 24:return sf(u),_=kr(Oi),c===null?(M=FS(),M===null&&(M=ei,D=BS(),M.pooledCache=D,D.refCount++,D!==null&&(M.pooledCacheLanes|=m),M=D),u.memoizedState={parent:_,cache:M},pt(u),Ac(u,Oi,M)):(c.lanes&m&&(At(c,u),Ue(u,null,null,m),ce()),M=c.memoizedState,D=u.memoizedState,M.parent!==_?(M={parent:_,cache:_},u.memoizedState=M,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=M),Ac(u,Oi,_)):(_=D.cache,Ac(u,Oi,_),_!==M.cache&&zS(u,[Oi],m,!0))),Nr(c,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ac(c,u,m){Ml?(x(U1,u._currentValue),u._currentValue=m):(x(U1,u._currentValue2),u._currentValue2=m)}function bl(c){var u=U1.current;Ml?c._currentValue=u:c._currentValue2=u,v(U1)}function IS(c,u,m){for(;c!==null;){var _=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),c===m)break;c=c.return}}function zS(c,u,m,_){var M=c.child;for(M!==null&&(M.return=c);M!==null;){var D=M.dependencies;if(D!==null){var H=M.child;D=D.firstContext;e:for(;D!==null;){var te=D;D=M;for(var fe=0;fe<u.length;fe++)if(te.context===u[fe]){D.lanes|=m,te=D.alternate,te!==null&&(te.lanes|=m),IS(D.return,m,c),_||(H=null);break e}D=te.next}}else if(M.tag===18){if(H=M.return,H===null)throw Error(r(341));H.lanes|=m,D=H.alternate,D!==null&&(D.lanes|=m),IS(H,m,c),H=null}else H=M.child;if(H!==null)H.return=M;else for(H=M;H!==null;){if(H===c){H=null;break}if(M=H.sibling,M!==null){M.return=H.return,H=M;break}H=H.return}M=H}}function Xm(c,u,m,_){c=null;for(var M=u,D=!1;M!==null;){if(!D){if(M.flags&524288)D=!0;else if(M.flags&262144)break}if(M.tag===10){var H=M.alternate;if(H===null)throw Error(r(387));if(H=H.memoizedProps,H!==null){var te=M.type;Ka(M.pendingProps.value,H.value)||(c!==null?c.push(te):c=[te])}}else if(M===A1.current){if(H=M.alternate,H===null)throw Error(r(387));H.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(c!==null?c.push(hf):c=[hf])}M=M.return}c!==null&&zS(u,c,m,_),u.flags|=262144}function u1(c){for(c=c.firstContext;c!==null;){var u=c.context;if(!Ka(Ml?u._currentValue:u._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function sf(c){yf=c,wl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function kr(c){return AD(yf,c)}function f1(c,u){return yf===null&&sf(c),AD(c,u)}function AD(c,u){var m=Ml?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:m,next:null},wl===null){if(c===null)throw Error(r(308));wl=u,c.dependencies={lanes:0,firstContext:u},c.flags|=524288}else wl=wl.next=u;return m}function BS(){return{controller:new rX,data:new Map,refCount:0}}function Wm(c){c.refCount--,c.refCount===0&&aX(sX,function(){c.controller.abort()})}function FS(){var c=_f.current;return c!==null?c:ei.pooledCache}function h1(c,u){u===null?x(_f,_f.current):x(_f,u.pool)}function wD(){var c=FS();return c===null?null:{parent:Ml?Oi._currentValue:Oi._currentValue2,pool:c}}function ja(c){c.flags|=4}function CD(c,u){if(c!==null&&c.child===u.child)return!1;if(u.flags&16)return!0;for(c=u.child;c!==null;){if(c.flags&13878||c.subtreeFlags&13878)return!0;c=c.sibling}return!1}function HS(c,u,m,_){if(jr)for(m=u.child;m!==null;){if(m.tag===5||m.tag===6)g3(c,m.stateNode);else if(!(m.tag===4||Xr&&m.tag===27)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}else if(Uc)for(var M=u.child;M!==null;){if(M.tag===5){var D=M.stateNode;m&&_&&(D=UO(D,M.type,M.memoizedProps)),g3(c,D)}else if(M.tag===6)D=M.stateNode,m&&_&&(D=LO(D,M.memoizedProps)),g3(c,D);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)D=M.child,D!==null&&(D.return=M),HS(c,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===u)break;for(;M.sibling===null;){if(M.return===null||M.return===u)return;M=M.return}M.sibling.return=M.return,M=M.sibling}}function RD(c,u,m,_){if(Uc)for(var M=u.child;M!==null;){if(M.tag===5){var D=M.stateNode;m&&_&&(D=UO(D,M.type,M.memoizedProps)),OO(c,D)}else if(M.tag===6)D=M.stateNode,m&&_&&(D=LO(D,M.memoizedProps)),OO(c,D);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)D=M.child,D!==null&&(D.return=M),RD(c,M,!(M.memoizedProps!==null&&M.memoizedProps.mode==="manual"),!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===u)break;for(;M.sibling===null;){if(M.return===null||M.return===u)return;M=M.return}M.sibling.return=M.return,M=M.sibling}}function DD(c,u){if(Uc&&CD(c,u)){c=u.stateNode;var m=c.containerInfo,_=DO();RD(_,u,!1,!1),c.pendingChildren=_,ja(u),xj(m,_)}}function VS(c,u,m,_){if(jr)c.memoizedProps!==_&&ja(u);else if(Uc){var M=c.stateNode,D=c.memoizedProps;if((c=CD(c,u))||D!==_){var H=Ur.current;D=_j(M,m,D,_,!c,null),D===M?u.stateNode=M:(MO(D,m,_,H)&&ja(u),u.stateNode=D,c?HS(D,u,!1,!1):ja(u))}else u.stateNode=M}}function GS(c,u,m){if(Yk(u,m)){if(c.flags|=16777216,!wO(u,m))if(tO())c.flags|=8192;else throw ud=R1,D3}else c.flags&=-16777217}function OD(c,u){if(kj(u)){if(c.flags|=16777216,!jO(u))if(tO())c.flags|=8192;else throw ud=R1,D3}else c.flags&=-16777217}function d1(c,u){u!==null&&(c.flags|=4),c.flags&16384&&(u=c.tag!==22?A():536870912,c.lanes|=u,vd|=u)}function Ym(c,u){if(!Tn)switch(c.tailMode){case"hidden":u=c.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function Ai(c){var u=c.alternate!==null&&c.alternate.child===c.child,m=0,_=0;if(u)for(var M=c.child;M!==null;)m|=M.lanes|M.childLanes,_|=M.subtreeFlags&31457280,_|=M.flags&31457280,M.return=c,M=M.sibling;else for(M=c.child;M!==null;)m|=M.lanes|M.childLanes,_|=M.subtreeFlags,_|=M.flags,M.return=c,M=M.sibling;return c.subtreeFlags|=_,c.childLanes=m,u}function pk(c,u,m){var _=u.pendingProps;switch(Le(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ai(u),null;case 1:return Ai(u),null;case 3:return m=u.stateNode,_=null,c!==null&&(_=c.memoizedState.cache),u.memoizedState.cache!==_&&(u.flags|=2048),bl(Oi),yt(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(ht(u)?ja(u):c===null||c.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,xo!==null&&(JS(xo),xo=null))),DD(c,u),Ai(u),null;case 26:if(Ls){m=u.type;var M=u.memoizedState;return c===null?(ja(u),M!==null?(Ai(u),OD(u,M)):(Ai(u),GS(u,m,_))):M?M!==c.memoizedState?(ja(u),Ai(u),OD(u,M)):(Ai(u),u.flags&=-16777217):(jr?c.memoizedProps!==_&&ja(u):VS(c,u,m,_),Ai(u),GS(u,m,_)),null}case 27:if(Xr){if(Te(u),m=Lc.current,M=u.type,c!==null&&u.stateNode!=null)jr?c.memoizedProps!==_&&ja(u):VS(c,u,M,_);else{if(!_){if(u.stateNode===null)throw Error(r(166));return Ai(u),null}c=Ur.current,ht(u)?xt(u,c):(c=XO(M,_,m,c,!0),u.stateNode=c,ja(u))}return Ai(u),null}case 5:if(Te(u),m=u.type,c!==null&&u.stateNode!=null)VS(c,u,m,_);else{if(!_){if(u.stateNode===null)throw Error(r(166));return Ai(u),null}c=Ur.current,ht(u)?xt(u,c):(M=Hk(m,_,Lc.current,c,u),HS(M,u,!1,!1),u.stateNode=M,MO(M,m,_,c)&&ja(u))}return Ai(u),GS(u,u.type,u.pendingProps),null;case 6:if(c&&u.stateNode!=null)m=c.memoizedProps,jr?m!==_&&ja(u):Uc&&(m!==_?(u.stateNode=TO(_,Lc.current,Ur.current,u),ja(u)):u.stateNode=c.stateNode);else{if(typeof _!="string"&&u.stateNode===null)throw Error(r(166));if(c=Lc.current,m=Ur.current,ht(u)){if(!Us)throw Error(r(176));if(c=u.stateNode,m=u.memoizedProps,_=null,M=aa,M!==null)switch(M.tag){case 27:case 5:_=M.memoizedProps}Oj(c,m,u,_)||Fe(u)}else u.stateNode=TO(_,c,m,u)}return Ai(u),null;case 13:if(_=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(M=ht(u),_!==null&&_.dehydrated!==null){if(c===null){if(!M)throw Error(r(318));if(!Us)throw Error(r(344));if(M=u.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(r(317));Nj(M,u)}else Ft(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;Ai(u),M=!1}else xo!==null&&(JS(xo),xo=null),M=!0;if(!M)return u.flags&256?(Ht(u),u):(Ht(u),null)}if(Ht(u),u.flags&128)return u.lanes=m,u;if(m=_!==null,c=c!==null&&c.memoizedState!==null,m){_=u.child,M=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(M=_.alternate.memoizedState.cachePool.pool);var D=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(D=_.memoizedState.cachePool.pool),D!==M&&(_.flags|=2048)}return m!==c&&m&&(u.child.flags|=8192),d1(u,u.updateQueue),Ai(u),null;case 4:return yt(),DD(c,u),c===null&&kk(u.stateNode.containerInfo),Ai(u),null;case 10:return bl(u.type),Ai(u),null;case 19:if(v(dr),M=u.memoizedState,M===null)return Ai(u),null;if(_=(u.flags&128)!==0,D=M.rendering,D===null)if(_)Ym(M,!1);else{if(Ui!==0||c!==null&&c.flags&128)for(c=u.child;c!==null;){if(D=go(c),D!==null){for(u.flags|=128,Ym(M,!1),c=D.updateQueue,u.updateQueue=c,d1(u,c),u.subtreeFlags=0,c=m,m=u.child;m!==null;)fO(m,c),m=m.sibling;return x(dr,dr.current&1|2),u.child}c=c.sibling}M.tail!==null&&_o()>l0&&(u.flags|=128,_=!0,Ym(M,!1),u.lanes=4194304)}else{if(!_)if(c=go(D),c!==null){if(u.flags|=128,_=!0,c=c.updateQueue,u.updateQueue=c,d1(u,c),Ym(M,!0),M.tail===null&&M.tailMode==="hidden"&&!D.alternate&&!Tn)return Ai(u),null}else 2*_o()-M.renderingStartTime>l0&&m!==536870912&&(u.flags|=128,_=!0,Ym(M,!1),u.lanes=4194304);M.isBackwards?(D.sibling=u.child,u.child=D):(c=M.last,c!==null?c.sibling=D:u.child=D,M.last=D)}return M.tail!==null?(u=M.tail,M.rendering=u,M.tail=u.sibling,M.renderingStartTime=_o(),u.sibling=null,c=dr.current,x(dr,_?c&1|2:c&1),u):(Ai(u),null);case 22:case 23:return Ht(u),Os(),_=u.memoizedState!==null,c!==null?c.memoizedState!==null!==_&&(u.flags|=8192):_&&(u.flags|=8192),_?m&536870912&&!(u.flags&128)&&(Ai(u),u.subtreeFlags&6&&(u.flags|=8192)):Ai(u),m=u.updateQueue,m!==null&&d1(u,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==m&&(u.flags|=2048),c!==null&&v(_f),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),bl(Oi),Ai(u),null;case 25:return null}throw Error(r(156,u.tag))}function mk(c,u){switch(Le(u),u.tag){case 1:return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return bl(Oi),yt(),c=u.flags,c&65536&&!(c&128)?(u.flags=c&-65537|128,u):null;case 26:case 27:case 5:return Te(u),null;case 13:if(Ht(u),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ft()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return v(dr),null;case 4:return yt(),null;case 10:return bl(u.type),null;case 22:case 23:return Ht(u),Os(),c!==null&&v(_f),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 24:return bl(Oi),null;case 25:return null;default:return null}}function ND(c,u){switch(Le(u),u.tag){case 3:bl(Oi),yt();break;case 26:case 27:case 5:Te(u);break;case 4:yt();break;case 13:Ht(u);break;case 19:v(dr);break;case 10:bl(u.type);break;case 22:case 23:Ht(u),Os(),c!==null&&v(_f);break;case 24:bl(Oi)}}function qm(c,u){try{var m=u.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var M=_.next;m=M;do{if((m.tag&c)===c){_=void 0;var D=m.create,H=m.inst;_=D(),H.destroy=_}m=m.next}while(m!==M)}}catch(te){Vn(u,u.return,te)}}function wc(c,u,m){try{var _=u.updateQueue,M=_!==null?_.lastEffect:null;if(M!==null){var D=M.next;_=D;do{if((_.tag&c)===c){var H=_.inst,te=H.destroy;if(te!==void 0){H.destroy=void 0,M=u;var fe=m;try{te()}catch(Ce){Vn(M,fe,Ce)}}}_=_.next}while(_!==D)}}catch(Ce){Vn(u,u.return,Ce)}}function UD(c){var u=c.updateQueue;if(u!==null){var m=c.stateNode;try{de(u,m)}catch(_){Vn(c,c.return,_)}}}function LD(c,u,m){m.props=af(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(_){Vn(c,u,_)}}function of(c,u){try{var m=c.ref;if(m!==null){var _=c.stateNode;switch(c.tag){case 26:case 27:case 5:var M=Km(_);break;default:M=_}typeof m=="function"?c.refCleanup=m(M):m.current=M}}catch(D){Vn(c,u,D)}}function Xa(c,u){var m=c.ref,_=c.refCleanup;if(m!==null)if(typeof _=="function")try{_()}catch(M){Vn(c,u,M)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(M){Vn(c,u,M)}else m.current=null}function PD(c){var u=c.type,m=c.memoizedProps,_=c.stateNode;try{lj(_,u,m,c)}catch(M){Vn(c,c.return,M)}}function ID(c,u,m){try{cj(c.stateNode,c.type,m,u,c)}catch(_){Vn(c,c.return,_)}}function zD(c){return c.tag===5||c.tag===3||(Ls?c.tag===26:!1)||(Xr?c.tag===27:!1)||c.tag===4}function kS(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||zD(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&(!Xr||c.tag!==27)&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function jS(c,u,m){var _=c.tag;if(_===5||_===6)c=c.stateNode,u?fj(m,c,u):sj(m,c);else if(!(_===4||Xr&&_===27)&&(c=c.child,c!==null))for(jS(c,u,m),c=c.sibling;c!==null;)jS(c,u,m),c=c.sibling}function p1(c,u,m){var _=c.tag;if(_===5||_===6)c=c.stateNode,u?uj(m,c,u):aj(m,c);else if(!(_===4||Xr&&_===27)&&(c=c.child,c!==null))for(p1(c,u,m),c=c.sibling;c!==null;)p1(c,u,m),c=c.sibling}function BD(c,u,m){c=c.containerInfo;try{NO(c,m)}catch(_){Vn(u,u.return,_)}}function gk(c,u){for(Bk(c.containerInfo),br=u;br!==null;)if(c=br,u=c.child,(c.subtreeFlags&1028)!==0&&u!==null)u.return=c,br=u;else for(;br!==null;){c=br;var m=c.alternate;switch(u=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if(u&1024&&m!==null){u=void 0;var _=c,M=m.memoizedProps;m=m.memoizedState;var D=_.stateNode;try{var H=af(_.type,M,_.elementType===_.type);u=D.getSnapshotBeforeUpdate(H,m),D.__reactInternalSnapshotBeforeUpdate=u}catch(te){Vn(_,_.return,te)}}break;case 3:u&1024&&jr&&yj(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(u&1024)throw Error(r(163))}if(u=c.sibling,u!==null){u.return=c.return,br=u;break}br=c.return}return H=e5,e5=!1,H}function FD(c,u,m){var _=m.flags;switch(m.tag){case 0:case 11:case 15:Sl(c,m),_&4&&qm(5,m);break;case 1:if(Sl(c,m),_&4)if(c=m.stateNode,u===null)try{c.componentDidMount()}catch(te){Vn(m,m.return,te)}else{var M=af(m.type,u.memoizedProps);u=u.memoizedState;try{c.componentDidUpdate(M,u,c.__reactInternalSnapshotBeforeUpdate)}catch(te){Vn(m,m.return,te)}}_&64&&UD(m),_&512&&of(m,m.return);break;case 3:if(Sl(c,m),_&64&&(_=m.updateQueue,_!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=Km(m.child.stateNode);break;case 1:c=m.child.stateNode}try{de(_,c)}catch(te){Vn(m,m.return,te)}}break;case 26:if(Ls){Sl(c,m),_&512&&of(m,m.return);break}case 27:case 5:Sl(c,m),u===null&&_&4&&PD(m),_&512&&of(m,m.return);break;case 12:Sl(c,m);break;case 13:Sl(c,m),_&4&&VD(c,m);break;case 22:if(M=m.memoizedState!==null||Cl,!M){u=u!==null&&u.memoizedState!==null||Ni;var D=Cl,H=Ni;Cl=M,(Ni=u)&&!H?Cc(c,m,(m.subtreeFlags&8772)!==0):Sl(c,m),Cl=D,Ni=H}_&512&&(m.memoizedProps.mode==="manual"?of(m,m.return):Xa(m,m.return));break;default:Sl(c,m)}}function HD(c){var u=c.alternate;u!==null&&(c.alternate=null,HD(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&Wk(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function yo(c,u,m){for(m=m.child;m!==null;)XS(c,u,m),m=m.sibling}function XS(c,u,m){if($a&&typeof $a.onCommitFiberUnmount=="function")try{$a.onCommitFiberUnmount(e0,m)}catch{}switch(m.tag){case 26:if(Ls){Ni||Xa(m,u),yo(c,u,m),m.memoizedState?VO(m.memoizedState):m.stateNode&&kO(m.stateNode);break}case 27:if(Xr){Ni||Xa(m,u);var _=er,M=Qa;er=m.stateNode,yo(c,u,m),Yj(m.stateNode),er=_,Qa=M;break}case 5:Ni||Xa(m,u);case 6:if(jr){if(_=er,M=Qa,er=null,yo(c,u,m),er=_,Qa=M,er!==null)if(Qa)try{dj(er,m.stateNode)}catch(D){Vn(m,u,D)}else try{hj(er,m.stateNode)}catch(D){Vn(m,u,D)}}else yo(c,u,m);break;case 18:jr&&er!==null&&(Qa?zj(er,m.stateNode):Ij(er,m.stateNode));break;case 4:jr?(_=er,M=Qa,er=m.stateNode.containerInfo,Qa=!0,yo(c,u,m),er=_,Qa=M):(Uc&&BD(m.stateNode,m,DO()),yo(c,u,m));break;case 0:case 11:case 14:case 15:Ni||wc(2,m,u),Ni||wc(4,m,u),yo(c,u,m);break;case 1:Ni||(Xa(m,u),_=m.stateNode,typeof _.componentWillUnmount=="function"&&LD(m,u,_)),yo(c,u,m);break;case 21:yo(c,u,m);break;case 22:Ni||Xa(m,u),Ni=(_=Ni)||m.memoizedState!==null,yo(c,u,m),Ni=_;break;default:yo(c,u,m)}}function VD(c,u){if(Us&&u.memoizedState===null&&(c=u.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Pj(c)}catch(m){Vn(u,u.return,m)}}function vk(c){switch(c.tag){case 13:case 19:var u=c.stateNode;return u===null&&(u=c.stateNode=new JO),u;case 22:return c=c.stateNode,u=c._retryCache,u===null&&(u=c._retryCache=new JO),u;default:throw Error(r(435,c.tag))}}function WS(c,u){var m=vk(c);u.forEach(function(_){var M=Tk.bind(null,c,_);m.has(_)||(m.add(_),_.then(M,M))})}function Ma(c,u){var m=u.deletions;if(m!==null)for(var _=0;_<m.length;_++){var M=m[_],D=c,H=u;if(jr){var te=H;e:for(;te!==null;){switch(te.tag){case 27:case 5:er=te.stateNode,Qa=!1;break e;case 3:er=te.stateNode.containerInfo,Qa=!0;break e;case 4:er=te.stateNode.containerInfo,Qa=!0;break e}te=te.return}if(er===null)throw Error(r(160));XS(D,H,M),er=null,Qa=!1}else XS(D,H,M);D=M.alternate,D!==null&&(D.return=null),M.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)GD(u,c),u=u.sibling}function GD(c,u){var m=c.alternate,_=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Ma(u,c),Wa(c),_&4&&(wc(3,c,c.return),qm(3,c),wc(5,c,c.return));break;case 1:Ma(u,c),Wa(c),_&512&&(Ni||m===null||Xa(m,m.return)),_&64&&Cl&&(c=c.updateQueue,c!==null&&(_=c.callbacks,_!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?_:m.concat(_))));break;case 26:if(Ls){var M=bo;Ma(u,c),Wa(c),_&512&&(Ni||m===null||Xa(m,m.return)),_&4&&(_=m!==null?m.memoizedState:null,u=c.memoizedState,m===null?u===null?c.stateNode===null?c.stateNode=Hj(M,c.type,c.memoizedProps,c):GO(M,c.type,c.stateNode):c.stateNode=HO(M,u,c.memoizedProps):_!==u?(_===null?m.stateNode!==null&&kO(m.stateNode):VO(_),u===null?GO(M,c.type,c.stateNode):HO(M,u,c.memoizedProps)):u===null&&c.stateNode!==null&&ID(c,c.memoizedProps,m.memoizedProps));break}case 27:if(Xr&&_&4&&c.alternate===null){M=c.stateNode;var D=c.memoizedProps;try{Xj(M),Wj(c.type,D,M,c)}catch(tt){Vn(c,c.return,tt)}}case 5:if(Ma(u,c),Wa(c),_&512&&(Ni||m===null||Xa(m,m.return)),jr){if(c.flags&32){u=c.stateNode;try{RO(u)}catch(tt){Vn(c,c.return,tt)}}_&4&&c.stateNode!=null&&(u=c.memoizedProps,ID(c,u,m!==null?m.memoizedProps:u)),_&1024&&(L3=!0)}break;case 6:if(Ma(u,c),Wa(c),_&4&&jr){if(c.stateNode===null)throw Error(r(162));_=c.memoizedProps,m=m!==null?m.memoizedProps:_,u=c.stateNode;try{oj(u,m,_)}catch(tt){Vn(c,c.return,tt)}}break;case 3:if(Ls?(Gj(),M=bo,bo=x3(u.containerInfo),Ma(u,c),bo=M):Ma(u,c),Wa(c),_&4){if(jr&&Us&&m!==null&&m.memoizedState.isDehydrated)try{Lj(u.containerInfo)}catch(tt){Vn(c,c.return,tt)}if(Uc){_=u.containerInfo,m=u.pendingChildren;try{NO(_,m)}catch(tt){Vn(c,c.return,tt)}}}L3&&(L3=!1,kD(c));break;case 4:Ls?(m=bo,bo=x3(c.stateNode.containerInfo),Ma(u,c),Wa(c),bo=m):(Ma(u,c),Wa(c)),_&4&&Uc&&BD(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:Ma(u,c),Wa(c);break;case 13:Ma(u,c),Wa(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(B3=_o()),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,WS(c,_)));break;case 22:_&512&&(Ni||m===null||Xa(m,m.return)),M=c.memoizedState!==null;var H=m!==null&&m.memoizedState!==null,te=Cl,fe=Ni;if(Cl=te||M,Ni=fe||H,Ma(u,c),Ni=fe,Cl=te,Wa(c),u=c.stateNode,u._current=c,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,_&8192&&(u._visibility=M?u._visibility&-2:u._visibility|1,M&&(u=Cl||Ni,m===null||H||u||qh(c)),jr&&(c.memoizedProps===null||c.memoizedProps.mode!=="manual"))){e:if(m=null,jr)for(u=c;;){if(u.tag===5||Ls&&u.tag===26||Xr&&u.tag===27){if(m===null){H=m=u;try{D=H.stateNode,M?pj(D):gj(H.stateNode,H.memoizedProps)}catch(tt){Vn(H,H.return,tt)}}}else if(u.tag===6){if(m===null){H=u;try{var Ce=H.stateNode;M?mj(Ce):vj(Ce,H.memoizedProps)}catch(tt){Vn(H,H.return,tt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===c)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}_&4&&(_=c.updateQueue,_!==null&&(m=_.retryQueue,m!==null&&(_.retryQueue=null,WS(c,m))));break;case 19:Ma(u,c),Wa(c),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,WS(c,_)));break;case 21:break;default:Ma(u,c),Wa(c)}}function Wa(c){var u=c.flags;if(u&2){try{if(jr&&(!Xr||c.tag!==27)){e:{for(var m=c.return;m!==null;){if(zD(m)){var _=m;break e}m=m.return}throw Error(r(160))}switch(_.tag){case 27:if(Xr){var M=_.stateNode,D=kS(c);p1(c,D,M);break}case 5:var H=_.stateNode;_.flags&32&&(RO(H),_.flags&=-33);var te=kS(c);p1(c,te,H);break;case 3:case 4:var fe=_.stateNode.containerInfo,Ce=kS(c);jS(c,Ce,fe);break;default:throw Error(r(161))}}}catch(tt){Vn(c,c.return,tt)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function kD(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var u=c;kD(u),u.tag===5&&u.flags&1024&&$k(u.stateNode),c=c.sibling}}function Sl(c,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)FD(c,u.alternate,u),u=u.sibling}function qh(c){for(c=c.child;c!==null;){var u=c;switch(u.tag){case 0:case 11:case 14:case 15:wc(4,u,u.return),qh(u);break;case 1:Xa(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&LD(u,u.return,m),qh(u);break;case 26:case 27:case 5:Xa(u,u.return),qh(u);break;case 22:Xa(u,u.return),u.memoizedState===null&&qh(u);break;default:qh(u)}c=c.sibling}}function Cc(c,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var _=u.alternate,M=c,D=u,H=D.flags;switch(D.tag){case 0:case 11:case 15:Cc(M,D,m),qm(4,D);break;case 1:if(Cc(M,D,m),_=D,M=_.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(Ce){Vn(_,_.return,Ce)}if(_=D,M=_.updateQueue,M!==null){var te=_.stateNode;try{var fe=M.shared.hiddenCallbacks;if(fe!==null)for(M.shared.hiddenCallbacks=null,M=0;M<fe.length;M++)ee(fe[M],te)}catch(Ce){Vn(_,_.return,Ce)}}m&&H&64&&UD(D),of(D,D.return);break;case 26:case 27:case 5:Cc(M,D,m),m&&_===null&&H&4&&PD(D),of(D,D.return);break;case 12:Cc(M,D,m);break;case 13:Cc(M,D,m),m&&H&4&&VD(M,D);break;case 22:D.memoizedState===null&&Cc(M,D,m),of(D,D.return);break;default:Cc(M,D,m)}u=u.sibling}}function YS(c,u){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&Wm(m))}function qS(c,u){c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&Wm(c))}function Rc(c,u,m,_){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)jD(c,u,m,_),u=u.sibling}function jD(c,u,m,_){var M=u.flags;switch(u.tag){case 0:case 11:case 15:Rc(c,u,m,_),M&2048&&qm(9,u);break;case 3:Rc(c,u,m,_),M&2048&&(c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&Wm(c)));break;case 12:if(M&2048){Rc(c,u,m,_),c=u.stateNode;try{var D=u.memoizedProps,H=D.id,te=D.onPostCommit;typeof te=="function"&&te(H,u.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(fe){Vn(u,u.return,fe)}}else Rc(c,u,m,_);break;case 23:break;case 22:D=u.stateNode,u.memoizedState!==null?D._visibility&4?Rc(c,u,m,_):Zm(c,u):D._visibility&4?Rc(c,u,m,_):(D._visibility|=4,Zh(c,u,m,_,(u.subtreeFlags&10256)!==0)),M&2048&&YS(u.alternate,u);break;case 24:Rc(c,u,m,_),M&2048&&qS(u.alternate,u);break;default:Rc(c,u,m,_)}}function Zh(c,u,m,_,M){for(M=M&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var D=c,H=u,te=m,fe=_,Ce=H.flags;switch(H.tag){case 0:case 11:case 15:Zh(D,H,te,fe,M),qm(8,H);break;case 23:break;case 22:var tt=H.stateNode;H.memoizedState!==null?tt._visibility&4?Zh(D,H,te,fe,M):Zm(D,H):(tt._visibility|=4,Zh(D,H,te,fe,M)),M&&Ce&2048&&YS(H.alternate,H);break;case 24:Zh(D,H,te,fe,M),M&&Ce&2048&&qS(H.alternate,H);break;default:Zh(D,H,te,fe,M)}u=u.sibling}}function Zm(c,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=c,_=u,M=_.flags;switch(_.tag){case 22:Zm(m,_),M&2048&&YS(_.alternate,_);break;case 24:Zm(m,_),M&2048&&qS(_.alternate,_);break;default:Zm(m,_)}u=u.sibling}}function lf(c){if(c.subtreeFlags&md)for(c=c.child;c!==null;)XD(c),c=c.sibling}function XD(c){switch(c.tag){case 26:lf(c),c.flags&md&&(c.memoizedState!==null?jj(bo,c.memoizedState,c.memoizedProps):CO(c.type,c.memoizedProps));break;case 5:lf(c),c.flags&md&&CO(c.type,c.memoizedProps);break;case 3:case 4:if(Ls){var u=bo;bo=x3(c.stateNode.containerInfo),lf(c),bo=u}else lf(c);break;case 22:c.memoizedState===null&&(u=c.alternate,u!==null&&u.memoizedState!==null?(u=md,md=16777216,lf(c),md=u):lf(c));break;default:lf(c)}}function WD(c){var u=c.alternate;if(u!==null&&(c=u.child,c!==null)){u.child=null;do u=c.sibling,c.sibling=null,c=u;while(c!==null)}}function $m(c){var u=c.deletions;if(c.flags&16){if(u!==null)for(var m=0;m<u.length;m++){var _=u[m];br=_,qD(_,c)}WD(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)YD(c),c=c.sibling}function YD(c){switch(c.tag){case 0:case 11:case 15:$m(c),c.flags&2048&&wc(9,c,c.return);break;case 3:$m(c);break;case 12:$m(c);break;case 22:var u=c.stateNode;c.memoizedState!==null&&u._visibility&4&&(c.return===null||c.return.tag!==13)?(u._visibility&=-5,m1(c)):$m(c);break;default:$m(c)}}function m1(c){var u=c.deletions;if(c.flags&16){if(u!==null)for(var m=0;m<u.length;m++){var _=u[m];br=_,qD(_,c)}WD(c)}for(c=c.child;c!==null;){switch(u=c,u.tag){case 0:case 11:case 15:wc(8,u,u.return),m1(u);break;case 22:m=u.stateNode,m._visibility&4&&(m._visibility&=-5,m1(u));break;default:m1(u)}c=c.sibling}}function qD(c,u){for(;br!==null;){var m=br;switch(m.tag){case 0:case 11:case 15:wc(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var _=m.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Wm(m.memoizedState.cache)}if(_=m.child,_!==null)_.return=m,br=_;else e:for(m=c;br!==null;){_=br;var M=_.sibling,D=_.return;if(HD(_),_===m){br=null;break e}if(M!==null){M.return=D,br=M;break e}br=D}}}function ZS(c){var u=AO(c);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(r(364));return u}if(c=Jk(c),c===null)throw Error(r(362));return c.stateNode.current}function $S(c,u){var m=c.tag;switch(u.$$typeof){case L1:if(c.type===u.value)return!0;break;case P1:e:{for(u=u.value,c=[c,0],m=0;m<c.length;){var _=c[m++],M=_.tag,D=c[m++],H=u[D];if(M!==5&&M!==26&&M!==27||!Jm(_)){for(;H!=null&&$S(_,H);)D++,H=u[D];if(D===u.length){u=!0;break e}else for(_=_.child;_!==null;)c.push(_,D),_=_.sibling}}u=!1}return u;case I1:if((m===5||m===26||m===27)&&nj(c.stateNode,u.value))return!0;break;case B1:if((m===5||m===6||m===26||m===27)&&(c=tj(c),c!==null&&0<=c.indexOf(u.value)))return!0;break;case z1:if((m===5||m===26||m===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function KS(c){switch(c.$$typeof){case L1:return"<"+(s(c.value)||"Unknown")+">";case P1:return":has("+(KS(c)||"")+")";case I1:return'[role="'+c.value+'"]';case B1:return'"'+c.value+'"';case z1:return'[data-testname="'+c.value+'"]';default:throw Error(r(365))}}function ZD(c,u){var m=[];c=[c,0];for(var _=0;_<c.length;){var M=c[_++],D=M.tag,H=c[_++],te=u[H];if(D!==5&&D!==26&&D!==27||!Jm(M)){for(;te!=null&&$S(M,te);)H++,te=u[H];if(H===u.length)m.push(M);else for(M=M.child;M!==null;)c.push(M,H),M=M.sibling}}return m}function QS(c,u){if(!Qm)throw Error(r(363));c=ZS(c),c=ZD(c,u),u=[],c=Array.from(c);for(var m=0;m<c.length;){var _=c[m++],M=_.tag;if(M===5||M===26||M===27)Jm(_)||u.push(_.stateNode);else for(_=_.child;_!==null;)c.push(_),_=_.sibling}return u}function Ya(){if(Wn&2&&bn!==0)return bn&-bn;if(qt.T!==null){var c=ld;return c!==0?c:be()}return jk()}function $D(){Fs===0&&(Fs=!(bn&536870912)||Tn?U():536870912);var c=Bs.current;return c!==null&&(c.flags|=32),Fs}function ra(c,u,m){(c===ei&&ti===2||c.cancelPendingCommit!==null)&&($h(c,0),El(c,bn,Fs,!1)),I(c,m),(!(Wn&2)||c!==ei)&&(c===ei&&(!(Wn&2)&&(xf|=m),Ui===4&&El(c,bn,Fs,!1)),Qe(c))}function KD(c,u,m){if(Wn&6)throw Error(r(327));var _=!m&&(u&60)===0&&(u&c.expiredLanes)===0||R(c,u),M=_?xk(c,u):n3(c,u,!0),D=_;do{if(M===0){gd&&!_&&El(c,u,0,!1);break}else if(M===6)El(c,u,0,!Rl);else{if(m=c.current.alternate,D&&!yk(m)){M=n3(c,u,!1),D=!1;continue}if(M===2){if(D=u,c.errorRecoveryDisabledLanes&D)var H=0;else H=c.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){u=H;e:{var te=c;M=o0;var fe=Us&&te.current.memoizedState.isDehydrated;if(fe&&($h(te,H).flags|=256),H=n3(te,H,!1),H!==2){if(P3&&!fe){te.errorRecoveryDisabledLanes|=D,xf|=D,M=4;break e}D=Xo,Xo=M,D!==null&&JS(D)}M=H}if(D=!1,M!==2)continue}}if(M===1){$h(c,0),El(c,u,0,!0);break}e:{switch(_=c,M){case 0:case 1:throw Error(r(345));case 4:if((u&4194176)===u){El(_,u,Fs,!Rl);break e}break;case 2:Xo=null;break;case 3:case 5:break;default:throw Error(r(329))}if(_.finishedWork=m,_.finishedLanes=u,(u&62914560)===u&&(D=B3+300-_o(),10<D)){if(El(_,u,Fs,!Rl),w(_,0)!==0)break e;_.timeoutHandle=Vk(QD.bind(null,_,m,Xo,F1,z3,u,Fs,xf,vd,Rl,2,-0,0),D);break e}QD(_,m,Xo,F1,z3,u,Fs,xf,vd,Rl,0,-0,0)}}break}while(!0);Qe(c)}function JS(c){Xo===null?Xo=c:Xo.push.apply(Xo,c)}function QD(c,u,m,_,M,D,H,te,fe,Ce,tt,vt,_t){var Jt=u.subtreeFlags;if((Jt&8192||(Jt&16785408)===16785408)&&(qk(),XD(u),u=Zk(),u!==null)){c.cancelPendingCommit=u(oO.bind(null,c,m,_,M,H,te,fe,1,vt,_t)),El(c,D,H,!Ce);return}oO(c,m,_,M,H,te,fe,tt,vt,_t)}function yk(c){for(var u=c;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var _=0;_<m.length;_++){var M=m[_],D=M.getSnapshot;M=M.value;try{if(!Ka(D(),M))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function El(c,u,m,_){u&=~I3,u&=~xf,c.suspendedLanes|=u,c.pingedLanes&=~u,_&&(c.warmLanes|=u),_=c.expirationTimes;for(var M=u;0<M;){var D=31-Za(M),H=1<<D;_[D]=-1,M&=~H}m!==0&&j(c,m,u)}function JD(){return Wn&6?!0:(bt(0),!1)}function e3(){if(un!==null){if(ti===0)var c=un.return;else c=un,wl=yf=null,Ve(c),fd=null,r0=0,c=un;for(;c!==null;)ND(c.alternate,c),c=c.return;un=null}}function $h(c,u){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;m!==v3&&(c.timeoutHandle=v3,Gk(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),e3(),ei=c,un=m=Dc(c.current,null),bn=u,ti=0,Ja=null,Rl=!1,gd=R(c,u),P3=!1,vd=Fs=I3=xf=Bc=Ui=0,Xo=o0=null,z3=!1,u&8&&(u|=u&32);var _=c.entangledLanes;if(_!==0)for(c=c.entanglements,_&=u;0<_;){var M=31-Za(_),D=1<<M;u|=c[M],_&=~D}return Dl=u,Me(),m}function eO(c,u){on=null,qt.H=jo,u===i0?(u=Ye(),ti=3):u===D3?(u=Ye(),ti=4):ti=u===KO?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ja=u,un===null&&(Ui=1,c1(c,se(u,c.current)))}function tO(){var c=Bs.current;return c===null?!0:(bn&4194176)===bn?ko===null:(bn&62914560)===bn||bn&536870912?c===ko:!1}function nO(){var c=qt.H;return qt.H=jo,c===null?jo:c}function iO(){var c=qt.A;return qt.A=oX,c}function t3(){Ui=4,Rl||(bn&4194176)!==bn&&Bs.current!==null||(gd=!0),!(Bc&134217727)&&!(xf&134217727)||ei===null||El(ei,bn,Fs,!1)}function n3(c,u,m){var _=Wn;Wn|=2;var M=nO(),D=iO();(ei!==c||bn!==u)&&(F1=null,$h(c,u)),u=!1;var H=Ui;e:do try{if(ti!==0&&un!==null){var te=un,fe=Ja;switch(ti){case 8:e3(),H=6;break e;case 3:case 2:case 6:Bs.current===null&&(u=!0);var Ce=ti;if(ti=0,Ja=null,Kh(c,te,fe,Ce),m&&gd){H=0;break e}break;default:Ce=ti,ti=0,Ja=null,Kh(c,te,fe,Ce)}}_k(),H=Ui;break}catch(tt){eO(c,tt)}while(!0);return u&&c.shellSuspendCounter++,wl=yf=null,Wn=_,qt.H=M,qt.A=D,un===null&&(ei=null,bn=0,Me()),H}function _k(){for(;un!==null;)rO(un)}function xk(c,u){var m=Wn;Wn|=2;var _=nO(),M=iO();ei!==c||bn!==u?(F1=null,l0=_o()+500,$h(c,u)):gd=R(c,u);e:do try{if(ti!==0&&un!==null){u=un;var D=Ja;t:switch(ti){case 1:ti=0,Ja=null,Kh(c,u,D,1);break;case 2:if(rt(D)){ti=0,Ja=null,aO(u);break}u=function(){ti===2&&ei===c&&(ti=7),Qe(c)},D.then(u,u);break e;case 3:ti=7;break e;case 4:ti=5;break e;case 7:rt(D)?(ti=0,Ja=null,aO(u)):(ti=0,Ja=null,Kh(c,u,D,7));break;case 5:var H=null;switch(un.tag){case 26:H=un.memoizedState;case 5:case 27:var te=un,fe=te.type,Ce=te.pendingProps;if(H?jO(H):wO(fe,Ce)){ti=0,Ja=null;var tt=te.sibling;if(tt!==null)un=tt;else{var vt=te.return;vt!==null?(un=vt,g1(vt)):un=null}break t}}ti=0,Ja=null,Kh(c,u,D,5);break;case 6:ti=0,Ja=null,Kh(c,u,D,6);break;case 8:e3(),Ui=6;break e;default:throw Error(r(462))}}bk();break}catch(_t){eO(c,_t)}while(!0);return wl=yf=null,qt.H=_,qt.A=M,Wn=m,un!==null?0:(ei=null,bn=0,Me(),Ui)}function bk(){for(;un!==null&&!$j();)rO(un)}function rO(c){var u=TD(c.alternate,c,Dl);c.memoizedProps=c.pendingProps,u===null?g1(c):un=u}function aO(c){var u=c,m=u.alternate;switch(u.tag){case 15:case 0:u=_D(m,u,u.pendingProps,u.type,void 0,bn);break;case 11:u=_D(m,u,u.pendingProps,u.type.render,u.ref,bn);break;case 5:Ve(u);default:ND(m,u),u=un=fO(u,Dl),u=TD(m,u,Dl)}c.memoizedProps=c.pendingProps,u===null?g1(c):un=u}function Kh(c,u,m,_){wl=yf=null,Ve(u),fd=null,r0=0;var M=u.return;try{if(hk(c,M,u,m,bn)){Ui=1,c1(c,se(m,c.current)),un=null;return}}catch(D){if(M!==null)throw un=M,D;Ui=1,c1(c,se(m,c.current)),un=null;return}u.flags&32768?(Tn||_===1?c=!0:gd||bn&536870912?c=!1:(Rl=c=!0,(_===2||_===3||_===6)&&(_=Bs.current,_!==null&&_.tag===13&&(_.flags|=16384))),sO(u,c)):g1(u)}function g1(c){var u=c;do{if(u.flags&32768){sO(u,Rl);return}c=u.return;var m=pk(u.alternate,u,Dl);if(m!==null){un=m;return}if(u=u.sibling,u!==null){un=u;return}un=u=c}while(u!==null);Ui===0&&(Ui=5)}function sO(c,u){do{var m=mk(c.alternate,c);if(m!==null){m.flags&=32767,un=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(c=c.sibling,c!==null)){un=c;return}un=c=m}while(c!==null);Ui=6,un=null}function oO(c,u,m,_,M,D,H,te,fe,Ce){var tt=qt.T,vt=ff();try{Ta(2),qt.T=null,Sk(c,u,m,_,vt,M,D,H,te,fe,Ce)}finally{qt.T=tt,Ta(vt)}}function Sk(c,u,m,_,M,D,H,te){do cf();while(bf!==null);if(Wn&6)throw Error(r(327));var fe=c.finishedWork;if(_=c.finishedLanes,fe===null)return null;if(c.finishedWork=null,c.finishedLanes=0,fe===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var Ce=fe.lanes|fe.childLanes;if(Ce|=T3,X(c,_,Ce,D,H,te),c===ei&&(un=ei=null,bn=0),!(fe.subtreeFlags&10256)&&!(fe.flags&10256)||H1||(H1=!0,F3=Ce,H3=m,Ak(E3,function(){return cf(),null})),m=(fe.flags&15990)!==0,fe.subtreeFlags&15990||m?(m=qt.T,qt.T=null,D=ff(),Ta(2),H=Wn,Wn|=4,gk(c,fe),GD(fe,c),Fk(c.containerInfo),c.current=fe,FD(c,fe.alternate,fe),Kj(),Wn=H,Ta(D),qt.T=m):c.current=fe,H1?(H1=!1,bf=c,c0=_):lO(c,Ce),Ce=c.pendingLanes,Ce===0&&(Fc=null),z(fe.stateNode),Qe(c),u!==null)for(M=c.onRecoverableError,fe=0;fe<u.length;fe++)Ce=u[fe],M(Ce.value,{componentStack:Ce.stack});return c0&3&&cf(),Ce=c.pendingLanes,_&4194218&&Ce&42?c===V3?u0++:(u0=0,V3=c):u0=0,bt(0),null}function lO(c,u){(c.pooledCacheLanes&=u)===0&&(u=c.pooledCache,u!=null&&(c.pooledCache=null,Wm(u)))}function cf(){if(bf!==null){var c=bf,u=F3;F3=0;var m=Z(c0),_=32>m?32:m;m=qt.T;var M=ff();try{if(Ta(_),qt.T=null,bf===null)var D=!1;else{_=H3,H3=null;var H=bf,te=c0;if(bf=null,c0=0,Wn&6)throw Error(r(331));var fe=Wn;if(Wn|=4,YD(H.current),jD(H,H.current,te,_),Wn=fe,bt(0,!1),$a&&typeof $a.onPostCommitFiberRoot=="function")try{$a.onPostCommitFiberRoot(e0,H)}catch{}D=!0}return D}finally{Ta(M),qt.T=m,lO(c,u)}}return!1}function cO(c,u,m){u=se(m,u),u=wS(c.stateNode,u,2),c=Pe(c,u,2),c!==null&&(I(c,2),Qe(c))}function Vn(c,u,m){if(c.tag===3)cO(c,c,m);else for(;u!==null;){if(u.tag===3){cO(u,c,m);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Fc===null||!Fc.has(_))){c=se(m,c),m=hD(2),_=Pe(u,m,2),_!==null&&(dD(m,_,u,c),I(_,2),Qe(_));break}}u=u.return}}function i3(c,u,m){var _=c.pingCache;if(_===null){_=c.pingCache=new lX;var M=new Set;_.set(u,M)}else M=_.get(u),M===void 0&&(M=new Set,_.set(u,M));M.has(m)||(P3=!0,M.add(m),c=Ek.bind(null,c,u,m),u.then(c,c))}function Ek(c,u,m){var _=c.pingCache;_!==null&&_.delete(u),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,ei===c&&(bn&m)===m&&(Ui===4||Ui===3&&(bn&62914560)===bn&&300>_o()-B3?!(Wn&2)&&$h(c,0):I3|=m,vd===bn&&(vd=0)),Qe(c)}function uO(c,u){u===0&&(u=A()),c=Ge(c,u),c!==null&&(I(c,u),Qe(c))}function Mk(c){var u=c.memoizedState,m=0;u!==null&&(m=u.retryLane),uO(c,m)}function Tk(c,u){var m=0;switch(c.tag){case 13:var _=c.stateNode,M=c.memoizedState;M!==null&&(m=M.retryLane);break;case 19:_=c.stateNode;break;case 22:_=c.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(u),uO(c,m)}function Ak(c,u){return E1(c,u)}function wk(c,u,m,_){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function r3(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Dc(c,u){var m=c.alternate;return m===null?(m=n(c.tag,u,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=u,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&31457280,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,u=c.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function fO(c,u){c.flags&=31457282;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=u,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,u=m.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),c}function v1(c,u,m,_,M,D){var H=0;if(_=c,typeof c=="function")r3(c)&&(H=1);else if(typeof c=="string")H=Ls&&Xr?BO(c,m,Ur.current)?26:WO(c)?27:5:Ls?BO(c,m,Ur.current)?26:5:Xr&&WO(c)?27:5;else e:switch(c){case Jh:return uf(m.children,M,D,u);case yO:H=8,M|=24;break;case c3:return c=n(12,m,u,M|2),c.elementType=c3,c.lanes=D,c;case f3:return c=n(13,m,u,M),c.elementType=f3,c.lanes=D,c;case h3:return c=n(19,m,u,M),c.elementType=h3,c.lanes=D,c;case xO:return hO(m,M,D,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Ok:case Oc:H=10;break e;case _O:H=9;break e;case u3:H=11;break e;case d3:H=14;break e;case Nc:H=16,_=null;break e}H=29,m=Error(r(130,c===null?"null":typeof c,"")),_=null}return u=n(H,m,u,M),u.elementType=c,u.type=_,u.lanes=D,u}function uf(c,u,m,_){return c=n(7,c,_,u),c.lanes=m,c}function hO(c,u,m,_){c=n(22,c,_,u),c.elementType=xO,c.lanes=m;var M={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var D=M._current;if(D===null)throw Error(r(456));if(!(M._pendingVisibility&2)){var H=Ge(D,2);H!==null&&(M._pendingVisibility|=2,ra(H,D,2))}},attach:function(){var D=M._current;if(D===null)throw Error(r(456));if(M._pendingVisibility&2){var H=Ge(D,2);H!==null&&(M._pendingVisibility&=-3,ra(H,D,2))}}};return c.stateNode=M,c}function a3(c,u,m){return c=n(6,c,null,u),c.lanes=m,c}function s3(c,u,m){return u=n(4,c.children!==null?c.children:[],c.key,u),u.lanes=m,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function Ck(c,u,m,_,M,D,H,te){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=v3,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C(0),this.hiddenUpdates=C(null),this.identifierPrefix=_,this.onUncaughtError=M,this.onCaughtError=D,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function dO(c,u,m,_,M,D,H,te,fe,Ce,tt,vt){return c=new Ck(c,u,m,H,te,fe,Ce,vt),u=1,D===!0&&(u|=24),D=n(3,null,null,u),c.current=D,D.stateNode=c,u=BS(),u.refCount++,c.pooledCache=u,u.refCount++,D.memoizedState={element:_,isDehydrated:m,cache:u},pt(D),c}function pO(c){return c?(c=nd,c):nd}function mO(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=g(u),c=c!==null?y(c):null,c===null?null:Km(c.stateNode)}function gO(c,u,m,_,M,D){M=pO(M),_.context===null?_.context=M:_.pendingContext=M,_=Re(u),_.payload={element:m},D=D===void 0?null:D,D!==null&&(_.callback=D),m=Pe(c,_,u),m!==null&&(ra(m,c,u),ot(m,c,u))}function vO(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<u?m:u}}function o3(c,u){vO(c,u),(c=c.alternate)&&vO(c,u)}var cn={},Rk=O,qa=dA,l3=Object.assign,Dk=Symbol.for("react.element"),y1=Symbol.for("react.transitional.element"),Qh=Symbol.for("react.portal"),Jh=Symbol.for("react.fragment"),yO=Symbol.for("react.strict_mode"),c3=Symbol.for("react.profiler"),Ok=Symbol.for("react.provider"),_O=Symbol.for("react.consumer"),Oc=Symbol.for("react.context"),u3=Symbol.for("react.forward_ref"),f3=Symbol.for("react.suspense"),h3=Symbol.for("react.suspense_list"),d3=Symbol.for("react.memo"),Nc=Symbol.for("react.lazy"),xO=Symbol.for("react.offscreen"),Nk=Symbol.for("react.memo_cache_sentinel"),bO=Symbol.iterator,Uk=Symbol.for("react.client.reference"),qt=Rk.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,p3,SO,m3=!1,_1=Array.isArray,Lk=e.rendererVersion,Pk=e.rendererPackageName,EO=e.extraDevToolsConfig,Km=e.getPublicInstance,Ik=e.getRootHostContext,zk=e.getChildHostContext,Bk=e.prepareForCommit,Fk=e.resetAfterCommit,Hk=e.createInstance,g3=e.appendInitialChild,MO=e.finalizeInitialChildren,x1=e.shouldSetTextContent,TO=e.createTextInstance,Vk=e.scheduleTimeout,Gk=e.cancelTimeout,v3=e.noTimeout,Ml=e.isPrimaryRenderer;e.warnsIfNotActing;var jr=e.supportsMutation,Uc=e.supportsPersistence,Us=e.supportsHydration,AO=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var kk=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ta=e.setCurrentUpdatePriority,ff=e.getCurrentUpdatePriority,jk=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Xk=e.shouldAttemptEagerTransition,Wk=e.detachDeletedInstance;e.requestPostPaintCallback;var Yk=e.maySuspendCommit,wO=e.preloadInstance,qk=e.startSuspendingCommit,CO=e.suspendInstance,Zk=e.waitForCommitToBeReady,ed=e.NotPendingTransition,hf=e.HostTransitionContext,$k=e.resetFormInstance;e.bindToConsole;var Kk=e.supportsMicrotasks,Qk=e.scheduleMicrotask,Qm=e.supportsTestSelectors,Jk=e.findFiberRoot,ej=e.getBoundingRect,tj=e.getTextContent,Jm=e.isHiddenSubtree,nj=e.matchAccessibilityRole,ij=e.setFocusIfFocusable,rj=e.setupIntersectionObserver,aj=e.appendChild,sj=e.appendChildToContainer,oj=e.commitTextUpdate,lj=e.commitMount,cj=e.commitUpdate,uj=e.insertBefore,fj=e.insertInContainerBefore,hj=e.removeChild,dj=e.removeChildFromContainer,RO=e.resetTextContent,pj=e.hideInstance,mj=e.hideTextInstance,gj=e.unhideInstance,vj=e.unhideTextInstance,yj=e.clearContainer,_j=e.cloneInstance,DO=e.createContainerChildSet,OO=e.appendChildToContainerChildSet,xj=e.finalizeContainerChildren,NO=e.replaceContainerChildren,UO=e.cloneHiddenInstance,LO=e.cloneHiddenTextInstance,y3=e.isSuspenseInstancePending,_3=e.isSuspenseInstanceFallback,bj=e.getSuspenseInstanceFallbackErrorDetails,Sj=e.registerSuspenseInstanceRetry,Ej=e.canHydrateFormStateMarker,Mj=e.isFormStateMarkerMatching,PO=e.getNextHydratableSibling,IO=e.getFirstHydratableChild,Tj=e.getFirstHydratableChildWithinContainer,Aj=e.getFirstHydratableChildWithinSuspenseInstance,wj=e.canHydrateInstance,Cj=e.canHydrateTextInstance,Rj=e.canHydrateSuspenseInstance,Dj=e.hydrateInstance,Oj=e.hydrateTextInstance,Nj=e.hydrateSuspenseInstance,Uj=e.getNextHydratableInstanceAfterSuspenseInstance,Lj=e.commitHydratedContainer,Pj=e.commitHydratedSuspenseInstance,Ij=e.clearSuspenseBoundary,zj=e.clearSuspenseBoundaryFromContainer,zO=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Bj=e.validateHydratableInstance,Fj=e.validateHydratableTextInstance,Ls=e.supportsResources,BO=e.isHostHoistableType,x3=e.getHoistableRoot,FO=e.getResource,HO=e.acquireResource,VO=e.releaseResource,Hj=e.hydrateHoistable,GO=e.mountHoistable,kO=e.unmountHoistable,Vj=e.createHoistableInstance,Gj=e.prepareToCommitHoistables,kj=e.mayResourceSuspendCommit,jO=e.preloadResource,jj=e.suspendResource,Xr=e.supportsSingletons,XO=e.resolveSingletonInstance,Xj=e.clearSingleton,Wj=e.acquireSingletonInstance,Yj=e.releaseSingletonInstance,WO=e.isHostSingletonType,b3=[],td=-1,nd={},Za=Math.clz32?Math.clz32:E,qj=Math.log,Zj=Math.LN2,b1=128,S1=4194304,E1=qa.unstable_scheduleCallback,S3=qa.unstable_cancelCallback,$j=qa.unstable_shouldYield,Kj=qa.unstable_requestPaint,_o=qa.unstable_now,YO=qa.unstable_ImmediatePriority,Qj=qa.unstable_UserBlockingPriority,E3=qa.unstable_NormalPriority,Jj=qa.unstable_IdlePriority,eX=qa.log,tX=qa.unstable_setDisableYieldValue,e0=null,$a=null,Ka=typeof Object.is=="function"?Object.is:q,qO=new WeakMap,id=[],rd=0,M1=null,T1=0,Ps=[],Is=0,df=null,Tl=1,Al="",Ur=b(null),t0=b(null),Lc=b(null),A1=b(null),aa=null,Wr=null,Tn=!1,xo=null,Go=!1,M3=Error(r(519)),zs=[],ad=0,T3=0,w1=null,sd=null,A3=!1,C1=!1,w3=!1,od=0,n0=null,C3=0,ld=0,cd=null,Pc=!1,R3=!1,nX=Object.prototype.hasOwnProperty,i0=Error(r(460)),D3=Error(r(474)),R1={then:function(){}},ud=null,fd=null,r0=0,pf=fr(!0),ZO=fr(!1),hd=b(null),D1=b(0),Bs=b(null),ko=null,dr=b(0),Ic=0,on=null,Xn=null,Ji=null,O1=!1,dd=!1,mf=!1,N1=0,a0=0,pd=null,iX=0,O3=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},jo={readContext:kr,use:et,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn};jo.useCacheRefresh=Jn,jo.useMemoCache=Jn,jo.useHostTransitionStatus=Jn,jo.useFormState=Jn,jo.useActionState=Jn,jo.useOptimistic=Jn;var gf={readContext:kr,use:et,useCallback:function(c,u){return ke().memoizedState=[c,u===void 0?null:u],c},useContext:kr,useEffect:Yh,useImperativeHandle:function(c,u,m){m=m!=null?m.concat([c]):null,Qi(4194308,4,KR.bind(null,u,c),m)},useLayoutEffect:function(c,u){return Qi(4194308,4,c,u)},useInsertionEffect:function(c,u){Qi(4,2,c,u)},useMemo:function(c,u){var m=ke();u=u===void 0?null:u;var _=c();if(mf){G(!0);try{c()}finally{G(!1)}}return m.memoizedState=[_,u],_},useReducer:function(c,u,m){var _=ke();if(m!==void 0){var M=m(u);if(mf){G(!0);try{m(u)}finally{G(!1)}}}else M=u;return _.memoizedState=_.baseState=M,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:M},_.queue=c,c=c.dispatch=fk.bind(null,on,c),[_.memoizedState,c]},useRef:function(c){var u=ke();return c={current:c},u.memoizedState=c},useState:function(c){c=st(c);var u=c.queue,m=sD.bind(null,on,u);return u.dispatch=m,[c.memoizedState,m]},useDebugValue:SS,useDeferredValue:function(c,u){var m=ke();return ES(m,c,u)},useTransition:function(){var c=st(!1);return c=nD.bind(null,on,c.queue,!0,!1),ke().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,u,m){var _=on,M=ke();if(Tn){if(m===void 0)throw Error(r(407));m=m()}else{if(m=u(),ei===null)throw Error(r(349));bn&60||je(_,u,m)}M.memoizedState=m;var D={value:m,getSnapshot:u};return M.queue=D,Yh(at.bind(null,_,D,c),[c]),_.flags|=2048,ji(9,Xe.bind(null,_,D,m,u),{destroy:void 0},null),m},useId:function(){var c=ke(),u=ei.identifierPrefix;if(Tn){var m=Al,_=Tl;m=(_&~(1<<32-Za(_)-1)).toString(32)+m,u=":"+u+"R"+m,m=N1++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=iX++,u=":"+u+"r"+m.toString(32)+":";return c.memoizedState=u},useCacheRefresh:function(){return ke().memoizedState=uk.bind(null,on)}};gf.useMemoCache=F,gf.useHostTransitionStatus=MS,gf.useFormState=Fn,gf.useActionState=Fn,gf.useOptimistic=function(c){var u=ke();u.memoizedState=u.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=TS.bind(null,on,!0,m),m.dispatch=u,[c,u]};var zc={readContext:kr,use:et,useCallback:JR,useContext:kr,useEffect:vo,useImperativeHandle:QR,useInsertionEffect:ZR,useLayoutEffect:$R,useMemo:eD,useReducer:ae,useRef:ia,useState:function(){return ae(K)},useDebugValue:SS,useDeferredValue:function(c,u){var m=Be();return tD(m,Xn.memoizedState,c,u)},useTransition:function(){var c=ae(K)[0],u=Be().memoizedState;return[typeof c=="boolean"?c:nt(c),u]},useSyncExternalStore:ze,useId:rD};zc.useCacheRefresh=aD,zc.useMemoCache=F,zc.useHostTransitionStatus=MS,zc.useFormState=Or,zc.useActionState=Or,zc.useOptimistic=function(c,u){var m=Be();return Dt(m,Xn,c,u)};var vf={readContext:kr,use:et,useCallback:JR,useContext:kr,useEffect:vo,useImperativeHandle:QR,useInsertionEffect:ZR,useLayoutEffect:$R,useMemo:eD,useReducer:re,useRef:ia,useState:function(){return re(K)},useDebugValue:SS,useDeferredValue:function(c,u){var m=Be();return Xn===null?ES(m,c,u):tD(m,Xn.memoizedState,c,u)},useTransition:function(){var c=re(K)[0],u=Be().memoizedState;return[typeof c=="boolean"?c:nt(c),u]},useSyncExternalStore:ze,useId:rD};vf.useCacheRefresh=aD,vf.useMemoCache=F,vf.useHostTransitionStatus=MS,vf.useFormState=Hn,vf.useActionState=Hn,vf.useOptimistic=function(c,u){var m=Be();return Xn!==null?Dt(m,Xn,c,u):(m.baseState=c,[c,m.queue.dispatch])};var N3={isMounted:function(c){return(c=c._reactInternals)?d(c)===c:!1},enqueueSetState:function(c,u,m){c=c._reactInternals;var _=Ya(),M=Re(_);M.payload=u,m!=null&&(M.callback=m),u=Pe(c,M,_),u!==null&&(ra(u,c,_),ot(u,c,_))},enqueueReplaceState:function(c,u,m){c=c._reactInternals;var _=Ya(),M=Re(_);M.tag=1,M.payload=u,m!=null&&(M.callback=m),u=Pe(c,M,_),u!==null&&(ra(u,c,_),ot(u,c,_))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var m=Ya(),_=Re(m);_.tag=2,u!=null&&(_.callback=u),u=Pe(c,_,m),u!==null&&(ra(u,c,m),ot(u,c,m))}},$O=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},KO=Error(r(461)),xr=!1,U3={dehydrated:null,treeContext:null,retryLane:0},U1=b(null),yf=null,wl=null,rX=typeof AbortController<"u"?AbortController:function(){var c=[],u=this.signal={aborted:!1,addEventListener:function(m,_){c.push(_)}};this.abort=function(){u.aborted=!0,c.forEach(function(m){return m()})}},aX=qa.unstable_scheduleCallback,sX=qa.unstable_NormalPriority,Oi={$$typeof:Oc,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},QO=qt.S;qt.S=function(c,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&ye(c,u),QO!==null&&QO(c,u)};var _f=b(null),Cl=!1,Ni=!1,L3=!1,JO=typeof WeakSet=="function"?WeakSet:Set,br=null,e5=!1,er=null,Qa=!1,bo=null,md=8192,oX={getCacheForType:function(c){var u=kr(Oi),m=u.data.get(c);return m===void 0&&(m=c(),u.data.set(c,m)),m}},L1=0,P1=1,I1=2,z1=3,B1=4;if(typeof Symbol=="function"&&Symbol.for){var s0=Symbol.for;L1=s0("selector.component"),P1=s0("selector.has_pseudo_class"),I1=s0("selector.role"),z1=s0("selector.test_id"),B1=s0("selector.text")}var lX=typeof WeakMap=="function"?WeakMap:Map,Wn=0,ei=null,un=null,bn=0,ti=0,Ja=null,Rl=!1,gd=!1,P3=!1,Dl=0,Ui=0,Bc=0,xf=0,I3=0,Fs=0,vd=0,o0=null,Xo=null,z3=!1,B3=0,l0=1/0,F1=null,Fc=null,H1=!1,bf=null,c0=0,F3=0,H3=null,u0=0,V3=null;return cn.attemptContinuousHydration=function(c){if(c.tag===13){var u=Ge(c,67108864);u!==null&&ra(u,c,67108864),o3(c,67108864)}},cn.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var u=Ya(),m=Ge(c,u);m!==null&&ra(m,c,u),o3(c,u)}},cn.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var u=T(c.pendingLanes);if(u!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;u;){var m=1<<31-Za(u);c.entanglements[1]|=m,u&=~m}Qe(c),!(Wn&6)&&(l0=_o()+500,bt(0))}}break;case 13:u=Ge(c,2),u!==null&&ra(u,c,2),JD(),o3(c,2)}},cn.batchedUpdates=function(c,u){return c(u)},cn.createComponentSelector=function(c){return{$$typeof:L1,value:c}},cn.createContainer=function(c,u,m,_,M,D,H,te,fe,Ce){return dO(c,u,!1,null,m,_,D,H,te,fe,Ce,null)},cn.createHasPseudoClassSelector=function(c){return{$$typeof:P1,value:c}},cn.createHydrationContainer=function(c,u,m,_,M,D,H,te,fe,Ce,tt,vt,_t){return c=dO(m,_,!0,c,M,D,te,fe,Ce,tt,vt,_t),c.context=pO(null),m=c.current,_=Ya(),M=Re(_),M.callback=u??null,Pe(m,M,_),c.current.lanes=_,I(c,_),Qe(c),c},cn.createPortal=function(c,u,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qh,key:_==null?null:""+_,children:c,containerInfo:u,implementation:m}},cn.createRoleSelector=function(c){return{$$typeof:I1,value:c}},cn.createTestNameSelector=function(c){return{$$typeof:z1,value:c}},cn.createTextSelector=function(c){return{$$typeof:B1,value:c}},cn.defaultOnCaughtError=function(c){console.error(c)},cn.defaultOnRecoverableError=function(c){$O(c)},cn.defaultOnUncaughtError=function(c){$O(c)},cn.deferredUpdates=function(c){var u=qt.T,m=ff();try{return Ta(32),qt.T=null,c()}finally{Ta(m),qt.T=u}},cn.discreteUpdates=function(c,u,m,_,M){var D=qt.T,H=ff();try{return Ta(2),qt.T=null,c(u,m,_,M)}finally{Ta(H),qt.T=D,Wn===0&&(l0=_o()+500)}},cn.findAllNodes=QS,cn.findBoundingRects=function(c,u){if(!Qm)throw Error(r(363));u=QS(c,u),c=[];for(var m=0;m<u.length;m++)c.push(ej(u[m]));for(u=c.length-1;0<u;u--){m=c[u];for(var _=m.x,M=_+m.width,D=m.y,H=D+m.height,te=u-1;0<=te;te--)if(u!==te){var fe=c[te],Ce=fe.x,tt=Ce+fe.width,vt=fe.y,_t=vt+fe.height;if(_>=Ce&&D>=vt&&M<=tt&&H<=_t){c.splice(u,1);break}else if(_!==Ce||m.width!==fe.width||_t<D||vt>H){if(!(D!==vt||m.height!==fe.height||tt<_||Ce>M)){Ce>_&&(fe.width+=Ce-_,fe.x=_),tt<M&&(fe.width=M-Ce),c.splice(u,1);break}}else{vt>D&&(fe.height+=vt-D,fe.y=D),_t<H&&(fe.height=H-vt),c.splice(u,1);break}}}return c},cn.findHostInstance=mO,cn.findHostInstanceWithNoPortals=function(c){return c=g(c),c=c!==null?S(c):null,c===null?null:Km(c.stateNode)},cn.findHostInstanceWithWarning=function(c){return mO(c)},cn.flushPassiveEffects=cf,cn.flushSyncFromReconciler=function(c){var u=Wn;Wn|=1;var m=qt.T,_=ff();try{if(Ta(2),qt.T=null,c)return c()}finally{Ta(_),qt.T=m,Wn=u,!(Wn&6)&&bt(0)}},cn.flushSyncWork=JD,cn.focusWithin=function(c,u){if(!Qm)throw Error(r(363));for(c=ZS(c),u=ZD(c,u),u=Array.from(u),c=0;c<u.length;){var m=u[c++],_=m.tag;if(!Jm(m)){if((_===5||_===26||_===27)&&ij(m.stateNode))return!0;for(m=m.child;m!==null;)u.push(m),m=m.sibling}}return!1},cn.getFindAllNodesFailureDescription=function(c,u){if(!Qm)throw Error(r(363));var m=0,_=[];c=[ZS(c),0];for(var M=0;M<c.length;){var D=c[M++],H=D.tag,te=c[M++],fe=u[te];if((H!==5&&H!==26&&H!==27||!Jm(D))&&($S(D,fe)&&(_.push(KS(fe)),te++,te>m&&(m=te)),te<u.length))for(D=D.child;D!==null;)c.push(D,te),D=D.sibling}if(m<u.length){for(c=[];m<u.length;m++)c.push(KS(u[m]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},cn.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return Km(c.child.stateNode);default:return c.child.stateNode}},cn.injectIntoDevTools=function(){var c={bundleType:0,version:Lk,rendererPackageName:Pk,currentDispatcherRef:qt,findFiberByHostInstance:AO,reconcilerVersion:"19.0.0"};if(EO!==null&&(c.rendererConfig=EO),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)c=!0;else{try{e0=u.inject(c),$a=u}catch{}c=!!u.checkDCE}}return c},cn.isAlreadyRendering=function(){return!1},cn.observeVisibleRects=function(c,u,m,_){if(!Qm)throw Error(r(363));c=QS(c,u);var M=rj(c,m,_).disconnect;return{disconnect:function(){M()}}},cn.shouldError=function(){return null},cn.shouldSuspend=function(){return!1},cn.startHostTransition=function(c,u,m,_){if(c.tag!==5)throw Error(r(476));var M=iD(c).queue;nD(c,M,u,ed,m===null?i:function(){var D=iD(c).next.queue;return km(c,D,{},Ya()),m(_)})},cn.updateContainer=function(c,u,m,_){var M=u.current,D=Ya();return gO(M,D,c,u,m,_),D},cn.updateContainerSync=function(c,u,m,_){return u.tag===0&&cf(),gO(u.current,2,c,u,m,_),2},cn},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})})(vF);var pie=vF.exports;gF.exports=pie;var mie=gF.exports;const gie=Nh(mie);function fC(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=fC(i,e,n);if(r)return r;i=e?null:i.sibling}}function xF(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const hC=xF(O.createContext(null));let bF=class extends O.Component{render(){return O.createElement(hC.Provider,{value:this._reactInternals},this.props.children)}};function SF(){const t=O.useContext(hC);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=O.useId();return O.useMemo(()=>{for(const n of[t,t==null?void 0:t.alternate]){if(!n)continue;const i=fC(n,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}const vie=Symbol.for("react.context"),yie=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===vie;function _ie(){const t=SF(),[e]=O.useState(()=>new Map);e.clear();let n=t;for(;n;){const i=n.type;yie(i)&&i!==hC&&!e.has(i)&&e.set(i,O.use(xF(i))),n=n.return}return e}function xie(){const t=_ie();return O.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>O.createElement(e,null,O.createElement(n.Provider,{...i,value:t.get(n)})),e=>O.createElement(bF,{...e})),[t])}function EF(t){let e=t.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const MF=t=>t&&t.isOrthographicCamera,bie=t=>t&&t.hasOwnProperty("current"),Sie=t=>t!=null&&(typeof t=="string"||typeof t=="number"||t.isColor),Yv=((t,e)=>typeof window<"u"&&(((t=window.document)==null?void 0:t.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?O.useLayoutEffect:O.useEffect;function dC(t){const e=O.useRef(t);return Yv(()=>void(e.current=t),[t]),e}function Eie(){const t=SF(),e=xie();return O.useMemo(()=>({children:n})=>{const r=!!fC(t,!0,a=>a.type===O.StrictMode)?O.StrictMode:O.Fragment;return $.jsx(r,{children:$.jsx(e,{children:n})})},[t,e])}function Mie({set:t}){return Yv(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}const Tie=(t=>(t=class extends O.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}},t.getDerivedStateFromError=()=>({error:!0}),t))();function TF(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}function Vd(t){var e;return(e=t.__r3f)==null?void 0:e.root.getState()}const xi={obj:t=>t===Object(t)&&!xi.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,nul:t=>t===null,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(xi.str(t)||xi.num(t)||xi.boo(t))return t===e;const a=xi.obj(t);if(a&&i==="reference")return t===e;const s=xi.arr(t);if(s&&n==="reference")return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(a&&n==="shallow"&&i==="shallow"){for(o in r?e:t)if(!xi.equ(t[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:t)if(t[o]!==e[o])return!1;if(xi.und(o)){if(s&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function Aie(t){const e={nodes:{},materials:{},meshes:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material),n.isMesh&&!e.meshes[n.name]&&(e.meshes[n.name]=n)}),e}function wie(t){t.type!=="Scene"&&(t.dispose==null||t.dispose());for(const e in t){const n=t[e];(n==null?void 0:n.type)!=="Scene"&&(n==null||n.dispose==null||n.dispose())}}const AF=["children","key","ref"];function Cie(t){const e={};for(const n in t)AF.includes(n)||(e[n]=t[n]);return e}function rb(t,e,n,i){const r=t;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:n,parent:null,children:[],props:Cie(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function lv(t,e){if(!e.includes("-"))return{root:t,key:e,target:t[e]};if(e in t)return{root:t,key:e,target:t[e]};let n=t;const i=e.split("-");for(const r of i){if(typeof n!="object"||n===null){if(n!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:n,key:a,target:void 0}}return{root:t,key:e,target:void 0}}e=r,t=n,n=n[e]}return{root:t,key:e,target:n}}const a6=/-\d+$/;function ab(t,e){if(xi.str(e.props.attach)){if(a6.test(e.props.attach)){const r=e.props.attach.replace(a6,""),{root:a,key:s}=lv(t.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:n,key:i}=lv(t.object,e.props.attach);e.previousAttach=n[i],n[i]=e.object}else xi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(t.object,e.object))}function sb(t,e){if(xi.str(e.props.attach)){const{root:n,key:i}=lv(t.object,e.props.attach),r=e.previousAttach;r===void 0?delete n[i]:n[i]=r}else e.previousAttach==null||e.previousAttach(t.object,e.object);delete e.previousAttach}const pA=[...AF,"args","dispose","attach","object","onUpdate","dispose"],s6=new Map;function Rie(t){let e=s6.get(t.constructor);try{e||(e=new t.constructor,s6.set(t.constructor,e))}catch{}return e}function Die(t,e){const n={};for(const i in e)if(!pA.includes(i)&&!xi.equ(e[i],t.props[i])){n[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(n[r]=e[r])}for(const i in t.props){if(pA.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=lv(t.object,i);if(r.constructor&&r.constructor.length===0){const s=Rie(r);xi.und(s)||(n[a]=s[a])}else n[a]=0}return n}const Oie=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Nie=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function el(t,e){var n;const i=t.__r3f,r=i&&EF(i).getState(),a=i==null?void 0:i.eventCount;for(const o in e){let l=e[o];if(pA.includes(o))continue;if(i&&Nie.test(o)){typeof l=="function"?i.handlers[o]=l:delete i.handlers[o],i.eventCount=Object.keys(i.handlers).length;continue}if(l===void 0)continue;let{root:f,key:h,target:d}=lv(t,o);if(d===void 0&&(typeof f!="object"||f===null))throw Error(`R3F: Cannot set "${o}". Ensure it is an object before setting "${h}".`);if(d instanceof qp&&l instanceof qp)d.mask=l.mask;else if(d instanceof lt&&Sie(l))d.set(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof d.copy=="function"&&l!=null&&l.constructor&&d.constructor===l.constructor)d.copy(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&Array.isArray(l))typeof d.fromArray=="function"?d.fromArray(l):d.set(...l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof l=="number")typeof d.setScalar=="function"?d.setScalar(l):d.set(l);else{var s;f[h]=l,r&&!r.linear&&Oie.includes(h)&&(s=f[h])!=null&&s.isTexture&&f[h].format===Zi&&f[h].type===fi&&(f[h].colorSpace=En)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(n=i.object)!=null&&n.isObject3D&&a!==i.eventCount){const o=i.object,l=r.internal.interaction.indexOf(o);l>-1&&r.internal.interaction.splice(l,1),i.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Am(i),t}function Am(t){var e;if(!t.parent)return;t.props.onUpdate==null||t.props.onUpdate(t.object);const n=(e=t.root)==null||e.getState==null?void 0:e.getState();n&&n.internal.frames===0&&n.invalidate()}function wF(t,e){t.manual||(MF(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix())}const da=t=>t==null?void 0:t.isObject3D;function Yy(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function CF(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function Uie(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{CF(n.capturedMap,e,i,r)})}function Lie(t){function e(l){const{internal:f}=t.getState(),h=l.offsetX-f.initialClick[0],d=l.offsetY-f.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function n(l){return l.filter(f=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=f.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(l,f){const h=t.getState(),d=new Set,p=[],g=f?f(h.internal.interaction):h.internal.interaction;for(let v=0;v<g.length;v++){const x=Vd(g[v]);x&&(x.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(v){const x=Vd(v);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var E;x.events.compute==null||x.events.compute(l,x,(E=x.previousRoot)==null?void 0:E.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(v,!0):[]}let S=g.flatMap(y).sort((v,x)=>{const E=Vd(v.object),T=Vd(x.object);return!E||!T?v.distance-x.distance:T.events.priority-E.events.priority||v.distance-x.distance}).filter(v=>{const x=Yy(v);return d.has(x)?!1:(d.add(x),!0)});h.events.filter&&(S=h.events.filter(S,h));for(const v of S){let x=v.object;for(;x;){var b;(b=x.__r3f)!=null&&b.eventCount&&p.push({...v,eventObject:x}),x=x.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let v of h.internal.capturedMap.get(l.pointerId).values())d.has(Yy(v.intersection))||p.push(v.intersection);return p}function r(l,f,h,d){if(l.length){const p={stopped:!1};for(const g of l){let y=Vd(g.object);if(y||g.object.traverseAncestors(S=>{const b=Vd(S);if(b)return y=b,!1}),y){const{raycaster:S,pointer:b,camera:v,internal:x}=y,E=new k(b.x,b.y,0).unproject(v),T=A=>{var C,I;return(C=(I=x.capturedMap.get(A))==null?void 0:I.has(g.eventObject))!=null?C:!1},w=A=>{const C={intersection:g,target:f.target};x.capturedMap.has(A)?x.capturedMap.get(A).set(g.eventObject,C):x.capturedMap.set(A,new Map([[g.eventObject,C]])),f.target.setPointerCapture(A)},R=A=>{const C=x.capturedMap.get(A);C&&CF(x.capturedMap,g.eventObject,C,A)};let N={};for(let A in f){let C=f[A];typeof C!="function"&&(N[A]=C)}let U={...g,...N,pointer:b,intersections:l,stopped:p.stopped,delta:h,unprojectedPoint:E,ray:S.ray,camera:v,stopPropagation(){const A="pointerId"in f&&x.capturedMap.get(f.pointerId);if((!A||A.has(g.eventObject))&&(U.stopped=p.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(C=>C.eventObject===g.eventObject))){const C=l.slice(0,l.indexOf(g));a([...C,g])}},target:{hasPointerCapture:T,setPointerCapture:w,releasePointerCapture:R},currentTarget:{hasPointerCapture:T,setPointerCapture:w,releasePointerCapture:R},nativeEvent:f};if(d(U),p.stopped===!0)break}}}return l}function a(l){const{internal:f}=t.getState();for(const h of f.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f;if(f.hovered.delete(Yy(h)),p!=null&&p.eventCount){const g=p.handlers,y={...h,intersections:l};g.onPointerOut==null||g.onPointerOut(y),g.onPointerLeave==null||g.onPointerLeave(y)}}}function s(l,f){for(let h=0;h<f.length;h++){const d=f[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:h}=t.getState();"pointerId"in f&&h.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(f.pointerId)&&(h.capturedMap.delete(f.pointerId),a([]))})}}return function(h){const{onPointerMissed:d,internal:p}=t.getState();p.lastEvent.current=h;const g=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=i(h,g?n:void 0),v=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=b.map(E=>E.eventObject)),y&&!b.length&&v<=2&&(s(h,p.interaction),d&&d(h)),g&&a(b);function x(E){const T=E.eventObject,w=T.__r3f;if(!(w!=null&&w.eventCount))return;const R=w.handlers;if(g){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const N=Yy(E),U=p.hovered.get(N);U?U.stopped&&E.stopPropagation():(p.hovered.set(N,E),R.onPointerOver==null||R.onPointerOver(E),R.onPointerEnter==null||R.onPointerEnter(E))}R.onPointerMove==null||R.onPointerMove(E)}else{const N=R[l];N?(!y||p.initialHits.includes(T))&&(s(h,p.interaction.filter(U=>!p.initialHits.includes(U))),N(E)):y&&p.initialHits.includes(T)&&s(h,p.interaction.filter(U=>!p.initialHits.includes(U)))}}r(b,h,v,x)}}return{handlePointer:o}}const o6=t=>!!(t!=null&&t.render),pC=O.createContext(null),Pie=(t,e)=>{const n=dF((o,l)=>{const f=new k,h=new k,d=new k;function p(v=l().camera,x=h,E=l().size){const{width:T,height:w,top:R,left:N}=E,U=T/w;x.isVector3?d.copy(x):d.set(...x);const A=v.getWorldPosition(f).distanceTo(d);if(MF(v))return{width:T/v.zoom,height:w/v.zoom,top:R,left:N,factor:1,distance:A,aspect:U};{const C=v.fov*Math.PI/180,I=2*Math.tan(C/2)*A,X=I*(T/w);return{width:X,height:I,top:R,left:N,factor:T/X,distance:A,aspect:U}}}let g;const y=v=>o(x=>({performance:{...x.performance,current:v}})),S=new xe;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(v=1)=>t(l(),v),advance:(v,x)=>e(v,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new aC,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();g&&clearTimeout(g),v.performance.current!==v.performance.min&&y(v.performance.min),g=setTimeout(()=>y(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:v=>o(x=>({...x,events:{...x.events,...v}})),setSize:(v,x,E=0,T=0)=>{const w=l().camera,R={width:v,height:x,top:E,left:T};o(N=>({size:R,viewport:{...N.viewport,...p(w,h,R)}}))},setDpr:v=>o(x=>{const E=TF(v);return{viewport:{...x.viewport,dpr:E,initialDpr:x.viewport.initialDpr||E}}}),setFrameloop:(v="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,v!=="never"&&(x.start(),x.elapsedTime=0),o(()=>({frameloop:v}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:O.createRef(),active:!1,frames:0,priority:0,subscribe:(v,x,E)=>{const T=l().internal;return T.priority=T.priority+(x>0?1:0),T.subscribers.push({ref:v,priority:x,store:E}),T.subscribers=T.subscribers.sort((w,R)=>w.priority-R.priority),()=>{const w=l().internal;w!=null&&w.subscribers&&(w.priority=w.priority-(x>0?1:0),w.subscribers=w.subscribers.filter(R=>R.ref!==v))}}}}}),i=n.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return n.subscribe(()=>{const{camera:o,size:l,viewport:f,gl:h,set:d}=n.getState();if(l.width!==r.width||l.height!==r.height||f.dpr!==a){r=l,a=f.dpr,wF(o,l),f.dpr>0&&h.setPixelRatio(f.dpr);const p=typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,p)}o!==s&&(s=o,d(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};function mC(){const t=O.useContext(pC);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Wi(t=n=>n,e){return mC()(t,e)}function ta(t,e=0){const n=mC(),i=n.getState().internal.subscribe,r=dC(t);return Yv(()=>i(r,e,n),[e,i,n]),null}const l6=new WeakMap,Iie=t=>{var e;return typeof t=="function"&&(t==null||(e=t.prototype)==null?void 0:e.constructor)===t};function RF(t,e){return function(n,...i){let r;return Iie(n)?(r=l6.get(n),r||(r=new n,l6.set(n,r))):r=n,t&&t(r),Promise.all(i.map(a=>new Promise((s,o)=>r.load(a,l=>{da(l==null?void 0:l.scene)&&Object.assign(l,Aie(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${a}: ${l==null?void 0:l.message}`))))))}}function Th(t,e,n,i){const r=Array.isArray(e)?e:[e],a=fie(RF(n,i),[t,...r],{equal:xi.equ});return Array.isArray(e)?a:a[0]}Th.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return hie(RF(n),[t,...i])};Th.clear=function(t,e){const n=Array.isArray(e)?e:[e];return die([t,...n])};var zie={version:"9.4.2"};function Bie(t){const e=gie(t);return e.injectIntoDevTools(),e}const DF=0,Jp={},Fie=/^three(?=[A-Z])/,U2=t=>`${t[0].toUpperCase()}${t.slice(1)}`;let Hie=0;const Vie=t=>typeof t=="function";function L2(t){if(Vie(t)){const e=`${Hie++}`;return Jp[e]=t,e}else Object.assign(Jp,t)}function OF(t,e){const n=U2(t),i=Jp[n];if(t!=="primitive"&&!i)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(t==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Gie(t,e,n){var i;return t=U2(t)in Jp?t:t.replace(Fie,""),OF(t,e),t==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,rb(e.object,n,t,e)}function kie(t){if(!t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?sb(t.parent,t):da(t.object)&&(t.object.visible=!1),t.isHidden=!0,Am(t)}}function NF(t){if(t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?ab(t.parent,t):da(t.object)&&t.props.visible!==!1&&(t.object.visible=!0),t.isHidden=!1,Am(t)}}function gC(t,e,n){const i=e.root.getState();if(!(!t.parent&&t.object!==i.scene)){if(!e.object){var r,a;const s=Jp[U2(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(el(e.object,e.props),e.props.attach)ab(t,e);else if(da(e.object)&&da(t.object)){const s=t.object.children.indexOf(n==null?void 0:n.object);if(n&&s!==-1){const o=t.object.children.indexOf(e.object);if(o!==-1){t.object.children.splice(o,1);const l=o<s?s-1:s;t.object.children.splice(l,0,e.object)}else e.object.parent=t.object,t.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),t.object.dispatchEvent({type:"childadded",child:e.object})}else t.object.add(e.object)}for(const s of e.children)gC(e,s);Am(e)}}function mM(t,e){e&&(e.parent=t,t.children.push(e),gC(t,e))}function c6(t,e,n){if(!e||!n)return;e.parent=t;const i=t.children.indexOf(n);i!==-1?t.children.splice(i,0,e):t.children.push(e),gC(t,e,n)}function UF(t){if(typeof t.dispose=="function"){const e=()=>{try{t.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():dA.unstable_scheduleCallback(dA.unstable_IdlePriority,e)}}function mA(t,e,n){if(!e)return;e.parent=null;const i=t.children.indexOf(e);i!==-1&&t.children.splice(i,1),e.props.attach?sb(t,e):da(e.object)&&da(t.object)&&(t.object.remove(e.object),Uie(EF(e),e.object));const r=e.props.dispose!==null&&n!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];mA(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&UF(e.object),n===void 0&&Am(e)}function jie(t,e){for(const n of[t,t.alternate])if(n!==null)if(typeof n.ref=="function"){n.refCleanup==null||n.refCleanup();const i=n.ref(e);typeof i=="function"&&(n.refCleanup=i)}else n.ref&&(n.ref.current=e)}const D_=[];function Xie(){for(const[n]of D_){const i=n.parent;if(i){n.props.attach?sb(i,n):da(n.object)&&da(i.object)&&i.object.remove(n.object);for(const r of n.children)r.props.attach?sb(n,r):da(r.object)&&da(n.object)&&n.object.remove(r.object)}n.isHidden&&NF(n),n.object.__r3f&&delete n.object.__r3f,n.type!=="primitive"&&UF(n.object)}for(const[n,i,r]of D_){n.props=i;const a=n.parent;if(a){var t,e;const s=Jp[U2(n.type)];n.object=(t=n.props.object)!=null?t:new s(...(e=n.props.args)!=null?e:[]),n.object.__r3f=n,jie(r,n.object),el(n.object,n.props),n.props.attach?ab(a,n):da(n.object)&&da(a.object)&&a.object.add(n.object);for(const o of n.children)o.props.attach?ab(n,o):da(o.object)&&da(n.object)&&n.object.add(o.object);Am(n)}}D_.length=0}const gM=()=>{},u6={};let qy=DF;const Wie=0,Yie=4,ob=Bie({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Gie,removeChild:mA,appendChild:mM,appendInitialChild:mM,insertBefore:c6,appendChildToContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||mM(n,e)},removeChildFromContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||mA(n,e)},insertInContainerBefore(t,e,n){const i=t.getState().scene.__r3f;!e||!n||!i||c6(i,e,n)},getRootHostContext:()=>u6,getChildHostContext:()=>u6,commitUpdate(t,e,n,i,r){var a,s,o;OF(e,i);let l=!1;if((t.type==="primitive"&&n.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=n.args)==null?void 0:s.length)||(o=i.args)!=null&&o.some((h,d)=>{var p;return h!==((p=n.args)==null?void 0:p[d])}))&&(l=!0),l)D_.push([t,{...i},r]);else{const h=Die(t,i);Object.keys(h).length&&(Object.assign(t.props,h),el(t.object,h))}(r.sibling===null||(r.flags&Yie)===Wie)&&Xie()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:t=>t==null?void 0:t.object,prepareForCommit:()=>null,preparePortalMount:t=>rb(t.getState().scene,t,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:kie,unhideInstance:NF,createTextInstance:gM,hideTextInstance:gM,unhideTextInstance:gM,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:O.createContext(null),setCurrentUpdatePriority(t){qy=t},getCurrentUpdatePriority(){return qy},resolveUpdatePriority(){var t;if(qy!==DF)return qy;switch(typeof window<"u"&&((t=window.event)==null?void 0:t.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return A_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return A_.ContinuousEventPriority;default:return A_.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:zie.version}),Ah=new Map,Gd={objects:"shallow",strict:!1};function qie(t,e){if(!e&&typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:a}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Zie(t){const e=Ah.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||Pie(yA,h6),s=n||ob.createContainer(a,A_.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||Ah.set(t,{fiber:s,store:a});let o,l,f=!1,h=null;return{async configure(d={}){let p;h=new Promise(me=>p=me);let{gl:g,size:y,scene:S,events:b,onCreated:v,shadows:x=!1,linear:E=!1,flat:T=!1,legacy:w=!1,orthographic:R=!1,frameloop:N="always",dpr:U=[1,2],performance:A,raycaster:C,camera:I,onPointerMissed:X}=d,j=a.getState(),Y=j.gl;if(!j.gl){const me={canvas:t,powerPreference:"high-performance",antialias:!0,alpha:!0},Ae=typeof g=="function"?await g(me):g;o6(Ae)?Y=Ae:Y=new uC({...me,...g}),j.set({gl:Y})}let Z=j.raycaster;Z||j.set({raycaster:Z=new lC});const{params:z,...G}=C||{};if(xi.equ(G,Z,Gd)||el(Z,{...G}),xi.equ(z,Z.params,Gd)||el(Z,{params:{...Z.params,...z}}),!j.camera||j.camera===l&&!xi.equ(l,I,Gd)){l=I;const me=I==null?void 0:I.isCamera,Ae=me?I:R?new _s(0,0,0,0,.1,1e3):new bi(75,0,.1,1e3);me||(Ae.position.z=5,I&&(el(Ae,I),Ae.manual||("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(Ae.manual=!0,Ae.updateProjectionMatrix())),!j.camera&&!(I!=null&&I.rotation)&&Ae.lookAt(0,0,0)),j.set({camera:Ae}),Z.camera=Ae}if(!j.scene){let me;S!=null&&S.isScene?(me=S,rb(me,a,"",{})):(me=new Sh,rb(me,a,"",{}),S&&el(me,S)),j.set({scene:me})}b&&!j.events.handlers&&j.set({events:b(a)});const q=qie(t,y);if(xi.equ(q,j.size,Gd)||j.setSize(q.width,q.height,q.top,q.left),U&&j.viewport.dpr!==TF(U)&&j.setDpr(U),j.frameloop!==N&&j.setFrameloop(N),j.onPointerMissed||j.set({onPointerMissed:X}),A&&!xi.equ(A,j.performance,Gd)&&j.set(me=>({performance:{...me.performance,...A}})),!j.xr){var se;const me=(Ke,yt)=>{const he=a.getState();he.frameloop!=="never"&&h6(Ke,!0,he,yt)},Ae=()=>{const Ke=a.getState();Ke.gl.xr.enabled=Ke.gl.xr.isPresenting,Ke.gl.xr.setAnimationLoop(Ke.gl.xr.isPresenting?me:null),Ke.gl.xr.isPresenting||yA(Ke)},Le={connect(){const Ke=a.getState().gl;Ke.xr.addEventListener("sessionstart",Ae),Ke.xr.addEventListener("sessionend",Ae)},disconnect(){const Ke=a.getState().gl;Ke.xr.removeEventListener("sessionstart",Ae),Ke.xr.removeEventListener("sessionend",Ae)}};typeof((se=Y.xr)==null?void 0:se.addEventListener)=="function"&&Le.connect(),j.set({xr:Le})}if(Y.shadowMap){const me=Y.shadowMap.enabled,Ae=Y.shadowMap.type;if(Y.shadowMap.enabled=!!x,xi.boo(x))Y.shadowMap.type=hg;else if(xi.str(x)){var le;const Le={basic:EB,percentage:Ep,soft:hg,variance:Zf};Y.shadowMap.type=(le=Le[x])!=null?le:hg}else xi.obj(x)&&Object.assign(Y.shadowMap,x);(me!==Y.shadowMap.enabled||Ae!==Y.shadowMap.type)&&(Y.shadowMap.needsUpdate=!0)}return pn.enabled=!w,f||(Y.outputColorSpace=E?Ms:En,Y.toneMapping=T?gs:Kb),j.legacy!==w&&j.set(()=>({legacy:w})),j.linear!==E&&j.set(()=>({linear:E})),j.flat!==T&&j.set(()=>({flat:T})),g&&!xi.fun(g)&&!o6(g)&&!xi.equ(g,Y,Gd)&&el(Y,g),o=v,f=!0,p(),this},render(d){return!f&&!h&&this.configure(),h.then(()=>{ob.updateContainer($.jsx($ie,{store:a,children:d,onCreated:o,rootElement:t}),s,null,()=>{})}),a},unmount(){LF(t)}}}function $ie({store:t,children:e,onCreated:n,rootElement:i}){return Yv(()=>{const r=t.getState();r.set(a=>({internal:{...a.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),$.jsx(pC.Provider,{value:t,children:e})}function LF(t,e){const n=Ah.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),ob.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,o,l;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),wie(r.scene),Ah.delete(t)}catch{}},500)})}}function Kie(t,e,n){return $.jsx(Qie,{children:t,container:e,state:n})}function Qie({state:t={},children:e,container:n}){const{events:i,size:r,...a}=t,s=mC(),[o]=O.useState(()=>new lC),[l]=O.useState(()=>new xe),f=dC((d,p)=>{let g;if(p.camera&&r){const y=p.camera;g=d.viewport.getCurrentViewport(y,new k,r),y!==d.camera&&wF(y,r)}return{...d,...p,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...d.events,...p.events,...i},size:{...d.size,...r},viewport:{...d.viewport,...g},setEvents:y=>p.set(S=>({...S,events:{...S.events,...y}}))}}),h=O.useMemo(()=>{const d=dF((g,y)=>({...a,set:g,get:y})),p=g=>d.setState(y=>f.current(g,y));return p(s.getState()),s.subscribe(p),d},[s,n]);return $.jsx($.Fragment,{children:ob.createPortal($.jsx(pC.Provider,{value:h,children:e}),h,null)})}const Jie=new Set,ere=new Set,tre=new Set;function vM(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function bg(t,e){switch(t){case"before":return vM(Jie,e);case"after":return vM(ere,e);case"tail":return vM(tre,e)}}let yM,_M;function gA(t,e,n){let i=e.clock.getDelta();e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),yM=e.internal.subscribers;for(let r=0;r<yM.length;r++)_M=yM[r],_M.ref.current(_M.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let lb=!1,vA=!1,xM,f6,kd;function PF(t){f6=requestAnimationFrame(PF),lb=!0,xM=0,bg("before",t),vA=!0;for(const n of Ah.values()){var e;kd=n.store.getState(),kd.internal.active&&(kd.frameloop==="always"||kd.internal.frames>0)&&!((e=kd.gl.xr)!=null&&e.isPresenting)&&(xM+=gA(t,kd))}if(vA=!1,bg("after",t),xM===0)return bg("tail",t),lb=!1,cancelAnimationFrame(f6)}function yA(t,e=1){var n;if(!t)return Ah.forEach(i=>yA(i.store.getState(),e));(n=t.gl.xr)!=null&&n.isPresenting||!t.internal.active||t.frameloop==="never"||(e>1?t.internal.frames=Math.min(60,t.internal.frames+e):vA?t.internal.frames=2:t.internal.frames=1,lb||(lb=!0,requestAnimationFrame(PF)))}function h6(t,e=!0,n,i){if(e&&bg("before",t),n)gA(t,n,i);else for(const r of Ah.values())gA(t,r.store.getState());e&&bg("after",t)}const bM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nre(t){const{handlePointer:e}=Lie(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(bM).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{const{set:i,events:r}=t.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:n}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[o,l]=bM[a];n.addEventListener(o,s,{passive:l})}},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=bM[r];i.connected.removeEventListener(s,a)}n(r=>({events:{...r.events,connected:void 0}}))}}}}function d6(t,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...i),e)}}function ire({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=O.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=O.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,f=t?typeof t=="number"?t:t.resize:null,h=O.useRef(!1);O.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,p,g]=O.useMemo(()=>{const v=()=>{if(!o.current.element)return;const{left:x,top:E,width:T,height:w,bottom:R,right:N,x:U,y:A}=o.current.element.getBoundingClientRect(),C={left:x,top:E,width:T,height:w,bottom:R,right:N,x:U,y:A};o.current.element instanceof HTMLElement&&i&&(C.height=o.current.element.offsetHeight,C.width=o.current.element.offsetWidth),Object.freeze(C),h.current&&!ore(o.current.lastBounds,C)&&s(o.current.lastBounds=C)};return[v,f?d6(v,f):v,l?d6(v,l):v]},[s,i,l,f]);function y(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function S(){o.current.element&&(o.current.resizeObserver=new r(g),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(v=>v.addEventListener("scroll",g,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const b=v=>{!v||v===o.current.element||(y(),o.current.element=v,o.current.scrollContainers=IF(v),S())};return are(g,!!e),rre(p),O.useEffect(()=>{y(),S()},[e,g,p]),O.useEffect(()=>y,[]),[b,a,d]}function rre(t){O.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function are(t,e){O.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function IF(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...IF(t.parentElement)]}const sre=["x","y","top","bottom","left","right","width","height"],ore=(t,e)=>sre.every(n=>t[n]===e[n]);function lre({ref:t,children:e,fallback:n,resize:i,style:r,gl:a,events:s=nre,eventSource:o,eventPrefix:l,shadows:f,linear:h,flat:d,legacy:p,orthographic:g,frameloop:y,dpr:S,performance:b,raycaster:v,camera:x,scene:E,onPointerMissed:T,onCreated:w,...R}){O.useMemo(()=>L2(Fne),[]);const N=Eie(),[U,A]=ire({scroll:!0,debounce:{scroll:50,resize:0},...i}),C=O.useRef(null),I=O.useRef(null);O.useImperativeHandle(t,()=>C.current);const X=dC(T),[j,Y]=O.useState(!1),[Z,z]=O.useState(!1);if(j)throw j;if(Z)throw Z;const G=O.useRef(null);Yv(()=>{const se=C.current;if(A.width>0&&A.height>0&&se){G.current||(G.current=Zie(se));async function le(){await G.current.configure({gl:a,scene:E,events:s,shadows:f,linear:h,flat:d,legacy:p,orthographic:g,frameloop:y,dpr:S,performance:b,raycaster:v,camera:x,size:A,onPointerMissed:(...me)=>X.current==null?void 0:X.current(...me),onCreated:me=>{me.events.connect==null||me.events.connect(o?bie(o)?o.current:o:I.current),l&&me.setEvents({compute:(Ae,Le)=>{const Ke=Ae[l+"X"],yt=Ae[l+"Y"];Le.pointer.set(Ke/Le.size.width*2-1,-(yt/Le.size.height)*2+1),Le.raycaster.setFromCamera(Le.pointer,Le.camera)}}),w==null||w(me)}}),G.current.render($.jsx(N,{children:$.jsx(Tie,{set:z,children:$.jsx(O.Suspense,{fallback:$.jsx(Mie,{set:Y}),children:e??null})})}))}le()}}),O.useEffect(()=>{const se=C.current;if(se)return()=>LF(se)},[]);const q=o?"none":"auto";return $.jsx("div",{ref:I,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:q,...r},...R,children:$.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:$.jsx("canvas",{ref:C,style:{display:"block"},children:n})})})}function cre(t){return $.jsx(bF,{children:$.jsx(lre,{...t})})}function em(){return em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},em.apply(null,arguments)}const qv=new k,vC=new k,ure=new k,p6=new xe;function fre(t,e,n){const i=qv.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,a=n.height/2;return[i.x*r+r,-(i.y*a)+a]}function hre(t,e){const n=qv.setFromMatrixPosition(t.matrixWorld),i=vC.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),a=e.getWorldDirection(ure);return r.angleTo(a)>Math.PI/2}function dre(t,e,n,i){const r=qv.setFromMatrixPosition(t.matrixWorld),a=r.clone();a.project(e),p6.set(a.x,a.y),n.setFromCamera(p6,e);const s=n.intersectObjects(i,!0);if(s.length){const o=s[0].distance;return r.distanceTo(n.ray.origin)<o}return!0}function pre(t,e){if(e instanceof _s)return e.zoom;if(e instanceof bi){const n=qv.setFromMatrixPosition(t.matrixWorld),i=vC.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,a=n.distanceTo(i);return 1/(2*Math.tan(r/2)*a)}else return 1}function mre(t,e,n){if(e instanceof bi||e instanceof _s){const i=qv.setFromMatrixPosition(t.matrixWorld),r=vC.setFromMatrixPosition(e.matrixWorld),a=i.distanceTo(r),s=(n[1]-n[0])/(e.far-e.near),o=n[1]-s*e.far;return Math.round(s*a+o)}}const _A=t=>Math.abs(t)<1e-10?0:t;function zF(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=_A(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const gre=(t=>e=>zF(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),vre=(t=>(e,n)=>zF(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function yre(t){return t&&typeof t=="object"&&"current"in t}const _re=O.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:a,fullscreen:s,portal:o,distanceFactor:l,sprite:f=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:g,receiveShadow:y,material:S,geometry:b,zIndexRange:v=[16777271,0],calculatePosition:x=fre,as:E="div",wrapperClass:T,pointerEvents:w="auto",...R},N)=>{const{gl:U,camera:A,scene:C,size:I,raycaster:X,events:j,viewport:Y}=Wi(),[Z]=O.useState(()=>document.createElement(E)),z=O.useRef(null),G=O.useRef(null),q=O.useRef(0),se=O.useRef([0,0]),le=O.useRef(null),me=O.useRef(null),Ae=(o==null?void 0:o.current)||j.connected||U.domElement.parentNode,Le=O.useRef(null),Ke=O.useRef(!1),yt=O.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&yre(d[0]),[d]);O.useLayoutEffect(()=>{const Ze=U.domElement;d&&d==="blending"?(Ze.style.zIndex=`${Math.floor(v[0]/2)}`,Ze.style.position="absolute",Ze.style.pointerEvents="none"):(Ze.style.zIndex=null,Ze.style.position=null,Ze.style.pointerEvents=null)},[d]),O.useLayoutEffect(()=>{if(G.current){const Ze=z.current=y4.createRoot(Z);if(C.updateMatrixWorld(),h)Z.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ht=x(G.current,A,I);Z.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ht[0]}px,${ht[1]}px,0);transform-origin:0 0;`}return Ae&&(r?Ae.prepend(Z):Ae.appendChild(Z)),()=>{Ae&&Ae.removeChild(Z),Ze.unmount()}}},[Ae,h]),O.useLayoutEffect(()=>{T&&(Z.className=T)},[T]);const he=O.useMemo(()=>h?{position:"absolute",top:0,left:0,width:I.width,height:I.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:a?"translate3d(-50%,-50%,0)":"none",...s&&{top:-I.height/2,left:-I.width/2,width:I.width,height:I.height},...n},[n,a,s,I,h]),Te=O.useMemo(()=>({position:"absolute",pointerEvents:w}),[w]);O.useLayoutEffect(()=>{if(Ke.current=!1,h){var Ze;(Ze=z.current)==null||Ze.render(O.createElement("div",{ref:le,style:he},O.createElement("div",{ref:me,style:Te},O.createElement("div",{ref:N,className:i,style:n,children:t}))))}else{var ht;(ht=z.current)==null||ht.render(O.createElement("div",{ref:N,style:he,className:i,children:t}))}});const Fe=O.useRef(!0);ta(Ze=>{if(G.current){A.updateMatrixWorld(),G.current.updateWorldMatrix(!0,!1);const ht=h?se.current:x(G.current,A,I);if(h||Math.abs(q.current-A.zoom)>e||Math.abs(se.current[0]-ht[0])>e||Math.abs(se.current[1]-ht[1])>e){const Ft=hre(G.current,A);let ct=!1;yt&&(Array.isArray(d)?ct=d.map(Ge=>Ge.current):d!=="blending"&&(ct=[C]));const Me=Fe.current;if(ct){const Ge=dre(G.current,A,X,ct);Fe.current=Ge&&!Ft}else Fe.current=!Ft;Me!==Fe.current&&(p?p(!Fe.current):Z.style.display=Fe.current?"block":"none");const Oe=Math.floor(v[0]/2),we=d?yt?[v[0],Oe]:[Oe-1,0]:v;if(Z.style.zIndex=`${mre(G.current,A,we)}`,h){const[Ge,W]=[I.width/2,I.height/2],mt=A.projectionMatrix.elements[5]*W,{isOrthographicCamera:Qe,top:bt,left:We,bottom:B,right:L}=A,ne=gre(A.matrixWorldInverse),pe=Qe?`scale(${mt})translate(${_A(-(L+We)/2)}px,${_A((bt+B)/2)}px)`:`translateZ(${mt}px)`;let be=G.current.matrixWorld;f&&(be=A.matrixWorldInverse.clone().transpose().copyPosition(be).scale(G.current.scale),be.elements[3]=be.elements[7]=be.elements[11]=0,be.elements[15]=1),Z.style.width=I.width+"px",Z.style.height=I.height+"px",Z.style.perspective=Qe?"":`${mt}px`,le.current&&me.current&&(le.current.style.transform=`${pe}${ne}translate(${Ge}px,${W}px)`,me.current.style.transform=vre(be,1/((l||10)/400)))}else{const Ge=l===void 0?1:pre(G.current,A)*l;Z.style.transform=`translate3d(${ht[0]}px,${ht[1]}px,0) scale(${Ge})`}se.current=ht,q.current=A.zoom}}if(!yt&&Le.current&&!Ke.current)if(h){if(le.current){const ht=le.current.children[0];if(ht!=null&&ht.clientWidth&&ht!=null&&ht.clientHeight){const{isOrthographicCamera:Ft}=A;if(Ft||b)R.scale&&(Array.isArray(R.scale)?R.scale instanceof k?Le.current.scale.copy(R.scale.clone().divideScalar(1)):Le.current.scale.set(1/R.scale[0],1/R.scale[1],1/R.scale[2]):Le.current.scale.setScalar(1/R.scale));else{const ct=(l||10)/400,Me=ht.clientWidth*ct,Oe=ht.clientHeight*ct;Le.current.scale.set(Me,Oe,1)}Ke.current=!0}}}else{const ht=Z.children[0];if(ht!=null&&ht.clientWidth&&ht!=null&&ht.clientHeight){const Ft=1/Y.factor,ct=ht.clientWidth*Ft,Me=ht.clientHeight*Ft;Le.current.scale.set(ct,Me,1),Ke.current=!0}Le.current.lookAt(Ze.camera.position)}});const xt=O.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return O.createElement("group",em({},R,{ref:G}),d&&!yt&&O.createElement("mesh",{castShadow:g,receiveShadow:y,ref:Le},b||O.createElement("planeGeometry",null),S||O.createElement("shaderMaterial",{side:zr,vertexShader:xt.vertexShader,fragmentShader:xt.fragmentShader})))});function xre(t,e,n){return Math.max(e,Math.min(t,n))}const Kr={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function m6(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function g6(t,e,n,i=.15){return i===0?xre(t,e,n):t<e?-m6(e-t,n-e,i)+e:t>n?+m6(t-n,n-e,i)+n:t}function bre(t,[e,n],[i,r]){const[[a,s],[o,l]]=t;return[g6(e,a,s,i),g6(n,o,l,r)]}function Sre(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ere(t){var e=Sre(t,"string");return typeof e=="symbol"?e:String(e)}function Ua(t,e,n){return e=Ere(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(n),!0).forEach(function(i){Ua(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const BF={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function y6(t){return t?t[0].toUpperCase()+t.slice(1):""}const Mre=["enter","leave"];function Tre(t=!1,e){return t&&!Mre.includes(e)}function Are(t,e="",n=!1){const i=BF[t],r=i&&i[e]||e;return"on"+y6(t)+y6(r)+(Tre(n,r)?"Capture":"")}const wre=["gotpointercapture","lostpointercapture"];function Cre(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const i=wre.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:n}}function Rre(t,e=""){const n=BF[t],i=n&&n[e]||e;return t+i}function P2(t){return"touches"in t}function FF(t){return P2(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function Dre(t){return Array.from(t.touches).filter(e=>{var n,i;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(i=n.contains)===null||i===void 0?void 0:i.call(n,e.target))})}function Ore(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function HF(t){return P2(t)?Ore(t)[0]:t}function Nre(t){return Dre(t).map(e=>e.identifier)}function SM(t){const e=HF(t);return P2(t)?e.identifier:e.pointerId}function _6(t){const e=HF(t);return[e.clientX,e.clientY]}function Ure(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:i,metaKey:r,ctrlKey:a}=t;Object.assign(e,{shiftKey:n,altKey:i,metaKey:r,ctrlKey:a})}return e}function cb(t,...e){return typeof t=="function"?t(...e):t}function Lre(){}function Pre(...t){return t.length===0?Lre:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function x6(t,e){return Object.assign({},e,t||{})}const Ire=32;class zre{constructor(e,n,i){this.ctrl=e,this.args=n,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:i,args:r}=this;n[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,i=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=i.from?cb(i.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:i,shared:r}=this;n.args=this.args;let a=0;if(e&&(n.event=e,i.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Ure(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,a=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const R=n._delta.map(Math.abs);Kr.addTo(n._distance,R)}this.axisIntent&&this.axisIntent(e);const[s,o]=n._movement,[l,f]=i.threshold,{_step:h,values:d}=n;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(s)>=l&&d[0]),h[1]===!1&&(h[1]=Math.abs(o)>=f&&d[1])):(h[0]===!1&&(h[0]=Math.abs(s)>=l&&Math.sign(s)*l),h[1]===!1&&(h[1]=Math.abs(o)>=f&&Math.sign(o)*f)),n.intentional=h[0]!==!1||h[1]!==!1,!n.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[R,N]=d;p[0]=h[0]!==!1?R-h[0]:0,p[1]=h[1]!==!1?N-h[1]:0}else p[0]=h[0]!==!1?s-h[0]:0,p[1]=h[1]!==!1?o-h[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const g=n.offset,y=n._active&&!n._blocked||n.active;y&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=r[this.ingKey]=n._active,e&&(n.first&&("bounds"in i&&(n._bounds=cb(i.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[S,b]=n.offset,[[v,x],[E,T]]=n._bounds;n.overflow=[S<v?-1:S>x?1:0,b<E?-1:b>T?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const w=n._active?i.rubberband||[0,0]:[0,0];if(n.offset=bre(n._bounds,n.offset,w),n.delta=Kr.sub(n.offset,g),this.computeMovement(),y&&(!n.last||a>Ire)){n.delta=Kr.sub(n.offset,g);const R=n.delta.map(Math.abs);Kr.addTo(n.distance,R),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&a>0&&(n.velocity=[R[0]/a,R[1]/a],n.timeDelta=a)}}emit(){const e=this.state,n=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Ri(Ri(Ri({},n),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Bre([t,e],n){const i=Math.abs(t),r=Math.abs(e);if(i>r&&i>n)return"x";if(r>i&&r>n)return"y"}class Fre extends zre{constructor(...e){super(...e),Ua(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Kr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Kr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,i=this.config;if(!n.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[FF(e)]:i.axisThreshold;n.axis=Bre(n._movement,r)}n._blocked=(i.lockDirection||!!i.axis)&&!n.axis||!!i.axis&&i.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Hre=t=>t,b6=.15,VF={enabled(t=!0){return t},eventOptions(t,e,n){return Ri(Ri({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[b6,b6];case!1:return[0,0];default:return Kr.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Kr.toVector(t)},transform(t,e,n){const i=t||n.shared.transform;return this.hasCustomTransform=!!i,i||Hre},threshold(t){return Kr.toVector(t,0)}},Vre=0,Zv=Ri(Ri({},VF),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=Vre){return t},bounds(t={}){if(typeof t=="function")return a=>Zv.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:i=-1/0,bottom:r=1/0}=t;return[[e,n],[i,r]]}}),S6={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class Gre extends Fre{constructor(...e){super(...e),Ua(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:n.left-i.left+e.offset[0],right:n.right-i.right+e.offset[0],top:n.top-i.top+e.offset[1],bottom:n.bottom-i.bottom+e.offset[1]};e._bounds=Zv.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=SM(e),i._pointerActive=!0,this.computeValues(_6(e)),this.computeInitial(),n.preventScrollAxis&&FF(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,i=this.config;if(!n._pointerActive)return;const r=SM(e);if(n._pointerId!==void 0&&r!==n._pointerId)return;const a=_6(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Kr.sub(a,n._values),this.computeValues(a)),Kr.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,i=this.config;if(!n._active||!n._pointerActive)return;const r=SM(e);if(n._pointerId!==void 0&&r!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,s]=n._distance;if(n.tap=a<=i.tapsThreshold&&s<=i.tapsThreshold,n.tap&&i.filterTaps)n._force=!0;else{const[o,l]=n._delta,[f,h]=n._movement,[d,p]=i.swipe.velocity,[g,y]=i.swipe.distance,S=i.swipe.duration;if(n.elapsedTime<S){const b=Math.abs(o/n.timeDelta),v=Math.abs(l/n.timeDelta);b>d&&Math.abs(f)>g&&(n.swipe[0]=Math.sign(o)),v>p&&Math.abs(h)>y&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,i=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,kre(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=S6[e.key];if(n){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=n(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Kr.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in S6&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function kre(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const $v=typeof window<"u"&&window.document&&window.document.createElement;function GF(){return $v&&"ontouchstart"in window}function jre(){return GF()||$v&&window.navigator.maxTouchPoints>1}function Xre(){return $v&&"onpointerdown"in window}function Wre(){return $v&&"exitPointerLock"in window.document}function Yre(){try{return"constructor"in GestureEvent}catch{return!1}}const Ks={isBrowser:$v,gesture:Yre(),touch:GF(),touchscreen:jre(),pointer:Xre(),pointerLock:Wre()},qre=250,Zre=180,$re=.5,Kre=50,Qre=250,Jre=10,E6={mouse:0,touch:0,pen:8},eae=Ri(Ri({},Zv),{},{device(t,e,{pointer:{touch:n=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Ks.pointerLock,Ks.touch&&n?"touch":this.pointerLock?"mouse":Ks.pointer&&!r?"pointer":Ks.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?qre:void 0,!(!Ks.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:i=3,axis:r=void 0}){const a=Kr.toVector(t,n?i:r?1:0);return this.filterTaps=n,this.tapsThreshold=i,a},swipe({velocity:t=$re,distance:e=Kre,duration:n=Qre}={}){return{velocity:this.transform(Kr.toVector(t)),distance:this.transform(Kr.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return Zre;case!1:return 0;default:return t}},axisThreshold(t){return t?Ri(Ri({},E6),t):E6},keyboardDisplacement(t=Jre){return t}});Ri(Ri({},VF),{},{device(t,e,{shared:n,pointer:{touch:i=!1}={}}){if(n.target&&!Ks.touch&&Ks.gesture)return"gesture";if(Ks.touch&&i)return"touch";if(Ks.touchscreen){if(Ks.pointer)return"pointer";if(Ks.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:i={}}){const r=s=>{const o=x6(cb(n,s),{min:-1/0,max:1/0});return[o.min,o.max]},a=s=>{const o=x6(cb(i,s),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof n!="function"&&typeof i!="function"?[r(),a()]:s=>[r(s),a(s)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Kr.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Ri(Ri({},Zv),{},{mouseOnly:(t=!0)=>t});Ri(Ri({},Zv),{},{mouseOnly:(t=!0)=>t});const kF=new Map,xA=new Map;function tae(t){kF.set(t.key,t.engine),xA.set(t.key,t.resolver)}const nae={key:"drag",engine:Gre,resolver:eae};function iae(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function rae(t,e){if(t==null)return{};var n=iae(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}const aae={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Ks.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},sae=["target","eventOptions","window","enabled","transform"];function O_(t={},e){const n={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":n[i]=r.call(n,t[i],i,t);break;case"object":n[i]=O_(t[i],r);break;case"boolean":r&&(n[i]=t[i]);break}return n}function oae(t,e,n={}){const i=t,{target:r,eventOptions:a,window:s,enabled:o,transform:l}=i,f=rae(i,sae);if(n.shared=O_({target:r,eventOptions:a,window:s,enabled:o,transform:l},aae),e){const h=xA.get(e);n[e]=O_(Ri({shared:n.shared},f),h)}else for(const h in f){const d=xA.get(h);d&&(n[h]=O_(Ri({shared:n.shared},f[h]),d))}return n}class jF{constructor(e,n){Ua(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,i,r,a){const s=this._listeners,o=Rre(n,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},f=Ri(Ri({},l),a);e.addEventListener(o,r,f);const h=()=>{e.removeEventListener(o,r,f),s.delete(h)};return s.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class lae{constructor(){Ua(this,"_timeouts",new Map)}add(e,n,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(n,i,...r))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class cae{constructor(e){Ua(this,"gestures",new Set),Ua(this,"_targetEventStore",new jF(this)),Ua(this,"gestureEventStores",{}),Ua(this,"gestureTimeoutStores",{}),Ua(this,"handlers",{}),Ua(this,"config",{}),Ua(this,"pointerIds",new Set),Ua(this,"touchIds",new Set),Ua(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),uae(this,e)}setEventIds(e){if(P2(e))return this.touchIds=new Set(Nre(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=oae(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,i={};let r;if(!(n.target&&(r=n.target(),!r))){if(n.enabled){for(const s of this.gestures){const o=this.config[s],l=M6(i,o.eventOptions,!!r);if(o.enabled){const f=kF.get(s);new f(this,e,s).bind(l)}}const a=M6(i,n.eventOptions,!!r);for(const s in this.nativeHandlers)a(s,"",o=>this.nativeHandlers[s](Ri(Ri({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const a in i)i[a]=Pre(...i[a]);if(!r)return i;for(const a in i){const{device:s,capture:o,passive:l}=Cre(a);this._targetEventStore.add(r,s,"",i[a],{capture:o,passive:l})}}}}function jd(t,e){t.gestures.add(e),t.gestureEventStores[e]=new jF(t,e),t.gestureTimeoutStores[e]=new lae}function uae(t,e){e.drag&&jd(t,"drag"),e.wheel&&jd(t,"wheel"),e.scroll&&jd(t,"scroll"),e.move&&jd(t,"move"),e.pinch&&jd(t,"pinch"),e.hover&&jd(t,"hover")}const M6=(t,e,n)=>(i,r,a,s={},o=!1)=>{var l,f;const h=(l=s.capture)!==null&&l!==void 0?l:e.capture,d=(f=s.passive)!==null&&f!==void 0?f:e.passive;let p=o?i:Are(i,r,h);n&&d&&(p+="Passive"),t[p]=t[p]||[],t[p].push(a)};function fae(t,e={},n,i){const r=J.useMemo(()=>new cae(t),[]);if(r.applyHandlers(t,i),r.applyConfig(e,n),J.useEffect(r.effect.bind(r)),J.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function XF(t,e){return tae(nae),fae({drag:t},e||{},"drag")}function Tp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function A6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T6(Object(n),!0).forEach(function(i){Tp(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}new xe;new xe;function WF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Gs=function t(e,n,i){var r=this;WF(this,t),Tp(this,"dot2",function(a,s){return r.x*a+r.y*s}),Tp(this,"dot3",function(a,s,o){return r.x*a+r.y*s+r.z*o}),this.x=e,this.y=n,this.z=i},hae=[new Gs(1,1,0),new Gs(-1,1,0),new Gs(1,-1,0),new Gs(-1,-1,0),new Gs(1,0,1),new Gs(-1,0,1),new Gs(1,0,-1),new Gs(-1,0,-1),new Gs(0,1,1),new Gs(0,-1,1),new Gs(0,1,-1),new Gs(0,-1,-1)],w6=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],C6=new Array(512),R6=new Array(512),dae=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var i;n&1?i=w6[n]^e&255:i=w6[n]^e>>8&255,C6[n]=C6[n+256]=i,R6[n]=R6[n+256]=hae[i%12]}};dae(0);function pae(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function D6(t){var e=pae(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var mae=function t(e){var n=this;WF(this,t),Tp(this,"seed",0),Tp(this,"init",function(i){n.seed=i,n.value=D6(i)}),Tp(this,"value",D6(this.seed)),this.init(e)},gae=new mae(Math.random()),vae={radius:1,center:[0,0,0]};function yae(t,e){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gae,i=A6(A6({},vae),e),r=i.radius,a=i.center,s=0;s<t.length;s+=3){var o=Math.pow(n.value(),.3333333333333333),l=n.value()*2-1,f=n.value()*2-1,h=n.value()*2-1,d=Math.sqrt(l*l+f*f+h*h);l=o*l/d,f=o*f/d,h=o*h/d,t[s]=l*r+a[0],t[s+1]=f*r+a[1],t[s+2]=h*r+a[2]}return t}const YF=parseInt(Bh.replace(/\D+/g,""));var no=Uint8Array,pu=Uint16Array,bA=Uint32Array,qF=new no([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ZF=new no([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_ae=new no([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$F=function(t,e){for(var n=new pu(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new bA(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return[n,r]},KF=$F(qF,2),QF=KF[0],xae=KF[1];QF[28]=258,xae[258]=28;var bae=$F(ZF,0),Sae=bae[0],SA=new pu(32768);for(var hi=0;hi<32768;++hi){var Zc=(hi&43690)>>>1|(hi&21845)<<1;Zc=(Zc&52428)>>>2|(Zc&13107)<<2,Zc=(Zc&61680)>>>4|(Zc&3855)<<4,SA[hi]=((Zc&65280)>>>8|(Zc&255)<<8)>>>1}var Sg=function(t,e,n){for(var i=t.length,r=0,a=new pu(e);r<i;++r)++a[t[r]-1];var s=new pu(e);for(r=0;r<e;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(n){o=new pu(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var f=r<<4|t[r],h=e-t[r],d=s[t[r]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)o[SA[d]>>>l]=f}else for(o=new pu(i),r=0;r<i;++r)t[r]&&(o[r]=SA[s[t[r]-1]++]>>>15-t[r]);return o},Kv=new no(288);for(var hi=0;hi<144;++hi)Kv[hi]=8;for(var hi=144;hi<256;++hi)Kv[hi]=9;for(var hi=256;hi<280;++hi)Kv[hi]=7;for(var hi=280;hi<288;++hi)Kv[hi]=8;var JF=new no(32);for(var hi=0;hi<32;++hi)JF[hi]=5;var Eae=Sg(Kv,9,1),Mae=Sg(JF,5,1),EM=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ao=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},MM=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Tae=function(t){return(t/8|0)+(t&7&&1)},Aae=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof pu?pu:t instanceof bA?bA:no)(n-e);return i.set(t.subarray(e,n)),i},wae=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new no(0);var r=!e||n,a=!n||n.i;n||(n={}),e||(e=new no(i*3));var s=function(he){var Te=e.length;if(he>Te){var Fe=new no(Math.max(Te*2,he));Fe.set(e),e=Fe}},o=n.f||0,l=n.p||0,f=n.b||0,h=n.l,d=n.d,p=n.m,g=n.n,y=i*8;do{if(!h){n.f=o=Ao(t,l,1);var S=Ao(t,l+1,3);if(l+=3,S)if(S==1)h=Eae,d=Mae,p=9,g=5;else if(S==2){var E=Ao(t,l,31)+257,T=Ao(t,l+10,15)+4,w=E+Ao(t,l+5,31)+1;l+=14;for(var R=new no(w),N=new no(19),U=0;U<T;++U)N[_ae[U]]=Ao(t,l+U*3,7);l+=T*3;for(var A=EM(N),C=(1<<A)-1,I=Sg(N,A,1),U=0;U<w;){var X=I[Ao(t,l,C)];l+=X&15;var b=X>>>4;if(b<16)R[U++]=b;else{var j=0,Y=0;for(b==16?(Y=3+Ao(t,l,3),l+=2,j=R[U-1]):b==17?(Y=3+Ao(t,l,7),l+=3):b==18&&(Y=11+Ao(t,l,127),l+=7);Y--;)R[U++]=j}}var Z=R.subarray(0,E),z=R.subarray(E);p=EM(Z),g=EM(z),h=Sg(Z,p,1),d=Sg(z,g,1)}else throw"invalid block type";else{var b=Tae(l)+4,v=t[b-4]|t[b-3]<<8,x=b+v;if(x>i){if(a)throw"unexpected EOF";break}r&&s(f+v),e.set(t.subarray(b,x),f),n.b=f+=v,n.p=l=x*8;continue}if(l>y){if(a)throw"unexpected EOF";break}}r&&s(f+131072);for(var G=(1<<p)-1,q=(1<<g)-1,se=l;;se=l){var j=h[MM(t,l)&G],le=j>>>4;if(l+=j&15,l>y){if(a)throw"unexpected EOF";break}if(!j)throw"invalid length/literal";if(le<256)e[f++]=le;else if(le==256){se=l,h=null;break}else{var me=le-254;if(le>264){var U=le-257,Ae=qF[U];me=Ao(t,l,(1<<Ae)-1)+QF[U],l+=Ae}var Le=d[MM(t,l)&q],Ke=Le>>>4;if(!Le)throw"invalid distance";l+=Le&15;var z=Sae[Ke];if(Ke>3){var Ae=ZF[Ke];z+=MM(t,l)&(1<<Ae)-1,l+=Ae}if(l>y){if(a)throw"unexpected EOF";break}r&&s(f+131072);for(var yt=f+me;f<yt;f+=4)e[f]=e[f-z],e[f+1]=e[f+1-z],e[f+2]=e[f+2-z],e[f+3]=e[f+3-z];f=yt}}n.l=h,n.p=se,n.b=f,h&&(o=1,n.m=p,n.d=d,n.n=g)}while(!o);return f==e.length?e:Aae(e,0,f)},Cae=new no(0),Rae=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Zy(t,e){return wae((Rae(t),t.subarray(2,-4)),e)}var Dae=typeof TextDecoder<"u"&&new TextDecoder,Oae=0;try{Dae.decode(Cae,{stream:!0}),Oae=1}catch{}const Nae=t=>t&&t.isCubeTexture;class Uae extends Mi{constructor(e,n){var i,r;const a=Nae(e),o=((r=a?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(o)),f=Math.pow(2,l),h=3*Math.max(f,16*7),d=4*f,p=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],g=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,y=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${YF>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,S={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},b=new Gv(1,16),v=new vi({uniforms:S,fragmentShader:y,vertexShader:g,side:zr});super(b,v)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Lae=Object.defineProperty,Pae=(t,e,n)=>e in t?Lae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Iae=(t,e,n)=>(Pae(t,e+"",n),n);class zae{constructor(){Iae(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}}var Bae=Object.defineProperty,Fae=(t,e,n)=>e in t?Bae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>(Fae(t,typeof e!="symbol"?e+"":e,n),n);const $y=new Fh,O6=new Xl,Hae=Math.cos(70*(Math.PI/180)),N6=(t,e)=>(t%e+e)%e;let Vae=class extends zae{constructor(e,n){super(),Vt(this,"object"),Vt(this,"domElement"),Vt(this,"enabled",!0),Vt(this,"target",new k),Vt(this,"minDistance",0),Vt(this,"maxDistance",1/0),Vt(this,"minZoom",0),Vt(this,"maxZoom",1/0),Vt(this,"minPolarAngle",0),Vt(this,"maxPolarAngle",Math.PI),Vt(this,"minAzimuthAngle",-1/0),Vt(this,"maxAzimuthAngle",1/0),Vt(this,"enableDamping",!1),Vt(this,"dampingFactor",.05),Vt(this,"enableZoom",!0),Vt(this,"zoomSpeed",1),Vt(this,"enableRotate",!0),Vt(this,"rotateSpeed",1),Vt(this,"enablePan",!0),Vt(this,"panSpeed",1),Vt(this,"screenSpacePanning",!0),Vt(this,"keyPanSpeed",7),Vt(this,"zoomToCursor",!1),Vt(this,"autoRotate",!1),Vt(this,"autoRotateSpeed",2),Vt(this,"reverseOrbit",!1),Vt(this,"reverseHorizontalOrbit",!1),Vt(this,"reverseVerticalOrbit",!1),Vt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Vt(this,"mouseButtons",{LEFT:jf.ROTATE,MIDDLE:jf.DOLLY,RIGHT:jf.PAN}),Vt(this,"touches",{ONE:Xf.ROTATE,TWO:Xf.DOLLY_PAN}),Vt(this,"target0"),Vt(this,"position0"),Vt(this,"zoom0"),Vt(this,"_domElementKeyEvents",null),Vt(this,"getPolarAngle"),Vt(this,"getAzimuthalAngle"),Vt(this,"setPolarAngle"),Vt(this,"setAzimuthalAngle"),Vt(this,"getDistance"),Vt(this,"getZoomScale"),Vt(this,"listenToKeyEvents"),Vt(this,"stopListenToKeyEvents"),Vt(this,"saveState"),Vt(this,"reset"),Vt(this,"update"),Vt(this,"connect"),Vt(this,"dispose"),Vt(this,"dollyIn"),Vt(this,"dollyOut"),Vt(this,"getScale"),Vt(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=Q=>{let ce=N6(Q,2*Math.PI),Ue=h.phi;Ue<0&&(Ue+=2*Math.PI),ce<0&&(ce+=2*Math.PI);let ee=Math.abs(ce-Ue);2*Math.PI-ee<ee&&(ce<Ue?ce+=2*Math.PI:Ue+=2*Math.PI),d.phi=ce-Ue,i.update()},this.setAzimuthalAngle=Q=>{let ce=N6(Q,2*Math.PI),Ue=h.theta;Ue<0&&(Ue+=2*Math.PI),ce<0&&(ce+=2*Math.PI);let ee=Math.abs(ce-Ue);2*Math.PI-ee<ee&&(ce<Ue?ce+=2*Math.PI:Ue+=2*Math.PI),d.theta=ce-Ue,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Q=>{Q.addEventListener("keydown",ye),this._domElementKeyEvents=Q},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ye),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=o.NONE},this.update=(()=>{const Q=new k,ce=new k(0,1,0),Ue=new Jr().setFromUnitVectors(e.up,ce),ee=Ue.clone().invert(),de=new k,Ie=new Jr,rt=2*Math.PI;return function(){const De=i.object.position;Ue.setFromUnitVectors(e.up,ce),ee.copy(Ue).invert(),Q.copy(De).sub(i.target),Q.applyQuaternion(Ue),h.setFromVector3(Q),i.autoRotate&&l===o.NONE&&Y(X()),i.enableDamping?(h.theta+=d.theta*i.dampingFactor,h.phi+=d.phi*i.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let Ye=i.minAzimuthAngle,Ct=i.maxAzimuthAngle;isFinite(Ye)&&isFinite(Ct)&&(Ye<-Math.PI?Ye+=rt:Ye>Math.PI&&(Ye-=rt),Ct<-Math.PI?Ct+=rt:Ct>Math.PI&&(Ct-=rt),Ye<=Ct?h.theta=Math.max(Ye,Math.min(Ct,h.theta)):h.theta=h.theta>(Ye+Ct)/2?Math.max(Ye,h.theta):Math.min(Ct,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(g,i.dampingFactor):i.target.add(g),i.zoomToCursor&&A||i.object.isOrthographicCamera?h.radius=Le(h.radius):h.radius=Le(h.radius*p),Q.setFromSpherical(h),Q.applyQuaternion(ee),De.copy(i.target).add(Q),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,g.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),g.set(0,0,0));let an=!1;if(i.zoomToCursor&&A){let Qt=null;if(i.object instanceof bi&&i.object.isPerspectiveCamera){const ki=Q.length();Qt=Le(ki*p);const fr=ki-Qt;i.object.position.addScaledVector(N,fr),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const ki=new k(U.x,U.y,0);ki.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),an=!0;const fr=new k(U.x,U.y,0);fr.unproject(i.object),i.object.position.sub(fr).add(ki),i.object.updateMatrixWorld(),Qt=Q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Qt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Qt).add(i.object.position):($y.origin.copy(i.object.position),$y.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot($y.direction))<Hae?e.lookAt(i.target):(O6.setFromNormalAndCoplanarPoint(i.object.up,i.target),$y.intersectPlane(O6,i.target))))}else i.object instanceof _s&&i.object.isOrthographicCamera&&(an=p!==1,an&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,A=!1,an||de.distanceToSquared(i.object.position)>f||8*(1-Ie.dot(i.object.quaternion))>f?(i.dispatchEvent(r),de.copy(i.object.position),Ie.copy(i.object.quaternion),an=!1,!0):!1}})(),this.connect=Q=>{i.domElement=Q,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",pt),i.domElement.addEventListener("pointerdown",We),i.domElement.addEventListener("pointercancel",L),i.domElement.addEventListener("wheel",be)},this.dispose=()=>{var Q,ce,Ue,ee,de,Ie;i.domElement&&(i.domElement.style.touchAction="auto"),(Q=i.domElement)==null||Q.removeEventListener("contextmenu",pt),(ce=i.domElement)==null||ce.removeEventListener("pointerdown",We),(Ue=i.domElement)==null||Ue.removeEventListener("pointercancel",L),(ee=i.domElement)==null||ee.removeEventListener("wheel",be),(de=i.domElement)==null||de.ownerDocument.removeEventListener("pointermove",B),(Ie=i.domElement)==null||Ie.ownerDocument.removeEventListener("pointerup",L),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ye)};const i=this,r={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const f=1e-6,h=new lA,d=new lA;let p=1;const g=new k,y=new xe,S=new xe,b=new xe,v=new xe,x=new xe,E=new xe,T=new xe,w=new xe,R=new xe,N=new k,U=new xe;let A=!1;const C=[],I={};function X(){return 2*Math.PI/60/60*i.autoRotateSpeed}function j(){return Math.pow(.95,i.zoomSpeed)}function Y(Q){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=Q:d.theta-=Q}function Z(Q){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=Q:d.phi-=Q}const z=(()=>{const Q=new k;return function(Ue,ee){Q.setFromMatrixColumn(ee,0),Q.multiplyScalar(-Ue),g.add(Q)}})(),G=(()=>{const Q=new k;return function(Ue,ee){i.screenSpacePanning===!0?Q.setFromMatrixColumn(ee,1):(Q.setFromMatrixColumn(ee,0),Q.crossVectors(i.object.up,Q)),Q.multiplyScalar(Ue),g.add(Q)}})(),q=(()=>{const Q=new k;return function(Ue,ee){const de=i.domElement;if(de&&i.object instanceof bi&&i.object.isPerspectiveCamera){const Ie=i.object.position;Q.copy(Ie).sub(i.target);let rt=Q.length();rt*=Math.tan(i.object.fov/2*Math.PI/180),z(2*Ue*rt/de.clientHeight,i.object.matrix),G(2*ee*rt/de.clientHeight,i.object.matrix)}else de&&i.object instanceof _s&&i.object.isOrthographicCamera?(z(Ue*(i.object.right-i.object.left)/i.object.zoom/de.clientWidth,i.object.matrix),G(ee*(i.object.top-i.object.bottom)/i.object.zoom/de.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function se(Q){i.object instanceof bi&&i.object.isPerspectiveCamera||i.object instanceof _s&&i.object.isOrthographicCamera?p=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function le(Q){se(p/Q)}function me(Q){se(p*Q)}function Ae(Q){if(!i.zoomToCursor||!i.domElement)return;A=!0;const ce=i.domElement.getBoundingClientRect(),Ue=Q.clientX-ce.left,ee=Q.clientY-ce.top,de=ce.width,Ie=ce.height;U.x=Ue/de*2-1,U.y=-(ee/Ie)*2+1,N.set(U.x,U.y,1).unproject(i.object).sub(i.object.position).normalize()}function Le(Q){return Math.max(i.minDistance,Math.min(i.maxDistance,Q))}function Ke(Q){y.set(Q.clientX,Q.clientY)}function yt(Q){Ae(Q),T.set(Q.clientX,Q.clientY)}function he(Q){v.set(Q.clientX,Q.clientY)}function Te(Q){S.set(Q.clientX,Q.clientY),b.subVectors(S,y).multiplyScalar(i.rotateSpeed);const ce=i.domElement;ce&&(Y(2*Math.PI*b.x/ce.clientHeight),Z(2*Math.PI*b.y/ce.clientHeight)),y.copy(S),i.update()}function Fe(Q){w.set(Q.clientX,Q.clientY),R.subVectors(w,T),R.y>0?le(j()):R.y<0&&me(j()),T.copy(w),i.update()}function xt(Q){x.set(Q.clientX,Q.clientY),E.subVectors(x,v).multiplyScalar(i.panSpeed),q(E.x,E.y),v.copy(x),i.update()}function Ze(Q){Ae(Q),Q.deltaY<0?me(j()):Q.deltaY>0&&le(j()),i.update()}function ht(Q){let ce=!1;switch(Q.code){case i.keys.UP:q(0,i.keyPanSpeed),ce=!0;break;case i.keys.BOTTOM:q(0,-i.keyPanSpeed),ce=!0;break;case i.keys.LEFT:q(i.keyPanSpeed,0),ce=!0;break;case i.keys.RIGHT:q(-i.keyPanSpeed,0),ce=!0;break}ce&&(Q.preventDefault(),i.update())}function Ft(){if(C.length==1)y.set(C[0].pageX,C[0].pageY);else{const Q=.5*(C[0].pageX+C[1].pageX),ce=.5*(C[0].pageY+C[1].pageY);y.set(Q,ce)}}function ct(){if(C.length==1)v.set(C[0].pageX,C[0].pageY);else{const Q=.5*(C[0].pageX+C[1].pageX),ce=.5*(C[0].pageY+C[1].pageY);v.set(Q,ce)}}function Me(){const Q=C[0].pageX-C[1].pageX,ce=C[0].pageY-C[1].pageY,Ue=Math.sqrt(Q*Q+ce*ce);T.set(0,Ue)}function Oe(){i.enableZoom&&Me(),i.enablePan&&ct()}function we(){i.enableZoom&&Me(),i.enableRotate&&Ft()}function Ge(Q){if(C.length==1)S.set(Q.pageX,Q.pageY);else{const Ue=ot(Q),ee=.5*(Q.pageX+Ue.x),de=.5*(Q.pageY+Ue.y);S.set(ee,de)}b.subVectors(S,y).multiplyScalar(i.rotateSpeed);const ce=i.domElement;ce&&(Y(2*Math.PI*b.x/ce.clientHeight),Z(2*Math.PI*b.y/ce.clientHeight)),y.copy(S)}function W(Q){if(C.length==1)x.set(Q.pageX,Q.pageY);else{const ce=ot(Q),Ue=.5*(Q.pageX+ce.x),ee=.5*(Q.pageY+ce.y);x.set(Ue,ee)}E.subVectors(x,v).multiplyScalar(i.panSpeed),q(E.x,E.y),v.copy(x)}function mt(Q){const ce=ot(Q),Ue=Q.pageX-ce.x,ee=Q.pageY-ce.y,de=Math.sqrt(Ue*Ue+ee*ee);w.set(0,de),R.set(0,Math.pow(w.y/T.y,i.zoomSpeed)),le(R.y),T.copy(w)}function Qe(Q){i.enableZoom&&mt(Q),i.enablePan&&W(Q)}function bt(Q){i.enableZoom&&mt(Q),i.enableRotate&&Ge(Q)}function We(Q){var ce,Ue;i.enabled!==!1&&(C.length===0&&((ce=i.domElement)==null||ce.ownerDocument.addEventListener("pointermove",B),(Ue=i.domElement)==null||Ue.ownerDocument.addEventListener("pointerup",L)),At(Q),Q.pointerType==="touch"?ut(Q):ne(Q))}function B(Q){i.enabled!==!1&&(Q.pointerType==="touch"?Je(Q):pe(Q))}function L(Q){var ce,Ue,ee;Re(Q),C.length===0&&((ce=i.domElement)==null||ce.releasePointerCapture(Q.pointerId),(Ue=i.domElement)==null||Ue.ownerDocument.removeEventListener("pointermove",B),(ee=i.domElement)==null||ee.ownerDocument.removeEventListener("pointerup",L)),i.dispatchEvent(s),l=o.NONE}function ne(Q){let ce;switch(Q.button){case 0:ce=i.mouseButtons.LEFT;break;case 1:ce=i.mouseButtons.MIDDLE;break;case 2:ce=i.mouseButtons.RIGHT;break;default:ce=-1}switch(ce){case jf.DOLLY:if(i.enableZoom===!1)return;yt(Q),l=o.DOLLY;break;case jf.ROTATE:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(i.enablePan===!1)return;he(Q),l=o.PAN}else{if(i.enableRotate===!1)return;Ke(Q),l=o.ROTATE}break;case jf.PAN:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(i.enableRotate===!1)return;Ke(Q),l=o.ROTATE}else{if(i.enablePan===!1)return;he(Q),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&i.dispatchEvent(a)}function pe(Q){if(i.enabled!==!1)switch(l){case o.ROTATE:if(i.enableRotate===!1)return;Te(Q);break;case o.DOLLY:if(i.enableZoom===!1)return;Fe(Q);break;case o.PAN:if(i.enablePan===!1)return;xt(Q);break}}function be(Q){i.enabled===!1||i.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(Q.preventDefault(),i.dispatchEvent(a),Ze(Q),i.dispatchEvent(s))}function ye(Q){i.enabled===!1||i.enablePan===!1||ht(Q)}function ut(Q){switch(Pe(Q),C.length){case 1:switch(i.touches.ONE){case Xf.ROTATE:if(i.enableRotate===!1)return;Ft(),l=o.TOUCH_ROTATE;break;case Xf.PAN:if(i.enablePan===!1)return;ct(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(i.touches.TWO){case Xf.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Oe(),l=o.TOUCH_DOLLY_PAN;break;case Xf.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;we(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&i.dispatchEvent(a)}function Je(Q){switch(Pe(Q),l){case o.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ge(Q),i.update();break;case o.TOUCH_PAN:if(i.enablePan===!1)return;W(Q),i.update();break;case o.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Qe(Q),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;bt(Q),i.update();break;default:l=o.NONE}}function pt(Q){i.enabled!==!1&&Q.preventDefault()}function At(Q){C.push(Q)}function Re(Q){delete I[Q.pointerId];for(let ce=0;ce<C.length;ce++)if(C[ce].pointerId==Q.pointerId){C.splice(ce,1);return}}function Pe(Q){let ce=I[Q.pointerId];ce===void 0&&(ce=new xe,I[Q.pointerId]=ce),ce.set(Q.pageX,Q.pageY)}function ot(Q){const ce=Q.pointerId===C[0].pointerId?C[1]:C[0];return I[ce.pointerId]}this.dollyIn=(Q=j())=>{me(Q),i.update()},this.dollyOut=(Q=j())=>{le(Q),i.update()},this.getScale=()=>p,this.setScale=Q=>{se(Q),i.update()},this.getZoomScale=()=>j(),n!==void 0&&this.connect(n),this.update()}};class Gae extends tC{constructor(e){super(e),this.type=Ei}parse(e){const s=function(U,A){switch(U){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(A||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(A||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(A||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(A||""))}},h=`
`,d=function(U,A,C){A=A||1024;let X=U.pos,j=-1,Y=0,Z="",z=String.fromCharCode.apply(null,new Uint16Array(U.subarray(X,X+128)));for(;0>(j=z.indexOf(h))&&Y<A&&X<U.byteLength;)Z+=z,Y+=z.length,X+=128,z+=String.fromCharCode.apply(null,new Uint16Array(U.subarray(X,X+128)));return-1<j?(U.pos+=Y+j+1,Z+z.slice(0,j)):!1},p=function(U){const A=/^#\?(\S+)/,C=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,I=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,X=/^\s*FORMAT=(\S+)\s*$/,j=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Y={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Z,z;for((U.pos>=U.byteLength||!(Z=d(U)))&&s(1,"no header found"),(z=Z.match(A))||s(3,"bad initial token"),Y.valid|=1,Y.programtype=z[1],Y.string+=Z+`
`;Z=d(U),Z!==!1;){if(Y.string+=Z+`
`,Z.charAt(0)==="#"){Y.comments+=Z+`
`;continue}if((z=Z.match(C))&&(Y.gamma=parseFloat(z[1])),(z=Z.match(I))&&(Y.exposure=parseFloat(z[1])),(z=Z.match(X))&&(Y.valid|=2,Y.format=z[1]),(z=Z.match(j))&&(Y.valid|=4,Y.height=parseInt(z[1],10),Y.width=parseInt(z[2],10)),Y.valid&2&&Y.valid&4)break}return Y.valid&2||s(3,"missing format specifier"),Y.valid&4||s(3,"missing image size specifier"),Y},g=function(U,A,C){const I=A;if(I<8||I>32767||U[0]!==2||U[1]!==2||U[2]&128)return new Uint8Array(U);I!==(U[2]<<8|U[3])&&s(3,"wrong scanline width");const X=new Uint8Array(4*A*C);X.length||s(4,"unable to allocate buffer space");let j=0,Y=0;const Z=4*I,z=new Uint8Array(4),G=new Uint8Array(Z);let q=C;for(;q>0&&Y<U.byteLength;){Y+4>U.byteLength&&s(1),z[0]=U[Y++],z[1]=U[Y++],z[2]=U[Y++],z[3]=U[Y++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=I)&&s(3,"bad rgbe scanline format");let se=0,le;for(;se<Z&&Y<U.byteLength;){le=U[Y++];const Ae=le>128;if(Ae&&(le-=128),(le===0||se+le>Z)&&s(3,"bad scanline data"),Ae){const Le=U[Y++];for(let Ke=0;Ke<le;Ke++)G[se++]=Le}else G.set(U.subarray(Y,Y+le),se),se+=le,Y+=le}const me=I;for(let Ae=0;Ae<me;Ae++){let Le=0;X[j]=G[Ae+Le],Le+=I,X[j+1]=G[Ae+Le],Le+=I,X[j+2]=G[Ae+Le],Le+=I,X[j+3]=G[Ae+Le],j+=4}q--}return X},y=function(U,A,C,I){const X=U[A+3],j=Math.pow(2,X-128)/255;C[I+0]=U[A+0]*j,C[I+1]=U[A+1]*j,C[I+2]=U[A+2]*j,C[I+3]=1},S=function(U,A,C,I){const X=U[A+3],j=Math.pow(2,X-128)/255;C[I+0]=Qf.toHalfFloat(Math.min(U[A+0]*j,65504)),C[I+1]=Qf.toHalfFloat(Math.min(U[A+1]*j,65504)),C[I+2]=Qf.toHalfFloat(Math.min(U[A+2]*j,65504)),C[I+3]=Qf.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const v=p(b),x=v.width,E=v.height,T=g(b.subarray(b.pos),x,E);let w,R,N;switch(this.type){case ai:N=T.length/4;const U=new Float32Array(N*4);for(let C=0;C<N;C++)y(T,C*4,U,C*4);w=U,R=ai;break;case Ei:N=T.length/4;const A=new Uint16Array(N*4);for(let C=0;C<N;C++)S(T,C*4,A,C*4);w=A,R=Ei;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:x,height:E,data:w,header:v.string,gamma:v.gamma,exposure:v.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,n,i,r){function a(s,o){switch(s.type){case ai:case Ei:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=rn,s.magFilter=rn,s.generateMipmaps=!1,s.flipY=!0;break}n&&n(s,o)}return super.load(e,a,i,r)}}const N0=YF>=152;class kae extends tC{constructor(e){super(e),this.type=Ei}parse(e){const A=Math.pow(2.7182818,2.2);function C(P,V){for(var ie=0,ge=0;ge<65536;++ge)(ge==0||P[ge>>3]&1<<(ge&7))&&(V[ie++]=ge);for(var Ee=ie-1;ie<65536;)V[ie++]=0;return Ee}function I(P){for(var V=0;V<16384;V++)P[V]={},P[V].len=0,P[V].lit=0,P[V].p=null}const X={l:0,c:0,lc:0};function j(P,V,ie,ge,Ee){for(;ie<P;)V=V<<8|ot(ge,Ee),ie+=8;ie-=P,X.l=V>>ie&(1<<P)-1,X.c=V,X.lc=ie}const Y=new Array(59);function Z(P){for(var V=0;V<=58;++V)Y[V]=0;for(var V=0;V<65537;++V)Y[P[V]]+=1;for(var ie=0,V=58;V>0;--V){var ge=ie+Y[V]>>1;Y[V]=ie,ie=ge}for(var V=0;V<65537;++V){var Ee=P[V];Ee>0&&(P[V]=Ee|Y[Ee]++<<6)}}function z(P,V,ie,ge,Ee,Se,qe){for(var Ve=ie,ke=0,Be=0;Ee<=Se;Ee++){if(Ve.value-ie.value>ge)return!1;j(6,ke,Be,P,Ve);var nt=X.l;if(ke=X.c,Be=X.lc,qe[Ee]=nt,nt==63){if(Ve.value-ie.value>ge)throw"Something wrong with hufUnpackEncTable";j(8,ke,Be,P,Ve);var et=X.l+6;if(ke=X.c,Be=X.lc,Ee+et>Se+1)throw"Something wrong with hufUnpackEncTable";for(;et--;)qe[Ee++]=0;Ee--}else if(nt>=59){var et=nt-59+2;if(Ee+et>Se+1)throw"Something wrong with hufUnpackEncTable";for(;et--;)qe[Ee++]=0;Ee--}}Z(qe)}function G(P){return P&63}function q(P){return P>>6}function se(P,V,ie,ge){for(;V<=ie;V++){var Ee=q(P[V]),Se=G(P[V]);if(Ee>>Se)throw"Invalid table entry";if(Se>14){var qe=ge[Ee>>Se-14];if(qe.len)throw"Invalid table entry";if(qe.lit++,qe.p){var Ve=qe.p;qe.p=new Array(qe.lit);for(var ke=0;ke<qe.lit-1;++ke)qe.p[ke]=Ve[ke]}else qe.p=new Array(1);qe.p[qe.lit-1]=V}else if(Se)for(var Be=0,ke=1<<14-Se;ke>0;ke--){var qe=ge[(Ee<<14-Se)+Be];if(qe.len||qe.p)throw"Invalid table entry";qe.len=Se,qe.lit=V,Be++}}return!0}const le={c:0,lc:0};function me(P,V,ie,ge){P=P<<8|ot(ie,ge),V+=8,le.c=P,le.lc=V}const Ae={c:0,lc:0};function Le(P,V,ie,ge,Ee,Se,qe,Ve,ke,Be){if(P==V){ge<8&&(me(ie,ge,Ee,qe),ie=le.c,ge=le.lc),ge-=8;var nt=ie>>ge,nt=new Uint8Array([nt])[0];if(ke.value+nt>Be)return!1;for(var et=Ve[ke.value-1];nt-- >0;)Ve[ke.value++]=et}else if(ke.value<Be)Ve[ke.value++]=P;else return!1;Ae.c=ie,Ae.lc=ge}function Ke(P){return P&65535}function yt(P){var V=Ke(P);return V>32767?V-65536:V}const he={a:0,b:0};function Te(P,V){var ie=yt(P),ge=yt(V),Ee=ge,Se=ie+(Ee&1)+(Ee>>1),qe=Se,Ve=Se-Ee;he.a=qe,he.b=Ve}function Fe(P,V){var ie=Ke(P),ge=Ke(V),Ee=ie-(ge>>1)&65535,Se=ge+Ee-32768&65535;he.a=Se,he.b=Ee}function xt(P,V,ie,ge,Ee,Se,qe){for(var Ve=qe<16384,ke=ie>Ee?Ee:ie,Be=1,nt;Be<=ke;)Be<<=1;for(Be>>=1,nt=Be,Be>>=1;Be>=1;){for(var et=0,F=et+Se*(Ee-nt),K=Se*Be,ae=Se*nt,oe=ge*Be,re=ge*nt,ze,je,Xe,at;et<=F;et+=ae){for(var it=et,wt=et+ge*(ie-nt);it<=wt;it+=re){var st=it+oe,Dt=it+K,sn=Dt+oe;Ve?(Te(P[it+V],P[Dt+V]),ze=he.a,Xe=he.b,Te(P[st+V],P[sn+V]),je=he.a,at=he.b,Te(ze,je),P[it+V]=he.a,P[st+V]=he.b,Te(Xe,at),P[Dt+V]=he.a,P[sn+V]=he.b):(Fe(P[it+V],P[Dt+V]),ze=he.a,Xe=he.b,Fe(P[st+V],P[sn+V]),je=he.a,at=he.b,Fe(ze,je),P[it+V]=he.a,P[st+V]=he.b,Fe(Xe,at),P[Dt+V]=he.a,P[sn+V]=he.b)}if(ie&Be){var Dt=it+K;Ve?Te(P[it+V],P[Dt+V]):Fe(P[it+V],P[Dt+V]),ze=he.a,P[Dt+V]=he.b,P[it+V]=ze}}if(Ee&Be)for(var it=et,wt=et+ge*(ie-nt);it<=wt;it+=re){var st=it+oe;Ve?Te(P[it+V],P[st+V]):Fe(P[it+V],P[st+V]),ze=he.a,P[st+V]=he.b,P[it+V]=ze}nt=Be,Be>>=1}return et}function Ze(P,V,ie,ge,Ee,Se,qe,Ve,ke,Be){for(var nt=0,et=0,F=Ve,K=Math.trunc(Ee.value+(Se+7)/8);Ee.value<K;)for(me(nt,et,ie,Ee),nt=le.c,et=le.lc;et>=14;){var ae=nt>>et-14&16383,oe=V[ae];if(oe.len)et-=oe.len,Le(oe.lit,qe,nt,et,ie,ge,Ee,ke,Be,F),nt=Ae.c,et=Ae.lc;else{if(!oe.p)throw"hufDecode issues";var re;for(re=0;re<oe.lit;re++){for(var ze=G(P[oe.p[re]]);et<ze&&Ee.value<K;)me(nt,et,ie,Ee),nt=le.c,et=le.lc;if(et>=ze&&q(P[oe.p[re]])==(nt>>et-ze&(1<<ze)-1)){et-=ze,Le(oe.p[re],qe,nt,et,ie,ge,Ee,ke,Be,F),nt=Ae.c,et=Ae.lc;break}}if(re==oe.lit)throw"hufDecode issues"}}var je=8-Se&7;for(nt>>=je,et-=je;et>0;){var oe=V[nt<<14-et&16383];if(oe.len)et-=oe.len,Le(oe.lit,qe,nt,et,ie,ge,Ee,ke,Be,F),nt=Ae.c,et=Ae.lc;else throw"hufDecode issues"}return!0}function ht(P,V,ie,ge,Ee,Se){var qe={value:0},Ve=ie.value,ke=Pe(V,ie),Be=Pe(V,ie);ie.value+=4;var nt=Pe(V,ie);if(ie.value+=4,ke<0||ke>=65537||Be<0||Be>=65537)throw"Something wrong with HUF_ENCSIZE";var et=new Array(65537),F=new Array(16384);I(F);var K=ge-(ie.value-Ve);if(z(P,V,ie,K,ke,Be,et),nt>8*(ge-(ie.value-Ve)))throw"Something wrong with hufUncompress";se(et,ke,Be,F),Ze(et,F,P,V,ie,nt,Be,Se,Ee,qe)}function Ft(P,V,ie){for(var ge=0;ge<ie;++ge)V[ge]=P[V[ge]]}function ct(P){for(var V=1;V<P.length;V++){var ie=P[V-1]+P[V]-128;P[V]=ie}}function Me(P,V){for(var ie=0,ge=Math.floor((P.length+1)/2),Ee=0,Se=P.length-1;!(Ee>Se||(V[Ee++]=P[ie++],Ee>Se));)V[Ee++]=P[ge++]}function Oe(P){for(var V=P.byteLength,ie=new Array,ge=0,Ee=new DataView(P);V>0;){var Se=Ee.getInt8(ge++);if(Se<0){var qe=-Se;V-=qe+1;for(var Ve=0;Ve<qe;Ve++)ie.push(Ee.getUint8(ge++))}else{var qe=Se;V-=2;for(var ke=Ee.getUint8(ge++),Ve=0;Ve<qe+1;Ve++)ie.push(ke)}}return ie}function we(P,V,ie,ge,Ee,Se){var st=new DataView(Se.buffer),qe=ie[P.idx[0]].width,Ve=ie[P.idx[0]].height,ke=3,Be=Math.floor(qe/8),nt=Math.ceil(qe/8),et=Math.ceil(Ve/8),F=qe-(nt-1)*8,K=Ve-(et-1)*8,ae={value:0},oe=new Array(ke),re=new Array(ke),ze=new Array(ke),je=new Array(ke),Xe=new Array(ke);for(let Nt=0;Nt<ke;++Nt)Xe[Nt]=V[P.idx[Nt]],oe[Nt]=Nt<1?0:oe[Nt-1]+nt*et,re[Nt]=new Float32Array(64),ze[Nt]=new Uint16Array(64),je[Nt]=new Uint16Array(nt*64);for(let Nt=0;Nt<et;++Nt){var at=8;Nt==et-1&&(at=K);var it=8;for(let Lt=0;Lt<nt;++Lt){Lt==nt-1&&(it=F);for(let Mt=0;Mt<ke;++Mt)ze[Mt].fill(0),ze[Mt][0]=Ee[oe[Mt]++],Ge(ae,ge,ze[Mt]),W(ze[Mt],re[Mt]),mt(re[Mt]);Qe(re);for(let Mt=0;Mt<ke;++Mt)bt(re[Mt],je[Mt],Lt*64)}let gt=0;for(let Lt=0;Lt<ke;++Lt){const Mt=ie[P.idx[Lt]].type;for(let Fn=8*Nt;Fn<8*Nt+at;++Fn){gt=Xe[Lt][Fn];for(let Or=0;Or<Be;++Or){const Un=Or*64+(Fn&7)*8;st.setUint16(gt+0*2*Mt,je[Lt][Un+0],!0),st.setUint16(gt+1*2*Mt,je[Lt][Un+1],!0),st.setUint16(gt+2*2*Mt,je[Lt][Un+2],!0),st.setUint16(gt+3*2*Mt,je[Lt][Un+3],!0),st.setUint16(gt+4*2*Mt,je[Lt][Un+4],!0),st.setUint16(gt+5*2*Mt,je[Lt][Un+5],!0),st.setUint16(gt+6*2*Mt,je[Lt][Un+6],!0),st.setUint16(gt+7*2*Mt,je[Lt][Un+7],!0),gt+=8*2*Mt}}if(Be!=nt)for(let Fn=8*Nt;Fn<8*Nt+at;++Fn){const Or=Xe[Lt][Fn]+8*Be*2*Mt,Un=Be*64+(Fn&7)*8;for(let Gr=0;Gr<it;++Gr)st.setUint16(Or+Gr*2*Mt,je[Lt][Un+Gr],!0)}}}for(var wt=new Uint16Array(qe),st=new DataView(Se.buffer),Dt=0;Dt<ke;++Dt){ie[P.idx[Dt]].decoded=!0;var sn=ie[P.idx[Dt]].type;if(ie[Dt].type==2)for(var Dn=0;Dn<Ve;++Dn){const Nt=Xe[Dt][Dn];for(var ln=0;ln<qe;++ln)wt[ln]=st.getUint16(Nt+ln*2*sn,!0);for(var ln=0;ln<qe;++ln)st.setFloat32(Nt+ln*2*sn,de(wt[ln]),!0)}}}function Ge(P,V,ie){for(var ge,Ee=1;Ee<64;)ge=V[P.value],ge==65280?Ee=64:ge>>8==255?Ee+=ge&255:(ie[Ee]=ge,Ee++),P.value++}function W(P,V){V[0]=de(P[0]),V[1]=de(P[1]),V[2]=de(P[5]),V[3]=de(P[6]),V[4]=de(P[14]),V[5]=de(P[15]),V[6]=de(P[27]),V[7]=de(P[28]),V[8]=de(P[2]),V[9]=de(P[4]),V[10]=de(P[7]),V[11]=de(P[13]),V[12]=de(P[16]),V[13]=de(P[26]),V[14]=de(P[29]),V[15]=de(P[42]),V[16]=de(P[3]),V[17]=de(P[8]),V[18]=de(P[12]),V[19]=de(P[17]),V[20]=de(P[25]),V[21]=de(P[30]),V[22]=de(P[41]),V[23]=de(P[43]),V[24]=de(P[9]),V[25]=de(P[11]),V[26]=de(P[18]),V[27]=de(P[24]),V[28]=de(P[31]),V[29]=de(P[40]),V[30]=de(P[44]),V[31]=de(P[53]),V[32]=de(P[10]),V[33]=de(P[19]),V[34]=de(P[23]),V[35]=de(P[32]),V[36]=de(P[39]),V[37]=de(P[45]),V[38]=de(P[52]),V[39]=de(P[54]),V[40]=de(P[20]),V[41]=de(P[22]),V[42]=de(P[33]),V[43]=de(P[38]),V[44]=de(P[46]),V[45]=de(P[51]),V[46]=de(P[55]),V[47]=de(P[60]),V[48]=de(P[21]),V[49]=de(P[34]),V[50]=de(P[37]),V[51]=de(P[47]),V[52]=de(P[50]),V[53]=de(P[56]),V[54]=de(P[59]),V[55]=de(P[61]),V[56]=de(P[35]),V[57]=de(P[36]),V[58]=de(P[48]),V[59]=de(P[49]),V[60]=de(P[57]),V[61]=de(P[58]),V[62]=de(P[62]),V[63]=de(P[63])}function mt(P){const V=.5*Math.cos(.7853975),ie=.5*Math.cos(3.14159/16),ge=.5*Math.cos(3.14159/8),Ee=.5*Math.cos(3*3.14159/16),Se=.5*Math.cos(5*3.14159/16),qe=.5*Math.cos(3*3.14159/8),Ve=.5*Math.cos(7*3.14159/16);for(var ke=new Array(4),Be=new Array(4),nt=new Array(4),et=new Array(4),F=0;F<8;++F){var K=F*8;ke[0]=ge*P[K+2],ke[1]=qe*P[K+2],ke[2]=ge*P[K+6],ke[3]=qe*P[K+6],Be[0]=ie*P[K+1]+Ee*P[K+3]+Se*P[K+5]+Ve*P[K+7],Be[1]=Ee*P[K+1]-Ve*P[K+3]-ie*P[K+5]-Se*P[K+7],Be[2]=Se*P[K+1]-ie*P[K+3]+Ve*P[K+5]+Ee*P[K+7],Be[3]=Ve*P[K+1]-Se*P[K+3]+Ee*P[K+5]-ie*P[K+7],nt[0]=V*(P[K+0]+P[K+4]),nt[3]=V*(P[K+0]-P[K+4]),nt[1]=ke[0]+ke[3],nt[2]=ke[1]-ke[2],et[0]=nt[0]+nt[1],et[1]=nt[3]+nt[2],et[2]=nt[3]-nt[2],et[3]=nt[0]-nt[1],P[K+0]=et[0]+Be[0],P[K+1]=et[1]+Be[1],P[K+2]=et[2]+Be[2],P[K+3]=et[3]+Be[3],P[K+4]=et[3]-Be[3],P[K+5]=et[2]-Be[2],P[K+6]=et[1]-Be[1],P[K+7]=et[0]-Be[0]}for(var ae=0;ae<8;++ae)ke[0]=ge*P[16+ae],ke[1]=qe*P[16+ae],ke[2]=ge*P[48+ae],ke[3]=qe*P[48+ae],Be[0]=ie*P[8+ae]+Ee*P[24+ae]+Se*P[40+ae]+Ve*P[56+ae],Be[1]=Ee*P[8+ae]-Ve*P[24+ae]-ie*P[40+ae]-Se*P[56+ae],Be[2]=Se*P[8+ae]-ie*P[24+ae]+Ve*P[40+ae]+Ee*P[56+ae],Be[3]=Ve*P[8+ae]-Se*P[24+ae]+Ee*P[40+ae]-ie*P[56+ae],nt[0]=V*(P[ae]+P[32+ae]),nt[3]=V*(P[ae]-P[32+ae]),nt[1]=ke[0]+ke[3],nt[2]=ke[1]-ke[2],et[0]=nt[0]+nt[1],et[1]=nt[3]+nt[2],et[2]=nt[3]-nt[2],et[3]=nt[0]-nt[1],P[0+ae]=et[0]+Be[0],P[8+ae]=et[1]+Be[1],P[16+ae]=et[2]+Be[2],P[24+ae]=et[3]+Be[3],P[32+ae]=et[3]-Be[3],P[40+ae]=et[2]-Be[2],P[48+ae]=et[1]-Be[1],P[56+ae]=et[0]-Be[0]}function Qe(P){for(var V=0;V<64;++V){var ie=P[0][V],ge=P[1][V],Ee=P[2][V];P[0][V]=ie+1.5747*Ee,P[1][V]=ie-.1873*ge-.4682*Ee,P[2][V]=ie+1.8556*ge}}function bt(P,V,ie){for(var ge=0;ge<64;++ge)V[ie+ge]=Qf.toHalfFloat(We(P[ge]))}function We(P){return P<=1?Math.sign(P)*Math.pow(Math.abs(P),2.2):Math.sign(P)*Math.pow(A,Math.abs(P)-1)}function B(P){return new DataView(P.array.buffer,P.offset.value,P.size)}function L(P){var V=P.viewer.buffer.slice(P.offset.value,P.offset.value+P.size),ie=new Uint8Array(Oe(V)),ge=new Uint8Array(ie.length);return ct(ie),Me(ie,ge),new DataView(ge.buffer)}function ne(P){var V=P.array.slice(P.offset.value,P.offset.value+P.size),ie=Zy(V),ge=new Uint8Array(ie.length);return ct(ie),Me(ie,ge),new DataView(ge.buffer)}function pe(P){for(var V=P.viewer,ie={value:P.offset.value},ge=new Uint16Array(P.width*P.scanlineBlockSize*(P.channels*P.type)),Ee=new Uint8Array(8192),Se=0,qe=new Array(P.channels),Ve=0;Ve<P.channels;Ve++)qe[Ve]={},qe[Ve].start=Se,qe[Ve].end=qe[Ve].start,qe[Ve].nx=P.width,qe[Ve].ny=P.lines,qe[Ve].size=P.type,Se+=qe[Ve].nx*qe[Ve].ny*qe[Ve].size;var ke=Ie(V,ie),Be=Ie(V,ie);if(Be>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ke<=Be)for(var Ve=0;Ve<Be-ke+1;Ve++)Ee[Ve+ke]=Q(V,ie);var nt=new Uint16Array(65536),et=C(Ee,nt),F=Pe(V,ie);ht(P.array,V,ie,F,ge,Se);for(var Ve=0;Ve<P.channels;++Ve)for(var K=qe[Ve],ae=0;ae<qe[Ve].size;++ae)xt(ge,K.start+ae,K.nx,K.size,K.ny,K.nx*K.size,et);Ft(nt,ge,Se);for(var oe=0,re=new Uint8Array(ge.buffer.byteLength),ze=0;ze<P.lines;ze++)for(var je=0;je<P.channels;je++){var K=qe[je],Xe=K.nx*K.size,at=new Uint8Array(ge.buffer,K.end*2,Xe*2);re.set(at,oe),oe+=Xe*2,K.end+=Xe}return new DataView(re.buffer)}function be(P){var V=P.array.slice(P.offset.value,P.offset.value+P.size),ie=Zy(V);const ge=P.lines*P.channels*P.width,Ee=P.type==1?new Uint16Array(ge):new Uint32Array(ge);let Se=0,qe=0;const Ve=new Array(4);for(let ke=0;ke<P.lines;ke++)for(let Be=0;Be<P.channels;Be++){let nt=0;switch(P.type){case 1:Ve[0]=Se,Ve[1]=Ve[0]+P.width,Se=Ve[1]+P.width;for(let et=0;et<P.width;++et){const F=ie[Ve[0]++]<<8|ie[Ve[1]++];nt+=F,Ee[qe]=nt,qe++}break;case 2:Ve[0]=Se,Ve[1]=Ve[0]+P.width,Ve[2]=Ve[1]+P.width,Se=Ve[2]+P.width;for(let et=0;et<P.width;++et){const F=ie[Ve[0]++]<<24|ie[Ve[1]++]<<16|ie[Ve[2]++]<<8;nt+=F,Ee[qe]=nt,qe++}break}}return new DataView(Ee.buffer)}function ye(P){var V=P.viewer,ie={value:P.offset.value},ge=new Uint8Array(P.width*P.lines*(P.channels*P.type*2)),Ee={version:ce(V,ie),unknownUncompressedSize:ce(V,ie),unknownCompressedSize:ce(V,ie),acCompressedSize:ce(V,ie),dcCompressedSize:ce(V,ie),rleCompressedSize:ce(V,ie),rleUncompressedSize:ce(V,ie),rleRawSize:ce(V,ie),totalAcUncompressedCount:ce(V,ie),totalDcUncompressedCount:ce(V,ie),acCompression:ce(V,ie)};if(Ee.version<2)throw"EXRLoader.parse: "+Dr.compression+" version "+Ee.version+" is unsupported";for(var Se=new Array,qe=Ie(V,ie)-2;qe>0;){var Ve=ut(V.buffer,ie),ke=Q(V,ie),Be=ke>>2&3,nt=(ke>>4)-1,et=new Int8Array([nt])[0],F=Q(V,ie);Se.push({name:Ve,index:et,type:F,compression:Be}),qe-=Ve.length+3}for(var K=Dr.channels,ae=new Array(P.channels),oe=0;oe<P.channels;++oe){var re=ae[oe]={},ze=K[oe];re.name=ze.name,re.compression=0,re.decoded=!1,re.type=ze.pixelType,re.pLinear=ze.pLinear,re.width=P.width,re.height=P.lines}for(var je={idx:new Array(3)},Xe=0;Xe<P.channels;++Xe)for(var re=ae[Xe],oe=0;oe<Se.length;++oe){var at=Se[oe];re.name==at.name&&(re.compression=at.compression,at.index>=0&&(je.idx[at.index]=Xe),re.offset=Xe)}if(Ee.acCompressedSize>0)switch(Ee.acCompression){case 0:var st=new Uint16Array(Ee.totalAcUncompressedCount);ht(P.array,V,ie,Ee.acCompressedSize,st,Ee.totalAcUncompressedCount);break;case 1:var it=P.array.slice(ie.value,ie.value+Ee.totalAcUncompressedCount),wt=Zy(it),st=new Uint16Array(wt.buffer);ie.value+=Ee.totalAcUncompressedCount;break}if(Ee.dcCompressedSize>0){var Dt={array:P.array,offset:ie,size:Ee.dcCompressedSize},sn=new Uint16Array(ne(Dt).buffer);ie.value+=Ee.dcCompressedSize}if(Ee.rleRawSize>0){var it=P.array.slice(ie.value,ie.value+Ee.rleCompressedSize),wt=Zy(it),Dn=Oe(wt.buffer);ie.value+=Ee.rleCompressedSize}for(var ln=0,Nt=new Array(ae.length),oe=0;oe<Nt.length;++oe)Nt[oe]=new Array;for(var gt=0;gt<P.lines;++gt)for(var Lt=0;Lt<ae.length;++Lt)Nt[Lt].push(ln),ln+=ae[Lt].width*P.type*2;we(je,Nt,ae,st,sn,ge);for(var oe=0;oe<ae.length;++oe){var re=ae[oe];if(!re.decoded)switch(re.compression){case 2:for(var Mt=0,Fn=0,gt=0;gt<P.lines;++gt){for(var Or=Nt[oe][Mt],Un=0;Un<re.width;++Un){for(var Gr=0;Gr<2*re.type;++Gr)ge[Or++]=Dn[Fn+Gr*re.width*re.height];Fn++}Mt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ge.buffer)}function ut(P,V){for(var ie=new Uint8Array(P),ge=0;ie[V.value+ge]!=0;)ge+=1;var Ee=new TextDecoder().decode(ie.slice(V.value,V.value+ge));return V.value=V.value+ge+1,Ee}function Je(P,V,ie){var ge=new TextDecoder().decode(new Uint8Array(P).slice(V.value,V.value+ie));return V.value=V.value+ie,ge}function pt(P,V){var ie=Re(P,V),ge=Pe(P,V);return[ie,ge]}function At(P,V){var ie=Pe(P,V),ge=Pe(P,V);return[ie,ge]}function Re(P,V){var ie=P.getInt32(V.value,!0);return V.value=V.value+4,ie}function Pe(P,V){var ie=P.getUint32(V.value,!0);return V.value=V.value+4,ie}function ot(P,V){var ie=P[V.value];return V.value=V.value+1,ie}function Q(P,V){var ie=P.getUint8(V.value);return V.value=V.value+1,ie}const ce=function(P,V){let ie;return"getBigInt64"in DataView.prototype?ie=Number(P.getBigInt64(V.value,!0)):ie=P.getUint32(V.value+4,!0)+Number(P.getUint32(V.value,!0)<<32),V.value+=8,ie};function Ue(P,V){var ie=P.getFloat32(V.value,!0);return V.value+=4,ie}function ee(P,V){return Qf.toHalfFloat(Ue(P,V))}function de(P){var V=(P&31744)>>10,ie=P&1023;return(P>>15?-1:1)*(V?V===31?ie?NaN:1/0:Math.pow(2,V-15)*(1+ie/1024):6103515625e-14*(ie/1024))}function Ie(P,V){var ie=P.getUint16(V.value,!0);return V.value+=2,ie}function rt(P,V){return de(Ie(P,V))}function He(P,V,ie,ge){for(var Ee=ie.value,Se=[];ie.value<Ee+ge-1;){var qe=ut(V,ie),Ve=Re(P,ie),ke=Q(P,ie);ie.value+=3;var Be=Re(P,ie),nt=Re(P,ie);Se.push({name:qe,pixelType:Ve,pLinear:ke,xSampling:Be,ySampling:nt})}return ie.value+=1,Se}function De(P,V){var ie=Ue(P,V),ge=Ue(P,V),Ee=Ue(P,V),Se=Ue(P,V),qe=Ue(P,V),Ve=Ue(P,V),ke=Ue(P,V),Be=Ue(P,V);return{redX:ie,redY:ge,greenX:Ee,greenY:Se,blueX:qe,blueY:Ve,whiteX:ke,whiteY:Be}}function Ye(P,V){var ie=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ge=Q(P,V);return ie[ge]}function Ct(P,V){var ie=Pe(P,V),ge=Pe(P,V),Ee=Pe(P,V),Se=Pe(P,V);return{xMin:ie,yMin:ge,xMax:Ee,yMax:Se}}function an(P,V){var ie=["INCREASING_Y"],ge=Q(P,V);return ie[ge]}function Qt(P,V){var ie=Ue(P,V),ge=Ue(P,V);return[ie,ge]}function ki(P,V){var ie=Ue(P,V),ge=Ue(P,V),Ee=Ue(P,V);return[ie,ge,Ee]}function fr(P,V,ie,ge,Ee){if(ge==="string"||ge==="stringvector"||ge==="iccProfile")return Je(V,ie,Ee);if(ge==="chlist")return He(P,V,ie,Ee);if(ge==="chromaticities")return De(P,ie);if(ge==="compression")return Ye(P,ie);if(ge==="box2i")return Ct(P,ie);if(ge==="lineOrder")return an(P,ie);if(ge==="float")return Ue(P,ie);if(ge==="v2f")return Qt(P,ie);if(ge==="v3f")return ki(P,ie);if(ge==="int")return Re(P,ie);if(ge==="rational")return pt(P,ie);if(ge==="timecode")return At(P,ie);if(ge==="preview")return ie.value+=Ee,"skipped";ie.value+=Ee}function Wh(P,V,ie){const ge={};if(P.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ge.version=P.getUint8(4);const Ee=P.getUint8(5);ge.spec={singleTile:!!(Ee&2),longName:!!(Ee&4),deepFormat:!!(Ee&8),multiPart:!!(Ee&16)},ie.value=8;for(var Se=!0;Se;){var qe=ut(V,ie);if(qe==0)Se=!1;else{var Ve=ut(V,ie),ke=Pe(P,ie),Be=fr(P,V,ie,Ve,ke);Be===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Ve}'.`):ge[qe]=Be}}if(Ee&-5)throw console.error("EXRHeader:",ge),"THREE.EXRLoader: provided file is currently unsupported.";return ge}function Tc(P,V,ie,ge,Ee){const Se={size:0,viewer:V,array:ie,offset:ge,width:P.dataWindow.xMax-P.dataWindow.xMin+1,height:P.dataWindow.yMax-P.dataWindow.yMin+1,channels:P.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:P.channels[0].pixelType,uncompress:null,getter:null,format:null,[N0?"colorSpace":"encoding"]:null};switch(P.compression){case"NO_COMPRESSION":Se.lines=1,Se.uncompress=B;break;case"RLE_COMPRESSION":Se.lines=1,Se.uncompress=L;break;case"ZIPS_COMPRESSION":Se.lines=1,Se.uncompress=ne;break;case"ZIP_COMPRESSION":Se.lines=16,Se.uncompress=ne;break;case"PIZ_COMPRESSION":Se.lines=32,Se.uncompress=pe;break;case"PXR24_COMPRESSION":Se.lines=16,Se.uncompress=be;break;case"DWAA_COMPRESSION":Se.lines=32,Se.uncompress=ye;break;case"DWAB_COMPRESSION":Se.lines=256,Se.uncompress=ye;break;default:throw"EXRLoader.parse: "+P.compression+" is unsupported"}if(Se.scanlineBlockSize=Se.lines,Se.type==1)switch(Ee){case ai:Se.getter=rt,Se.inputSize=2;break;case Ei:Se.getter=Ie,Se.inputSize=2;break}else if(Se.type==2)switch(Ee){case ai:Se.getter=Ue,Se.inputSize=4;break;case Ei:Se.getter=ee,Se.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Se.type+" for "+P.compression+".";Se.blockCount=(P.dataWindow.yMax+1)/Se.scanlineBlockSize;for(var qe=0;qe<Se.blockCount;qe++)ce(V,ge);Se.outputChannels=Se.channels==3?4:Se.channels;const Ve=Se.width*Se.height*Se.outputChannels;switch(Ee){case ai:Se.byteArray=new Float32Array(Ve),Se.channels<Se.outputChannels&&Se.byteArray.fill(1,0,Ve);break;case Ei:Se.byteArray=new Uint16Array(Ve),Se.channels<Se.outputChannels&&Se.byteArray.fill(15360,0,Ve);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ee);break}return Se.bytesPerLine=Se.width*Se.inputSize*Se.channels,Se.outputChannels==4?Se.format=Zi:Se.format=Iv,N0?Se.colorSpace="srgb-linear":Se.encoding=3e3,Se}const Os=new DataView(e),Ns=new Uint8Array(e),mo={value:0},Dr=Wh(Os,e,mo),Ht=Tc(Dr,Os,Ns,mo,this.type),go={value:0},Jn={R:0,G:1,B:2,A:3,Y:0};for(let P=0;P<Ht.height/Ht.scanlineBlockSize;P++){const V=Pe(Os,mo);Ht.size=Pe(Os,mo),Ht.lines=V+Ht.scanlineBlockSize>Ht.height?Ht.height-V:Ht.scanlineBlockSize;const ge=Ht.size<Ht.lines*Ht.bytesPerLine?Ht.uncompress(Ht):B(Ht);mo.value+=Ht.size;for(let Ee=0;Ee<Ht.scanlineBlockSize;Ee++){const Se=Ee+P*Ht.scanlineBlockSize;if(Se>=Ht.height)break;for(let qe=0;qe<Ht.channels;qe++){const Ve=Jn[Dr.channels[qe].name];for(let ke=0;ke<Ht.width;ke++){go.value=(Ee*(Ht.channels*Ht.width)+qe*Ht.width+ke)*Ht.inputSize;const Be=(Ht.height-1-Se)*(Ht.width*Ht.outputChannels)+ke*Ht.outputChannels+Ve;Ht.byteArray[Be]=Ht.getter(ge,go)}}}}return{header:Dr,width:Ht.width,height:Ht.height,data:Ht.byteArray,format:Ht.format,[N0?"colorSpace":"encoding"]:Ht[N0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,i,r){function a(s,o){N0?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=rn,s.magFilter=rn,s.generateMipmaps=!1,s.flipY=!1,n&&n(s,o)}return super.load(e,a,i,r)}}function jae(t,e,n,i){var r;return r=class extends vi{constructor(a){super({vertexShader:e,fragmentShader:n,...a});for(const s in t)this.uniforms[s]=new mn(t[s]),Object.defineProperty(this,s,{get(){return this.uniforms[s].value},set(o){this.uniforms[s].value=o}});this.uniforms=P4.clone(this.uniforms)}},r.key=fs.generateUUID(),r}function Xae(t,e,n){const i=Wi(g=>g.size),r=Wi(g=>g.viewport),a=typeof t=="number"?t:i.width*r.dpr,s=i.height*r.dpr,o=(typeof t=="number"?n:t)||{},{samples:l=0,depth:f,...h}=o,d=f??o.depthBuffer,p=O.useMemo(()=>{const g=new si(a,s,{minFilter:rn,magFilter:rn,type:Ei,...h});return d&&(g.depthTexture=new Fu(a,s,ai)),g.samples=l,g},[]);return O.useLayoutEffect(()=>{p.setSize(a,s),l&&(p.samples=l)},[l,p,a,s]),O.useEffect(()=>()=>p.dispose(),[]),p}const Wae=t=>typeof t=="function",Yae=O.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:i,children:r,...a},s)=>{const o=Wi(({set:b})=>b),l=Wi(({camera:b})=>b),f=Wi(({size:b})=>b),h=O.useRef(null);O.useImperativeHandle(s,()=>h.current,[]);const d=O.useRef(null),p=Xae(e);O.useLayoutEffect(()=>{a.manual||(h.current.aspect=f.width/f.height)},[f,a]),O.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let g=0,y=null;const S=Wae(r);return ta(b=>{S&&(n===1/0||g<n)&&(d.current.visible=!1,b.gl.setRenderTarget(p),y=b.scene.background,t&&(b.scene.background=t),b.gl.render(b.scene,h.current),b.scene.background=y,b.gl.setRenderTarget(null),d.current.visible=!0,g++)}),O.useLayoutEffect(()=>{if(i){const b=l;return o(()=>({camera:h.current})),()=>o(()=>({camera:b}))}},[h,i,o]),O.createElement(O.Fragment,null,O.createElement("perspectiveCamera",em({ref:h},a),!S&&r),O.createElement("group",{ref:d},S&&r(p.texture)))}),qae=O.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:l,...f},h)=>{const d=Wi(R=>R.invalidate),p=Wi(R=>R.camera),g=Wi(R=>R.gl),y=Wi(R=>R.events),S=Wi(R=>R.setEvents),b=Wi(R=>R.set),v=Wi(R=>R.get),x=Wi(R=>R.performance),E=e||p,T=i||y.connected||g.domElement,w=O.useMemo(()=>new Vae(E),[E]);return ta(()=>{w.enabled&&w.update()},-1),O.useEffect(()=>(a&&w.connect(a===!0?T:a),w.connect(T),()=>void w.dispose()),[a,T,n,w,d]),O.useEffect(()=>{const R=A=>{d(),n&&x.regress(),s&&s(A)},N=A=>{o&&o(A)},U=A=>{l&&l(A)};return w.addEventListener("change",R),w.addEventListener("start",N),w.addEventListener("end",U),()=>{w.removeEventListener("start",N),w.removeEventListener("end",U),w.removeEventListener("change",R)}},[s,o,l,w,d,S]),O.useEffect(()=>{if(t){const R=v().controls;return b({controls:w}),()=>b({controls:R})}},[t,w]),O.createElement("primitive",em({ref:h,object:w,enableDamping:r},f))}),e9=(t,e,n)=>{let i;switch(t){case fi:i=new Uint8ClampedArray(e*n*4);break;case Ei:i=new Uint16Array(e*n*4);break;case Fa:i=new Uint32Array(e*n*4);break;case Qb:i=new Int8Array(e*n*4);break;case Jb:i=new Int16Array(e*n*4);break;case Pv:i=new Int32Array(e*n*4);break;case ai:i=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return i};let Ky;const Zae=(t,e,n,i)=>{if(Ky!==void 0)return Ky;const r=new si(1,1,i);e.setRenderTarget(r);const a=new Mi(new Ju,new bc({color:16777215}));e.render(a,n),e.setRenderTarget(null);const s=e9(t,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,s),r.dispose(),a.geometry.dispose(),a.material.dispose(),Ky=s[0]!==0,Ky};class yC{constructor(e){Li(this,"_renderer");Li(this,"_rendererIsDisposable",!1);Li(this,"_material");Li(this,"_scene");Li(this,"_camera");Li(this,"_quad");Li(this,"_renderTarget");Li(this,"_width");Li(this,"_height");Li(this,"_type");Li(this,"_colorSpace");Li(this,"_supportsReadPixels",!0);Li(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var i,r,a,s,o,l,f,h,d,p,g,y,S,b,v,x;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const n={format:Zi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((i=e.renderTargetOptions)==null?void 0:i.anisotropy)!==void 0?(r=e.renderTargetOptions)==null?void 0:r.anisotropy:1,generateMipmaps:((a=e.renderTargetOptions)==null?void 0:a.generateMipmaps)!==void 0?(s=e.renderTargetOptions)==null?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)==null?void 0:o.magFilter)!==void 0?(l=e.renderTargetOptions)==null?void 0:l.magFilter:rn,minFilter:((f=e.renderTargetOptions)==null?void 0:f.minFilter)!==void 0?(h=e.renderTargetOptions)==null?void 0:h.minFilter:rn,samples:((d=e.renderTargetOptions)==null?void 0:d.samples)!==void 0?(p=e.renderTargetOptions)==null?void 0:p.samples:void 0,wrapS:((g=e.renderTargetOptions)==null?void 0:g.wrapS)!==void 0?(y=e.renderTargetOptions)==null?void 0:y.wrapS:Hi,wrapT:((S=e.renderTargetOptions)==null?void 0:S.wrapT)!==void 0?(b=e.renderTargetOptions)==null?void 0:b.wrapT:Hi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=yC.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Sh,this._camera=new _s,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Zae(this._type,this._renderer,this._camera,n)){let E;switch(this._type){case Ei:E=this._renderer.extensions.has("EXT_color_buffer_float")?ai:void 0;break}E!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ai}`),this._type=E):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Mi(new Ju,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new si(this.width,this.height,n),this._renderTarget.texture.mapping=((v=e.renderTargetOptions)==null?void 0:v.mapping)!==void 0?(x=e.renderTargetOptions)==null?void 0:x.mapping:Pu}static instantiateRenderer(){const e=new uC;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=e9(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new oo(this.toArray(),this.width,this.height,Zi,this._type,(e==null?void 0:e.mapping)||Pu,(e==null?void 0:e.wrapS)||Hi,(e==null?void 0:e.wrapT)||Hi,(e==null?void 0:e.magFilter)||rn,(e==null?void 0:e.minFilter)||rn,(e==null?void 0:e.anisotropy)||1,Ms);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof vi&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof zn&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof zn&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class t9 extends Error{}class n9 extends Error{}const U0=(t,e,n)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(t);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(t);if(r){const a=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(s=>s.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},$ae=t=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(t):e=t.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const i=e.indexOf("x:xmpmeta>",n),r=e.slice(n,i+10);try{const a=U0(r,"hdrgm:GainMapMin","0"),s=U0(r,"hdrgm:GainMapMax"),o=U0(r,"hdrgm:Gamma","1"),l=U0(r,"hdrgm:OffsetSDR","0.015625"),f=U0(r,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),d=h?h[1]:"0",p=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!p)throw new Error("Incomplete gainmap metadata");const g=p[1];return{gainMapMin:Array.isArray(a)?a.map(y=>parseFloat(y)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(s)?s.map(y=>parseFloat(y)):[parseFloat(s),parseFloat(s),parseFloat(s)],gamma:Array.isArray(o)?o.map(y=>parseFloat(y)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(y=>parseFloat(y)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(f)?f.map(y=>parseFloat(y)):[parseFloat(f),parseFloat(f),parseFloat(f)],hdrCapacityMin:parseFloat(d),hdrCapacityMax:parseFloat(g)}}catch{}n=e.indexOf("<x:xmpmeta",i)}};class Kae{constructor(e){Li(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,i)=>{const r=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const s=a.byteLength;let o=2,l=0,f;for(;o<s;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(a.getUint8(o)!==255){i(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${a.getUint8(o).toString(16)}`));return}if(f=a.getUint8(o+1),r&&console.log(`Marker: ${f.toString(16)}`),f===226){r&&console.log("Found APP2 marker (0xffe2)");const h=o+4;if(a.getUint32(h)===1297106432){const d=h+4;let p;if(a.getUint16(d)===18761)p=!1;else if(a.getUint16(d)===19789)p=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(d+2,!p)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const g=a.getUint32(d+4,!p);if(g<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const y=d+g,S=a.getUint16(y,!p),b=y+2;let v=0;for(let w=b;w<b+12*S;w+=12)a.getUint16(w,!p)===45057&&(v=a.getUint32(w+8,!p));const E=y+2+S*12+4,T=[];for(let w=E;w<E+v*16;w+=16){const R={MPType:a.getUint32(w,!p),size:a.getUint32(w+4,!p),dataOffset:a.getUint32(w+8,!p),dependantImages:a.getUint32(w+12,!p),start:-1,end:-1,isFII:!1};R.dataOffset?(R.start=d+R.dataOffset,R.isFII=!1):(R.start=0,R.isFII=!0),R.end=R.start+R.size,T.push(R)}if(this.options.extractNonFII&&T.length){const w=new Blob([a]),R=[];for(const N of T){if(N.isFII&&!this.options.extractFII)continue;const U=w.slice(N.start,N.end+1,"image/jpeg");R.push(U)}n(R)}}}o+=2+a.getUint16(o+2)}})}}const Qae=async t=>{const e=$ae(t);if(!e)throw new n9("Gain map XMP metadata not found");const i=await new Kae({extractFII:!0,extractNonFII:!0}).extract(t);if(i.length!==2)throw new t9("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},U6=t=>new Promise((e,n)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{n(r)},i.src=URL.createObjectURL(t)});class Jae extends ba{constructor(n,i){super(i);Li(this,"_renderer");Li(this,"_renderTargetOptions");Li(this,"_internalLoadingManager");Li(this,"_config");this._config=n,n.renderer&&(this._renderer=n.renderer),this._internalLoadingManager=new C2}setRenderer(n){return this._renderer=n,this}setRenderTargetOptions(n){return this._renderTargetOptions=n,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const n=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new zn,sdr:new zn});return this._config.createQuadRenderer({width:16,height:16,type:Ei,colorSpace:Ms,material:n,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(n,i,r){const a=i?new Blob([i],{type:"image/jpeg"}):void 0,s=new Blob([n],{type:"image/jpeg"});let o,l,f=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([a?U6(a):Promise.resolve(void 0),U6(s)]);l=h[0],o=h[1],f=r==="flipY"}else{const h=await Promise.all([a?createImageBitmap(a,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(s,{imageOrientation:r||"flipY"})]);l=h[0],o=h[1]}return{sdrImage:o,gainMapImage:l,needsFlip:f}}createTextures(n,i,r){const a=new zn(i||new ImageData(2,2),Pu,Hi,Hi,rn,JT,Zi,fi,1,Ms);a.flipY=r,a.needsUpdate=!0;const s=new zn(n,Pu,Hi,Hi,rn,JT,Zi,fi,1,En);return s.flipY=r,s.needsUpdate=!0,{gainMap:a,sdr:s}}updateQuadRenderer(n,i,r,a,s){n.width=i.width,n.height=i.height,n.material.gainMap=r,n.material.sdr=a,n.material.gainMapMin=s.gainMapMin,n.material.gainMapMax=s.gainMapMax,n.material.offsetHdr=s.offsetHdr,n.material.offsetSdr=s.offsetSdr,n.material.gamma=s.gamma,n.material.hdrCapacityMin=s.hdrCapacityMin,n.material.hdrCapacityMax=s.hdrCapacityMax,n.material.maxDisplayBoost=Math.pow(2,s.hdrCapacityMax),n.material.needsUpdate=!0}}const ese=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,tse=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class nse extends vi{constructor({gamma:n,offsetHdr:i,offsetSdr:r,gainMapMin:a,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:l,hdrCapacityMax:f,sdr:h,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:ese,fragmentShader:tse,uniforms:{sdr:{value:h},gainMap:{value:d},gamma:{value:new k(1/n[0],1/n[1],1/n[2])},offsetHdr:{value:new k().fromArray(i)},offsetSdr:{value:new k().fromArray(r)},gainMapMin:{value:new k().fromArray(a)},gainMapMax:{value:new k().fromArray(s)},weightFactor:{value:(Math.log2(o)-l)/(f-l)}},blending:Hr,depthTest:!1,depthWrite:!1});Li(this,"_maxDisplayBoost");Li(this,"_hdrCapacityMin");Li(this,"_hdrCapacityMax");this._maxDisplayBoost=o,this._hdrCapacityMin=l,this._hdrCapacityMax=f,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(n){this.uniforms.sdr.value=n}get gainMap(){return this.uniforms.gainMap.value}set gainMap(n){this.uniforms.gainMap.value=n}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(n){this.uniforms.offsetHdr.value.fromArray(n)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(n){this.uniforms.offsetSdr.value.fromArray(n)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(n){this.uniforms.gainMapMin.value.fromArray(n)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(n){this.uniforms.gainMapMax.value.fromArray(n)}get gamma(){const n=this.uniforms.gamma.value;return[1/n.x,1/n.y,1/n.z]}set gamma(n){const i=this.uniforms.gamma.value;i.x=1/n[0],i.y=1/n[1],i.z=1/n[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(n){this._hdrCapacityMin=n,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(n){this._hdrCapacityMax=n,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(n){this._maxDisplayBoost=Math.max(1,Math.min(65504,n)),this.calculateWeight()}calculateWeight(){const n=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,n))}}class i9 extends Jae{constructor(e,n){super({renderer:e,createMaterial:i=>new nse(i),createQuadRenderer:i=>new yC(i)},n)}async render(e,n,i,r){const{sdrImage:a,gainMapImage:s,needsFlip:o}=await this.processImages(i,r,"flipY"),{gainMap:l,sdr:f}=this.createTextures(a,s,o);this.updateQuadRenderer(e,a,l,f,n),e.render()}}class ise extends i9{load([e,n,i],r,a,s){const o=this.prepareQuadRenderer();let l,f,h;const d=async()=>{if(l&&f&&h){try{await this.render(o,h,l,f)}catch(A){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(i),typeof s=="function"&&s(A),o.disposeOnDemandRenderer();return}typeof r=="function"&&r(o),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(i),o.disposeOnDemandRenderer()}};let p=!0,g=0,y=0,S=!0,b=0,v=0,x=!0,E=0,T=0;const w=()=>{if(typeof a=="function"){const A=g+b+E,C=y+v+T,I=p&&S&&x;a(new ProgressEvent("progress",{lengthComputable:I,loaded:C,total:A}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(i);const R=new ys(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(e,async A=>{if(typeof A=="string")throw new Error("Invalid sdr buffer");l=A,await d()},A=>{p=A.lengthComputable,y=A.loaded,g=A.total,w()},A=>{this.manager.itemError(e),typeof s=="function"&&s(A)});const N=new ys(this._internalLoadingManager);N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(n,async A=>{if(typeof A=="string")throw new Error("Invalid gainmap buffer");f=A,await d()},A=>{S=A.lengthComputable,v=A.loaded,b=A.total,w()},A=>{this.manager.itemError(n),typeof s=="function"&&s(A)});const U=new ys(this._internalLoadingManager);return U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(i,async A=>{if(typeof A!="string")throw new Error("Invalid metadata string");h=JSON.parse(A),await d()},A=>{x=A.lengthComputable,T=A.loaded,E=A.total,w()},A=>{this.manager.itemError(i),typeof s=="function"&&s(A)}),o}}class rse extends i9{load(e,n,i,r){const a=this.prepareQuadRenderer(),s=new ys(this._internalLoadingManager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(this.withCredentials),this.manager.itemStart(e),s.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let f,h,d;try{const p=await Qae(l);f=p.sdr,h=p.gainMap,d=p.metadata}catch(p){if(p instanceof n9||p instanceof t9)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},f=l;else throw p}try{await this.render(a,d,f.buffer,h==null?void 0:h.buffer)}catch(p){this.manager.itemError(e),typeof r=="function"&&r(p),a.disposeOnDemandRenderer();return}typeof n=="function"&&n(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},i,o=>{this.manager.itemError(e),typeof r=="function"&&r(o)}),a}}const cv={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},r9="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Ap=t=>Array.isArray(t),_C=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function I2({files:t=_C,path:e="",preset:n=void 0,colorSpace:i=void 0,extensions:r}={}){n&&(xC(n),t=cv[n],e=r9);const a=Ap(t),{extension:s,isCubemap:o}=bC(t),l=SC(s);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);const f=Wi(g=>g.gl);O.useLayoutEffect(()=>{if(s!=="webp"&&s!=="jpg"&&s!=="jpeg")return;function g(){Th.clear(l,a?[t]:t)}f.domElement.addEventListener("webglcontextlost",g,{once:!0})},[t,f.domElement]);const h=Th(l,a?[t]:t,g=>{(s==="webp"||s==="jpg"||s==="jpeg")&&g.setRenderer(f),g.setPath==null||g.setPath(e),r&&r(g)});let d=a?h[0]:h;if(s==="jpg"||s==="jpeg"||s==="webp"){var p;d=(p=d.renderTarget)==null?void 0:p.texture}return d.mapping=o?No:kp,d.colorSpace=i??(o?"srgb":"srgb-linear"),d}const ase={files:_C,path:"",preset:void 0,extensions:void 0};I2.preload=t=>{const e={...ase,...t};let{files:n,path:i=""}=e;const{preset:r,extensions:a}=e;r&&(xC(r),n=cv[r],i=r9);const{extension:s}=bC(n);if(s==="webp"||s==="jpg"||s==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=SC(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);Th.preload(o,Ap(n)?[n]:n,l=>{l.setPath==null||l.setPath(i),a&&a(l)})};const sse={files:_C,preset:void 0};I2.clear=t=>{const e={...sse,...t};let{files:n}=e;const{preset:i}=e;i&&(xC(i),n=cv[i]);const{extension:r}=bC(n),a=SC(r);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);Th.clear(a,Ap(n)?[n]:n)};function xC(t){if(!(t in cv))throw new Error("Preset must be one of: "+Object.keys(cv).join(", "))}function bC(t){var e;const n=Ap(t)&&t.length===6,i=Ap(t)&&t.length===3&&t.some(s=>s.endsWith("json")),r=Ap(t)?t[0]:t;return{extension:n?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:i}}function SC(t){return t==="cube"?V7:t==="hdr"?Gae:t==="exr"?kae:t==="jpg"||t==="jpeg"?rse:t==="webp"?ise:null}const ose=t=>t.current&&t.current.isScene,lse=t=>ose(t)?t.current:t;function EC(t,e,n,i,r={}){var a,s,o,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const f=lse(e||n),h=f.background,d=f.environment,p={backgroundBlurriness:f.backgroundBlurriness,backgroundIntensity:f.backgroundIntensity,backgroundRotation:(a=(s=f.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:f.environmentIntensity,environmentRotation:(o=(l=f.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return t!=="only"&&(f.environment=i),t&&(f.background=i),el(f,r),()=>{t!=="only"&&(f.environment=d),t&&(f.background=h),el(f,p)}}function MC({scene:t,background:e=!1,map:n,...i}){const r=Wi(a=>a.scene);return O.useLayoutEffect(()=>{if(n)return EC(e,t,r,n,i)}),null}function a9({background:t=!1,scene:e,blur:n,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:s,environmentRotation:o,...l}){const f=I2(l),h=Wi(d=>d.scene);return O.useLayoutEffect(()=>EC(t,e,h,f,{backgroundBlurriness:n??i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:s,environmentRotation:o})),O.useEffect(()=>()=>{f.dispose()},[f]),null}function cse({children:t,near:e=.1,far:n=1e3,resolution:i=256,frames:r=1,map:a,background:s=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:f,backgroundRotation:h,environmentIntensity:d,environmentRotation:p,scene:g,files:y,path:S,preset:b=void 0,extensions:v}){const x=Wi(U=>U.gl),E=Wi(U=>U.scene),T=O.useRef(null),[w]=O.useState(()=>new Sh),R=O.useMemo(()=>{const U=new u2(i);return U.texture.type=Ei,U},[i]);O.useEffect(()=>()=>{R.dispose()},[R]),O.useLayoutEffect(()=>{if(r===1){const U=x.autoClear;x.autoClear=!0,T.current.update(x,w),x.autoClear=U}return EC(s,g,E,R.texture,{backgroundBlurriness:o??l,backgroundIntensity:f,backgroundRotation:h,environmentIntensity:d,environmentRotation:p})},[t,w,R.texture,g,E,s,r,x]);let N=1;return ta(()=>{if(r===1/0||N<r){const U=x.autoClear;x.autoClear=!0,T.current.update(x,w),x.autoClear=U,N++}}),O.createElement(O.Fragment,null,Kie(O.createElement(O.Fragment,null,t,O.createElement("cubeCamera",{ref:T,args:[e,n,R]}),y||b?O.createElement(a9,{background:!0,files:y,preset:b,path:S,extensions:v}):a?O.createElement(MC,{background:!0,map:a,extensions:v}):null),w))}function use(t){var e,n,i,r;const a=I2(t),s=t.map||a;O.useMemo(()=>L2({GroundProjectedEnvImpl:Uae}),[]),O.useEffect(()=>()=>{a.dispose()},[a]);const o=O.useMemo(()=>[s],[s]),l=(e=t.ground)==null?void 0:e.height,f=(n=t.ground)==null?void 0:n.radius,h=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return O.createElement(O.Fragment,null,O.createElement(MC,em({},t,{map:s})),O.createElement("groundProjectedEnvImpl",{args:o,scale:h,height:l,radius:f}))}function fse(t){return t.ground?O.createElement(use,t):t.map?O.createElement(MC,t):t.children?O.createElement(cse,t):O.createElement(a9,t)}/**
 * postprocessing v6.38.1 build Mon Dec 15 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var TM=1/1e3,hse=1e3,dse=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*TM}get fixedDelta(){return this._fixedDelta*TM}set fixedDelta(t){this._fixedDelta=t*hse}get elapsed(){return this._elapsed*TM}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},pse=(()=>{const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),n=new Zt;return n.setAttribute("position",new Bn(t,3)),n.setAttribute("uv",new Bn(e,2)),n})(),Ga=class EA{static get fullscreenGeometry(){return pse}constructor(e="Pass",n=new Sh,i=new _s){this.name=e,this.renderer=null,this.scene=n,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new Mi(EA.fullscreenGeometry,e),n.frustumCulled=!1,this.scene===null&&(this.scene=new Sh),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=$u){}render(e,n,i,r,a){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,i){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof si||n instanceof Rr||n instanceof zn||n instanceof EA)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},mse=class extends Ga{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,i,r){const a=t.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},gse=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,s9="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",o9=class extends vi{constructor(){super({name:"CopyMaterial",defines:{COLOR_SPACE_CONVERSION:"1",DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new mn(null),depthBuffer:new mn(null),channelWeights:new mn(null),opacity:new mn(1)},blending:Hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:gse,vertexShader:s9}),this.depthFunc=Xg}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(t){const e=t!==null;this.colorWrite!==e&&(e?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=e,this.needsUpdate=!0),this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){const e=t!==null;this.depthWrite!==e&&(e?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=e,this.depthWrite=e,this.needsUpdate=!0),this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}get colorSpaceConversion(){return this.defines.COLOR_SPACE_CONVERSION!==void 0}set colorSpaceConversion(t){this.colorSpaceConversion!==t&&(t?this.defines.COLOR_SPACE_CONVERSION=!0:delete this.defines.COLOR_SPACE_CONVERSION,this.needsUpdate=!0)}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(t){t!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=t):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},vse=class extends Ga{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new o9,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new si(1,1,{minFilter:rn,magFilter:rn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,i,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==fi?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t!==null&&t.outputColorSpace===En&&(this.renderTarget.texture.colorSpace=En))}},L6=new lt,l9=class extends Ga{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,i,r){const a=this.overrideClearColor,s=this.overrideClearAlpha,o=t.getClearAlpha(),l=a!==null,f=s>=0;l?(t.getClearColor(L6),t.setClearColor(a,f?s:o)):f&&t.setClearAlpha(s),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(L6,o):f&&t.setClearAlpha(o)}},yse=class extends Ga{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new l9(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,i,r){const a=t.getContext(),s=t.state.buffers,o=this.scene,l=this.camera,f=this.clearPass,h=this.inverted?0:1,d=1-h;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,h,4294967295),s.stencil.setClear(d),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(t,null):(f.render(t,e),f.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(o,l)):(t.setRenderTarget(e),t.render(o,l),t.setRenderTarget(n),t.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},_se=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new vse,this.depthTexture=null,this.passes=[],this.timer=new dse,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const e=t.getSize(new xe),n=t.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===fi&&t.outputColorSpace===En&&(this.inputBuffer.texture.colorSpace=En,this.outputBuffer.texture.colorSpace=En,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const r of this.passes)r.initialize(t,n,i)}}replaceRenderer(t,e=!0){const n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(t),e&&i!==null&&(i.removeChild(n.domElement),i.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new Fu;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=tc,t.type=xh):t.type=Fa,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,i){const r=this.renderer,a=r===null?new xe:r.getDrawingBufferSize(new xe),s={minFilter:rn,magFilter:rn,stencilBuffer:e,depthBuffer:t,type:n},o=new si(a.width,a.height,s);return i>0&&(o.samples=i),n===fi&&r!==null&&r.outputColorSpace===En&&(o.texture.colorSpace=En),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(t){for(const e of this.passes)e.mainScene=t}setMainCamera(t){for(const e of this.passes)e.mainCamera=t}addPass(t,e){const n=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new xe),a=i.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(t.setRenderer(i),t.setSize(r.width,r.height),t.initialize(i,a,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const o=this.createDepthTexture();for(t of n)t.setDepthTexture(o)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){const a=(o,l)=>o||l.needsDepthTexture;e.reduce(a,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,n=this.copyPass;let i=this.inputBuffer,r=this.outputBuffer,a=!1,s,o,l;t===void 0&&(this.timer.update(),t=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(e,i,r,t,a),f.needsSwap&&(a&&(n.renderToScreen=f.renderToScreen,s=e.getContext(),o=e.state.buffers.stencil,o.setFunc(s.NOTEQUAL,1,4294967295),n.render(e,i,r,t,a),o.setFunc(s.EQUAL,1,4294967295)),l=i,i=r,r=l),f instanceof yse?a=!0:f instanceof mse&&(a=!1))}setSize(t,e,n){const i=this.renderer,r=i.getSize(new xe);(t===void 0||e===void 0)&&(t=r.width,e=r.height),(r.width!==t||r.height!==e)&&i.setSize(t,e,n);const a=i.getDrawingBufferSize(new xe);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const s of this.passes)s.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Ga.fullscreenGeometry.dispose()}},uh={NONE:0,DEPTH:1,CONVOLUTION:2},Cn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},xse=class{constructor(){this.shaderParts=new Map([[Cn.FRAGMENT_HEAD,null],[Cn.FRAGMENT_MAIN_UV,null],[Cn.FRAGMENT_MAIN_IMAGE,null],[Cn.VERTEX_HEAD,null],[Cn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=uh.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Ms}},AM=!1,P6=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case zr:n=this.materialsFlatShadedDoubleSide;break;case lr:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case zr:n=this.materialsDoubleSide;break;case lr:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof vi))return t.clone();const e=t.uniforms,n=new Map;for(const r in e){const a=e[r].value;a.isRenderTargetTexture&&(e[r].value=null,n.set(r,a))}const i=t.clone();for(const r of n)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=Oo;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.side=lr,i}),this.materialsDoubleSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.side=zr,i}),this.materialsFlatShaded=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=lr,i}),this.materialsFlatShadedDoubleSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=zr,i})}}render(t,e,n){const i=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,AM){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const a of r)a[0].material=a[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=r}t.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return AM}static set workaroundEnabled(t){AM=t}},$c=-1,Qr=class extends ws{constructor(t,e=$c,n=$c,i=1){super(),this.resizable=t,this.baseSize=new xe(1,1),this.preferredSize=new xe(e,n),this.target=this.preferredSize,this.s=i,this.effectiveSize=new xe,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,i=this.scale;e.width!==$c?n.width=e.width:e.height!==$c?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*i),e.height!==$c?n.height=e.height:e.width!==$c?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*i)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar($c),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return $c}},dn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},bse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Sse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,src.a*opacity);}",Ese="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=(dst.rgb+src.rgb)*0.5;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Mse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.xy,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Tse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/max(b,1e-9))),vec3(1.0),step(1.0,a));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ase="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",wse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Cse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=abs(dst.rgb-src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Rse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb/max(src.rgb,1e-9);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Dse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-2.0*dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ose="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb,1.0);vec3 b=min(src.rgb,1.0);vec3 c=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Nse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=step(1.0,dst.rgb+src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Use="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.x,a.yz));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Lse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Pse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=src.rgb*max(1.0-dst.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ise="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",zse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Bse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb+src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Fse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(2.0*src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Hse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.xy,b.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Vse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Gse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-abs(1.0-dst.rgb-src.rgb),0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",kse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,opacity);}",jse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=2.0*src.rgb*dst.rgb;vec3 b=1.0-2.0*(1.0-src.rgb)*(1.0-dst.rgb);vec3 c=mix(a,b,step(0.5,dst.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Xse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 c=mix(mix(src2,dst.rgb,step(0.5*dst.rgb,src.rgb)),max(src2-1.0,vec3(0.0)),step(dst.rgb,src2-1.0));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Wse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb*dst.rgb/max(1.0-src.rgb,1e-9),1.0);vec3 c=mix(a,src.rgb,step(1.0,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Yse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.x,b.y,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",qse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-min(dst.rgb*src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Zse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 d=dst.rgb+(src2-1.0);vec3 w=step(0.5,src.rgb);vec3 a=dst.rgb-(1.0-src2)*dst.rgb*(1.0-dst.rgb);vec3 b=mix(d*(sqrt(dst.rgb)-dst.rgb),d*dst.rgb*((16.0*dst.rgb-12.0)*dst.rgb+3.0),w*(1.0-step(0.25,dst.rgb)));vec3 c=mix(a,b,w);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",$se="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return src;}",Kse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Qse="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=mix(max(1.0-min((1.0-dst.rgb)/(2.0*src.rgb),1.0),0.0),min(dst.rgb/(2.0*(1.0-src.rgb)),1.0),step(0.5,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Jse=new Map([[dn.ADD,bse],[dn.ALPHA,Sse],[dn.AVERAGE,Ese],[dn.COLOR,Mse],[dn.COLOR_BURN,Tse],[dn.COLOR_DODGE,Ase],[dn.DARKEN,wse],[dn.DIFFERENCE,Cse],[dn.DIVIDE,Rse],[dn.DST,null],[dn.EXCLUSION,Dse],[dn.HARD_LIGHT,Ose],[dn.HARD_MIX,Nse],[dn.HUE,Use],[dn.INVERT,Lse],[dn.INVERT_RGB,Pse],[dn.LIGHTEN,Ise],[dn.LINEAR_BURN,zse],[dn.LINEAR_DODGE,Bse],[dn.LINEAR_LIGHT,Fse],[dn.LUMINOSITY,Hse],[dn.MULTIPLY,Vse],[dn.NEGATION,Gse],[dn.NORMAL,kse],[dn.OVERLAY,jse],[dn.PIN_LIGHT,Xse],[dn.REFLECT,Wse],[dn.SATURATION,Yse],[dn.SCREEN,qse],[dn.SOFT_LIGHT,Zse],[dn.SRC,$se],[dn.SUBTRACT,Kse],[dn.VIVID_LIGHT,Qse]]),eoe=class extends ws{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new mn(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Jse.get(this.blendFunction)}},MA=class extends ws{constructor(t,e,{attributes:n=uh.NONE,blendFunction:i=dn.NORMAL,defines:r=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=o,this.defines=r,this.uniforms=a,this.extensions=s,this.blendMode=new eoe(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Ms,this._outputColorSpace=Ro}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=$u){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof si||e instanceof Rr||e instanceof zn||e instanceof Ga)&&this[t].dispose()}}},TC={MEDIUM:2,LARGE:3},toe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,noe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",ioe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],roe=class extends vi{constructor(t=new jn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new mn(null),texelSize:new mn(new jn),scale:new mn(1),kernel:new mn(0)},blending:Hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:toe,vertexShader:noe}),this.setTexelSize(t.x,t.y),this.kernelSize=TC.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return ioe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,i=1/e;this.uniforms.texelSize.value.set(n,i,n*.5,i*.5)}},aoe=class extends Ga{constructor({kernelSize:t=TC.MEDIUM,resolutionScale:e=.5,width:n=Qr.AUTO_SIZE,height:i=Qr.AUTO_SIZE,resolutionX:r=n,resolutionY:a=i}={}){super("KawaseBlurPass"),this.renderTargetA=new si(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const s=this.resolution=new Qr(this,r,a,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight)),this._blurMaterial=new roe,this._blurMaterial.kernelSize=t,this.copyMaterial=new o9}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){const a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,f=this.blurMaterial,h=f.kernelSequence;let d=e;this.fullscreenMaterial=f;for(let p=0,g=h.length;p<g;++p){const y=p&1?l:o;f.kernel=h[p],f.inputBuffer=d.texture,t.setRenderTarget(y),t.render(a,s),d=y}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(a,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==fi?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t!==null&&t.outputColorSpace===En&&(this.renderTargetA.texture.colorSpace=En,this.renderTargetB.texture.colorSpace=En))}static get AUTO_SIZE(){return Qr.AUTO_SIZE}},soe=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,ooe=class extends vi{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Bh.replace(/\D+/g,"")},uniforms:{inputBuffer:new mn(null),threshold:new mn(0),smoothing:new mn(1),range:new mn(null)},blending:Hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:soe,vertexShader:s9}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},loe=class extends Ga{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:i=1,width:r=Qr.AUTO_SIZE,height:a=Qr.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("LuminancePass"),this.fullscreenMaterial=new ooe(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new si(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Qr(this,s,o,i);l.addEventListener("change",f=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,i,r){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==fi&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},coe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,uoe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",foe=class extends vi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new mn(null),texelSize:new mn(new xe)},blending:Hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:coe,vertexShader:uoe})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},hoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,doe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",poe=class extends vi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new mn(null),supportBuffer:new mn(null),texelSize:new mn(new xe),radius:new mn(.85)},blending:Hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:hoe,vertexShader:doe})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},moe=class extends Ga{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new si(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new foe,this.upsamplingMaterial=new poe,this.resolution=new xe}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const i=e.clone();i.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let n=1,i=t-1;n<i;++n){const r=e.clone();r.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,i,r){const{scene:a,camera:s}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:f,upsamplingMipmaps:h}=this;let d=e;this.fullscreenMaterial=o;for(let p=0,g=f.length;p<g;++p){const y=f[p];o.setSize(d.width,d.height),o.inputBuffer=d.texture,t.setRenderTarget(y),t.render(a,s),d=y}this.fullscreenMaterial=l;for(let p=h.length-1;p>=0;--p){const g=h[p];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=f[p].texture,t.setRenderTarget(g),t.render(a,s),d=g}}setSize(t,e){const n=this.resolution;n.set(t,e);let i=n.width,r=n.height;for(let a=0,s=this.downsamplingMipmaps.length;a<s;++a)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[a].setSize(i,r),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(i,r)}initialize(t,e,n){if(n!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=n;if(n!==fi)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(t!==null&&t.outputColorSpace===En)for(const r of i)r.texture.colorSpace=En}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},goe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,voe=class extends MA{constructor({blendFunction:t=dn.SCREEN,luminanceThreshold:e=1,luminanceSmoothing:n=.03,mipmapBlur:i=!0,intensity:r=1,radius:a=.85,levels:s=8,kernelSize:o=TC.LARGE,resolutionScale:l=.5,width:f=Qr.AUTO_SIZE,height:h=Qr.AUTO_SIZE,resolutionX:d=f,resolutionY:p=h}={}){super("BloomEffect",goe,{blendFunction:t,uniforms:new Map([["map",new mn(null)],["intensity",new mn(r)]])}),this.renderTarget=new si(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new aoe({kernelSize:o}),this.luminancePass=new loe({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new moe,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const g=this.resolution=new Qr(this,d,p,l);g.addEventListener("change",y=>this.setSize(g.baseWidth,g.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,r.renderTarget):this.blurPass.render(t,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,i)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t!==null&&t.outputColorSpace===En&&(this.renderTarget.texture.colorSpace=En))}},c9=class extends Ga{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new l9,this.overrideMaterialManager=n===null?null:new P6(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new P6(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,i,r){const a=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,f=a.background,h=t.shadowMap.autoUpdate,d=this.renderToScreen?null:e;o!==null&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,a,s):t.render(a,s),s.layers.mask=l,a.background=f,t.shadowMap.autoUpdate=h}},yoe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,_oe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",xoe=class extends vi{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new mn(null),normalBuffer:new mn(null),texelSize:new mn(new xe)},blending:Hr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:yoe,vertexShader:_oe})}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=$u){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,t!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},boe=class extends Ga{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=Qr.AUTO_SIZE,height:i=Qr.AUTO_SIZE,resolutionX:r=n,resolutionY:a=i}={}){super("DepthDownsamplingPass");const s=new xoe;s.normalBuffer=t,this.fullscreenMaterial=s,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new si(1,1,{minFilter:pi,magFilter:pi,depthBuffer:!1,type:ai}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new Qr(this,r,a,e);o.addEventListener("change",l=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=$u){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,i,r){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){const i=t.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},Soe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Eoe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Moe=class extends vi{constructor(t,e,n,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Bh.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new mn(null),depthBuffer:new mn(null),resolution:new mn(new xe),texelSize:new mn(new xe),cameraNear:new mn(.3),cameraFar:new mn(1e3),aspect:new mn(1),time:new mn(0)},blending:Mu,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(i)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=$u){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=Soe.replace(Cn.FRAGMENT_HEAD,t.get(Cn.FRAGMENT_HEAD)||"").replace(Cn.FRAGMENT_MAIN_UV,t.get(Cn.FRAGMENT_MAIN_UV)||"").replace(Cn.FRAGMENT_MAIN_IMAGE,t.get(Cn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Eoe.replace(Cn.VERTEX_HEAD,t.get(Cn.VERTEX_HEAD)||"").replace(Cn.VERTEX_MAIN_SUPPORT,t.get(Cn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof bi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Cn}};function I6(t,e,n){for(const i of e){const r="$1"+t+i.charAt(0).toUpperCase()+i.slice(1),a=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const s of n.entries())s[1]!==null&&n.set(s[0],s[1].replace(a,r))}}function Toe(t,e,n){let i=e.getFragmentShader(),r=e.getVertexShader();const a=i!==void 0&&/mainImage/.test(i),s=i!==void 0&&/mainUv/.test(i);if(n.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(s&&n.attributes&uh.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!a&&!s)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts;let f=l.get(Cn.FRAGMENT_HEAD)||"",h=l.get(Cn.FRAGMENT_MAIN_UV)||"",d=l.get(Cn.FRAGMENT_MAIN_IMAGE)||"",p=l.get(Cn.VERTEX_HEAD)||"",g=l.get(Cn.VERTEX_MAIN_SUPPORT)||"";const y=new Set,S=new Set;if(s&&(h+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const x=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);g+=`	${t}MainSupport(`,g+=x?`vUv);
`:`);
`;for(const E of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const T of E[1].split(/\s*,\s*/))n.varyings.add(T),y.add(T),S.add(T);for(const E of r.matchAll(o))S.add(E[1])}for(const x of i.matchAll(o))S.add(x[1]);for(const x of e.defines.keys())S.add(x.replace(/\([\w\s,]*\)/g,""));for(const x of e.uniforms.keys())S.add(x);S.delete("while"),S.delete("for"),S.delete("if"),e.uniforms.forEach((x,E)=>n.uniforms.set(t+E.charAt(0).toUpperCase()+E.slice(1),x)),e.defines.forEach((x,E)=>n.defines.set(t+E.charAt(0).toUpperCase()+E.slice(1),x));const b=new Map([["fragment",i],["vertex",r]]);I6(t,S,n.defines),I6(t,S,b),i=b.get("fragment"),r=b.get("vertex");const v=e.blendMode;if(n.blendModes.set(v.blendFunction,v),a){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(d+=e.inputColorSpace===En?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Ro?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const x=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${t}MainImage(color0, UV, `,n.attributes&uh.DEPTH&&x.test(i)&&(d+="depth, ",n.readDepth=!0),d+=`color1);
	`;const E=t+"BlendOpacity";n.uniforms.set(E,v.opacity),d+=`color0 = blend${v.blendFunction}(color0, color1, ${E});

	`,f+=`uniform float ${E};

`}if(f+=i+`
`,r!==null&&(p+=r+`
`),l.set(Cn.FRAGMENT_HEAD,f),l.set(Cn.FRAGMENT_MAIN_UV,h),l.set(Cn.FRAGMENT_MAIN_IMAGE,d),l.set(Cn.VERTEX_HEAD,p),l.set(Cn.VERTEX_MAIN_SUPPORT,g),e.extensions!==null)for(const x of e.extensions)n.extensions.add(x)}}var Aoe=class extends Ga{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new Moe(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}get alpha(){return this.renderer!==null&&this.renderer.getContext().getContextAttributes().alpha}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new xse;let e=0;for(const s of this.effects)if(s.blendMode.blendFunction===dn.DST)t.attributes|=s.getAttributes()&uh.DEPTH;else{if(t.attributes&s.getAttributes()&uh.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${s.name})`);Toe("e"+e++,s,t)}let n=t.shaderParts.get(Cn.FRAGMENT_HEAD),i=t.shaderParts.get(Cn.FRAGMENT_MAIN_IMAGE),r=t.shaderParts.get(Cn.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const s of t.blendModes.values())n+=s.getShaderCode().replace(a,`blend${s.blendFunction}`)+`
`;t.attributes&uh.DEPTH?(t.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===En&&(i+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Cn.FRAGMENT_HEAD,n),t.shaderParts.set(Cn.FRAGMENT_MAIN_IMAGE,i),t.shaderParts.set(Cn.FRAGMENT_MAIN_UV,r);for(const[s,o]of t.shaderParts)o!==null&&t.shaderParts.set(s,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=$u){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,i,r){for(const a of this.effects)a.update(t,e,i);if(!this.skipRendering||this.renderToScreen){const a=this.fullscreenMaterial;a.transparent=this.renderToScreen&&this.alpha,a.inputBuffer=e.texture,a.time+=i*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const i of this.effects)i.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==fi&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},woe=class extends Ga{constructor(t,e,{renderTarget:n,resolutionScale:i=1,width:r=Qr.AUTO_SIZE,height:a=Qr.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new c9(t,e,new Z4);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const f=l.getClearPass();f.overrideClearColor=new lt(7829503),f.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new si(1,1,{minFilter:pi,magFilter:pi}),this.renderTarget.texture.name="NormalPass.Target");const h=this.resolution=new Qr(this,s,o,i);h.addEventListener("change",d=>this.setSize(h.baseWidth,h.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,a,a)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}};function Eg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}new xe;new xe;function u9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ks=function t(e,n,i){var r=this;u9(this,t),Eg(this,"dot2",function(a,s){return r.x*a+r.y*s}),Eg(this,"dot3",function(a,s,o){return r.x*a+r.y*s+r.z*o}),this.x=e,this.y=n,this.z=i},Coe=[new ks(1,1,0),new ks(-1,1,0),new ks(1,-1,0),new ks(-1,-1,0),new ks(1,0,1),new ks(-1,0,1),new ks(1,0,-1),new ks(-1,0,-1),new ks(0,1,1),new ks(0,-1,1),new ks(0,1,-1),new ks(0,-1,-1)],z6=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],B6=new Array(512),F6=new Array(512),Roe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var i;n&1?i=z6[n]^e&255:i=z6[n]^e>>8&255,B6[n]=B6[n+256]=i,F6[n]=F6[n+256]=Coe[i%12]}};Roe(0);function Doe(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function H6(t){var e=Doe(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var Ooe=function t(e){var n=this;u9(this,t),Eg(this,"seed",0),Eg(this,"init",function(i){n.seed=i,n.value=H6(i)}),Eg(this,"value",H6(this.seed)),this.init(e)};new Ooe(Math.random());const Noe=O.createContext(null),V6=t=>(t.getAttributes()&2)===2,Uoe=O.memo(O.forwardRef(({children:t,camera:e,scene:n,resolutionScale:i,enabled:r=!0,renderPriority:a=1,autoClear:s=!0,depthBuffer:o,enableNormalPass:l,stencilBuffer:f,multisampling:h=8,frameBufferType:d=Ei},p)=>{const{gl:g,scene:y,camera:S,size:b}=Wi(),v=n||y,x=e||S,[E,T,w]=O.useMemo(()=>{const U=new _se(g,{depthBuffer:o,stencilBuffer:f,multisampling:h,frameBufferType:d});U.addPass(new c9(v,x));let A=null,C=null;return l&&(C=new woe(v,x),C.enabled=!1,U.addPass(C),i!==void 0&&(A=new boe({normalBuffer:C.texture,resolutionScale:i}),A.enabled=!1,U.addPass(A))),[U,C,A]},[x,g,o,f,h,d,v,l,i]);O.useEffect(()=>E==null?void 0:E.setSize(b.width,b.height),[E,b]),ta((U,A)=>{if(r){const C=g.autoClear;g.autoClear=s,f&&!s&&g.clearStencil(),E.render(A),g.autoClear=C}},r?a:0);const R=O.useRef(null);O.useLayoutEffect(()=>{var C;const U=[],A=R.current.__r3f;if(A&&E){const I=A.children;for(let X=0;X<I.length;X++){const j=I[X].object;if(j instanceof MA){const Y=[j];if(!V6(j)){let z=null;for(;(z=(C=I[X+1])==null?void 0:C.object)instanceof MA&&!V6(z);)Y.push(z),X++}const Z=new Aoe(x,...Y);U.push(Z)}else j instanceof Ga&&U.push(j)}for(const X of U)E==null||E.addPass(X);T&&(T.enabled=!0),w&&(w.enabled=!0)}return()=>{for(const I of U)E==null||E.removePass(I);T&&(T.enabled=!1),w&&(w.enabled=!1)}},[E,t,x,T,w]),O.useEffect(()=>{const U=g.toneMapping;return g.toneMapping=gs,()=>{g.toneMapping=U}},[g]);const N=O.useMemo(()=>({composer:E,normalPass:T,downSamplingPass:w,resolutionScale:i,camera:x,scene:v}),[E,T,w,i,x,v]);return O.useImperativeHandle(p,()=>E,[E]),$.jsx(Noe.Provider,{value:N,children:$.jsx("group",{ref:R,children:t})})}));let Loe=0;const G6=new WeakMap,Poe=(t,e)=>function({blendFunction:n=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...r}){let a=G6.get(t);if(!a){const l=`@react-three/postprocessing/${t.name}-${Loe++}`;L2({[l]:t}),G6.set(t,a=l)}const s=Wi(l=>l.camera),o=J.useMemo(()=>[...(e==null?void 0:e.args)??[],...r.args??[{...e,...r}]],[JSON.stringify(r)]);return $.jsx(a,{camera:s,"blendMode-blendFunction":n,"blendMode-opacity-value":i,...r,args:o})},Ioe=Poe(voe,{blendFunction:0});function k6(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function kh(...t){return e=>{let n=!1;const i=t.map(r=>{const a=k6(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():k6(t[r],null)}}}}function jh(...t){return O.useCallback(kh(...t),t)}var zoe=Symbol.for("react.lazy"),ub=bw[" use ".trim().toString()];function Boe(t){return typeof t=="object"&&t!==null&&"then"in t}function f9(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===zoe&&"_payload"in t&&Boe(t._payload)}function Foe(t){const e=Hoe(t),n=O.forwardRef((i,r)=>{let{children:a,...s}=i;f9(a)&&typeof ub=="function"&&(a=ub(a._payload));const o=O.Children.toArray(a),l=o.find(Goe);if(l){const f=l.props.children,h=o.map(d=>d===l?O.Children.count(f)>1?O.Children.only(null):O.isValidElement(f)?f.props.children:null:d);return $.jsx(e,{...s,ref:r,children:O.isValidElement(f)?O.cloneElement(f,void 0,h):null})}return $.jsx(e,{...s,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function Hoe(t){const e=O.forwardRef((n,i)=>{let{children:r,...a}=n;if(f9(r)&&typeof ub=="function"&&(r=ub(r._payload)),O.isValidElement(r)){const s=joe(r),o=koe(a,r.props);return r.type!==O.Fragment&&(o.ref=i?kh(i,s):s),O.cloneElement(r,o)}return O.Children.count(r)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Voe=Symbol("radix.slottable");function Goe(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Voe}function koe(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function joe(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Xoe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Woe=Xoe.reduce((t,e)=>{const n=Foe(`Primitive.${e}`),i=O.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),Hu=globalThis!=null&&globalThis.document?O.useLayoutEffect:()=>{},Yoe="Portal",h9=O.forwardRef((t,e)=>{var o;const{container:n,...i}=t,[r,a]=O.useState(!1);Hu(()=>a(!0),[]);const s=n||r&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?PX.createPortal($.jsx(Woe.div,{...i,ref:e}),s):null});h9.displayName=Yoe;var qoe=h9,j6=Object.prototype.hasOwnProperty;function uv(t,e){var n,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&uv(t[i],e[i]););return i===-1}if(!n||typeof t=="object"){i=0;for(n in t)if(j6.call(t,n)&&++i&&!j6.call(e,n)||!(n in e)||!uv(t[n],e[n]))return!1;return Object.keys(e).length===i}}return t!==t&&e!==e}function z2(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!Object.is(t[n[i]],e[n[i]]))return!1;return!0}var B2=function(e,n,i,r){this.name=e,this.fn=n,this.args=i,this.modifiers=r};B2.prototype._test=function(e){var n=this.fn;try{wp(this.modifiers.slice(),n,this)(e)}catch{n=function(){return!1}}try{return wp(this.modifiers.slice(),n,this)(e)}catch{return!1}};B2.prototype._check=function(e){try{wp(this.modifiers.slice(),this.fn,this)(e)}catch{if(wp(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!wp(this.modifiers.slice(),this.fn,this)(e))throw null};B2.prototype._testAsync=function(e){var n=this;return new Promise(function(i,r){p9(n.modifiers.slice(),n.fn,n)(e).then(function(a){a?i(e):r(null)}).catch(function(a){return r(a)})})};function d9(t,e){return e===void 0&&(e="simple"),typeof t=="object"?t[e]:t}function wp(t,e,n){if(t.length){var i=t.shift(),r=wp(t,e,n);return i.perform(r,n)}else return d9(e)}function p9(t,e,n){if(t.length){var i=t.shift(),r=p9(t,e,n);return i.performAsync(r,n)}else return function(a){return Promise.resolve(d9(e,"async")(a))}}var Zoe=function(e,n,i){this.name=e,this.perform=n,this.performAsync=i},AC=function(t){function e(n,i,r,a){for(var s=[],o=arguments.length-4;o-- >0;)s[o]=arguments[o+4];t.call(this,s),t.captureStackTrace&&t.captureStackTrace(this,e),this.rule=n,this.value=i,this.cause=r,this.target=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),fl=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=[]),this.chain=e,this.nextRuleModifiers=n};fl.prototype._applyRule=function(e,n){var i=this;return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];return i.chain.push(new B2(n,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};fl.prototype._applyModifier=function(e,n){return this.nextRuleModifiers.push(new Zoe(n,e.simple,e.async)),this};fl.prototype._clone=function(){return new fl(this.chain.slice(),this.nextRuleModifiers.slice())};fl.prototype.test=function(e){return this.chain.every(function(n){return n._test(e)})};fl.prototype.testAll=function(e){var n=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){n.push(new AC(i,e,r))}}),n};fl.prototype.check=function(e){this.chain.forEach(function(n){try{n._check(e)}catch(i){throw new AC(n,e,i)}})};fl.prototype.testAsync=function(e){var n=this;return new Promise(function(i,r){m9(e,n.chain.slice(),i,r)})};function m9(t,e,n,i){if(e.length){var r=e.shift();r._testAsync(t).then(function(){m9(t,e,n,i)},function(a){i(new AC(r,t,a))})}else n(t)}var X6=function(t,e){return e&&typeof t=="string"&&t.trim().length===0?!0:t==null};function $oe(t,e){return e===void 0&&(e=!1),{simple:function(n){return X6(n,e)||t.check(n)===void 0},async:function(n){return X6(n,e)||t.testAsync(n)}}}function Pa(){return typeof Proxy<"u"?g9(new fl):TA(new fl)}var fv={};Pa.extend=function(t){Object.assign(fv,t)};Pa.clearCustomRules=function(){fv={}};function g9(t){return new Proxy(t,{get:function(n,i){if(i in n)return n[i];var r=g9(t._clone());if(i in fb)return r._applyModifier(fb[i],i);if(i in fv)return r._applyRule(fv[i],i);if(i in AA)return r._applyRule(AA[i],i)}})}function TA(t){var e=function(r,a){return Object.keys(r).forEach(function(s){a[s]=function(){for(var o=[],l=arguments.length;l--;)o[l]=arguments[l];var f=TA(a._clone()),h=f._applyRule(r[s],s).apply(void 0,o);return h}}),a},n=e(AA,t),i=e(fv,n);return Object.keys(fb).forEach(function(r){Object.defineProperty(i,r,{get:function(){var a=TA(i._clone());return a._applyModifier(fb[r],r)}})}),i}var fb={not:{simple:function(t){return function(e){return!t(e)}},async:function(t){return function(e){return Promise.resolve(t(e)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(t){return function(e){return Qy(e).some(function(n){try{return t(n)}catch{return!1}})}},async:function(t){return function(e){return Promise.all(Qy(e).map(function(n){try{return t(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(t){return function(e){return e!==!1&&Qy(e).every(t)}},async:function(t){return function(e){return Promise.all(Qy(e).map(t)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(t,e){return function(n){return W6(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&t(n):t(n)}},async:function(t,e){return function(n){return Promise.resolve(t(n)).then(function(i){return W6(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&i:i}).catch(function(){return!1})}}}};function W6(t){return t&&t.name==="schema"&&t.args.length>0&&typeof t.args[0]=="object"}function Qy(t){return typeof t=="string"?t.split(""):t}var AA={equal:function(t){return function(e){return e==t}},exact:function(t){return function(e){return e===t}},number:function(t){return t===void 0&&(t=!0),function(e){return typeof e=="number"&&(t||isFinite(e))}},integer:function(){return function(t){var e=Number.isInteger||Koe;return e(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return Xd("string")},boolean:function(){return Xd("boolean")},undefined:function(){return Xd("undefined")},null:function(){return Xd("null")},array:function(){return Xd("array")},object:function(){return Xd("object")},instanceOf:function(t){return function(e){return e instanceof t}},pattern:function(t){return function(e){return t.test(e)}},lowercase:function(){return function(t){return typeof t=="boolean"||t===t.toLowerCase()&&t.trim()!==""}},uppercase:function(){return function(t){return t===t.toUpperCase()&&t.trim()!==""}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(e){return e[0]==t}},last:function(t){return function(e){return e[e.length-1]==t}},empty:function(){return function(t){return t.length===0}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(e){return e.length>=t}},maxLength:function(t){return function(e){return e.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,e){return function(n){return n>=t&&n<=e}},range:function(t,e){return function(n){return n>=t&&n<=e}},lessThan:function(t){return function(e){return e<t}},lessThanOrEqual:function(t){return function(e){return e<=t}},greaterThan:function(t){return function(e){return e>t}},greaterThanOrEqual:function(t){return function(e){return e>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(e){return~e.indexOf(t)}},schema:function(t){return Qoe(t)},passesAnyOf:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(n){return t.some(function(i){return i.test(n)})}},optional:$oe};function Xd(t){return function(e){return Array.isArray(e)&&t==="array"||e===null&&t==="null"||typeof e===t}}function Koe(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function Qoe(t){return{simple:function(e){var n=[];if(Object.keys(t).forEach(function(i){var r=t[i];try{r.check((e||{})[i])}catch(a){a.target=i,n.push(a)}}),n.length>0)throw n;return!0},async:function(e){var n=[],i=Object.keys(t).map(function(r){var a=t[r];return a.testAsync((e||{})[r]).catch(function(s){s.target=r,n.push(s)})});return Promise.all(i).then(function(){if(n.length>0)throw n;return!0})}}}var Yn="colors",oa="sizes",Tt="space",Joe={gap:Tt,gridGap:Tt,columnGap:Tt,gridColumnGap:Tt,rowGap:Tt,gridRowGap:Tt,inset:Tt,insetBlock:Tt,insetBlockEnd:Tt,insetBlockStart:Tt,insetInline:Tt,insetInlineEnd:Tt,insetInlineStart:Tt,margin:Tt,marginTop:Tt,marginRight:Tt,marginBottom:Tt,marginLeft:Tt,marginBlock:Tt,marginBlockEnd:Tt,marginBlockStart:Tt,marginInline:Tt,marginInlineEnd:Tt,marginInlineStart:Tt,padding:Tt,paddingTop:Tt,paddingRight:Tt,paddingBottom:Tt,paddingLeft:Tt,paddingBlock:Tt,paddingBlockEnd:Tt,paddingBlockStart:Tt,paddingInline:Tt,paddingInlineEnd:Tt,paddingInlineStart:Tt,top:Tt,right:Tt,bottom:Tt,left:Tt,scrollMargin:Tt,scrollMarginTop:Tt,scrollMarginRight:Tt,scrollMarginBottom:Tt,scrollMarginLeft:Tt,scrollMarginX:Tt,scrollMarginY:Tt,scrollMarginBlock:Tt,scrollMarginBlockEnd:Tt,scrollMarginBlockStart:Tt,scrollMarginInline:Tt,scrollMarginInlineEnd:Tt,scrollMarginInlineStart:Tt,scrollPadding:Tt,scrollPaddingTop:Tt,scrollPaddingRight:Tt,scrollPaddingBottom:Tt,scrollPaddingLeft:Tt,scrollPaddingX:Tt,scrollPaddingY:Tt,scrollPaddingBlock:Tt,scrollPaddingBlockEnd:Tt,scrollPaddingBlockStart:Tt,scrollPaddingInline:Tt,scrollPaddingInlineEnd:Tt,scrollPaddingInlineStart:Tt,fontSize:"fontSizes",background:Yn,backgroundColor:Yn,backgroundImage:Yn,borderImage:Yn,border:Yn,borderBlock:Yn,borderBlockEnd:Yn,borderBlockStart:Yn,borderBottom:Yn,borderBottomColor:Yn,borderColor:Yn,borderInline:Yn,borderInlineEnd:Yn,borderInlineStart:Yn,borderLeft:Yn,borderLeftColor:Yn,borderRight:Yn,borderRightColor:Yn,borderTop:Yn,borderTopColor:Yn,caretColor:Yn,color:Yn,columnRuleColor:Yn,fill:Yn,outline:Yn,outlineColor:Yn,stroke:Yn,textDecorationColor:Yn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:oa,minBlockSize:oa,maxBlockSize:oa,inlineSize:oa,minInlineSize:oa,maxInlineSize:oa,width:oa,minWidth:oa,maxWidth:oa,height:oa,minHeight:oa,maxHeight:oa,flexBasis:oa,gridTemplateColumns:oa,gridTemplateRows:oa,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},ele=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,wm=()=>{const t=Object.create(null);return(e,n,...i)=>{const r=(a=>JSON.stringify(a,ele))(e);return r in t?t[r]:t[r]=n(e,...i)}},fh=Symbol.for("sxs.internal"),wC=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),Y6=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:tle}=Object.prototype,wA=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),nle=/\s+(?![^()]*\))/,Wd=t=>e=>t(...typeof e=="string"?String(e).split(nle):[e]),q6={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:Wd((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:Wd((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:Wd((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:Wd((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:Wd((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:Wd((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},wM=/([\d.]+)([^]*)/,ile=(t,e)=>t.length?t.reduce((n,i)=>(n.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),n),[]):e,rle=(t,e)=>t in ale&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,i,r,a)=>i+(r==="stretch"?`-moz-available${a};${wA(t)}:${i}-webkit-fill-available`:`-moz-fit-content${a};${wA(t)}:${i}fit-content`)+a):String(e),ale={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},mc=t=>t?t+"-":"",v9=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,a,s,o)=>s=="$"==!!a?i:(r||s=="--"?"calc(":"")+"var(--"+(s==="$"?mc(e)+(o.includes("$")?"":mc(n))+o.replace(/\$/g,"-"):o)+")"+(r||s=="--"?"*"+(r||"")+(a||"1")+")":"")),sle=/\s*,\s*(?![^()]*\))/,ole=Object.prototype.toString,pp=(t,e,n,i,r)=>{let a,s,o;const l=(f,h,d)=>{let p,g;const y=S=>{for(p in S){const x=p.charCodeAt(0)===64,E=x&&Array.isArray(S[p])?S[p]:[S[p]];for(g of E){const T=/[A-Z]/.test(v=p)?v:v.replace(/-[^]/g,R=>R[1].toUpperCase()),w=typeof g=="object"&&g&&g.toString===ole&&(!i.utils[T]||!h.length);if(T in i.utils&&!w){const R=i.utils[T];if(R!==s){s=R,y(R(g)),s=null;continue}}else if(T in q6){const R=q6[T];if(R!==o){o=R,y(R(g)),o=null;continue}}if(x&&(b=p.slice(1)in i.media?"@media "+i.media[p.slice(1)]:p,p=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(R,N,U,A,C,I)=>{const X=wM.test(N),j=.0625*(X?-1:1),[Y,Z]=X?[A,N]:[N,A];return"("+(U[0]==="="?"":U[0]===">"===X?"max-":"min-")+Y+":"+(U[0]!=="="&&U.length===1?Z.replace(wM,(z,G,q)=>Number(G)+j*(U===">"?1:-1)+q):Z)+(C?") and ("+(C[0]===">"?"min-":"max-")+Y+":"+(C.length===1?I.replace(wM,(z,G,q)=>Number(G)+j*(C===">"?-1:1)+q):I):"")+")"})),w){const R=x?d.concat(p):[...d],N=x?[...h]:ile(h,p.split(sle));a!==void 0&&r(Z6(...a)),a=void 0,l(g,N,R)}else a===void 0&&(a=[[],h,d]),p=x||p.charCodeAt(0)!==36?p:`--${mc(i.prefix)}${p.slice(1).replace(/\$/g,"-")}`,g=w?g:typeof g=="number"?g&&T in lle?String(g)+"px":String(g):v9(rle(T,g??""),i.prefix,i.themeMap[T]),a[0].push(`${x?`${p} `:`${wA(p)}:`}${g}`)}}var b,v};y(f),a!==void 0&&r(Z6(...a)),a=void 0};l(t,e,n)},Z6=(t,e,n)=>`${n.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,lle={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},$6=t=>String.fromCharCode(t+(t>25?39:97)),hh=t=>(e=>{let n,i="";for(n=Math.abs(e);n>52;n=n/52|0)i=$6(n%52)+i;return $6(n%52)+i})(((e,n)=>{let i=n.length;for(;i;)e=33*e^n.charCodeAt(--i);return e})(5381,JSON.stringify(t))>>>0),Z0=["themed","global","styled","onevar","resonevar","allvar","inline"],cle=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},ule=t=>{let e;const n=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(a,s)=>{const{cssText:o}=a;let l="";if(o.startsWith("--sxs"))return"";if(r[s-1]&&(l=r[s-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(const f in e.rules)if(e.rules[f].group===a)return`--sxs{--sxs:${[...e.rules[f].cache].join(" ")}}${o}`;return a.cssRules.length?`${l}${o}`:""}return o}).join("")},i=()=>{if(e){const{rules:o,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const f in o)delete o[f]}const r=Object(t).styleSheets||[];for(const o of r)if(cle(o)){for(let l=0,f=o.cssRules;f[l];++l){const h=Object(f[l]);if(h.type!==1)continue;const d=Object(f[l+1]);if(d.type!==4)continue;++l;const{cssText:p}=h;if(!p.startsWith("--sxs"))continue;const g=p.slice(14,-3).trim().split(/\s+/),y=Z0[g[0]];y&&(e||(e={sheet:o,reset:i,rules:{},toString:n}),e.rules[y]={group:d,index:l,cache:new Set(g)})}if(e)break}if(!e){const o=(l,f)=>({type:f,cssRules:[],insertRule(h,d){this.cssRules.splice(d,0,o(h,{import:3,undefined:1}[(h.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,h=>h.cssText).join("")}}`:l}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:i,toString:n}}const{sheet:a,rules:s}=e;for(let o=Z0.length-1;o>=0;--o){const l=Z0[o];if(!s[l]){const f=Z0[o+1],h=s[f]?s[f].index:a.cssRules.length;a.insertRule("@media{}",h),a.insertRule(`--sxs{--sxs:${o}}`,h),s[l]={group:a.cssRules[h+1],index:h,cache:new Set([o])}}fle(s[l])}};return i(),e},fle=t=>{const e=t.group;let n=e.cssRules.length;t.apply=i=>{try{e.insertRule(i,n),++n}catch{}}},L0=Symbol(),hle=wm(),K6=(t,e)=>hle(t,()=>(...n)=>{let i={type:null,composers:new Set};for(const r of n)if(r!=null)if(r[fh]){i.type==null&&(i.type=r[fh].type);for(const a of r[fh].composers)i.composers.add(a)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(dle(r,t));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),ple(t,i,e)}),dle=({variants:t,compoundVariants:e,defaultVariants:n,...i},r)=>{const a=`${mc(r.prefix)}c-${hh(i)}`,s=[],o=[],l=Object.create(null),f=[];for(const p in n)l[p]=String(n[p]);if(typeof t=="object"&&t)for(const p in t){h=l,d=p,tle.call(h,d)||(l[p]="undefined");const g=t[p];for(const y in g){const S={[p]:String(y)};String(y)==="undefined"&&f.push(p);const b=g[y],v=[S,b,!Y6(b)];s.push(v)}}var h,d;if(typeof e=="object"&&e)for(const p of e){let{css:g,...y}=p;g=typeof g=="object"&&g||{};for(const b in y)y[b]=String(y[b]);const S=[y,g,!Y6(g)];o.push(S)}return[a,i,s,o,l,f]},ple=(t,e,n)=>{const[i,r,a,s]=mle(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(d=>{function p(){for(let g=0;g<p[L0].length;g++){const[y,S]=p[L0][g];d.rules[y].apply(S)}return p[L0]=[],null}return p[L0]=[],p.rules={},Z0.forEach(g=>p.rules[g]={apply:y=>p[L0].push([g,y])}),p})(n):null,l=(o||n).rules,f=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,h=d=>{d=typeof d=="object"&&d||gle;const{css:p,...g}=d,y={};for(const v in a)if(delete g[v],v in d){let x=d[v];typeof x=="object"&&x?y[v]={"@initial":a[v],...x}:(x=String(x),y[v]=x!=="undefined"||s.has(v)?x:a[v])}else y[v]=a[v];const S=new Set([...r]);for(const[v,x,E,T]of e.composers){n.rules.styled.cache.has(v)||(n.rules.styled.cache.add(v),pp(x,[`.${v}`],[],t,N=>{l.styled.apply(N)}));const w=Q6(E,y,t.media),R=Q6(T,y,t.media,!0);for(const N of w)if(N!==void 0)for(const[U,A,C]of N){const I=`${v}-${hh(A)}-${U}`;S.add(I);const X=(C?n.rules.resonevar:n.rules.onevar).cache,j=C?l.resonevar:l.onevar;X.has(I)||(X.add(I),pp(A,[`.${I}`],[],t,Y=>{j.apply(Y)}))}for(const N of R)if(N!==void 0)for(const[U,A]of N){const C=`${v}-${hh(A)}-${U}`;S.add(C),n.rules.allvar.cache.has(C)||(n.rules.allvar.cache.add(C),pp(A,[`.${C}`],[],t,I=>{l.allvar.apply(I)}))}}if(typeof p=="object"&&p){const v=`${i}-i${hh(p)}-css`;S.add(v),n.rules.inline.cache.has(v)||(n.rules.inline.cache.add(v),pp(p,[`.${v}`],[],t,x=>{l.inline.apply(x)}))}for(const v of String(d.className||"").trim().split(/\s+/))v&&S.add(v);const b=g.className=[...S].join(" ");return{type:e.type,className:b,selector:f,props:g,toString:()=>b,deferredInjector:o}};return wC(h,{className:i,selector:f,[fh]:e,toString:()=>(n.rules.styled.cache.has(i)||h(),i)})},mle=t=>{let e="";const n=[],i={},r=[];for(const[a,,,,s,o]of t){e===""&&(e=a),n.push(a),r.push(...o);for(const l in s){const f=s[l];(i[l]===void 0||f!=="undefined"||o.includes(f))&&(i[l]=f)}}return[e,n,i,new Set(r)]},Q6=(t,e,n,i)=>{const r=[];e:for(let[a,s,o]of t){if(o)continue;let l,f=0,h=!1;for(l in a){const d=a[l];let p=e[l];if(p!==d){if(typeof p!="object"||!p)continue e;{let g,y,S=0;for(const b in p){if(d===String(p[b])){if(b!=="@initial"){const v=b.slice(1);(y=y||[]).push(v in n?n[v]:b.replace(/^@media ?/,"")),h=!0}f+=S,g=!0}++S}if(y&&y.length&&(s={["@media "+y.join(", ")]:s}),!g)continue e}}}(r[f]=r[f]||[]).push([i?"cv":`${l}-${a[l]}`,s,h])}return r},gle={},vle=wm(),yle=(t,e)=>vle(t,()=>(...n)=>{const i=()=>{for(let r of n){r=typeof r=="object"&&r||{};let a=hh(r);if(!e.rules.global.cache.has(a)){if(e.rules.global.cache.add(a),"@import"in r){let s=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(r["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,s++);delete r["@import"]}pp(r,[],[],t,s=>{e.rules.global.apply(s)})}}return""};return wC(i,{toString:i})}),_le=wm(),xle=(t,e)=>_le(t,()=>n=>{const i=`${mc(t.prefix)}k-${hh(n)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const a=[];pp(n,[],[],t,o=>a.push(o));const s=`@keyframes ${i}{${a.join("")}}`;e.rules.global.apply(s)}return i};return wC(r,{get name(){return r()},toString:r})}),ble=class{constructor(e,n,i,r){this.token=e==null?"":String(e),this.value=n==null?"":String(n),this.scale=i==null?"":String(i),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+mc(this.prefix)+mc(this.scale)+this.token}toString(){return this.computedValue}},Sle=wm(),Ele=(t,e)=>Sle(t,()=>(n,i)=>{i=typeof n=="object"&&n||Object(i);const r=`.${n=(n=typeof n=="string"?n:"")||`${mc(t.prefix)}t-${hh(i)}`}`,a={},s=[];for(const l in i){a[l]={};for(const f in i[l]){const h=`--${mc(t.prefix)}${l}-${f}`,d=v9(String(i[l][f]),t.prefix,l);a[l][f]=new ble(f,d,l,t.prefix),s.push(`${h}:${d}`)}}const o=()=>{if(s.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const l=`${i===t.theme?":root,":""}.${n}{${s.join(";")}}`;e.rules.themed.apply(l)}return n};return{...a,get className(){return o()},selector:r,toString:o}}),Mle=wm(),Tle=wm(),Ale=t=>{const e=(n=>{let i=!1;const r=Mle(n,a=>{i=!0;const s="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",o=typeof a.media=="object"&&a.media||{},l=typeof a.root=="object"?a.root||null:globalThis.document||null,f=typeof a.theme=="object"&&a.theme||{},h={prefix:s,media:o,theme:f,themeMap:typeof a.themeMap=="object"&&a.themeMap||{...Joe},utils:typeof a.utils=="object"&&a.utils||{}},d=ule(l),p={css:K6(h,d),globalCss:yle(h,d),keyframes:xle(h,d),createTheme:Ele(h,d),reset(){d.reset(),p.theme.toString()},theme:{},sheet:d,config:h,prefix:s,getCssText:d.toString,toString:d.toString};return String(p.theme=p.createTheme(f)),p});return i||r.reset(),r})(t);return e.styled=(({config:n,sheet:i})=>Tle(n,()=>{const r=K6(n,i);return(...a)=>{const s=r(...a),o=s[fh].type,l=J.forwardRef((f,h)=>{const d=f&&f.as||o,{props:p,deferredInjector:g}=s(f);return delete p.as,p.ref=h,g?J.createElement(J.Fragment,null,J.createElement(d,p),J.createElement(g,null)):J.createElement(d,p)});return l.className=s.className,l.displayName=`Styled.${o.displayName||o.name||o}`,l.selector=s.selector,l.toString=()=>s.selector,l[fh]=s[fh],l}}))(e),e};function Wl(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function y9(t,e=[]){let n=[];function i(a,s){const o=O.createContext(s),l=n.length;n=[...n,s];const f=d=>{var v;const{scope:p,children:g,...y}=d,S=((v=p==null?void 0:p[t])==null?void 0:v[l])||o,b=O.useMemo(()=>y,Object.values(y));return $.jsx(S.Provider,{value:b,children:g})};f.displayName=a+"Provider";function h(d,p){var S;const g=((S=p==null?void 0:p[t])==null?void 0:S[l])||o,y=O.useContext(g);if(y)return y;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[f,h]}const r=()=>{const a=n.map(s=>O.createContext(s));return function(o){const l=(o==null?void 0:o[t])||a;return O.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return r.scopeName=t,[i,wle(r,...e)]}function wle(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const s=i.reduce((o,{useScope:l,scopeName:f})=>{const d=l(a)[`__scope${f}`];return{...o,...d}},{});return O.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function Cle(t){const e=Rle(t),n=O.forwardRef((i,r)=>{const{children:a,...s}=i,o=O.Children.toArray(a),l=o.find(Ole);if(l){const f=l.props.children,h=o.map(d=>d===l?O.Children.count(f)>1?O.Children.only(null):O.isValidElement(f)?f.props.children:null:d);return $.jsx(e,{...s,ref:r,children:O.isValidElement(f)?O.cloneElement(f,void 0,h):null})}return $.jsx(e,{...s,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function Rle(t){const e=O.forwardRef((n,i)=>{const{children:r,...a}=n;if(O.isValidElement(r)){const s=Ule(r),o=Nle(a,r.props);return r.type!==O.Fragment&&(o.ref=i?kh(i,s):s),O.cloneElement(r,o)}return O.Children.count(r)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Dle=Symbol("radix.slottable");function Ole(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Dle}function Nle(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function Ule(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Lle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_9=Lle.reduce((t,e)=>{const n=Cle(`Primitive.${e}`),i=O.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function Ple(t,e){t&&Lb.flushSync(()=>t.dispatchEvent(e))}function F2(t){const e=O.useRef(t);return O.useEffect(()=>{e.current=t}),O.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}function Ile(t,e=globalThis==null?void 0:globalThis.document){const n=F2(t);O.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var zle="DismissableLayer",CA="dismissableLayer.update",Ble="dismissableLayer.pointerDownOutside",Fle="dismissableLayer.focusOutside",J6,x9=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),b9=O.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...l}=t,f=O.useContext(x9),[h,d]=O.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=O.useState({}),y=jh(e,N=>d(N)),S=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),v=S.indexOf(b),x=h?S.indexOf(h):-1,E=f.layersWithOutsidePointerEventsDisabled.size>0,T=x>=v,w=Gle(N=>{const U=N.target,A=[...f.branches].some(C=>C.contains(U));!T||A||(r==null||r(N),s==null||s(N),N.defaultPrevented||o==null||o())},p),R=kle(N=>{const U=N.target;[...f.branches].some(C=>C.contains(U))||(a==null||a(N),s==null||s(N),N.defaultPrevented||o==null||o())},p);return Ile(N=>{x===f.layers.size-1&&(i==null||i(N),!N.defaultPrevented&&o&&(N.preventDefault(),o()))},p),O.useEffect(()=>{if(h)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(J6=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),eL(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=J6)}},[h,p,n,f]),O.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),eL())},[h,f]),O.useEffect(()=>{const N=()=>g({});return document.addEventListener(CA,N),()=>document.removeEventListener(CA,N)},[]),$.jsx(_9.div,{...l,ref:y,style:{pointerEvents:E?T?"auto":"none":void 0,...t.style},onFocusCapture:Wl(t.onFocusCapture,R.onFocusCapture),onBlurCapture:Wl(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Wl(t.onPointerDownCapture,w.onPointerDownCapture)})});b9.displayName=zle;var Hle="DismissableLayerBranch",Vle=O.forwardRef((t,e)=>{const n=O.useContext(x9),i=O.useRef(null),r=jh(e,i);return O.useEffect(()=>{const a=i.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),$.jsx(_9.div,{...t,ref:r})});Vle.displayName=Hle;function Gle(t,e=globalThis==null?void 0:globalThis.document){const n=F2(t),i=O.useRef(!1),r=O.useRef(()=>{});return O.useEffect(()=>{const a=o=>{if(o.target&&!i.current){let l=function(){S9(Ble,n,f,{discrete:!0})};const f={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function kle(t,e=globalThis==null?void 0:globalThis.document){const n=F2(t),i=O.useRef(!1);return O.useEffect(()=>{const r=a=>{a.target&&!i.current&&S9(Fle,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function eL(){const t=new CustomEvent(CA);document.dispatchEvent(t)}function S9(t,e,n,{discrete:i}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?Ple(r,a):r.dispatchEvent(a)}var jle=bw[" useId ".trim().toString()]||(()=>{}),Xle=0;function Wle(t){const[e,n]=O.useState(jle());return Hu(()=>{n(i=>i??String(Xle++))},[t]),e?`radix-${e}`:""}const Yle=["top","right","bottom","left"],Vu=Math.min,os=Math.max,hb=Math.round,Jy=Math.floor,ll=t=>({x:t,y:t}),qle={left:"right",right:"left",bottom:"top",top:"bottom"},Zle={start:"end",end:"start"};function RA(t,e,n){return os(t,Vu(e,n))}function gc(t,e){return typeof t=="function"?t(e):t}function vc(t){return t.split("-")[0]}function Cm(t){return t.split("-")[1]}function CC(t){return t==="x"?"y":"x"}function RC(t){return t==="y"?"height":"width"}const $le=new Set(["top","bottom"]);function sl(t){return $le.has(vc(t))?"y":"x"}function DC(t){return CC(sl(t))}function Kle(t,e,n){n===void 0&&(n=!1);const i=Cm(t),r=DC(t),a=RC(r);let s=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=db(s)),[s,db(s)]}function Qle(t){const e=db(t);return[DA(t),e,DA(e)]}function DA(t){return t.replace(/start|end/g,e=>Zle[e])}const tL=["left","right"],nL=["right","left"],Jle=["top","bottom"],ece=["bottom","top"];function tce(t,e,n){switch(t){case"top":case"bottom":return n?e?nL:tL:e?tL:nL;case"left":case"right":return e?Jle:ece;default:return[]}}function nce(t,e,n,i){const r=Cm(t);let a=tce(vc(t),n==="start",i);return r&&(a=a.map(s=>s+"-"+r),e&&(a=a.concat(a.map(DA)))),a}function db(t){return t.replace(/left|right|bottom|top/g,e=>qle[e])}function ice(t){return{top:0,right:0,bottom:0,left:0,...t}}function E9(t){return typeof t!="number"?ice(t):{top:t,right:t,bottom:t,left:t}}function pb(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function iL(t,e,n){let{reference:i,floating:r}=t;const a=sl(e),s=DC(e),o=RC(s),l=vc(e),f=a==="y",h=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,p=i[o]/2-r[o]/2;let g;switch(l){case"top":g={x:h,y:i.y-r.height};break;case"bottom":g={x:h,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:d};break;case"left":g={x:i.x-r.width,y:d};break;default:g={x:i.x,y:i.y}}switch(Cm(e)){case"start":g[s]-=p*(n&&f?-1:1);break;case"end":g[s]+=p*(n&&f?-1:1);break}return g}const rce=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let f=await s.getElementRects({reference:t,floating:e,strategy:r}),{x:h,y:d}=iL(f,i,l),p=i,g={},y=0;for(let S=0;S<o.length;S++){const{name:b,fn:v}=o[S],{x,y:E,data:T,reset:w}=await v({x:h,y:d,initialPlacement:i,placement:p,strategy:r,middlewareData:g,rects:f,platform:s,elements:{reference:t,floating:e}});h=x??h,d=E??d,g={...g,[b]:{...g[b],...T}},w&&y<=50&&(y++,typeof w=="object"&&(w.placement&&(p=w.placement),w.rects&&(f=w.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:r}):w.rects),{x:h,y:d}=iL(f,p,l)),S=-1)}return{x:h,y:d,placement:p,strategy:r,middlewareData:g}};async function hv(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:s,elements:o,strategy:l}=t,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:p=!1,padding:g=0}=gc(e,t),y=E9(g),b=o[p?d==="floating"?"reference":"floating":d],v=pb(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:f,rootBoundary:h,strategy:l})),x=d==="floating"?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),T=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},w=pb(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:E,strategy:l}):x);return{top:(v.top-w.top+y.top)/T.y,bottom:(w.bottom-v.bottom+y.bottom)/T.y,left:(v.left-w.left+y.left)/T.x,right:(w.right-v.right+y.right)/T.x}}const ace=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:f,padding:h=0}=gc(t,e)||{};if(f==null)return{};const d=E9(h),p={x:n,y:i},g=DC(r),y=RC(g),S=await s.getDimensions(f),b=g==="y",v=b?"top":"left",x=b?"bottom":"right",E=b?"clientHeight":"clientWidth",T=a.reference[y]+a.reference[g]-p[g]-a.floating[y],w=p[g]-a.reference[g],R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(f));let N=R?R[E]:0;(!N||!await(s.isElement==null?void 0:s.isElement(R)))&&(N=o.floating[E]||a.floating[y]);const U=T/2-w/2,A=N/2-S[y]/2-1,C=Vu(d[v],A),I=Vu(d[x],A),X=C,j=N-S[y]-I,Y=N/2-S[y]/2+U,Z=RA(X,Y,j),z=!l.arrow&&Cm(r)!=null&&Y!==Z&&a.reference[y]/2-(Y<X?C:I)-S[y]/2<0,G=z?Y<X?Y-X:Y-j:0;return{[g]:p[g]+G,data:{[g]:Z,centerOffset:Y-Z-G,...z&&{alignmentOffset:G}},reset:z}}}),sce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:f}=e,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:S=!0,...b}=gc(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=vc(r),x=sl(o),E=vc(o)===o,T=await(l.isRTL==null?void 0:l.isRTL(f.floating)),w=p||(E||!S?[db(o)]:Qle(o)),R=y!=="none";!p&&R&&w.push(...nce(o,S,y,T));const N=[o,...w],U=await hv(e,b),A=[];let C=((i=a.flip)==null?void 0:i.overflows)||[];if(h&&A.push(U[v]),d){const Y=Kle(r,s,T);A.push(U[Y[0]],U[Y[1]])}if(C=[...C,{placement:r,overflows:A}],!A.every(Y=>Y<=0)){var I,X;const Y=(((I=a.flip)==null?void 0:I.index)||0)+1,Z=N[Y];if(Z&&(!(d==="alignment"?x!==sl(Z):!1)||C.every(q=>sl(q.placement)===x?q.overflows[0]>0:!0)))return{data:{index:Y,overflows:C},reset:{placement:Z}};let z=(X=C.filter(G=>G.overflows[0]<=0).sort((G,q)=>G.overflows[1]-q.overflows[1])[0])==null?void 0:X.placement;if(!z)switch(g){case"bestFit":{var j;const G=(j=C.filter(q=>{if(R){const se=sl(q.placement);return se===x||se==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(se=>se>0).reduce((se,le)=>se+le,0)]).sort((q,se)=>q[1]-se[1])[0])==null?void 0:j[0];G&&(z=G);break}case"initialPlacement":z=o;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function rL(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function aL(t){return Yle.some(e=>t[e]>=0)}const oce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=gc(t,e);switch(i){case"referenceHidden":{const a=await hv(e,{...r,elementContext:"reference"}),s=rL(a,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:aL(s)}}}case"escaped":{const a=await hv(e,{...r,altBoundary:!0}),s=rL(a,n.floating);return{data:{escapedOffsets:s,escaped:aL(s)}}}default:return{}}}}},M9=new Set(["left","top"]);async function lce(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),s=vc(n),o=Cm(n),l=sl(n)==="y",f=M9.has(s)?-1:1,h=a&&l?-1:1,d=gc(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof y=="number"&&(g=o==="end"?y*-1:y),l?{x:g*h,y:p*f}:{x:p*f,y:g*h}}const cce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:s,middlewareData:o}=e,l=await lce(e,t);return s===((n=o.offset)==null?void 0:n.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:a+l.y,data:{...l,placement:s}}}}},uce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:b=>{let{x:v,y:x}=b;return{x:v,y:x}}},...l}=gc(t,e),f={x:n,y:i},h=await hv(e,l),d=sl(vc(r)),p=CC(d);let g=f[p],y=f[d];if(a){const b=p==="y"?"top":"left",v=p==="y"?"bottom":"right",x=g+h[b],E=g-h[v];g=RA(x,g,E)}if(s){const b=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=y+h[b],E=y-h[v];y=RA(x,y,E)}const S=o.fn({...e,[p]:g,[d]:y});return{...S,data:{x:S.x-n,y:S.y-i,enabled:{[p]:a,[d]:s}}}}}},fce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:l=!0,crossAxis:f=!0}=gc(t,e),h={x:n,y:i},d=sl(r),p=CC(d);let g=h[p],y=h[d];const S=gc(o,e),b=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(l){const E=p==="y"?"height":"width",T=a.reference[p]-a.floating[E]+b.mainAxis,w=a.reference[p]+a.reference[E]-b.mainAxis;g<T?g=T:g>w&&(g=w)}if(f){var v,x;const E=p==="y"?"width":"height",T=M9.has(vc(r)),w=a.reference[d]-a.floating[E]+(T&&((v=s.offset)==null?void 0:v[d])||0)+(T?0:b.crossAxis),R=a.reference[d]+a.reference[E]+(T?0:((x=s.offset)==null?void 0:x[d])||0)-(T?b.crossAxis:0);y<w?y=w:y>R&&(y=R)}return{[p]:g,[d]:y}}}},hce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:a,platform:s,elements:o}=e,{apply:l=()=>{},...f}=gc(t,e),h=await hv(e,f),d=vc(r),p=Cm(r),g=sl(r)==="y",{width:y,height:S}=a.floating;let b,v;d==="top"||d==="bottom"?(b=d,v=p===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(v=d,b=p==="end"?"top":"bottom");const x=S-h.top-h.bottom,E=y-h.left-h.right,T=Vu(S-h[b],x),w=Vu(y-h[v],E),R=!e.middlewareData.shift;let N=T,U=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(U=E),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(N=x),R&&!p){const C=os(h.left,0),I=os(h.right,0),X=os(h.top,0),j=os(h.bottom,0);g?U=y-2*(C!==0||I!==0?C+I:os(h.left,h.right)):N=S-2*(X!==0||j!==0?X+j:os(h.top,h.bottom))}await l({...e,availableWidth:U,availableHeight:N});const A=await s.getDimensions(o.floating);return y!==A.width||S!==A.height?{reset:{rects:!0}}:{}}}};function H2(){return typeof window<"u"}function Rm(t){return T9(t)?(t.nodeName||"").toLowerCase():"#document"}function xs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yl(t){var e;return(e=(T9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function T9(t){return H2()?t instanceof Node||t instanceof xs(t).Node:!1}function Uo(t){return H2()?t instanceof Element||t instanceof xs(t).Element:!1}function hl(t){return H2()?t instanceof HTMLElement||t instanceof xs(t).HTMLElement:!1}function sL(t){return!H2()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xs(t).ShadowRoot}const dce=new Set(["inline","contents"]);function Qv(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Lo(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!dce.has(r)}const pce=new Set(["table","td","th"]);function mce(t){return pce.has(Rm(t))}const gce=[":popover-open",":modal"];function V2(t){return gce.some(e=>{try{return t.matches(e)}catch{return!1}})}const vce=["transform","translate","scale","rotate","perspective"],yce=["transform","translate","scale","rotate","perspective","filter"],_ce=["paint","layout","strict","content"];function OC(t){const e=NC(),n=Uo(t)?Lo(t):t;return vce.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||yce.some(i=>(n.willChange||"").includes(i))||_ce.some(i=>(n.contain||"").includes(i))}function xce(t){let e=Gu(t);for(;hl(e)&&!tm(e);){if(OC(e))return e;if(V2(e))return null;e=Gu(e)}return null}function NC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const bce=new Set(["html","body","#document"]);function tm(t){return bce.has(Rm(t))}function Lo(t){return xs(t).getComputedStyle(t)}function G2(t){return Uo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Gu(t){if(Rm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sL(t)&&t.host||yl(t);return sL(e)?e.host:e}function A9(t){const e=Gu(t);return tm(e)?t.ownerDocument?t.ownerDocument.body:t.body:hl(e)&&Qv(e)?e:A9(e)}function dv(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=A9(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),s=xs(r);if(a){const o=OA(s);return e.concat(s,s.visualViewport||[],Qv(r)?r:[],o&&n?dv(o):[])}return e.concat(r,dv(r,[],n))}function OA(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function w9(t){const e=Lo(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=hl(t),a=r?t.offsetWidth:n,s=r?t.offsetHeight:i,o=hb(n)!==a||hb(i)!==s;return o&&(n=a,i=s),{width:n,height:i,$:o}}function UC(t){return Uo(t)?t:t.contextElement}function Cp(t){const e=UC(t);if(!hl(e))return ll(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=w9(e);let s=(a?hb(n.width):n.width)/i,o=(a?hb(n.height):n.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Sce=ll(0);function C9(t){const e=xs(t);return!NC()||!e.visualViewport?Sce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ece(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==xs(t)?!1:e}function wh(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=UC(t);let s=ll(1);e&&(i?Uo(i)&&(s=Cp(i)):s=Cp(t));const o=Ece(a,n,i)?C9(a):ll(0);let l=(r.left+o.x)/s.x,f=(r.top+o.y)/s.y,h=r.width/s.x,d=r.height/s.y;if(a){const p=xs(a),g=i&&Uo(i)?xs(i):i;let y=p,S=OA(y);for(;S&&i&&g!==y;){const b=Cp(S),v=S.getBoundingClientRect(),x=Lo(S),E=v.left+(S.clientLeft+parseFloat(x.paddingLeft))*b.x,T=v.top+(S.clientTop+parseFloat(x.paddingTop))*b.y;l*=b.x,f*=b.y,h*=b.x,d*=b.y,l+=E,f+=T,y=xs(S),S=OA(y)}}return pb({width:h,height:d,x:l,y:f})}function k2(t,e){const n=G2(t).scrollLeft;return e?e.left+n:wh(yl(t)).left+n}function R9(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-k2(t,n),r=n.top+e.scrollTop;return{x:i,y:r}}function Mce(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",s=yl(i),o=e?V2(e.floating):!1;if(i===s||o&&a)return n;let l={scrollLeft:0,scrollTop:0},f=ll(1);const h=ll(0),d=hl(i);if((d||!d&&!a)&&((Rm(i)!=="body"||Qv(s))&&(l=G2(i)),hl(i))){const g=wh(i);f=Cp(i),h.x=g.x+i.clientLeft,h.y=g.y+i.clientTop}const p=s&&!d&&!a?R9(s,l):ll(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-l.scrollLeft*f.x+h.x+p.x,y:n.y*f.y-l.scrollTop*f.y+h.y+p.y}}function Tce(t){return Array.from(t.getClientRects())}function Ace(t){const e=yl(t),n=G2(t),i=t.ownerDocument.body,r=os(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=os(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-n.scrollLeft+k2(t);const o=-n.scrollTop;return Lo(i).direction==="rtl"&&(s+=os(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:s,y:o}}const oL=25;function wce(t,e){const n=xs(t),i=yl(t),r=n.visualViewport;let a=i.clientWidth,s=i.clientHeight,o=0,l=0;if(r){a=r.width,s=r.height;const h=NC();(!h||h&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}const f=k2(i);if(f<=0){const h=i.ownerDocument,d=h.body,p=getComputedStyle(d),g=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(i.clientWidth-d.clientWidth-g);y<=oL&&(a-=y)}else f<=oL&&(a+=f);return{width:a,height:s,x:o,y:l}}const Cce=new Set(["absolute","fixed"]);function Rce(t,e){const n=wh(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=hl(t)?Cp(t):ll(1),s=t.clientWidth*a.x,o=t.clientHeight*a.y,l=r*a.x,f=i*a.y;return{width:s,height:o,x:l,y:f}}function lL(t,e,n){let i;if(e==="viewport")i=wce(t,n);else if(e==="document")i=Ace(yl(t));else if(Uo(e))i=Rce(e,n);else{const r=C9(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return pb(i)}function D9(t,e){const n=Gu(t);return n===e||!Uo(n)||tm(n)?!1:Lo(n).position==="fixed"||D9(n,e)}function Dce(t,e){const n=e.get(t);if(n)return n;let i=dv(t,[],!1).filter(o=>Uo(o)&&Rm(o)!=="body"),r=null;const a=Lo(t).position==="fixed";let s=a?Gu(t):t;for(;Uo(s)&&!tm(s);){const o=Lo(s),l=OC(s);!l&&o.position==="fixed"&&(r=null),(a?!l&&!r:!l&&o.position==="static"&&!!r&&Cce.has(r.position)||Qv(s)&&!l&&D9(t,s))?i=i.filter(h=>h!==s):r=o,s=Gu(s)}return e.set(t,i),i}function Oce(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?V2(e)?[]:Dce(e,this._c):[].concat(n),i],o=s[0],l=s.reduce((f,h)=>{const d=lL(e,h,r);return f.top=os(d.top,f.top),f.right=Vu(d.right,f.right),f.bottom=Vu(d.bottom,f.bottom),f.left=os(d.left,f.left),f},lL(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Nce(t){const{width:e,height:n}=w9(t);return{width:e,height:n}}function Uce(t,e,n){const i=hl(e),r=yl(e),a=n==="fixed",s=wh(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=ll(0);function f(){l.x=k2(r)}if(i||!i&&!a)if((Rm(e)!=="body"||Qv(r))&&(o=G2(e)),i){const g=wh(e,!0,a,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else r&&f();a&&!i&&r&&f();const h=r&&!i&&!a?R9(r,o):ll(0),d=s.left+o.scrollLeft-l.x-h.x,p=s.top+o.scrollTop-l.y-h.y;return{x:d,y:p,width:s.width,height:s.height}}function CM(t){return Lo(t).position==="static"}function cL(t,e){if(!hl(t)||Lo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return yl(t)===n&&(n=n.ownerDocument.body),n}function O9(t,e){const n=xs(t);if(V2(t))return n;if(!hl(t)){let r=Gu(t);for(;r&&!tm(r);){if(Uo(r)&&!CM(r))return r;r=Gu(r)}return n}let i=cL(t,e);for(;i&&mce(i)&&CM(i);)i=cL(i,e);return i&&tm(i)&&CM(i)&&!OC(i)?n:i||xce(t)||n}const Lce=async function(t){const e=this.getOffsetParent||O9,n=this.getDimensions,i=await n(t.floating);return{reference:Uce(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Pce(t){return Lo(t).direction==="rtl"}const Ice={convertOffsetParentRelativeRectToViewportRelativeRect:Mce,getDocumentElement:yl,getClippingRect:Oce,getOffsetParent:O9,getElementRects:Lce,getClientRects:Tce,getDimensions:Nce,getScale:Cp,isElement:Uo,isRTL:Pce};function N9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function zce(t,e){let n=null,i;const r=yl(t);function a(){var o;clearTimeout(i),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const f=t.getBoundingClientRect(),{left:h,top:d,width:p,height:g}=f;if(o||e(),!p||!g)return;const y=Jy(d),S=Jy(r.clientWidth-(h+p)),b=Jy(r.clientHeight-(d+g)),v=Jy(h),E={rootMargin:-y+"px "+-S+"px "+-b+"px "+-v+"px",threshold:os(0,Vu(1,l))||1};let T=!0;function w(R){const N=R[0].intersectionRatio;if(N!==l){if(!T)return s();N?s(!1,N):i=setTimeout(()=>{s(!1,1e-7)},1e3)}N===1&&!N9(f,t.getBoundingClientRect())&&s(),T=!1}try{n=new IntersectionObserver(w,{...E,root:r.ownerDocument})}catch{n=new IntersectionObserver(w,E)}n.observe(t)}return s(!0),a}function Bce(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,f=UC(t),h=r||a?[...f?dv(f):[],...dv(e)]:[];h.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const d=f&&o?zce(f,n):null;let p=-1,g=null;s&&(g=new ResizeObserver(v=>{let[x]=v;x&&x.target===f&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(e)})),n()}),f&&!l&&g.observe(f),g.observe(e));let y,S=l?wh(t):null;l&&b();function b(){const v=wh(t);S&&!N9(S,v)&&n(),S=v,y=requestAnimationFrame(b)}return n(),()=>{var v;h.forEach(x=>{r&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),d==null||d(),(v=g)==null||v.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const Fce=cce,Hce=uce,Vce=sce,Gce=hce,kce=oce,uL=ace,jce=fce,Xce=(t,e,n)=>{const i=new Map,r={platform:Ice,...n},a={...r.platform,_c:i};return rce(t,e,{...r,platform:a})};var Wce=typeof document<"u",Yce=function(){},N_=Wce?O.useLayoutEffect:Yce;function mb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!mb(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!(a==="_owner"&&t.$$typeof)&&!mb(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function U9(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function fL(t,e){const n=U9(t);return Math.round(e*n)/n}function RM(t){const e=O.useRef(t);return N_(()=>{e.current=t}),e}function qce(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:f}=t,[h,d]=O.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=O.useState(i);mb(p,i)||g(i);const[y,S]=O.useState(null),[b,v]=O.useState(null),x=O.useCallback(q=>{q!==R.current&&(R.current=q,S(q))},[]),E=O.useCallback(q=>{q!==N.current&&(N.current=q,v(q))},[]),T=a||y,w=s||b,R=O.useRef(null),N=O.useRef(null),U=O.useRef(h),A=l!=null,C=RM(l),I=RM(r),X=RM(f),j=O.useCallback(()=>{if(!R.current||!N.current)return;const q={placement:e,strategy:n,middleware:p};I.current&&(q.platform=I.current),Xce(R.current,N.current,q).then(se=>{const le={...se,isPositioned:X.current!==!1};Y.current&&!mb(U.current,le)&&(U.current=le,Lb.flushSync(()=>{d(le)}))})},[p,e,n,I,X]);N_(()=>{f===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,d(q=>({...q,isPositioned:!1})))},[f]);const Y=O.useRef(!1);N_(()=>(Y.current=!0,()=>{Y.current=!1}),[]),N_(()=>{if(T&&(R.current=T),w&&(N.current=w),T&&w){if(C.current)return C.current(T,w,j);j()}},[T,w,j,C,A]);const Z=O.useMemo(()=>({reference:R,floating:N,setReference:x,setFloating:E}),[x,E]),z=O.useMemo(()=>({reference:T,floating:w}),[T,w]),G=O.useMemo(()=>{const q={position:n,left:0,top:0};if(!z.floating)return q;const se=fL(z.floating,h.x),le=fL(z.floating,h.y);return o?{...q,transform:"translate("+se+"px, "+le+"px)",...U9(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:se,top:le}},[n,o,z.floating,h.x,h.y]);return O.useMemo(()=>({...h,update:j,refs:Z,elements:z,floatingStyles:G}),[h,j,Z,z,G])}const Zce=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?uL({element:i.current,padding:r}).fn(n):{}:i?uL({element:i,padding:r}).fn(n):{}}}},$ce=(t,e)=>({...Fce(t),options:[t,e]}),Kce=(t,e)=>({...Hce(t),options:[t,e]}),Qce=(t,e)=>({...jce(t),options:[t,e]}),Jce=(t,e)=>({...Vce(t),options:[t,e]}),eue=(t,e)=>({...Gce(t),options:[t,e]}),tue=(t,e)=>({...kce(t),options:[t,e]}),nue=(t,e)=>({...Zce(t),options:[t,e]});function iue(t){const e=rue(t),n=O.forwardRef((i,r)=>{const{children:a,...s}=i,o=O.Children.toArray(a),l=o.find(sue);if(l){const f=l.props.children,h=o.map(d=>d===l?O.Children.count(f)>1?O.Children.only(null):O.isValidElement(f)?f.props.children:null:d);return $.jsx(e,{...s,ref:r,children:O.isValidElement(f)?O.cloneElement(f,void 0,h):null})}return $.jsx(e,{...s,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function rue(t){const e=O.forwardRef((n,i)=>{const{children:r,...a}=n;if(O.isValidElement(r)){const s=lue(r),o=oue(a,r.props);return r.type!==O.Fragment&&(o.ref=i?kh(i,s):s),O.cloneElement(r,o)}return O.Children.count(r)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var aue=Symbol("radix.slottable");function sue(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aue}function oue(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function lue(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var cue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],uue=cue.reduce((t,e)=>{const n=iue(`Primitive.${e}`),i=O.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),fue="Arrow",L9=O.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...a}=t;return $.jsx(uue.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:$.jsx("polygon",{points:"0,0 30,0 15,10"})})});L9.displayName=fue;var hue=L9;function due(t){const e=pue(t),n=O.forwardRef((i,r)=>{const{children:a,...s}=i,o=O.Children.toArray(a),l=o.find(gue);if(l){const f=l.props.children,h=o.map(d=>d===l?O.Children.count(f)>1?O.Children.only(null):O.isValidElement(f)?f.props.children:null:d);return $.jsx(e,{...s,ref:r,children:O.isValidElement(f)?O.cloneElement(f,void 0,h):null})}return $.jsx(e,{...s,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function pue(t){const e=O.forwardRef((n,i)=>{const{children:r,...a}=n;if(O.isValidElement(r)){const s=yue(r),o=vue(a,r.props);return r.type!==O.Fragment&&(o.ref=i?kh(i,s):s),O.cloneElement(r,o)}return O.Children.count(r)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var mue=Symbol("radix.slottable");function gue(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mue}function vue(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function yue(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _ue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],P9=_ue.reduce((t,e)=>{const n=due(`Primitive.${e}`),i=O.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function xue(t){const[e,n]=O.useState(void 0);return Hu(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let s,o;if("borderBoxSize"in a){const l=a.borderBoxSize,f=Array.isArray(l)?l[0]:l;s=f.inlineSize,o=f.blockSize}else s=t.offsetWidth,o=t.offsetHeight;n({width:s,height:o})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var LC="Popper",[I9,z9]=y9(LC),[bue,B9]=I9(LC),F9=t=>{const{__scopePopper:e,children:n}=t,[i,r]=O.useState(null);return $.jsx(bue,{scope:e,anchor:i,onAnchorChange:r,children:n})};F9.displayName=LC;var H9="PopperAnchor",V9=O.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,a=B9(H9,n),s=O.useRef(null),o=jh(e,s),l=O.useRef(null);return O.useEffect(()=>{const f=l.current;l.current=(i==null?void 0:i.current)||s.current,f!==l.current&&a.onAnchorChange(l.current)}),i?null:$.jsx(P9.div,{...r,ref:o})});V9.displayName=H9;var PC="PopperContent",[Sue,Eue]=I9(PC),G9=O.forwardRef((t,e)=>{var Te,Fe,xt,Ze,ht,Ft;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:y,...S}=t,b=B9(PC,n),[v,x]=O.useState(null),E=jh(e,ct=>x(ct)),[T,w]=O.useState(null),R=xue(T),N=(R==null?void 0:R.width)??0,U=(R==null?void 0:R.height)??0,A=i+(a!=="center"?"-"+a:""),C=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(f)?f:[f],X=I.length>0,j={padding:C,boundary:I.filter(Tue),altBoundary:X},{refs:Y,floatingStyles:Z,placement:z,isPositioned:G,middlewareData:q}=qce({strategy:"fixed",placement:A,whileElementsMounted:(...ct)=>Bce(...ct,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[$ce({mainAxis:r+U,alignmentAxis:s}),l&&Kce({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Qce():void 0,...j}),l&&Jce({...j}),eue({...j,apply:({elements:ct,rects:Me,availableWidth:Oe,availableHeight:we})=>{const{width:Ge,height:W}=Me.reference,mt=ct.floating.style;mt.setProperty("--radix-popper-available-width",`${Oe}px`),mt.setProperty("--radix-popper-available-height",`${we}px`),mt.setProperty("--radix-popper-anchor-width",`${Ge}px`),mt.setProperty("--radix-popper-anchor-height",`${W}px`)}}),T&&nue({element:T,padding:o}),Aue({arrowWidth:N,arrowHeight:U}),p&&tue({strategy:"referenceHidden",...j})]}),[se,le]=X9(z),me=F2(y);Hu(()=>{G&&(me==null||me())},[G,me]);const Ae=(Te=q.arrow)==null?void 0:Te.x,Le=(Fe=q.arrow)==null?void 0:Fe.y,Ke=((xt=q.arrow)==null?void 0:xt.centerOffset)!==0,[yt,he]=O.useState();return Hu(()=>{v&&he(window.getComputedStyle(v).zIndex)},[v]),$.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:G?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:yt,"--radix-popper-transform-origin":[(Ze=q.transformOrigin)==null?void 0:Ze.x,(ht=q.transformOrigin)==null?void 0:ht.y].join(" "),...((Ft=q.hide)==null?void 0:Ft.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:$.jsx(Sue,{scope:n,placedSide:se,onArrowChange:w,arrowX:Ae,arrowY:Le,shouldHideArrow:Ke,children:$.jsx(P9.div,{"data-side":se,"data-align":le,...S,ref:E,style:{...S.style,animation:G?void 0:"none"}})})})});G9.displayName=PC;var k9="PopperArrow",Mue={top:"bottom",right:"left",bottom:"top",left:"right"},j9=O.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,a=Eue(k9,i),s=Mue[a.placedSide];return $.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:$.jsx(hue,{...r,ref:n,style:{...r.style,display:"block"}})})});j9.displayName=k9;function Tue(t){return t!==null}var Aue=t=>({name:"transformOrigin",options:t,fn(e){var b,v,x;const{placement:n,rects:i,middlewareData:r}=e,s=((b=r.arrow)==null?void 0:b.centerOffset)!==0,o=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[f,h]=X9(n),d={start:"0%",center:"50%",end:"100%"}[h],p=(((v=r.arrow)==null?void 0:v.x)??0)+o/2,g=(((x=r.arrow)==null?void 0:x.y)??0)+l/2;let y="",S="";return f==="bottom"?(y=s?d:`${p}px`,S=`${-l}px`):f==="top"?(y=s?d:`${p}px`,S=`${i.floating.height+l}px`):f==="right"?(y=`${-l}px`,S=s?d:`${g}px`):f==="left"&&(y=`${i.floating.width+l}px`,S=s?d:`${g}px`),{data:{x:y,y:S}}}});function X9(t){const[e,n="center"]=t.split("-");return[e,n]}var wue=F9,Cue=V9,Rue=G9,Due=j9;function Oue(t){const e=Nue(t),n=O.forwardRef((i,r)=>{const{children:a,...s}=i,o=O.Children.toArray(a),l=o.find(Lue);if(l){const f=l.props.children,h=o.map(d=>d===l?O.Children.count(f)>1?O.Children.only(null):O.isValidElement(f)?f.props.children:null:d);return $.jsx(e,{...s,ref:r,children:O.isValidElement(f)?O.cloneElement(f,void 0,h):null})}return $.jsx(e,{...s,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function Nue(t){const e=O.forwardRef((n,i)=>{const{children:r,...a}=n;if(O.isValidElement(r)){const s=Iue(r),o=Pue(a,r.props);return r.type!==O.Fragment&&(o.ref=i?kh(i,s):s),O.cloneElement(r,o)}return O.Children.count(r)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var W9=Symbol("radix.slottable");function Uue(t){const e=({children:n})=>$.jsx($.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=W9,e}function Lue(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===W9}function Pue(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function Iue(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bue=zue.reduce((t,e)=>{const n=Oue(`Primitive.${e}`),i=O.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function Fue(t,e){return O.useReducer((n,i)=>e[n][i]??n,t)}var Y9=t=>{const{present:e,children:n}=t,i=Hue(e),r=typeof n=="function"?n({present:i.isPresent}):O.Children.only(n),a=jh(i.ref,Vue(r));return typeof n=="function"||i.isPresent?O.cloneElement(r,{ref:a}):null};Y9.displayName="Presence";function Hue(t){const[e,n]=O.useState(),i=O.useRef(null),r=O.useRef(t),a=O.useRef("none"),s=t?"mounted":"unmounted",[o,l]=Fue(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const f=e_(i.current);a.current=o==="mounted"?f:"none"},[o]),Hu(()=>{const f=i.current,h=r.current;if(h!==t){const p=a.current,g=e_(f);t?l("MOUNT"):g==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Hu(()=>{if(e){let f;const h=e.ownerDocument.defaultView??window,d=g=>{const S=e_(i.current).includes(CSS.escape(g.animationName));if(g.target===e&&S&&(l("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",f=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(a.current=e_(i.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{h.clearTimeout(f),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:O.useCallback(f=>{i.current=f?getComputedStyle(f):null,n(f)},[])}}function e_(t){return(t==null?void 0:t.animationName)||"none"}function Vue(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Gue=bw[" useInsertionEffect ".trim().toString()]||Hu;function kue({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,a,s]=jue({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:r;{const h=O.useRef(t!==void 0);O.useEffect(()=>{const d=h.current;d!==o&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=o},[o,i])}const f=O.useCallback(h=>{var d;if(o){const p=Xue(h)?h(t):h;p!==t&&((d=s.current)==null||d.call(s,p))}else a(h)},[o,t,a,s]);return[l,f]}function jue({defaultProp:t,onChange:e}){const[n,i]=O.useState(t),r=O.useRef(n),a=O.useRef(e);return Gue(()=>{a.current=e},[e]),O.useEffect(()=>{var s;r.current!==n&&((s=a.current)==null||s.call(a,n),r.current=n)},[n,r]),[n,i,a]}function Xue(t){return typeof t=="function"}function Wue(t){const e=Yue(t),n=O.forwardRef((i,r)=>{const{children:a,...s}=i,o=O.Children.toArray(a),l=o.find(Zue);if(l){const f=l.props.children,h=o.map(d=>d===l?O.Children.count(f)>1?O.Children.only(null):O.isValidElement(f)?f.props.children:null:d);return $.jsx(e,{...s,ref:r,children:O.isValidElement(f)?O.cloneElement(f,void 0,h):null})}return $.jsx(e,{...s,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}function Yue(t){const e=O.forwardRef((n,i)=>{const{children:r,...a}=n;if(O.isValidElement(r)){const s=Kue(r),o=$ue(a,r.props);return r.type!==O.Fragment&&(o.ref=i?kh(i,s):s),O.cloneElement(r,o)}return O.Children.count(r)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var que=Symbol("radix.slottable");function Zue(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===que}function $ue(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function Kue(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Que=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jue=Que.reduce((t,e)=>{const n=Wue(`Primitive.${e}`),i=O.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),efe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tfe="VisuallyHidden",q9=O.forwardRef((t,e)=>$.jsx(Jue.span,{...t,ref:e,style:{...efe,...t.style}}));q9.displayName=tfe;var nfe=q9,[j2]=y9("Tooltip",[z9]),X2=z9(),Z9="TooltipProvider",ife=700,NA="tooltip.open",[rfe,IC]=j2(Z9),$9=t=>{const{__scopeTooltip:e,delayDuration:n=ife,skipDelayDuration:i=300,disableHoverableContent:r=!1,children:a}=t,s=O.useRef(!0),o=O.useRef(!1),l=O.useRef(0);return O.useEffect(()=>{const f=l.current;return()=>window.clearTimeout(f)},[]),$.jsx(rfe,{scope:e,isOpenDelayedRef:s,delayDuration:n,onOpen:O.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:O.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,i)},[i]),isPointerInTransitRef:o,onPointerInTransitChange:O.useCallback(f=>{o.current=f},[]),disableHoverableContent:r,children:a})};$9.displayName=Z9;var pv="Tooltip",[afe,W2]=j2(pv),K9=t=>{const{__scopeTooltip:e,children:n,open:i,defaultOpen:r,onOpenChange:a,disableHoverableContent:s,delayDuration:o}=t,l=IC(pv,t.__scopeTooltip),f=X2(e),[h,d]=O.useState(null),p=Wle(),g=O.useRef(0),y=s??l.disableHoverableContent,S=o??l.delayDuration,b=O.useRef(!1),[v,x]=kue({prop:i,defaultProp:r??!1,onChange:N=>{N?(l.onOpen(),document.dispatchEvent(new CustomEvent(NA))):l.onClose(),a==null||a(N)},caller:pv}),E=O.useMemo(()=>v?b.current?"delayed-open":"instant-open":"closed",[v]),T=O.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,x(!0)},[x]),w=O.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x(!1)},[x]),R=O.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,x(!0),g.current=0},S)},[S,x]);return O.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),$.jsx(wue,{...f,children:$.jsx(afe,{scope:e,contentId:p,open:v,stateAttribute:E,trigger:h,onTriggerChange:d,onTriggerEnter:O.useCallback(()=>{l.isOpenDelayedRef.current?R():T()},[l.isOpenDelayedRef,R,T]),onTriggerLeave:O.useCallback(()=>{y?w():(window.clearTimeout(g.current),g.current=0)},[w,y]),onOpen:T,onClose:w,disableHoverableContent:y,children:n})})};K9.displayName=pv;var UA="TooltipTrigger",Q9=O.forwardRef((t,e)=>{const{__scopeTooltip:n,...i}=t,r=W2(UA,n),a=IC(UA,n),s=X2(n),o=O.useRef(null),l=jh(e,o,r.onTriggerChange),f=O.useRef(!1),h=O.useRef(!1),d=O.useCallback(()=>f.current=!1,[]);return O.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),$.jsx(Cue,{asChild:!0,...s,children:$.jsx(Bue.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...i,ref:l,onPointerMove:Wl(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:Wl(t.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:Wl(t.onPointerDown,()=>{r.open&&r.onClose(),f.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Wl(t.onFocus,()=>{f.current||r.onOpen()}),onBlur:Wl(t.onBlur,r.onClose),onClick:Wl(t.onClick,r.onClose)})})});Q9.displayName=UA;var sfe="TooltipPortal",[t1e,ofe]=j2(sfe,{forceMount:void 0}),nm="TooltipContent",J9=O.forwardRef((t,e)=>{const n=ofe(nm,t.__scopeTooltip),{forceMount:i=n.forceMount,side:r="top",...a}=t,s=W2(nm,t.__scopeTooltip);return $.jsx(Y9,{present:i||s.open,children:s.disableHoverableContent?$.jsx(eH,{side:r,...a,ref:e}):$.jsx(lfe,{side:r,...a,ref:e})})}),lfe=O.forwardRef((t,e)=>{const n=W2(nm,t.__scopeTooltip),i=IC(nm,t.__scopeTooltip),r=O.useRef(null),a=jh(e,r),[s,o]=O.useState(null),{trigger:l,onClose:f}=n,h=r.current,{onPointerInTransitChange:d}=i,p=O.useCallback(()=>{o(null),d(!1)},[d]),g=O.useCallback((y,S)=>{const b=y.currentTarget,v={x:y.clientX,y:y.clientY},x=hfe(v,b.getBoundingClientRect()),E=dfe(v,x),T=pfe(S.getBoundingClientRect()),w=gfe([...E,...T]);o(w),d(!0)},[d]);return O.useEffect(()=>()=>p(),[p]),O.useEffect(()=>{if(l&&h){const y=b=>g(b,h),S=b=>g(b,l);return l.addEventListener("pointerleave",y),h.addEventListener("pointerleave",S),()=>{l.removeEventListener("pointerleave",y),h.removeEventListener("pointerleave",S)}}},[l,h,g,p]),O.useEffect(()=>{if(s){const y=S=>{const b=S.target,v={x:S.clientX,y:S.clientY},x=(l==null?void 0:l.contains(b))||(h==null?void 0:h.contains(b)),E=!mfe(v,s);x?p():E&&(p(),f())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,h,s,f,p]),$.jsx(eH,{...t,ref:a})}),[cfe,ufe]=j2(pv,{isInside:!1}),ffe=Uue("TooltipContent"),eH=O.forwardRef((t,e)=>{const{__scopeTooltip:n,children:i,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:s,...o}=t,l=W2(nm,n),f=X2(n),{onClose:h}=l;return O.useEffect(()=>(document.addEventListener(NA,h),()=>document.removeEventListener(NA,h)),[h]),O.useEffect(()=>{if(l.trigger){const d=p=>{const g=p.target;g!=null&&g.contains(l.trigger)&&h()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,h]),$.jsx(b9,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:h,children:$.jsxs(Rue,{"data-state":l.stateAttribute,...f,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[$.jsx(ffe,{children:i}),$.jsx(cfe,{scope:n,isInside:!0,children:$.jsx(nfe,{id:l.contentId,role:"tooltip",children:r||i})})]})})});J9.displayName=nm;var tH="TooltipArrow",nH=O.forwardRef((t,e)=>{const{__scopeTooltip:n,...i}=t,r=X2(n);return ufe(tH,n).isInside?null:$.jsx(Due,{...r,...i,ref:e})});nH.displayName=tH;function hfe(t,e){const n=Math.abs(e.top-t.y),i=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,i,r,a)){case a:return"left";case r:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function dfe(t,e,n=5){const i=[];switch(e){case"top":i.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":i.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":i.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":i.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return i}function pfe(t){const{top:e,right:n,bottom:i,left:r}=t;return[{x:r,y:e},{x:n,y:e},{x:n,y:i},{x:r,y:i}]}function mfe(t,e){const{x:n,y:i}=t;let r=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a],l=e[s],f=o.x,h=o.y,d=l.x,p=l.y;h>i!=p>i&&n<(d-f)*(i-h)/(p-h)+f&&(r=!r)}return r}function gfe(t){const e=t.slice();return e.sort((n,i)=>n.x<i.x?-1:n.x>i.x?1:n.y<i.y?-1:n.y>i.y?1:0),vfe(e)}function vfe(t){if(t.length<=1)return t.slice();const e=[];for(let i=0;i<t.length;i++){const r=t[i];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(r.y-s.y)>=(a.y-s.y)*(r.x-s.x))e.pop();else break}e.push(r)}e.pop();const n=[];for(let i=t.length-1;i>=0;i--){const r=t[i];for(;n.length>=2;){const a=n[n.length-1],s=n[n.length-2];if((a.x-s.x)*(r.y-s.y)>=(a.y-s.y)*(r.x-s.x))n.pop();else break}n.push(r)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var yfe=$9,_fe=K9,xfe=Q9,bfe=J9,Sfe=nH;function Efe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function $n(t,e){if(t==null)return{};var n,i,r=Efe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}let nr=function(t){return t[t.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",t[t.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",t[t.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",t[t.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",t[t.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",t[t.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",t[t.THEME_ERROR=6]="THEME_ERROR",t[t.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",t[t.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",t[t.EMPTY_KEY=9]="EMPTY_KEY",t}({});const Mfe={[nr.UNSUPPORTED_INPUT]:(t,e)=>[`An input with type \`${t}\` input was found at path \`${e}\` but it's not supported yet.`],[nr.NO_COMPONENT_FOR_TYPE]:(t,e)=>[`Type \`${t}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[nr.UNKNOWN_INPUT]:(t,e)=>[`input at path \`${t}\` is not recognized.`,e],[nr.DUPLICATE_KEYS]:(t,e,n)=>[`Key \`${t}\` of path \`${e}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[nr.ALREADY_REGISTERED_TYPE]:t=>[`Type ${t} has already been registered. You can't register a component with the same type.`],[nr.CLIPBOARD_ERROR]:t=>["Error copying the value",t],[nr.THEME_ERROR]:(t,e)=>[`Error accessing the theme \`${t}.${e}\` value.`],[nr.PATH_DOESNT_EXIST]:t=>[`Error getting the value at path \`${t}\`. There is probably an error in your \`render\` function.`],[nr.INPUT_TYPE_OVERRIDE]:(t,e,n)=>[`Input at path \`${t}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${n}\`.`],[nr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function iH(t,e,...n){const i=Mfe[e],[r,...a]=i(...n);console[t]("LEVA: "+r,...a)}const $l=iH.bind(null,"warn"),Tfe=iH.bind(null,"log"),Afe=["value"],wfe=["schema"],Cfe=["value"],rH=[],Ch={};function hL(t){let{value:e}=t,n=$n(t,Afe);for(let i of rH){const r=i(e,n);if(r)return r}}function Sc(t,e){let{schema:n}=e,i=$n(e,wfe);if(t in Ch){$l(nr.ALREADY_REGISTERED_TYPE,t);return}rH.push((r,a)=>n(r,a)&&t),Ch[t]=i}function DM(t,e,n,i){const{normalize:r}=Ch[t];if(r)return r(e,n,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:a}=e,s=$n(e,Cfe);return{value:a,settings:s}}function Rfe(t,e,n,i,r,a){const{sanitize:s}=Ch[t];return s?s(e,n,i,r,a):e}function dL(t,e,n){const{format:i}=Ch[t];return i?i(e,n):e}function Dfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ofe(t){var e=Dfe(t,"string");return typeof e=="symbol"?e:e+""}function Nfe(t,e,n){return(e=Ofe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pL(Object(n),!0).forEach(function(i){Nfe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pL(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const ku=(t,e,n)=>t>n?n:t<e?e:t,Ufe=t=>{if(t===""||typeof t=="number")return t;try{const e=Qd(t);if(!isNaN(e))return e}catch{}return parseFloat(t)},Lfe=Math.log(10);function mL(t){let e=Math.abs(+String(t).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const n=Math.floor(Math.log(e)/Lfe)+1,i=Math.floor(Math.log10(Math.abs(t))),r=Math.pow(10,i-n);return Math.max(r,.001)}const gb=(t,e,n)=>n===e?0:(ku(t,e,n)-e)/(n-e),vb=(t,e,n)=>t*(n-e)+e,Pfe=()=>"_"+Math.random().toString(36).substr(2,9),gL=/\(([^\(\)]+)\)/,vL=/(-?\d+(?:\.\d+)?)\s*\^\s*(-?\d+(?:\.\d+)?)/,yL=/(-?\d+(?:\.\d+)?)\s*([*/])\s*(-?\d+(?:\.\d+)?)/,_L=/(-?\d+(?:\.\d+)?)\s*([+-])\s*(-?\d+(?:\.\d+)?)/;function Qd(t){return t=t.replace(/\s+/g,""),gL.test(t)?Qd(t.replace(gL,(e,n)=>Qd(n).toString())):vL.test(t)?Qd(t.replace(vL,(e,n,i)=>Math.pow(Number(n),Number(i)).toString())):yL.test(t)?Qd(t.replace(yL,(e,n,i,r)=>i==="*"?(Number(n)*Number(r)).toString():Number(r)===0?(()=>{throw new Error("Division by zero")})():(Number(n)/Number(r)).toString())):_L.test(t)?Qd(t.replace(_L,(e,n,i,r)=>i==="+"?(Number(n)+Number(r)).toString():(Number(n)-Number(r)).toString())):Number(t)}function Ife(t,e){return e.reduce((n,i)=>(t&&t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}function zfe(t,e){const n=kt({},t);return e.forEach(i=>i in t&&delete n[i]),n}function Bfe(t,e){return t.reduce((n,i,r)=>Object.assign(n,{[e[r]]:i}),{})}function aH(t){return Object.prototype.toString.call(t)==="[object Object]"}const Ffe=t=>aH(t)&&Object.keys(t).length===0;let cl=function(t){return t.BUTTON="BUTTON",t.BUTTON_GROUP="BUTTON_GROUP",t.MONITOR="MONITOR",t.FOLDER="FOLDER",t}({}),Ec=function(t){return t.SELECT="SELECT",t.IMAGE="IMAGE",t.NUMBER="NUMBER",t.COLOR="COLOR",t.STRING="STRING",t.BOOLEAN="BOOLEAN",t.INTERVAL="INTERVAL",t.VECTOR3D="VECTOR3D",t.VECTOR2D="VECTOR2D",t}({});const Hfe=["type","__customInput"],Vfe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],Gfe=["type"];function sH(t,e,n={},i){var r,a;if(typeof t!="object"||Array.isArray(t))return{type:i,input:t,options:kt({key:e,label:e,optional:!1,disabled:!1,order:0},n)};if("__customInput"in t){const{type:w,__customInput:R}=t,N=$n(t,Hfe);return sH(R,e,N,w)}const{render:s,label:o,optional:l,order:f=0,disabled:h,hint:d,onChange:p,onEditStart:g,onEditEnd:y,transient:S}=t,b=$n(t,Vfe),v=kt({render:s,key:e,label:o??e,hint:d,transient:S??!!p,onEditStart:g,onEditEnd:y,disabled:h,optional:l,order:f},n);let{type:x}=b,E=$n(b,Gfe);if(x=i??x,x in cl)return{type:x,input:E,options:v};let T;return i&&aH(E)&&"value"in E?T=E.value:T=Ffe(E)?void 0:E,{type:x,input:T,options:kt(kt({},v),{},{onChange:p,optional:(r=v.optional)!==null&&r!==void 0?r:!1,disabled:(a=v.disabled)!==null&&a!==void 0?a:!1})}}function kfe(t,e,n,i){const r=sH(t,e),{type:a,input:s,options:o}=r;if(a)return a in cl?r:{type:a,input:DM(a,s,n,i),options:o};let l=hL(s);return l?{type:l,input:DM(l,s,n,i),options:o}:(l=hL({value:s}),l?{type:l,input:DM(l,{value:s},n,i),options:o}:!1)}function xL(t,e,n,i,r){const{value:a,type:s,settings:o}=t;t.value=oH({type:s,value:a,settings:o},e,n,i),t.fromPanel=r}const jfe=function(e,n,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=n,this.error=i};function oH({type:t,value:e,settings:n},i,r,a){const s=t!=="SELECT"&&typeof i=="function"?i(e):i;let o;try{o=Rfe(t,s,n,e,r,a)}catch(l){throw new jfe(`The value \`${i}\` did not result in a correct value.`,e,l)}return uv(o,e)?e:o}const lH=(t,e,n=!1)=>{let i=0;return function(){const r=arguments,a=n&&!i,s=()=>t.apply(this,r);window.clearTimeout(i),i=window.setTimeout(s,e),a&&s()}},cH=t=>t.shiftKey?5:t.altKey?1/5:1,Xfe=["value"],Wfe=["min","max"],Yfe=t=>{if(typeof t=="number")return!0;if(typeof t=="string"){const e=parseFloat(t);return isNaN(e)?!1:t.substring((""+e).length).trim().length<4}return!1},uH=(t,{min:e=-1/0,max:n=1/0,suffix:i})=>{const r=parseFloat(t);if(t===""||isNaN(r))throw Error("Invalid number");const a=ku(r,e,n);return i?a+i:a},qfe=(t,{pad:e=0,suffix:n})=>{const i=parseFloat(t).toFixed(e);return n?i+n:i},fH=t=>{let{value:e}=t,n=$n(t,Xfe);const{min:i=-1/0,max:r=1/0}=n,a=$n(n,Wfe);let s=parseFloat(e);const o=typeof e=="string"?e.substring((""+s).length):void 0;s=ku(s,i,r);let l=n.step;l||(Number.isFinite(i)?Number.isFinite(r)?l=+(Math.abs(r-i)/100).toPrecision(1):l=+(Math.abs(s-i)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-s)/100).toPrecision(1)));const f=l?mL(l)*10:mL(s);l=l||f/10;const h=Math.round(ku(Math.log10(1/f),0,2));return{value:o?s+o:s,settings:kt({initialValue:s,step:l,pad:h,min:i,max:r,suffix:o},a)}},hH=(t,{step:e,initialValue:n})=>{const i=Math.round((t-n)/e);return n+i*e};var dH=Object.freeze({__proto__:null,schema:Yfe,sanitize:uH,format:qfe,normalize:fH,sanitizeStep:hH});function Gi(){return Gi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gi.apply(null,arguments)}const pH=O.createContext({});function na(){return O.useContext(pH)}const zC=O.createContext(null),mH=O.createContext(null),gH=O.createContext(null);function Jv(){return O.useContext(mH)}function Zfe(){return O.useContext(gH)}const vH=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function t_(t,e){const[n,i]=t.split(" "),r={};return n!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${n!=="default"&&n||e.borderColor}`),i&&(r.backgroundColor=i),r}const P0={$inputStyle:()=>t=>t_(t,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>t=>t_(t,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>t=>t_(t,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>t=>t_(t,{key:"$active",borderColor:"$accent1",inset:!0})},e1=Ale({prefix:"leva",theme:vH(),utils:kt(kt({},P0),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:t=>({"&:focus":P0.$focusStyle()(t)}),$focusWithin:t=>({"&:focus-within":P0.$focusStyle()(t)}),$hover:t=>({"&:hover":P0.$hoverStyle()(t)}),$active:t=>({"&:active":P0.$activeStyle()(t)})})}),Gt=e1.styled;e1.css;const $fe=e1.createTheme,Kfe=e1.globalCss;e1.keyframes;const Qfe=Kfe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Jfe(t){const e=vH();if(!t)return{theme:e,className:""};Object.keys(t).forEach(i=>{Object.assign(e[i],t[i])});const n=$fe(e);return{theme:e,className:n.className}}function oc(t,e){const{theme:n}=O.useContext(zC);if(!(t in n)||!(e in n[t]))return $l(nr.THEME_ERROR,t,e),"";let i=e;for(;;){let r=n[t][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const yH=Gt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),_H=Gt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${yH}`]:{paddingLeft:0}}),ehe=Gt(_H,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),the=Gt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),nhe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],ihe=["onUpdate"];function BC(t){let{innerLabel:e,value:n,onUpdate:i,onChange:r,onKeyDown:a,type:s,id:o,inputType:l="text",rows:f=0}=t,h=$n(t,nhe);const{id:d,emitOnEditStart:p,emitOnEditEnd:g,disabled:y}=na(),S=o||d,b=O.useRef(null),v=f>0,x=v?"textarea":"input",E=O.useCallback(R=>N=>{const U=N.currentTarget.value;R(U)},[]);J.useEffect(()=>{const R=b.current,N=E(U=>{i(U),g()});return R==null||R.addEventListener("blur",N),()=>R==null?void 0:R.removeEventListener("blur",N)},[E,i,g]);const T=O.useCallback(R=>{R.key==="Enter"&&E(i)(R)},[E,i]),w=Object.assign({as:x},v?{rows:f}:{},h);return J.createElement(the,{textArea:v},e&&typeof e=="string"?J.createElement(_H,null,e):e,J.createElement(yH,Gi({levaType:s,ref:b,id:S,type:l,autoComplete:"off",spellCheck:"false",value:n,onChange:E(r),onFocus:()=>p(),onKeyPress:T,onKeyDown:a,disabled:y},w)))}function rhe(t){let{onUpdate:e}=t,n=$n(t,ihe);const i=O.useCallback(a=>e(Ufe(a)),[e]),r=O.useCallback(a=>{const s=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(s){a.preventDefault();const o=a.altKey?.1:a.shiftKey?10:1;e(l=>parseFloat(l)+s*o)}},[e]);return J.createElement(BC,Gi({},n,{onUpdate:i,onKeyDown:r,type:"number"}))}const yb=Gt("div",{}),LA=Gt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),ahe=Gt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${LA}::after`]:{opacity:.6},[`${yb}:hover > & + ${LA}::after`]:{opacity:.6},[`${yb}:hover > & > svg`]:{opacity:1}}),xH=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${yb}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),bH=Gt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${xH} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),SH=Gt(bH,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),she=Gt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),ohe=Gt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),PA=Gt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),lhe=Gt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${PA}`]:{pointerEvents:"auto"}}}}}),EH=Gt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),che=Gt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),uhe=Gt(Sfe,{fill:"$toolTipBackground"});function FC({children:t,container:e=(n=>globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body)()}){const{className:n}=O.useContext(zC);return J.createElement(qoe,{className:n,container:e},t)}const fhe=["align"];function hhe(){const{id:t,disable:e,disabled:n}=na();return J.createElement(J.Fragment,null,J.createElement(ohe,{id:t+"__disable",type:"checkbox",checked:!n,onChange:()=>e(!n)}),J.createElement("label",{htmlFor:t+"__disable"}))}function dhe(t){const{id:e,optional:n,hint:i}=na(),r=t.htmlFor||e||void 0,a=!i&&typeof t.children=="string"?t.children:void 0;return J.createElement(J.Fragment,null,n&&J.createElement(hhe,null),i!==void 0?J.createElement(_fe,null,J.createElement(xfe,{asChild:!0},J.createElement(PA,Gi({htmlFor:r},t))),J.createElement(bfe,{side:"top",sideOffset:2},J.createElement(che,null,i,J.createElement(uhe,null)))):J.createElement(PA,Gi({htmlFor:r,title:a},t)))}function zo(t){let{align:e}=t,n=$n(t,fhe);const{value:i,label:r,key:a,disabled:s}=na(),{hideCopyButton:o}=Zfe(),l=!o&&a!==void 0,[f,h]=O.useState(!1),d=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:i??""})),h(!0)}catch{$l(nr.CLIPBOARD_ERROR,{[a]:i})}};return J.createElement(she,{align:e,onPointerLeave:()=>h(!1)},J.createElement(dhe,n),l&&!s&&J.createElement("div",{title:`Click to copy ${typeof r=="string"?r:a} value`},f?J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},J.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),J.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):J.createElement("svg",{onClick:d,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},J.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),J.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const phe=["toggled"],mhe=Gt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function HC(t){let{toggled:e}=t,n=$n(t,phe);return J.createElement(mhe,Gi({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},n),J.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const ghe=["input"];function fo(t){let{input:e}=t,n=$n(t,ghe);return e?J.createElement(SH,n):J.createElement(bH,n)}function MH({value:t,type:e,settings:n,setValue:i}){const[r,a]=O.useState(dL(e,t,n)),s=O.useRef(t),o=O.useRef(n);o.current=n;const l=O.useCallback(h=>a(dL(e,h,o.current)),[e]),f=O.useCallback(h=>{try{i(h)}catch(d){const{type:p,previousValue:g}=d;if(p!=="LEVA_ERROR")throw d;l(g)}},[l,i]);return O.useEffect(()=>{uv(t,s.current)||l(t),s.current=t},[t,l]),{displayValue:r,onChange:a,onUpdate:f}}function t1(t,e){const{emitOnEditStart:n,emitOnEditEnd:i}=na();return XF(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),n==null||n());const a=t(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),a},e)}function vhe(t){const e=O.useRef(null),n=O.useRef(null),i=O.useRef(!1);return O.useEffect(()=>{const r=lH(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,t(e.current,n.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[t]),O.useEffect(()=>{n.current=e.current.getContext("2d")},[]),[e,n]}function TH(){const t=O.useRef(null),e=O.useRef({x:0,y:0}),n=O.useCallback(i=>{Object.assign(e.current,i),t.current&&(t.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[t,n]}const yhe=["__refCount"],OM=(t,e)=>{if(!t[e])return null;const n=t[e];return $n(n,yhe)};function _he(t){const e=Jv(),[n,i]=O.useState(OM(e.getData(),t)),r=O.useCallback(f=>e.setValueAtPath(t,f,!0),[t,e]),a=O.useCallback(f=>e.setSettingsAtPath(t,f),[t,e]),s=O.useCallback(f=>e.disableInputAtPath(t,f),[t,e]),o=O.useCallback(()=>e.emitOnEditStart(t),[t,e]),l=O.useCallback(()=>e.emitOnEditEnd(t),[t,e]);return O.useEffect(()=>{i(OM(e.getData(),t));const f=e.useStore.subscribe(h=>OM(h.data,t),i,{equalityFn:z2});return()=>f()},[e,t]),[n,{set:r,setSettings:a,disable:s,storeId:e.storeId,emitOnEditStart:o,emitOnEditEnd:l}]}const xhe=Gt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),AH=Gt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),IA=Gt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),wH=Gt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),CH=Gt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function bhe({value:t,min:e,max:n,onDrag:i,step:r,initialValue:a}){const s=O.useRef(null),o=O.useRef(null),l=O.useRef(0),f=oc("sizes","scrubberWidth"),h=t1(({event:p,first:g,xy:[y],movement:[S],memo:b})=>{if(g){const{width:x,left:E}=s.current.getBoundingClientRect();l.current=x-parseFloat(f),b=(p==null?void 0:p.target)===o.current?t:vb((y-E)/x,e,n)}const v=b+vb(S/l.current,0,n-e);return i(hH(v,{step:r,initialValue:a})),b}),d=gb(t,e,n);return J.createElement(wH,Gi({ref:s},h()),J.createElement(AH,null,J.createElement(CH,{style:{left:0,right:`${(1-d)*100}%`}})),J.createElement(IA,{ref:o,style:{left:`calc(${d} * (100% - ${f}))`}}))}const She=J.memo(({label:t,onUpdate:e,step:n,innerLabelTrim:i})=>{const[r,a]=O.useState(!1),s=t1(({active:o,delta:[l],event:f,memo:h=0,first:d,last:p,target:g})=>(d&&g.requestPointerLock(),p&&document.exitPointerLock(),a(o),h+=l/2,Math.abs(h)>=1&&(e(y=>parseFloat(y)+Math.floor(h)*n*cH(f)),h=0),h));return J.createElement(ehe,Gi({dragging:r,title:t.length>1?t:""},s()),t.slice(0,i))});function RH({label:t,id:e,displayValue:n,onUpdate:i,onChange:r,settings:a,innerLabelTrim:s=1}){const o=s>0&&J.createElement(She,{label:t,step:a.step,onUpdate:i,innerLabelTrim:s});return J.createElement(rhe,{id:e,value:String(n),onUpdate:i,onChange:r,innerLabel:o})}function Ehe(){const t=na(),{label:e,value:n,onUpdate:i,settings:r,id:a}=t,{min:s,max:o}=r,l=o!==1/0&&s!==-1/0;return J.createElement(fo,{input:!0},J.createElement(zo,null,e),J.createElement(xhe,{hasRange:l},l&&J.createElement(bhe,Gi({value:parseFloat(n),onDrag:i},r)),J.createElement(RH,Gi({},t,{id:a,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:Mhe}=dH,The=$n(dH,["sanitizeStep"]);var Ahe=kt({component:Ehe},The);const whe=(t,e)=>Pa().schema({options:Pa().passesAnyOf(Pa().object(),Pa().array())}).test(e),Che=(t,{values:e})=>{if(e.indexOf(t)<0)throw Error("Selected value doesn't match Select options");return t},Rhe=(t,{values:e})=>e.indexOf(t),Dhe=t=>{let{value:e,options:n}=t,i,r;return Array.isArray(n)?(r=n,i=n.map(a=>String(a))):(r=Object.values(n),i=Object.keys(n)),"value"in t?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(n).includes(e)||(n[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var Ohe=Object.freeze({__proto__:null,schema:whe,sanitize:Che,format:Rhe,normalize:Dhe});const Nhe=Gt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),zA=Gt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),Uhe=Gt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${zA}:focus + &`]:{$focusStyle:""},[`${zA}:hover + &`]:{$hoverStyle:""}});function Lhe({displayValue:t,value:e,onUpdate:n,id:i,settings:r,disabled:a}){const{keys:s,values:o}=r,l=O.useRef();return e===o[t]&&(l.current=s[t]),J.createElement(Nhe,null,J.createElement(zA,{id:i,value:t,onChange:f=>n(o[Number(f.currentTarget.value)]),disabled:a},s.map((f,h)=>J.createElement("option",{key:f,value:h},f))),J.createElement(Uhe,null,l.current),J.createElement(HC,{toggled:!0}))}function Phe(){const{label:t,value:e,displayValue:n,onUpdate:i,id:r,disabled:a,settings:s}=na();return J.createElement(fo,{input:!0},J.createElement(zo,null,t),J.createElement(Lhe,{id:r,value:e,displayValue:n,onUpdate:i,settings:s,disabled:a}))}var Ihe=kt({component:Phe},Ohe);const zhe=t=>Pa().string().test(t),Bhe=t=>{if(typeof t!="string")throw Error("Invalid string");return t},Fhe=({value:t,editable:e=!0,rows:n=!1})=>({value:t,settings:{editable:e,rows:typeof n=="number"?n:n?5:0}});var Hhe=Object.freeze({__proto__:null,schema:zhe,sanitize:Bhe,normalize:Fhe});const Vhe=["displayValue","onUpdate","onChange","editable"],Ghe=Gt("div",{whiteSpace:"pre-wrap"});function khe(t){let{displayValue:e,onUpdate:n,onChange:i,editable:r=!0}=t,a=$n(t,Vhe);return r?J.createElement(BC,Gi({value:e,onUpdate:n,onChange:i},a)):J.createElement(Ghe,null,e)}function jhe(){const{label:t,settings:e,displayValue:n,onUpdate:i,onChange:r}=na();return J.createElement(fo,{input:!0},J.createElement(zo,null,t),J.createElement(khe,Gi({displayValue:n,onUpdate:i,onChange:r},e)))}var Xhe=kt({component:jhe},Hhe);const Whe=t=>Pa().boolean().test(t),Yhe=t=>{if(typeof t!="boolean")throw Error("Invalid boolean");return t};var qhe=Object.freeze({__proto__:null,schema:Whe,sanitize:Yhe});const Zhe=Gt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function $he({value:t,onUpdate:e,id:n,disabled:i}){return J.createElement(Zhe,null,J.createElement("input",{id:n,type:"checkbox",checked:t,onChange:r=>e(r.currentTarget.checked),disabled:i}),J.createElement("label",{htmlFor:n},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},J.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function Khe(){const{label:t,value:e,onUpdate:n,disabled:i,id:r}=na();return J.createElement(fo,{input:!0},J.createElement(zo,null,t),J.createElement($he,{value:e,onUpdate:n,id:r,disabled:i}))}var Qhe=kt({component:Khe},qhe);const Jhe=["locked"];function ede({value:t,id:e,valueKey:n,settings:i,onUpdate:r,innerLabelTrim:a}){const s=O.useRef(t[n]);s.current=t[n];const o=O.useCallback(f=>r({[n]:oH({type:"NUMBER",value:s.current,settings:i},f)}),[r,i,n]),l=MH({type:"NUMBER",value:t[n],settings:i,setValue:o});return J.createElement(RH,{id:e,label:n,value:t[n],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:i,innerLabelTrim:a})}const tde=Gt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function nde(t){let{locked:e}=t,n=$n(t,Jhe);return J.createElement("svg",Gi({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),e?J.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):J.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function VC({value:t,onUpdate:e,settings:n,innerLabelTrim:i}){const{id:r,setSettings:a}=na(),{lock:s,locked:o}=n;return J.createElement(tde,{withLock:s},s&&J.createElement(nde,{locked:o,onClick:()=>a({locked:!o})}),Object.keys(t).map((l,f)=>J.createElement(ede,{id:f===0?r:`${r}.${l}`,key:l,valueKey:l,value:t,settings:n[l],onUpdate:e,innerLabelTrim:i})))}const DH=(t,e)=>{const n={};let i=0,r=1/0;Object.entries(t).forEach(([a,s])=>{n[a]=fH(kt({value:s},e[a])).settings,i=Math.max(i,n[a].step),r=Math.min(r,n[a].pad)});for(let a in n){const{step:s,min:o,max:l}=e[a]||{};!isFinite(s)&&(!isFinite(o)||!isFinite(l))&&(n[a].step=i,n[a].pad=r)}return n},ide=["lock"],rde=["value"];function ade(t){const e=Pa().array().length(t).every.number(),n=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===t&&r.every(a=>isFinite(a))};return i=>e.test(i)||n(i)}function sde(t){return Array.isArray(t)?"array":"object"}function Mg(t,e,n){return sde(t)===e?t:e==="array"?Object.values(t):Bfe(t,n)}const ode=(t,e,n)=>{const i=Mg(t,"object",e.keys);for(let s in i)i[s]=uH(i[s],e[s]);const r=Object.keys(i);let a={};if(r.length===e.keys.length)a=i;else{const s=Mg(n,"object",e.keys);if(r.length===1&&e.locked){const o=r[0],l=i[o],f=s[o],h=f!==0?l/f:1;for(let d in s)d===o?a[o]=l:a[d]=s[d]*h}else a=kt(kt({},s),i)}return Mg(a,e.format,e.keys)},lde=(t,e)=>Mg(t,"object",e.keys),cde=t=>!!t&&("step"in t||"min"in t||"max"in t);function ude(t,e,n=[]){const{lock:i=!1}=e,r=$n(e,ide),a=Array.isArray(t)?"array":"object",s=a==="object"?Object.keys(t):n,o=Mg(t,"object",s),l=cde(r)?s.reduce((h,d)=>Object.assign(h,{[d]:r}),{}):r,f=DH(o,l);return{value:a==="array"?t:o,settings:kt(kt({},f),{},{format:a,keys:s,lock:i,locked:!1})}}function OH(t){return{schema:ade(t.length),normalize:e=>{let{value:n}=e,i=$n(e,rde);return ude(n,i,t)},format:(e,n)=>lde(e,n),sanitize:(e,n,i)=>ode(e,n,i)}}var fde={grad:.9,turn:360,rad:360/(2*Math.PI)},Vl=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Ar=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},io=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},NH=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},bL=function(t){return{r:io(t.r,0,255),g:io(t.g,0,255),b:io(t.b,0,255),a:io(t.a)}},NM=function(t){return{r:Ar(t.r),g:Ar(t.g),b:Ar(t.b),a:Ar(t.a,3)}},hde=/^#([0-9a-f]{3,8})$/i,n_=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},UH=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,a=Math.max(e,n,i),s=a-Math.min(e,n,i),o=s?a===e?(n-i)/s:a===n?2+(i-e)/s:4+(e-n)/s:0;return{h:60*(o<0?o+6:o),s:a?s/a*100:0,v:a/255*100,a:r}},LH=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var a=Math.floor(e),s=i*(1-n),o=i*(1-(e-a)*n),l=i*(1-(1-e+a)*n),f=a%6;return{r:255*[i,o,s,s,l,i][f],g:255*[l,i,i,o,s,s][f],b:255*[s,s,l,i,i,o][f],a:r}},SL=function(t){return{h:NH(t.h),s:io(t.s,0,100),l:io(t.l,0,100),a:io(t.a)}},EL=function(t){return{h:Ar(t.h),s:Ar(t.s),l:Ar(t.l),a:Ar(t.a,3)}},ML=function(t){return LH((n=(e=t).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},Tg=function(t){return{h:(e=UH(t)).h,s:(r=(200-(n=e.s))*(i=e.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,n,i,r},dde=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pde=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mde=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gde=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,BA={string:[[function(t){var e=hde.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Ar(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Ar(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=mde.exec(t)||gde.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:bL({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=dde.exec(t)||pde.exec(t);if(!e)return null;var n,i,r=SL({h:(n=e[1],i=e[2],i===void 0&&(i="deg"),Number(n)*(fde[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return ML(r)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,i=t.b,r=t.a,a=r===void 0?1:r;return Vl(e)&&Vl(n)&&Vl(i)?bL({r:Number(e),g:Number(n),b:Number(i),a:Number(a)}):null},"rgb"],[function(t){var e=t.h,n=t.s,i=t.l,r=t.a,a=r===void 0?1:r;if(!Vl(e)||!Vl(n)||!Vl(i))return null;var s=SL({h:Number(e),s:Number(n),l:Number(i),a:Number(a)});return ML(s)},"hsl"],[function(t){var e=t.h,n=t.s,i=t.v,r=t.a,a=r===void 0?1:r;if(!Vl(e)||!Vl(n)||!Vl(i))return null;var s=function(o){return{h:NH(o.h),s:io(o.s,0,100),v:io(o.v,0,100),a:io(o.a)}}({h:Number(e),s:Number(n),v:Number(i),a:Number(a)});return LH(s)},"hsv"]]},TL=function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0](t);if(i)return[i,e[n][1]]}return[null,void 0]},PH=function(t){return typeof t=="string"?TL(t.trim(),BA.string):typeof t=="object"&&t!==null?TL(t,BA.object):[null,void 0]},vde=function(t){return PH(t)[1]},UM=function(t,e){var n=Tg(t);return{h:n.h,s:io(n.s+100*e,0,100),l:n.l,a:n.a}},LM=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},AL=function(t,e){var n=Tg(t);return{h:n.h,s:n.s,l:io(n.l+100*e,0,100),a:n.a}},FA=function(){function t(e){this.parsed=PH(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Ar(LM(this.rgba),2)},t.prototype.isDark=function(){return LM(this.rgba)<.5},t.prototype.isLight=function(){return LM(this.rgba)>=.5},t.prototype.toHex=function(){return e=NM(this.rgba),n=e.r,i=e.g,r=e.b,s=(a=e.a)<1?n_(Ar(255*a)):"","#"+n_(n)+n_(i)+n_(r)+s;var e,n,i,r,a,s},t.prototype.toRgb=function(){return NM(this.rgba)},t.prototype.toRgbString=function(){return e=NM(this.rgba),n=e.r,i=e.g,r=e.b,(a=e.a)<1?"rgba("+n+", "+i+", "+r+", "+a+")":"rgb("+n+", "+i+", "+r+")";var e,n,i,r,a},t.prototype.toHsl=function(){return EL(Tg(this.rgba))},t.prototype.toHslString=function(){return e=EL(Tg(this.rgba)),n=e.h,i=e.s,r=e.l,(a=e.a)<1?"hsla("+n+", "+i+"%, "+r+"%, "+a+")":"hsl("+n+", "+i+"%, "+r+"%)";var e,n,i,r,a},t.prototype.toHsv=function(){return e=UH(this.rgba),{h:Ar(e.h),s:Ar(e.s),v:Ar(e.v),a:Ar(e.a,3)};var e},t.prototype.invert=function(){return ha({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ha(UM(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ha(UM(this.rgba,-e))},t.prototype.grayscale=function(){return ha(UM(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ha(AL(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ha(AL(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ha({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Ar(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Tg(this.rgba);return typeof e=="number"?ha({h:e,s:n.s,l:n.l,a:n.a}):Ar(n.h)},t.prototype.isEqual=function(e){return this.toHex()===ha(e).toHex()},t}(),ha=function(t){return t instanceof FA?t:new FA(t)},wL=[],yde=function(t){t.forEach(function(e){wL.indexOf(e)<0&&(e(FA,BA),wL.push(e))})};function _de(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in n)i[n[r]]=r;var a={};t.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,f=i[this.toHex()];if(f)return f;if(s!=null&&s.closest){var h=this.toRgb(),d=1/0,p="black";if(!a.length)for(var g in n)a[g]=new t(n[g]).toRgb();for(var y in n){var S=(o=h,l=a[y],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));S<d&&(d=S,p=y)}return p}},e.string.push([function(s){var o=s.toLowerCase(),l=o==="transparent"?"#0000":n[o];return l?new t(l).toRgb():null},"name"])}function Dm(){return(Dm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function GC(t,e){if(t==null)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)e.indexOf(n=a[i])>=0||(r[n]=t[n]);return r}function HA(t){var e=O.useRef(t),n=O.useRef(function(i){e.current&&e.current(i)});return e.current=t,n.current}var im=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},Ag=function(t){return"touches"in t},VA=function(t){return t&&t.ownerDocument.defaultView||self},CL=function(t,e,n){var i=t.getBoundingClientRect(),r=Ag(e)?function(a,s){for(var o=0;o<a.length;o++)if(a[o].identifier===s)return a[o];return a[0]}(e.touches,n):e;return{left:im((r.pageX-(i.left+VA(t).pageXOffset))/i.width),top:im((r.pageY-(i.top+VA(t).pageYOffset))/i.height)}},RL=function(t){!Ag(t)&&t.preventDefault()},kC=J.memo(function(t){var e=t.onMove,n=t.onKey,i=GC(t,["onMove","onKey"]),r=O.useRef(null),a=HA(e),s=HA(n),o=O.useRef(null),l=O.useRef(!1),f=O.useMemo(function(){var g=function(b){RL(b),(Ag(b)?b.touches.length>0:b.buttons>0)&&r.current?a(CL(r.current,b,o.current)):S(!1)},y=function(){return S(!1)};function S(b){var v=l.current,x=VA(r.current),E=b?x.addEventListener:x.removeEventListener;E(v?"touchmove":"mousemove",g),E(v?"touchend":"mouseup",y)}return[function(b){var v=b.nativeEvent,x=r.current;if(x&&(RL(v),!function(T,w){return w&&!Ag(T)}(v,l.current)&&x)){if(Ag(v)){l.current=!0;var E=v.changedTouches||[];E.length&&(o.current=E[0].identifier)}x.focus(),a(CL(x,v,o.current)),S(!0)}},function(b){var v=b.which||b.keyCode;v<37||v>40||(b.preventDefault(),s({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},S]},[s,a]),h=f[0],d=f[1],p=f[2];return O.useEffect(function(){return p},[p]),J.createElement("div",Dm({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:r,onKeyDown:d,tabIndex:0,role:"slider"}))}),n1=function(t){return t.filter(Boolean).join(" ")},jC=function(t){var e=t.color,n=t.left,i=t.top,r=i===void 0?.5:i,a=n1(["react-colorful__pointer",t.className]);return J.createElement("div",{className:a,style:{top:100*r+"%",left:100*n+"%"}},J.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ga=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},IH=function(t){var e=t.s,n=t.v,i=t.a,r=(200-e)*n/100;return{h:ga(t.h),s:ga(r>0&&r<200?e*n/100/(r<=100?r:200-r)*100:0),l:ga(r/2),a:ga(i,2)}},GA=function(t){var e=IH(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},PM=function(t){var e=IH(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},zH=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var a=Math.floor(e),s=i*(1-n),o=i*(1-(e-a)*n),l=i*(1-(1-e+a)*n),f=a%6;return{r:ga(255*[i,o,s,s,l,i][f]),g:ga(255*[l,i,i,o,s,s][f]),b:ga(255*[s,s,l,i,i,o][f]),a:ga(r,2)}},BH=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,a=Math.max(e,n,i),s=a-Math.min(e,n,i),o=s?a===e?(n-i)/s:a===n?2+(i-e)/s:4+(e-n)/s:0;return{h:ga(60*(o<0?o+6:o)),s:ga(a?s/a*100:0),v:ga(a/255*100),a:r}},FH=J.memo(function(t){var e=t.hue,n=t.onChange,i=n1(["react-colorful__hue",t.className]);return J.createElement("div",{className:i},J.createElement(kC,{onMove:function(r){n({h:360*r.left})},onKey:function(r){n({h:im(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":ga(e),"aria-valuemax":"360","aria-valuemin":"0"},J.createElement(jC,{className:"react-colorful__hue-pointer",left:e/360,color:GA({h:e,s:100,v:100,a:1})})))}),HH=J.memo(function(t){var e=t.hsva,n=t.onChange,i={backgroundColor:GA({h:e.h,s:100,v:100,a:1})};return J.createElement("div",{className:"react-colorful__saturation",style:i},J.createElement(kC,{onMove:function(r){n({s:100*r.left,v:100-100*r.top})},onKey:function(r){n({s:im(e.s+100*r.left,0,100),v:im(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ga(e.s)+"%, Brightness "+ga(e.v)+"%"},J.createElement(jC,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:GA(e)})))}),XC=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function VH(t,e,n){var i=HA(n),r=O.useState(function(){return t.toHsva(e)}),a=r[0],s=r[1],o=O.useRef({color:e,hsva:a});O.useEffect(function(){if(!t.equal(e,o.current.color)){var f=t.toHsva(e);o.current={hsva:f,color:e},s(f)}},[e,t]),O.useEffect(function(){var f;XC(a,o.current.hsva)||t.equal(f=t.fromHsva(a),o.current.color)||(o.current={hsva:a,color:f},i(f))},[a,t,i]);var l=O.useCallback(function(f){s(function(h){return Object.assign({},h,f)})},[]);return[a,l]}var xde=typeof window<"u"?O.useLayoutEffect:O.useEffect,bde=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},DL=new Map,GH=function(t){xde(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!DL.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,DL.set(e,n);var i=bde();i&&n.setAttribute("nonce",i),e.head.appendChild(n)}},[])},Sde=function(t){var e=t.className,n=t.colorModel,i=t.color,r=i===void 0?n.defaultColor:i,a=t.onChange,s=GC(t,["className","colorModel","color","onChange"]),o=O.useRef(null);GH(o);var l=VH(n,r,a),f=l[0],h=l[1],d=n1(["react-colorful",e]);return J.createElement("div",Dm({},s,{ref:o,className:d}),J.createElement(HH,{hsva:f,onChange:h}),J.createElement(FH,{hue:f.h,onChange:h,className:"react-colorful__last-control"}))},Ede=function(t){var e=t.className,n=t.hsva,i=t.onChange,r={backgroundImage:"linear-gradient(90deg, "+PM(Object.assign({},n,{a:0}))+", "+PM(Object.assign({},n,{a:1}))+")"},a=n1(["react-colorful__alpha",e]),s=ga(100*n.a);return J.createElement("div",{className:a},J.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),J.createElement(kC,{onMove:function(o){i({a:o.left})},onKey:function(o){i({a:im(n.a+o.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},J.createElement(jC,{className:"react-colorful__alpha-pointer",left:n.a,color:PM(n)})))},Mde=function(t){var e=t.className,n=t.colorModel,i=t.color,r=i===void 0?n.defaultColor:i,a=t.onChange,s=GC(t,["className","colorModel","color","onChange"]),o=O.useRef(null);GH(o);var l=VH(n,r,a),f=l[0],h=l[1],d=n1(["react-colorful",e]);return J.createElement("div",Dm({},s,{ref:o,className:d}),J.createElement(HH,{hsva:f,onChange:h}),J.createElement(FH,{hue:f.h,onChange:h}),J.createElement(Ede,{hsva:f,onChange:h,className:"react-colorful__last-control"}))},Tde={defaultColor:{r:0,g:0,b:0,a:1},toHsva:BH,fromHsva:zH,equal:XC},Ade=function(t){return J.createElement(Mde,Dm({},t,{colorModel:Tde}))},wde={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return BH({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){return{r:(e=zH(t)).r,g:e.g,b:e.b};var e},equal:XC},Cde=function(t){return J.createElement(Sde,Dm({},t,{colorModel:wde}))},kH={exports:{}},Rde="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Dde=Rde,Ode=Dde;function jH(){}function XH(){}XH.resetWarningCache=jH;var Nde=function(){function t(i,r,a,s,o,l){if(l!==Ode){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:XH,resetWarningCache:jH};return n.PropTypes=n,n};kH.exports=Nde();var Ude=kH.exports;const ni=Nh(Ude);function Om(t,e,n,i){function r(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(h){try{f(i.next(h))}catch(d){s(d)}}function l(h){try{f(i.throw(h))}catch(d){s(d)}}function f(h){h.done?a(h.value):r(h.value).then(o,l)}f((i=i.apply(t,e||[])).next())})}function Nm(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(f){return function(h){return l([f,h])}}function l(f){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(n=0)),n;)try{if(i=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(h){f=[6,h],r=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Lde(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,a=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(o){s={error:o}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return a}function Pde(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Lde(arguments[e]));return t}var Ide=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function i1(t,e){var n=zde(t);if(typeof n.path!="string"){var i=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function zde(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var i=e.split(".").pop().toLowerCase(),r=Ide.get(i);r&&Object.defineProperty(t,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return t}var Bde=[".DS_Store","Thumbs.db"];function Fde(t){return Om(this,void 0,void 0,function(){return Nm(this,function(e){return _b(t)&&Hde(t)?[2,jde(t.dataTransfer,t.type)]:Vde(t)?[2,Gde(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,kde(t)]:[2,[]]})})}function Hde(t){return _b(t.dataTransfer)}function Vde(t){return _b(t)&&_b(t.target)}function _b(t){return typeof t=="object"&&t!==null}function Gde(t){return kA(t.target.files).map(function(e){return i1(e)})}function kde(t){return Om(this,void 0,void 0,function(){var e;return Nm(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(i){return i.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(i){return i1(i)})]}})})}function jde(t,e){return Om(this,void 0,void 0,function(){var n,i;return Nm(this,function(r){switch(r.label){case 0:return t===null?[2,[]]:t.items?(n=kA(t.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(Xde))]):[3,2];case 1:return i=r.sent(),[2,OL(WH(i))];case 2:return[2,OL(kA(t.files).map(function(a){return i1(a)}))]}})})}function OL(t){return t.filter(function(e){return Bde.indexOf(e.name)===-1})}function kA(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var i=t[n];e.push(i)}return e}function Xde(t){if(typeof t.webkitGetAsEntry!="function")return NL(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?YH(e):NL(t)}function WH(t){return t.reduce(function(e,n){return Pde(e,Array.isArray(n)?WH(n):[n])},[])}function NL(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=i1(e);return Promise.resolve(n)}function Wde(t){return Om(this,void 0,void 0,function(){return Nm(this,function(e){return[2,t.isDirectory?YH(t):Yde(t)]})})}function YH(t){var e=t.createReader();return new Promise(function(n,i){var r=[];function a(){var s=this;e.readEntries(function(o){return Om(s,void 0,void 0,function(){var l,f,h;return Nm(this,function(d){switch(d.label){case 0:if(o.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=d.sent(),n(l),[3,4];case 3:return f=d.sent(),i(f),[3,4];case 4:return[3,6];case 5:h=Promise.all(o.map(Wde)),r.push(h),a(),d.label=6;case 6:return[2]}})})},function(o){i(o)})}a()})}function Yde(t){return Om(this,void 0,void 0,function(){return Nm(this,function(e){return[2,new Promise(function(n,i){t.file(function(r){var a=i1(r,t.fullPath);n(a)},function(r){i(r)})})]})})}var qde=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var i=t.name||"",r=(t.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return n.some(function(s){var o=s.trim().toLowerCase();return o.charAt(0)==="."?i.toLowerCase().endsWith(o):o.endsWith("/*")?a===o.replace(/\/.*$/,""):r===o})}return!0};function UL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function LL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UL(Object(n),!0).forEach(function(i){qH(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UL(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function qH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PL(t,e){return Qde(t)||Kde(t,e)||$de(t,e)||Zde()}function Zde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $de(t,e){if(t){if(typeof t=="string")return IL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IL(t,e)}}function IL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Kde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,a=!1,s,o;try{for(n=n.call(t);!(r=(s=n.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(l){a=!0,o=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(a)throw o}}return i}}function Qde(t){if(Array.isArray(t))return t}var Jde="file-invalid-type",epe="file-too-large",tpe="file-too-small",npe="too-many-files",ipe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Jde,message:"File type must be ".concat(n)}},zL=function(e){return{code:epe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},BL=function(e){return{code:tpe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},rpe={code:npe,message:"Too many files"};function ZH(t,e){var n=t.type==="application/x-moz-file"||qde(t,e);return[n,n?null:ipe(e)]}function $H(t,e,n){if(I0(t.size))if(I0(e)&&I0(n)){if(t.size>n)return[!1,zL(n)];if(t.size<e)return[!1,BL(e)]}else{if(I0(e)&&t.size<e)return[!1,BL(e)];if(I0(n)&&t.size>n)return[!1,zL(n)]}return[!0,null]}function I0(t){return t!=null}function ape(t){var e=t.files,n=t.accept,i=t.minSize,r=t.maxSize,a=t.multiple,s=t.maxFiles;return!a&&e.length>1||a&&s>=1&&e.length>s?!1:e.every(function(o){var l=ZH(o,n),f=PL(l,1),h=f[0],d=$H(o,i,r),p=PL(d,1),g=p[0];return h&&g})}function xb(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function i_(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function FL(t){t.preventDefault()}function spe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function ope(t){return t.indexOf("Edge/")!==-1}function lpe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return spe(t)||ope(t)}function Zo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return e.some(function(o){return!xb(i)&&o&&o.apply(void 0,[i].concat(a)),xb(i)})}}function cpe(){return"showOpenFilePicker"in window}function upe(t){return t=typeof t=="string"?t.split(","):t,[{description:"everything",accept:Array.isArray(t)?t.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,n){return LL(LL({},e),{},qH({},n,[]))},{}):{}}]}function fpe(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function hpe(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}var dpe=["children"],ppe=["open"],mpe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],gpe=["refKey","onChange","onClick"];function vpe(t){return xpe(t)||_pe(t)||KH(t)||ype()}function ype(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _pe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xpe(t){if(Array.isArray(t))return jA(t)}function IM(t,e){return Epe(t)||Spe(t,e)||KH(t,e)||bpe()}function bpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KH(t,e){if(t){if(typeof t=="string")return jA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jA(t,e)}}function jA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Spe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,a=!1,s,o;try{for(n=n.call(t);!(r=(s=n.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(l){a=!0,o=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(a)throw o}}return i}}function Epe(t){if(Array.isArray(t))return t}function HL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HL(Object(n),!0).forEach(function(i){XA(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HL(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function XA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bb(t,e){if(t==null)return{};var n=Mpe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Mpe(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var WC=O.forwardRef(function(t,e){var n=t.children,i=bb(t,dpe),r=JH(i),a=r.open,s=bb(r,ppe);return O.useImperativeHandle(e,function(){return{open:a}},[a]),J.createElement(O.Fragment,null,n(wi(wi({},s),{},{open:a})))});WC.displayName="Dropzone";var QH={disabled:!1,getFilesFromEvent:Fde,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};WC.defaultProps=QH;WC.propTypes={children:ni.func,accept:ni.oneOfType([ni.string,ni.arrayOf(ni.string)]),multiple:ni.bool,preventDropOnDocument:ni.bool,noClick:ni.bool,noKeyboard:ni.bool,noDrag:ni.bool,noDragEventsBubbling:ni.bool,minSize:ni.number,maxSize:ni.number,maxFiles:ni.number,disabled:ni.bool,getFilesFromEvent:ni.func,onFileDialogCancel:ni.func,onFileDialogOpen:ni.func,useFsAccessApi:ni.bool,onDragEnter:ni.func,onDragLeave:ni.func,onDragOver:ni.func,onDrop:ni.func,onDropAccepted:ni.func,onDropRejected:ni.func,validator:ni.func};var WA={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function JH(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=wi(wi({},QH),t),n=e.accept,i=e.disabled,r=e.getFilesFromEvent,a=e.maxSize,s=e.minSize,o=e.multiple,l=e.maxFiles,f=e.onDragEnter,h=e.onDragLeave,d=e.onDragOver,p=e.onDrop,g=e.onDropAccepted,y=e.onDropRejected,S=e.onFileDialogCancel,b=e.onFileDialogOpen,v=e.useFsAccessApi,x=e.preventDropOnDocument,E=e.noClick,T=e.noKeyboard,w=e.noDrag,R=e.noDragEventsBubbling,N=e.validator,U=O.useMemo(function(){return typeof b=="function"?b:VL},[b]),A=O.useMemo(function(){return typeof S=="function"?S:VL},[S]),C=O.useRef(null),I=O.useRef(null),X=O.useReducer(Tpe,WA),j=IM(X,2),Y=j[0],Z=j[1],z=Y.isFocused,G=Y.isFileDialogActive,q=Y.draggedFiles,se=O.useRef(typeof window<"u"&&window.isSecureContext&&v&&cpe()),le=function(){!se.current&&G&&setTimeout(function(){if(I.current){var L=I.current.files;L.length||(Z({type:"closeDialog"}),A())}},300)};O.useEffect(function(){return window.addEventListener("focus",le,!1),function(){window.removeEventListener("focus",le,!1)}},[I,G,A,se]);var me=O.useRef([]),Ae=function(L){C.current&&C.current.contains(L.target)||(L.preventDefault(),me.current=[])};O.useEffect(function(){return x&&(document.addEventListener("dragover",FL,!1),document.addEventListener("drop",Ae,!1)),function(){x&&(document.removeEventListener("dragover",FL),document.removeEventListener("drop",Ae))}},[C,x]);var Le=O.useCallback(function(B){B.preventDefault(),B.persist(),we(B),me.current=[].concat(vpe(me.current),[B.target]),i_(B)&&Promise.resolve(r(B)).then(function(L){xb(B)&&!R||(Z({draggedFiles:L,isDragActive:!0,type:"setDraggedFiles"}),f&&f(B))})},[r,f,R]),Ke=O.useCallback(function(B){B.preventDefault(),B.persist(),we(B);var L=i_(B);if(L&&B.dataTransfer)try{B.dataTransfer.dropEffect="copy"}catch{}return L&&d&&d(B),!1},[d,R]),yt=O.useCallback(function(B){B.preventDefault(),B.persist(),we(B);var L=me.current.filter(function(pe){return C.current&&C.current.contains(pe)}),ne=L.indexOf(B.target);ne!==-1&&L.splice(ne,1),me.current=L,!(L.length>0)&&(Z({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),i_(B)&&h&&h(B))},[C,h,R]),he=O.useCallback(function(B,L){var ne=[],pe=[];B.forEach(function(be){var ye=ZH(be,n),ut=IM(ye,2),Je=ut[0],pt=ut[1],At=$H(be,s,a),Re=IM(At,2),Pe=Re[0],ot=Re[1],Q=N?N(be):null;if(Je&&Pe&&!Q)ne.push(be);else{var ce=[pt,ot];Q&&(ce=ce.concat(Q)),pe.push({file:be,errors:ce.filter(function(Ue){return Ue})})}}),(!o&&ne.length>1||o&&l>=1&&ne.length>l)&&(ne.forEach(function(be){pe.push({file:be,errors:[rpe]})}),ne.splice(0)),Z({acceptedFiles:ne,fileRejections:pe,type:"setFiles"}),p&&p(ne,pe,L),pe.length>0&&y&&y(pe,L),ne.length>0&&g&&g(ne,L)},[Z,o,n,s,a,l,p,g,y,N]),Te=O.useCallback(function(B){B.preventDefault(),B.persist(),we(B),me.current=[],i_(B)&&Promise.resolve(r(B)).then(function(L){xb(B)&&!R||he(L,B)}),Z({type:"reset"})},[r,he,R]),Fe=O.useCallback(function(){if(se.current){Z({type:"openDialog"}),U();var B={multiple:o,types:upe(n)};window.showOpenFilePicker(B).then(function(L){return r(L)}).then(function(L){he(L,null),Z({type:"closeDialog"})}).catch(function(L){fpe(L)?(A(L),Z({type:"closeDialog"})):hpe(L)&&(se.current=!1,I.current&&(I.current.value=null,I.current.click()))});return}I.current&&(Z({type:"openDialog"}),U(),I.current.value=null,I.current.click())},[Z,U,A,v,he,n,o]),xt=O.useCallback(function(B){!C.current||!C.current.isEqualNode(B.target)||(B.key===" "||B.key==="Enter"||B.keyCode===32||B.keyCode===13)&&(B.preventDefault(),Fe())},[C,Fe]),Ze=O.useCallback(function(){Z({type:"focus"})},[]),ht=O.useCallback(function(){Z({type:"blur"})},[]),Ft=O.useCallback(function(){E||(lpe()?setTimeout(Fe,0):Fe())},[E,Fe]),ct=function(L){return i?null:L},Me=function(L){return T?null:ct(L)},Oe=function(L){return w?null:ct(L)},we=function(L){R&&L.stopPropagation()},Ge=O.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=B.refKey,ne=L===void 0?"ref":L,pe=B.role,be=B.onKeyDown,ye=B.onFocus,ut=B.onBlur,Je=B.onClick,pt=B.onDragEnter,At=B.onDragOver,Re=B.onDragLeave,Pe=B.onDrop,ot=bb(B,mpe);return wi(wi(XA({onKeyDown:Me(Zo(be,xt)),onFocus:Me(Zo(ye,Ze)),onBlur:Me(Zo(ut,ht)),onClick:ct(Zo(Je,Ft)),onDragEnter:Oe(Zo(pt,Le)),onDragOver:Oe(Zo(At,Ke)),onDragLeave:Oe(Zo(Re,yt)),onDrop:Oe(Zo(Pe,Te)),role:typeof pe=="string"&&pe!==""?pe:"button"},ne,C),!i&&!T?{tabIndex:0}:{}),ot)}},[C,xt,Ze,ht,Ft,Le,Ke,yt,Te,T,w,i]),W=O.useCallback(function(B){B.stopPropagation()},[]),mt=O.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=B.refKey,ne=L===void 0?"ref":L,pe=B.onChange,be=B.onClick,ye=bb(B,gpe),ut=XA({accept:n,multiple:o,type:"file",style:{display:"none"},onChange:ct(Zo(pe,Te)),onClick:ct(Zo(be,W)),tabIndex:-1},ne,I);return wi(wi({},ut),ye)}},[I,n,o,Te,i]),Qe=q.length,bt=Qe>0&&ape({files:q,accept:n,minSize:s,maxSize:a,multiple:o,maxFiles:l}),We=Qe>0&&!bt;return wi(wi({},Y),{},{isDragAccept:bt,isDragReject:We,isFocused:z&&!i,getRootProps:Ge,getInputProps:mt,rootRef:C,inputRef:I,open:ct(Fe)})}function Tpe(t,e){switch(e.type){case"focus":return wi(wi({},t),{},{isFocused:!0});case"blur":return wi(wi({},t),{},{isFocused:!1});case"openDialog":return wi(wi({},WA),{},{isFileDialogActive:!0});case"closeDialog":return wi(wi({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive,i=e.draggedFiles;return wi(wi({},t),{},{draggedFiles:i,isDragActive:n});case"setFiles":return wi(wi({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return wi({},WA);default:return t}}function VL(){}function Ape(t){let e;const n=new Set,i=(f,h)=>{const d=typeof f=="function"?f(e):f;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),n.forEach(g=>g(e,p))}},r=()=>e,a=(f,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function g(){const y=h(e);if(!d(p,y)){const S=p;f(p=y,S)}}return n.add(g),()=>n.delete(g)},l={setState:i,getState:r,subscribe:(f,h,d)=>h||d?a(f,h,d):(n.add(f),()=>n.delete(f)),destroy:()=>n.clear()};return e=t(i,r,l),l}const wpe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),GL=wpe?O.useEffect:O.useLayoutEffect;function Cpe(t){const e=typeof t=="function"?Ape(t):t,n=(i=e.getState,r=Object.is)=>{const[,a]=O.useReducer(b=>b+1,0),s=e.getState(),o=O.useRef(s),l=O.useRef(i),f=O.useRef(r),h=O.useRef(!1),d=O.useRef();d.current===void 0&&(d.current=i(s));let p,g=!1;(o.current!==s||l.current!==i||f.current!==r||h.current)&&(p=i(s),g=!r(d.current,p)),GL(()=>{g&&(d.current=p),o.current=s,l.current=i,f.current=r,h.current=!1});const y=O.useRef(s);GL(()=>{const b=()=>{try{const x=e.getState(),E=l.current(x);f.current(d.current,E)||(o.current=x,d.current=E,a())}catch{h.current=!0,a()}},v=e.subscribe(b);return e.getState()!==y.current&&b(),v},[]);const S=g?p:d.current;return O.useDebugValue(S),S};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}const Rpe=t=>(e,n,i)=>{const r=i.subscribe;return i.subscribe=(s,o,l)=>{let f=s;if(o){const h=(l==null?void 0:l.equalityFn)||Object.is;let d=s(i.getState());f=p=>{const g=s(p);if(!h(d,g)){const y=d;o(d=g,y)}},l!=null&&l.fireImmediately&&o(d,d)}return r(f)},t(e,n,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Dpe=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Ope=Dpe;function kL(t){return Ope(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}var eV=function(e){var n,i;return!(kL(e)===!1||(n=e.constructor,typeof n!="function")||(i=n.prototype,kL(i)===!1)||i.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Npe=eV,YC=function(e){return Npe(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Upe=function(e,n,i){for(var r in e)if(n.call(i,e[r],r,e)===!1)break},Lpe=YC,Ppe=Upe;function tV(t,e){for(var n=arguments.length,i=0;++i<n;){var r=arguments[i];YA(r)&&Ppe(r,Ipe,t)}return t}function Ipe(t,e){if(zpe(e)){var n=this[e];YA(t)&&YA(n)?tV(n,t):this[e]=t}}function YA(t){return Lpe(t)&&!Array.isArray(t)}function zpe(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var Bpe=tV;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Fpe=function(t,e,n,i,r){if(!Hpe(t)||!e)return t;if(e=r_(e),n&&(e+="."+r_(n)),i&&(e+="."+r_(i)),r&&(e+="."+r_(r)),e in t)return t[e];for(var a=e.split("."),s=a.length,o=-1;t&&++o<s;){for(var l=a[o];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+a[++o];t=t[l]}return t};function Hpe(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function r_(t){return t?Array.isArray(t)?t.join("."):t:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Vpe=function(t,e){if(t===null||typeof t>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return t;for(var n=Object.prototype.propertyIsEnumerable,i=Object(t),r=arguments.length,a=0;++a<r;)for(var s=Object(arguments[a]),o=Object.getOwnPropertySymbols(s),l=0;l<o.length;l++){var f=o[l];n.call(s,f)&&(i[f]=s[f])}return i},Gpe=YC,kpe=Vpe,jpe=Object.assign||function(t){if(t===null||typeof t>"u")throw new TypeError("Cannot convert undefined or null to object");jL(t)||(t={});for(var e=1;e<arguments.length;e++){var n=arguments[e];Wpe(n)&&(n=Ype(n)),jL(n)&&(Xpe(t,n),kpe(t,n))}return t};function Xpe(t,e){for(var n in e)qpe(e,n)&&(t[n]=e[n])}function Wpe(t){return t&&typeof t=="string"}function Ype(t){var e={};for(var n in t)e[n]=t[n];return e}function jL(t){return t&&typeof t=="object"||Gpe(t)}function qpe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Zpe=jpe,$pe=function(t,e,n){if(typeof t!="string")throw new TypeError("expected a string");typeof e=="function"&&(n=e,e=null),typeof e=="string"&&(e={sep:e});var i=Zpe({sep:"."},e),r=i.quotes||['"',"'","`"],a;i.brackets===!0?a={"<":">","(":")","[":"]","{":"}"}:i.brackets&&(a=i.brackets);var s=[],o=[],l=[""],f=i.sep,h=t.length,d=-1,p;function g(){if(a&&o.length)return a[o[o.length-1]]}for(;++d<h;){var y=t[d],S=t[d+1],b={val:y,idx:d,arr:l,str:t};if(s.push(b),y==="\\"){b.val=Qpe(i,t,d)===!0?y+S:S,b.escaped=!0,typeof n=="function"&&n(b),l[l.length-1]+=b.val,d++;continue}if(a&&a[y]){o.push(y);var v=g(),x=d+1;if(t.indexOf(v,x+1)!==-1)for(;o.length&&x<h;){var E=t[++x];if(E==="\\"){E++;continue}if(r.indexOf(E)!==-1){x=qA(t,E,x+1);continue}if(v=g(),o.length&&t.indexOf(v,x+1)===-1)break;if(a[E]){o.push(E);continue}v===E&&o.pop()}if(p=x,p===-1){l[l.length-1]+=y;continue}y=t.slice(d,p+1),b.val=y,b.idx=d=p}if(r.indexOf(y)!==-1){if(p=qA(t,y,d+1),p===-1){l[l.length-1]+=y;continue}Kpe(y,i)===!0?y=t.slice(d,p+1):y=t.slice(d+1,p),b.val=y,b.idx=d=p}if(typeof n=="function"&&(n(b,s),y=b.val,d=b.idx),b.val===f&&b.split!==!1){l.push("");continue}l[l.length-1]+=b.val}return l};function qA(t,e,n,i){var r=t.indexOf(e,n);return t.charAt(r-1)==="\\"?qA(t,e,r+1):r}function Kpe(t,e){return e.keepDoubleQuotes===!0&&t==='"'||e.keepSingleQuotes===!0&&t==="'"?!0:e.keepQuotes}function Qpe(t,e,n){return typeof t.keepEscaping=="function"?t.keepEscaping(e,n):t.keepEscaping===!0||e[n+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Jpe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},XL=Jpe,eme=function(e){XL(e)||(e={});for(var n=arguments.length,i=1;i<n;i++){var r=arguments[i];XL(r)&&tme(e,r)}return e};function tme(t,e){for(var n in e)nme(e,n)&&(t[n]=e[n])}function nme(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ime=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var rme=$pe,ame=eme,WL=eV,YL=ime,sme=function(t,e,n){if(!YL(t)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return t;for(var i=rme(e,{sep:".",brackets:!0}).filter(ome),r=i.length,a=-1,s=t;++a<r;){var o=i[a];if(a!==r-1){YL(s[o])||(s[o]={}),s=s[o];continue}WL(s[o])&&WL(n)?s[o]=ame({},s[o],n):s[o]=n}return t};function ome(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var zM=YC,qL=Bpe,lme=Fpe,ZL=sme,cme=function(e,n,i){if(!zM(e))throw new TypeError("expected an object");if(typeof n!="string"||i==null)return qL.apply(null,arguments);if(typeof i=="string")return ZL(e,n,i),e;var r=lme(e,n);return zM(i)&&zM(r)&&(i=qL({},r,i)),ZL(e,n,i),e};const ume=Nh(cme),qC=(...t)=>t.filter(Boolean).join(".");function fme(t){const e=t.split(".");return[e.pop(),e.join(".")||void 0]}function hme(t,e){return Object.entries(Ife(t,e)).reduce((n,[,{value:i,disabled:r,key:a}])=>(n[a]=r?void 0:i,n),{})}function dme(t,e){const n=O.useRef();return uv(t,n.current)||(n.current=t),n.current}function nV(t,e){var n;return O.useMemo(t,(n=dme(e))!==null&&n!==void 0?n:[])}function pme(t){const e=O.useRef(null),n=O.useRef(null),i=O.useRef(!0);return O.useLayoutEffect(()=>{t||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),O.useEffect(()=>{if(i.current){i.current=!1;return}let r;const a=e.current,s=()=>{t&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",s,{once:!0});const{height:o}=n.current.getBoundingClientRect();return a.style.height=o+"px",t||(a.style.overflow="hidden",r=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",s),clearTimeout(r)}},[t]),{wrapperRef:e,contentRef:n}}const mme=t=>{const[e,n]=O.useState(t.getVisiblePaths());return O.useEffect(()=>{n(t.getVisiblePaths());const i=t.useStore.subscribe(t.getVisiblePaths,n,{equalityFn:z2});return()=>i()},[t]),e};function gme(t,e,n){return t.useStore(r=>{const a=kt(kt({},n),r.data);return hme(a,e)},z2)}function iV(t=3){const e=O.useRef(null),n=O.useRef(null),[i,r]=O.useState(!1),a=O.useCallback(()=>r(!0),[]),s=O.useCallback(()=>r(!1),[]);return O.useLayoutEffect(()=>{if(i){const{bottom:o,top:l,left:f}=e.current.getBoundingClientRect(),{height:h}=n.current.getBoundingClientRect(),d=o+h>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=f+"px",d==="down"?n.current.style.top=o+t+"px":n.current.style.bottom=window.innerHeight-l+t+"px"}},[t,i]),{popinRef:e,wrapperRef:n,shown:i,show:a,hide:s}}yde([_de]);const vme={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Pa.extend({color:()=>t=>ha(t).isValid()});const yme=t=>Pa().color().test(t);function rV(t,{format:e,hasAlpha:n,isString:i}){const r=vme[e]+(i&&e!=="hex"?"String":""),a=t[r]();return typeof a=="object"&&!n?zfe(a,["a"]):a}const aV=(t,e)=>{const n=ha(t);if(!n.isValid())throw Error("Invalid color");return rV(n,e)},_me=(t,e)=>rV(ha(t),kt(kt({},e),{},{isString:!0,format:"hex"})),xme=({value:t})=>{const e=vde(t),n=e==="name"?"hex":e,i=typeof t=="object"?"a"in t:e==="hex"&&t.length===8||/^(rgba)|(hsla)|(hsva)/.test(t),r={format:n,hasAlpha:i,isString:typeof t=="string"};return{value:aV(t,r),settings:r}};var bme=Object.freeze({__proto__:null,schema:yme,sanitize:aV,format:_me,normalize:xme});const Sme=Gt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Eme=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Mme=Gt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function $L(t,e){return e!=="rgb"?ha(t).toRgb():t}function Tme({value:t,displayValue:e,settings:n,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:a}=na(),{format:s,hasAlpha:o}=n,{popinRef:l,wrapperRef:f,shown:h,show:d,hide:p}=iV(),g=O.useRef(0),[y,S]=O.useState(()=>$L(t,s)),b=o?Ade:Cde,v=()=>{S($L(t,s)),d(),r()},x=()=>{p(),a(),window.clearTimeout(g.current)},E=()=>{g.current=window.setTimeout(x,500)};return O.useEffect(()=>()=>window.clearTimeout(g.current),[]),J.createElement(J.Fragment,null,J.createElement(Sme,{ref:l,active:h,onClick:()=>v(),style:{color:e}}),h&&J.createElement(FC,null,J.createElement(EH,{onPointerUp:x}),J.createElement(Mme,{ref:f,onMouseEnter:()=>window.clearTimeout(g.current),onMouseLeave:T=>T.buttons===0&&E()},J.createElement(b,{color:y,onChange:i}))))}function Ame(){const{value:t,displayValue:e,label:n,onChange:i,onUpdate:r,settings:a}=na();return J.createElement(fo,{input:!0},J.createElement(zo,null,n),J.createElement(Eme,null,J.createElement(Tme,{value:t,displayValue:e,onChange:i,onUpdate:r,settings:a}),J.createElement(BC,{value:e,onChange:i,onUpdate:r})))}var wme=kt({component:Ame},bme);function Cme(){const{label:t,displayValue:e,onUpdate:n,settings:i}=na();return J.createElement(fo,{input:!0},J.createElement(zo,null,t),J.createElement(VC,{value:e,settings:i,onUpdate:n}))}var Rme=kt({component:Cme},OH(["x","y","z"]));const Dme=Gt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Ome=Gt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Nme({value:t,settings:e,onUpdate:n}){const i=O.useRef(),r=O.useRef(0),a=O.useRef(0),s=O.useRef(1),[o,l]=O.useState(!1),[f,h]=O.useState(!1),[d,p]=TH(),g=O.useRef(null),y=O.useRef(null);O.useLayoutEffect(()=>{if(o){const{top:X,left:j,width:Y,height:Z}=g.current.getBoundingClientRect();y.current.style.left=j+Y/2+"px",y.current.style.top=X+Z/2+"px"}},[o]);const{keys:[S,b],joystick:v}=e,x=v==="invertY"?1:-1,{[S]:{step:E},[b]:{step:T}}=e,w=oc("sizes","joystickWidth"),R=oc("sizes","joystickHeight"),N=parseFloat(w)*.8/2,U=parseFloat(R)*.8/2,A=O.useCallback(()=>{i.current||(h(!0),r.current&&p({x:r.current*N}),a.current&&p({y:a.current*-U}),i.current=window.setInterval(()=>{n(X=>{const j=E*r.current*s.current,Y=x*T*a.current*s.current;return Array.isArray(X)?{[S]:X[0]+j,[b]:X[1]+Y}:{[S]:X[S]+j,[b]:X[b]+Y}})},16))},[N,U,n,p,E,T,S,b,x]),C=O.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,h(!1)},[]);O.useEffect(()=>{function X(j){s.current=cH(j)}return window.addEventListener("keydown",X),window.addEventListener("keyup",X),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",X),window.removeEventListener("keyup",X)}},[]);const I=t1(({first:X,active:j,delta:[Y,Z],movement:[z,G]})=>{X&&l(!0);const q=ku(z,-N,N),se=ku(G,-U,U);r.current=Math.abs(z)>Math.abs(q)?Math.sign(z-q):0,a.current=Math.abs(G)>Math.abs(se)?Math.sign(se-G):0;let le=t[S],me=t[b];j?(r.current||(le+=Y*E*s.current,p({x:q})),a.current||(me-=x*Z*T*s.current,p({y:se})),r.current||a.current?A():C(),n({[S]:le,[b]:me})):(l(!1),r.current=0,a.current=0,p({x:0,y:0}),C())});return J.createElement(Dme,Gi({ref:g},I()),o&&J.createElement(FC,null,J.createElement(Ome,{ref:y,isOutOfBounds:f},J.createElement("div",null),J.createElement("span",{ref:d}))))}const Ume=Gt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Lme(){const{label:t,displayValue:e,onUpdate:n,settings:i}=na();return J.createElement(fo,{input:!0},J.createElement(zo,null,t),J.createElement(Ume,{withJoystick:!!i.joystick},i.joystick&&J.createElement(Nme,{value:e,settings:i,onUpdate:n}),J.createElement(VC,{value:e,settings:i,onUpdate:n})))}const Pme=["joystick"],sV=OH(["x","y"]),Ime=t=>{let{joystick:e=!0}=t,n=$n(t,Pme);const{value:i,settings:r}=sV.normalize(n);return{value:i,settings:kt(kt({},r),{},{joystick:e})}};var zme=kt(kt({component:Lme},sV),{},{normalize:Ime});const Bme=t=>{if(t!==void 0){if(t instanceof File)try{return URL.createObjectURL(t)}catch{return}if(typeof t=="string"&&t.indexOf("blob:")===0)return t;throw Error("Invalid image format [undefined | blob |File].")}},Fme=(t,e)=>typeof e=="object"&&"image"in e,Hme=({image:t})=>({value:t});var Vme=Object.freeze({__proto__:null,sanitize:Bme,schema:Fme,normalize:Hme});const Gme=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),kme=Gt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),jme=Gt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Xme=Gt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Wme=Gt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Yme=Gt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function qme(){const{label:t,value:e,onUpdate:n,disabled:i}=na(),{popinRef:r,wrapperRef:a,shown:s,show:o,hide:l}=iV(),f=O.useCallback(y=>{y.length&&n(y[0])},[n]),h=O.useCallback(y=>{y.stopPropagation(),n(void 0)},[n]),{getRootProps:d,getInputProps:p,isDragAccept:g}=JH({maxFiles:1,accept:"image/*",onDrop:f,disabled:i});return J.createElement(fo,{input:!0},J.createElement(zo,null,t),J.createElement(Gme,null,J.createElement(jme,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&o(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),s&&!!e&&J.createElement(FC,null,J.createElement(EH,{onPointerUp:l,style:{cursor:"pointer"}}),J.createElement(Xme,{ref:a,style:{backgroundImage:`url(${e})`}})),J.createElement(kme,d({isDragAccept:g}),J.createElement("input",p()),J.createElement(Wme,null,g?"drop image":"click or drop")),J.createElement(Yme,{onClick:h,disabled:!e})))}var Zme=kt({component:qme},Vme);const KL=Pa().number(),$me=(t,e)=>Pa().array().length(2).every.number().test(t)&&Pa().schema({min:KL,max:KL}).test(e),Sb=t=>({min:t[0],max:t[1]}),oV=(t,{bounds:[e,n]},i)=>{const r=Array.isArray(t)?Sb(t):t,a={min:i[0],max:i[1]},{min:s,max:o}=kt(kt({},a),r);return[ku(Number(s),e,Math.max(e,o)),ku(Number(o),Math.min(n,s),n)]},Kme=({value:t,min:e,max:n})=>{const i={min:e,max:n},r=DH(Sb(t),{min:i,max:i}),a=[e,n],s=kt(kt({},r),{},{bounds:a});return{value:oV(Sb(t),s,t),settings:s}};var Qme=Object.freeze({__proto__:null,schema:$me,format:Sb,sanitize:oV,normalize:Kme});const Jme=["value","bounds","onDrag"],e0e=["bounds"],t0e=Gt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function n0e(t){let{value:e,bounds:[n,i],onDrag:r}=t,a=$n(t,Jme);const s=O.useRef(null),o=O.useRef(null),l=O.useRef(null),f=O.useRef(0),h=oc("sizes","scrubberWidth"),d=t1(({event:y,first:S,xy:[b],movement:[v],memo:x={}})=>{if(S){const{width:T,left:w}=s.current.getBoundingClientRect();f.current=T-parseFloat(h);const R=(y==null?void 0:y.target)===o.current||(y==null?void 0:y.target)===l.current;x.pos=vb((b-w)/T,n,i);const N=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=N<0||N===0&&x.pos<=e.min?"min":"max",R&&(x.pos=e[x.key])}const E=x.pos+vb(v/f.current,0,i-n);return r({[x.key]:Mhe(E,a[x.key])}),x}),p=`calc(${gb(e.min,n,i)} * (100% - ${h} - 8px) + 4px)`,g=`calc(${1-gb(e.max,n,i)} * (100% - ${h} - 8px) + 4px)`;return J.createElement(wH,Gi({ref:s},d()),J.createElement(AH,null,J.createElement(CH,{style:{left:p,right:g}})),J.createElement(IA,{position:"left",ref:o,style:{left:p}}),J.createElement(IA,{position:"right",ref:l,style:{right:g}}))}function i0e(){const{label:t,displayValue:e,onUpdate:n,settings:i}=na(),r=$n(i,e0e);return J.createElement(J.Fragment,null,J.createElement(fo,{input:!0},J.createElement(zo,null,t),J.createElement(t0e,null,J.createElement(n0e,Gi({value:e},i,{onDrag:n})),J.createElement(VC,{value:e,settings:r,onUpdate:n,innerLabelTrim:0}))))}var r0e=kt({component:i0e},Qme);const a0e=()=>{const t=new Map;return{on:(e,n)=>{let i=t.get(e);i===void 0&&(i=new Set,t.set(e,i)),i.add(n)},off:(e,n)=>{const i=t.get(e);i!==void 0&&(i.delete(n),i.size===0&&t.delete(e))},emit:(e,...n)=>{const i=t.get(e);if(i!==void 0)for(const r of i)r(...n)}}},s0e=["type","value"],o0e=["onChange","transient","onEditStart","onEditEnd"],l0e=function(){const e=Cpe(Rpe(()=>({data:{}}))),n=a0e();this.storeId=Pfe(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const s=this.getData(),o=Object.keys(s),l=[];Object.entries(i).forEach(([h,d])=>{d.render&&o.some(p=>p.indexOf(h)===0)&&!d.render(this.get)&&l.push(h+".")});const f=[];return r.forEach(h=>{h in s&&s[h].__refCount>0&&l.every(d=>h.indexOf(d)===-1)&&(!s[h].render||s[h].render(this.get))&&f.push(h)}),f},this.setOrderedPaths=s=>{s.forEach(o=>r.add(o))},this.orderPaths=s=>(this.setOrderedPaths(s),s),this.disposePaths=s=>{e.setState(o=>{const l=o.data;return s.forEach(f=>{if(f in l){const h=l[f];h.__refCount--,h.__refCount===0&&h.type in cl&&delete l[f]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=s=>i[s]||{},this.getData=()=>e.getState().data,this.addData=(s,o)=>{e.setState(l=>{const f=l.data;return Object.entries(s).forEach(([h,d])=>{let p=f[h];if(p){const{type:g,value:y}=d,S=$n(d,s0e);g!==p.type?$l(nr.INPUT_TYPE_OVERRIDE,h,p.type,g):((p.__refCount===0||o)&&Object.assign(p,S),p.__refCount++)}else f[h]=kt(kt({},d),{},{__refCount:1})}),{data:f}})},this.setValueAtPath=(s,o,l)=>{e.setState(f=>{const h=f.data;return xL(h[s],o,s,this,l),{data:h}})},this.setSettingsAtPath=(s,o)=>{e.setState(l=>{const f=l.data;return f[s].settings=kt(kt({},f[s].settings),o),{data:f}})},this.disableInputAtPath=(s,o)=>{e.setState(l=>{const f=l.data;return f[s].disabled=o,{data:f}})},this.set=(s,o)=>{e.setState(l=>{const f=l.data;return Object.entries(s).forEach(([h,d])=>{try{xL(f[h],d,void 0,void 0,o)}catch{}}),{data:f}})},this.getInput=s=>{try{return this.getData()[s]}catch{$l(nr.PATH_DOESNT_EXIST,s)}},this.get=s=>{var o;return(o=this.getInput(s))===null||o===void 0?void 0:o.value},this.emitOnEditStart=s=>{n.emit(`onEditStart:${s}`,this.get(s),s,kt(kt({},this.getInput(s)),{},{get:this.get}))},this.emitOnEditEnd=s=>{n.emit(`onEditEnd:${s}`,this.get(s),s,kt(kt({},this.getInput(s)),{},{get:this.get}))},this.subscribeToEditStart=(s,o)=>{const l=`onEditStart:${s}`;return n.on(l,o),()=>n.off(l,o)},this.subscribeToEditEnd=(s,o)=>{const l=`onEditEnd:${s}`;return n.on(l,o),()=>n.off(l,o)};const a=(s,o,l)=>{const f={};return Object.entries(s).forEach(([h,d])=>{if(h==="")return $l(nr.EMPTY_KEY);let p=qC(o,h);if(d.type===cl.FOLDER){const g=a(d.schema,p,l);Object.assign(f,g),p in i||(i[p]=d.settings)}else if(h in l)$l(nr.DUPLICATE_KEYS,h,p,l[h].path);else{const g=kfe(d,h,p,f);if(g){const{type:y,options:S,input:b}=g,{onChange:v,transient:x,onEditStart:E,onEditEnd:T}=S,w=$n(S,o0e);f[p]=kt(kt(kt({type:y},w),b),{},{fromPanel:!0}),l[h]={path:p,onChange:v,transient:x,onEditStart:E,onEditEnd:T}}else $l(nr.UNKNOWN_INPUT,p,d)}}),f};this.getDataFromSchema=s=>{const o={};return[a(s,"",o),o]}},lV=new l0e,c0e={collapsed:!1};function u0e(t,e){return{type:cl.FOLDER,schema:t,settings:kt(kt({},c0e),e)}}const f0e={disabled:!1};function QL(t,e){return{type:cl.BUTTON,onClick:t,settings:kt(kt({},f0e),e)}}const JL=t=>"__levaInput"in t,h0e=(t,e)=>{const n={},i=e?e.toLowerCase():null;return t.forEach(r=>{const[a,s]=fme(r);(!i||a.toLowerCase().indexOf(i)>-1)&&ume(n,s,{[a]:{__levaInput:!0,path:r}})}),n},d0e=["type","label","path","valueKey","value","settings","setValue","disabled"];function p0e(t){let{type:e,label:n,path:i,valueKey:r,value:a,settings:s,setValue:o,disabled:l}=t,f=$n(t,d0e);const{displayValue:h,onChange:d,onUpdate:p}=MH({type:e,value:a,settings:s,setValue:o}),g=Ch[e].component;return g?J.createElement(pH.Provider,{value:kt({key:r,path:i,id:""+i,label:n,displayValue:h,value:a,onChange:d,onUpdate:p,settings:s,setValue:o,disabled:l},f)},J.createElement(lhe,{disabled:l},J.createElement(g,null))):($l(nr.NO_COMPONENT_FOR_TYPE,e,i),null)}const m0e=Gt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function g0e({onClick:t,settings:e,label:n}){const i=Jv();return J.createElement(fo,null,J.createElement(m0e,{disabled:e.disabled,onClick:()=>t(i.get)},n))}const v0e=Gt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),y0e=Gt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),_0e=({label:t,opts:e})=>{let n=typeof t=="string"&&t.trim()===""?null:t,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(n=e.label),i=e.opts),{label:n,opts:i}};function x0e(t){const{label:e,opts:n}=_0e(t),i=Jv();return J.createElement(fo,{input:!!e},e&&J.createElement(zo,null,e),J.createElement(v0e,null,Object.entries(n).map(([r,a])=>J.createElement(y0e,{key:r,onClick:()=>a(i.get)},r))))}const b0e=Gt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),cV=100;function S0e(t,e){t.push(e),t.length>cV&&t.shift()}const E0e=O.forwardRef(function({initialValue:t},e){const n=oc("colors","highlight3"),i=oc("colors","elevation2"),r=oc("colors","highlight1"),[a,s]=O.useMemo(()=>[ha(r).alpha(.4).toRgbString(),ha(r).alpha(.1).toRgbString()],[r]),o=O.useRef([t]),l=O.useRef(t),f=O.useRef(t),h=O.useRef(),d=O.useCallback((y,S)=>{if(!y)return;const{width:b,height:v}=y,x=new Path2D,E=b/cV,T=v*.05;for(let N=0;N<o.current.length;N++){const U=gb(o.current[N],l.current,f.current),A=E*N,C=v-U*(v-T*2)-T;x.lineTo(A,C)}S.clearRect(0,0,b,v);const w=new Path2D(x);w.lineTo(E*(o.current.length+1),v),w.lineTo(0,v),w.lineTo(0,0);const R=S.createLinearGradient(0,0,0,v);R.addColorStop(0,a),R.addColorStop(1,s),S.fillStyle=R,S.fill(w),S.strokeStyle=i,S.lineJoin="round",S.lineWidth=14,S.stroke(x),S.strokeStyle=n,S.lineWidth=2,S.stroke(x)},[n,i,a,s]),[p,g]=vhe(d);return O.useImperativeHandle(e,()=>({frame:y=>{(l.current===void 0||y<l.current)&&(l.current=y),(f.current===void 0||y>f.current)&&(f.current=y),S0e(o.current,y),h.current=requestAnimationFrame(()=>d(p.current,g.current))}}),[p,g,d]),O.useEffect(()=>()=>cancelAnimationFrame(h.current),[]),J.createElement(b0e,{ref:p})}),eP=t=>Number.isFinite(t)?t.toPrecision(2):t.toString(),M0e=O.forwardRef(function({initialValue:t},e){const[n,i]=O.useState(eP(t));return O.useImperativeHandle(e,()=>({frame:r=>i(eP(r))}),[]),J.createElement("div",null,n)});function tP(t){return typeof t=="function"?t():t.current}function T0e({label:t,objectOrFn:e,settings:n}){const i=O.useRef(),r=O.useRef(tP(e));return O.useEffect(()=>{const a=window.setInterval(()=>{var s;document.hidden||(s=i.current)===null||s===void 0||s.frame(tP(e))},n.interval);return()=>window.clearInterval(a)},[e,n.interval]),J.createElement(fo,{input:!0},J.createElement(zo,{align:"top"},t),n.graph?J.createElement(E0e,{ref:i,initialValue:r.current}):J.createElement(M0e,{ref:i,initialValue:r.current}))}const A0e=["type","label","key"],w0e={[cl.BUTTON]:g0e,[cl.BUTTON_GROUP]:x0e,[cl.MONITOR]:T0e},C0e=J.memo(({path:t})=>{const[e,{set:n,setSettings:i,disable:r,storeId:a,emitOnEditStart:s,emitOnEditEnd:o}]=_he(t);if(!e)return null;const{type:l,label:f,key:h}=e,d=$n(e,A0e);if(l in cl){const p=w0e[l];return J.createElement(p,Gi({label:f,path:t},d))}return l in Ch?J.createElement(p0e,Gi({key:a+t,type:l,label:f,storeId:a,path:t,valueKey:h,setValue:n,setSettings:i,disable:r,emitOnEditStart:s,emitOnEditEnd:o},d)):(Tfe(nr.UNSUPPORTED_INPUT,l,t),null)});function R0e({toggle:t,toggled:e,name:n}){return J.createElement(ahe,{onClick:()=>t()},J.createElement(HC,{toggled:e}),J.createElement("div",null,n))}const D0e=({name:t,path:e,tree:n})=>{const i=Jv(),r=qC(e,t),{collapsed:a,color:s}=i.getFolderSettings(r),[o,l]=O.useState(!a),f=O.useRef(null),h=oc("colors","folderWidgetColor"),d=oc("colors","folderTextColor");return O.useLayoutEffect(()=>{f.current.style.setProperty("--leva-colors-folderWidgetColor",s||h),f.current.style.setProperty("--leva-colors-folderTextColor",s||d)},[s,h,d]),J.createElement(yb,{ref:f},J.createElement(R0e,{name:t,toggled:o,toggle:()=>l(p=>!p)}),J.createElement(uV,{parent:r,tree:n,toggled:o}))},uV=J.memo(({isRoot:t=!1,fill:e=!1,flat:n=!1,parent:i,tree:r,toggled:a})=>{const{wrapperRef:s,contentRef:o}=pme(a),l=Jv(),f=([d,p])=>{var g;return(JL(p)?(g=l.getInput(p.path))===null||g===void 0?void 0:g.order:l.getFolderSettings(qC(i,d)).order)||0},h=Object.entries(r).sort((d,p)=>f(d)-f(p));return J.createElement(LA,{ref:s,isRoot:t,fill:e,flat:n},J.createElement(xH,{ref:o,isRoot:t,toggled:a},h.map(([d,p])=>JL(p)?J.createElement(C0e,{key:p.path,valueKey:p.valueKey,path:p.path}):J.createElement(D0e,{key:d,name:d,path:i,tree:p}))))}),O0e=Gt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${SH}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),fV=40,Eb=Gt("i",{$flexCenter:"",width:fV,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),N0e=Gt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),U0e=Gt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Eb}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),L0e=Gt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),P0e=Gt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:fV}}}}),I0e=J.forwardRef(({setFilter:t,toggle:e},n)=>{const[i,r]=O.useState(""),a=O.useMemo(()=>lH(t,250),[t]),s=()=>{t(""),r("")},o=l=>{const f=l.currentTarget.value;e(!0),r(f)};return O.useEffect(()=>{a(i)},[i,a]),J.createElement(J.Fragment,null,J.createElement(L0e,{ref:n,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:o}),J.createElement(Eb,{onClick:()=>s(),style:{visibility:i?"visible":"hidden"}},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function z0e({setFilter:t,onDrag:e,onDragStart:n,onDragEnd:i,toggle:r,toggled:a,title:s,drag:o,filterEnabled:l,from:f}){const[h,d]=O.useState(!1),p=O.useRef(null);O.useEffect(()=>{var y,S;h?(y=p.current)===null||y===void 0||y.focus():(S=p.current)===null||S===void 0||S.blur()},[h]);const g=t1(({offset:[y,S],first:b,last:v})=>{e({x:y,y:S}),b&&n({x:y,y:S}),v&&i({x:y,y:S})},{filterTaps:!0,from:({offset:[y,S]})=>[(f==null?void 0:f.x)||y,(f==null?void 0:f.y)||S]});return O.useEffect(()=>{const y=S=>{S.key==="L"&&S.shiftKey&&S.metaKey&&d(b=>!b)};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[]),J.createElement(J.Fragment,null,J.createElement(N0e,{mode:o?"drag":void 0},J.createElement(Eb,{active:!a,onClick:()=>r()},J.createElement(HC,{toggled:a,width:12,height:8})),J.createElement(P0e,Gi({},o?g():{},{drag:o,filterEnabled:l}),s===void 0&&o?J.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},J.createElement("circle",{cx:"2",cy:"2",r:"2"}),J.createElement("circle",{cx:"14",cy:"2",r:"2"}),J.createElement("circle",{cx:"26",cy:"2",r:"2"}),J.createElement("circle",{cx:"2",cy:"12",r:"2"}),J.createElement("circle",{cx:"14",cy:"12",r:"2"}),J.createElement("circle",{cx:"26",cy:"12",r:"2"})):s),l&&J.createElement(Eb,{active:h,onClick:()=>d(y=>!y)},J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},J.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),J.createElement(U0e,{toggled:h},J.createElement(I0e,{ref:p,setFilter:t,toggle:r})))}const B0e=["store","hidden","theme","collapsed"];function F0e(t){let{store:e,hidden:n=!1,theme:i,collapsed:r=!1}=t,a=$n(t,B0e);const s=nV(()=>Jfe(i),[i]),[o,l]=O.useState(!r),f=typeof r=="object"?!r.collapsed:o,h=O.useMemo(()=>typeof r=="object"?d=>{typeof d=="function"?r.onChange(!d(!r.collapsed)):r.onChange(!d)}:l,[r]);return!e||n?null:J.createElement(zC.Provider,{value:s},J.createElement(H0e,Gi({store:e},a,{toggled:f,setToggle:h,rootClass:s.className})))}const H0e=J.memo(({store:t,rootClass:e,fill:n=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:a=!1,titleBar:s={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:o=!1,toggled:l,setToggle:f})=>{var h,d;const p=mme(t),[g,y]=O.useState(""),S=O.useMemo(()=>h0e(p,g),[p,g]),[b,v]=TH(),x=r||p.length>0,E=typeof s=="object"&&s.title||void 0,T=typeof s=="object"&&(h=s.drag)!==null&&h!==void 0?h:!0,w=typeof s=="object"&&(d=s.filter)!==null&&d!==void 0?d:!0,R=typeof s=="object"&&s.position||void 0,N=typeof s=="object"&&s.onDrag||void 0,U=typeof s=="object"&&s.onDragStart||void 0,A=typeof s=="object"&&s.onDragEnd||void 0;return J.useEffect(()=>{v({x:R==null?void 0:R.x,y:R==null?void 0:R.y})},[R,v]),Qfe(),J.createElement(yfe,null,J.createElement(gH.Provider,{value:{hideCopyButton:o}},J.createElement(O0e,{ref:b,className:e,fill:n,flat:i,oneLineLabels:a,hideTitleBar:!s,style:{display:x?"block":"none"}},s&&J.createElement(z0e,{onDrag:C=>{v(C),N==null||N(C)},onDragStart:C=>U==null?void 0:U(C),onDragEnd:C=>A==null?void 0:A(C),setFilter:y,toggle:C=>f(I=>C??!I),toggled:l,title:E,drag:T,filterEnabled:w,from:R}),x&&J.createElement(mH.Provider,{value:t},J.createElement(uV,{isRoot:!0,fill:n,flat:i,tree:S,toggled:l})))))}),V0e=["isRoot"];let Mb=!1,th=null;function hV(t){let{isRoot:e=!1}=t,n=$n(t,V0e);return O.useEffect(()=>(Mb=!0,!e&&th&&(th.remove(),th=null),()=>{e||(Mb=!1)}),[e]),J.createElement(F0e,Gi({store:lV},n))}function G0e(t){O.useEffect(()=>{t&&!Mb&&(th||(th=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(th),y4.createRoot(th).render(J.createElement(hV,{isRoot:!0})))),Mb=!0)},[t])}function k0e(t,e,n,i,r){let a,s,o,l,f;return typeof t=="string"?(s=t,a=e,Array.isArray(n)&&(f=n)):(a=t,Array.isArray(e)?f=e:(l=e,f=n)),{schema:a,folderName:s,folderSettings:o,hookSettings:l,deps:f||[]}}function j0e(t,e,n,i,r){const{folderName:a,schema:s,folderSettings:o,hookSettings:l,deps:f}=k0e(t,e,n),h=typeof s=="function",d=O.useRef(!1),p=O.useRef(!0),g=nV(()=>{d.current=!0;const I=typeof s=="function"?s():s;return a?{[a]:u0e(I,o)}:I},f),y=!(l!=null&&l.store);G0e(y);const[S]=O.useState(()=>(l==null?void 0:l.store)||lV),[b,v]=O.useMemo(()=>S.getDataFromSchema(g),[S,g]),[x,E,T,w,R]=O.useMemo(()=>{const I=[],X=[],j={},Y={},Z={};return Object.values(v).forEach(({path:z,onChange:G,onEditStart:q,onEditEnd:se,transient:le})=>{I.push(z),G?(j[z]=G,le||X.push(z)):X.push(z),q&&(Y[z]=q),se&&(Z[z]=se)}),[I,X,j,Y,Z]},[v]),N=O.useMemo(()=>S.orderPaths(x),[x,S]),U=gme(S,E,b),A=O.useCallback(I=>{const X=Object.entries(I).reduce((j,[Y,Z])=>Object.assign(j,{[v[Y].path]:Z}),{});S.set(X,!1)},[S,v]),C=O.useCallback(I=>S.get(v[I].path),[S,v]);return O.useEffect(()=>{const I=!p.current&&d.current;return S.addData(b,I),p.current=!1,d.current=!1,()=>S.disposePaths(N)},[S,N,b]),O.useEffect(()=>{const I=[];return Object.entries(T).forEach(([X,j])=>{j(S.get(X),X,kt({initial:!0,get:S.get},S.getInput(X)));const Y=S.useStore.subscribe(Z=>{const z=Z.data[X];return[z.disabled?void 0:z.value,z]},([Z,z])=>j(Z,X,kt({initial:!1,get:S.get},z)),{equalityFn:z2});I.push(Y)}),()=>I.forEach(X=>X())},[S,T]),O.useEffect(()=>{const I=[];return Object.entries(w).forEach(([X,j])=>I.push(S.subscribeToEditStart(X,j))),Object.entries(R).forEach(([X,j])=>I.push(S.subscribeToEditEnd(X,j))),()=>I.forEach(X=>X())},[w,R,S]),h?[U,A,C]:U}Sc(Ec.SELECT,Ihe);Sc(Ec.IMAGE,Zme);Sc(Ec.NUMBER,Ahe);Sc(Ec.COLOR,wme);Sc(Ec.STRING,Xhe);Sc(Ec.BOOLEAN,Qhe);Sc(Ec.INTERVAL,r0e);Sc(Ec.VECTOR3D,Rme);Sc(Ec.VECTOR2D,zme);const Au=44,ZC=14,z0=45e3,X0e=2800,dV=7;function W0e(t,e,n){const i=Math.random()*t,r=i/t,s=e*Math.pow(1-r,1.1),o=r*dV%1,l=.4+.6*Math.pow(1-o,1.2),f=s*l,h=Math.random()*Math.PI*2,p=(.2+.8*Math.sqrt(Math.random()))*f,g=Math.cos(h)*p,y=Math.sin(h)*p;return n.set(g,i-t/2,y),n}function pV(t,e,n){const i=Math.random()*t,r=i/t;if(Math.random()>1-r*.7)return pV(t,e,n);const s=e*Math.pow(1-r,1.1),o=r*dV%1,l=.4+.6*Math.pow(1-o,1.2),f=s*l,h=Math.random()*Math.PI*2,d=f*(.9+.1*Math.random()),p=Math.cos(h)*d,g=Math.sin(h)*d;return n.set(p,i-t/2,g),n}function Y0e(t){const e=new Float32Array(t*3),n=new Float32Array(t*3),i=new Float32Array(t*3),r=new k,a=new lt,s=yae(new Float32Array(t*3),{radius:35});for(let o=0;o<t;o++){if(e[o*3]=s[o*3],e[o*3+1]=s[o*3+1],e[o*3+2]=s[o*3+2],W0e(Au,ZC,r),n[o*3]=r.x,n[o*3+1]=r.y,n[o*3+2]=r.z,Math.random()>.95)a.setHex(16766720).lerp(new lt(16755200),Math.random());else{const l=(r.y+Au/2)/Au,f=new lt(16416);f.lerp(new lt(24624),l*.5+Math.random()*.5),a.copy(f)}i[o*3]=a.r,i[o*3+1]=a.g,i[o*3+2]=a.b}return{chaosPositions:e,targetPositions:n,colors:i}}function q0e(t){const e=[];for(let n=0;n<t;n++){const i=new k((Math.random()-.5)*50,(Math.random()-.5)*50,(Math.random()-.5)*50),r=new k,a=n/t*(Au*.8),s=a/Au,f=ZC*Math.pow(1-s,1.1)+1,h=n*2.4,d=Math.cos(h)*f,p=Math.sin(h)*f;r.set(d,a-Au/2,p),e.push({chaosPos:i,targetPos:r,id:n+1})}return e}function Z0e(t){const e=[];for(let n=0;n<t;n++){const i=new k((Math.random()-.5)*60,(Math.random()-.5)*60,(Math.random()-.5)*60),r=new k;pV(Au,ZC,r);const a=Math.random();let s="ball",o=new lt;a<.15?(s="box",o.setHex(9109504),Math.random()>.6&&o.setHex(16766720)):a<.6?(s="ball",o.setHex(16711680),Math.random()>.4&&o.setHex(16766720),Math.random()>.7&&o.setHex(14737632)):(s="light",o.setHex(16777184)),e.push({chaosPos:i,targetPos:r,type:s,color:o})}return e}const $0e=jae({uTime:0,uProgress:0,uColor:new lt(0,1,0)},`
    uniform float uTime;
    uniform float uProgress;
    attribute vec3 aChaosPos;
    attribute vec3 aTargetPos;
    attribute vec3 aColor;
    varying vec3 vColor;
    
    // Simplex noise function (simplified)
    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
    vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
    vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
    vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
    float snoise(vec3 v) {
      const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
      const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
      // First corner
      vec3 i  = floor(v + dot(v, C.yyy) );
      vec3 x0 = v - i + dot(i, C.xxx) ;
      // Other corners
      vec3 g = step(x0.yzx, x0.xyz);
      vec3 l = 1.0 - g;
      vec3 i1 = min( g.xyz, l.zxy );
      vec3 i2 = max( g.xyz, l.zxy );
      vec3 x1 = x0 - i1 + C.xxx;
      vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
      vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
      // Permutations
      i = mod289(i);
      vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
      float n_ = 0.142857142857; // 1.0/7.0
      vec3  ns = n_ * D.wyz - D.xzx;
      vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
      vec4 x_ = floor(j * ns.z);
      vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
      vec4 x = x_ *ns.x + ns.yyyy;
      vec4 y = y_ *ns.x + ns.yyyy;
      vec4 h = 1.0 - abs(x) - abs(y);
      vec4 b0 = vec4( x.xy, y.xy );
      vec4 b1 = vec4( x.zw, y.zw );
      vec4 s0 = floor(b0)*2.0 + 1.0;
      vec4 s1 = floor(b1)*2.0 + 1.0;
      vec4 sh = -step(h, vec4(0.0));
      vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
      vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
      vec3 p0 = vec3(a0.xy,h.x);
      vec3 p1 = vec3(a0.zw,h.y);
      vec3 p2 = vec3(a1.xy,h.z);
      vec3 p3 = vec3(a1.zw,h.w);
      vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
      p0 *= norm.x;
      p1 *= norm.y;
      p2 *= norm.z;
      p3 *= norm.w;
      vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
      m = m * m;
      return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                    dot(p2,x2), dot(p3,x3) ) );
    }

    vec3 rotateY(vec3 v, float angle) {
      float s = sin(angle);
      float c = cos(angle);
      return vec3(c * v.x + s * v.z, v.y, -s * v.x + c * v.z);
    }

    void main() {
      vColor = aColor;
      
      // Calculate Normalized Height (t) from aTargetPos.y
      // Range approx -10 to 12. Let's map to 0..1
      float t = (aTargetPos.y + 10.0) / 22.0;
      t = clamp(t, 0.0, 1.0);
      
      // Stagger Logic
      // localP = uProgress * 2.5 - (1.5 - t * 1.5)
      float localP = uProgress * 2.5 - (1.5 - t * 1.5);
      localP = clamp(localP, 0.0, 1.0);
      
      // Interpolate position
      // Luxury transition: smoothstep for organic ease
      float ease = smoothstep(0.0, 1.0, localP);
      
      vec3 pos = mix(aChaosPos, aTargetPos, ease);
      
      // Spiral Effect during transition
      // When uProgress is 0 (chaos), angle is 0 (or random?). 
      // Actually we want them to spiral IN.
      // So at 0.5 they are twisted, at 1.0 they are aligned.
      // Let's twist based on (1.0 - ease)
      
      float twistStrength = (1.0 - ease) * 10.0; // 10 radians twist
      // Modulate twist by height to create vortex shape?
      // Or just simple rotation
      pos = rotateY(pos, twistStrength);
      
      // Add wind/noise
      float noiseVal = snoise(pos * 0.5 + uTime * 0.5);
      pos += noiseVal * 0.2 * ease; // Only apply wind when formed mostly
      
      vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
      gl_PointSize = (10.0 * (1.0 + noiseVal * 0.5)) * (1.0 / -mvPosition.z);
      gl_Position = projectionMatrix * mvPosition;
    }
  `,`
    varying vec3 vColor;
    
    void main() {
      // Circular particle
      vec2 coord = gl_PointCoord - vec2(0.5);
      if(length(coord) > 0.5) discard;
      
      // Soft edge
      float strength = 1.0 - (length(coord) * 2.0);
      strength = pow(strength, 1.5);
      
      gl_FragColor = vec4(vColor * 2.0, 1.0); // Boost color for bloom
      // gl_FragColor.a *= strength; // If using transparency
    }
  `);L2({FoliageMaterial:$0e});function K0e({progressRef:t,formed:e}){const n=O.useRef(null),{chaosPositions:i,targetPositions:r,colors:a}=O.useMemo(()=>Y0e(z0),[]);return ta(s=>{n.current&&(n.current.uniforms.uTime.value=s.clock.elapsedTime,n.current.uniforms.uProgress.value=t.current)}),$.jsxs("points",{children:[$.jsxs("bufferGeometry",{children:[$.jsx("bufferAttribute",{attach:"attributes-position",count:z0,array:r,itemSize:3}),$.jsx("bufferAttribute",{attach:"attributes-aChaosPos",count:z0,array:i,itemSize:3}),$.jsx("bufferAttribute",{attach:"attributes-aTargetPos",count:z0,array:r,itemSize:3}),$.jsx("bufferAttribute",{attach:"attributes-aColor",count:z0,array:a,itemSize:3})]}),$.jsx("foliageMaterial",{ref:n,transparent:!0,depthWrite:!1,blending:jg})]})}function Q0e({progressRef:t,formed:e}){const n=O.useRef(null),i=O.useRef(null),{boxes:r,spheres:a}=O.useMemo(()=>{const l=Z0e(X0e),f=l.filter(d=>d.type==="box"),h=l.filter(d=>d.type==="ball"||d.type==="light");return{boxes:f,spheres:h}},[]),s=O.useMemo(()=>new xn,[]),o=l=>l<.5?4*l*l*l:1-Math.pow(-2*l+2,3)/2;return ta(l=>{const f=l.clock.elapsedTime,h=t.current,d=(g,y)=>{const S=Math.sin(y),b=Math.cos(y),v=g.x,x=g.z;g.x=b*v+S*x,g.z=-S*v+b*x},p=g=>{const y=(g+10)/22,S=fs.clamp(y,0,1);let b=h*2.5-(1.5-S*1.5);return b=fs.clamp(b,0,1),o(b)};n.current&&(r.forEach((g,y)=>{const{chaosPos:S,targetPos:b}=g,v=p(b.y),x=(1-v)*10;s.position.lerpVectors(S,b,v),d(s.position,x),s.rotation.x=f*.5+y,s.rotation.y=f*.3+y,s.scale.setScalar(1.5),s.updateMatrix(),n.current.setMatrixAt(y,s.matrix)}),n.current.instanceMatrix.needsUpdate=!0),i.current&&(a.forEach((g,y)=>{const{chaosPos:S,targetPos:b}=g,v=p(b.y),x=(1-v)*10;s.position.lerpVectors(S,b,v),d(s.position,x),s.position.y+=Math.sin(f*2+y)*.05*v;let E=.9;g.type==="light"&&(E=.5),s.scale.setScalar(E),s.updateMatrix(),i.current.setMatrixAt(y,s.matrix)}),i.current.instanceMatrix.needsUpdate=!0)}),O.useMemo(()=>{!n.current&&r.length>0},[]),J.useLayoutEffect(()=>{n.current&&(r.forEach((l,f)=>{n.current.setColorAt(f,l.color)}),n.current.instanceColor.needsUpdate=!0),i.current&&(a.forEach((l,f)=>{i.current.setColorAt(f,l.color)}),i.current.instanceColor.needsUpdate=!0)},[r,a]),$.jsxs("group",{children:[$.jsxs("instancedMesh",{ref:n,args:[void 0,void 0,r.length],children:[$.jsx("boxGeometry",{args:[.5,.5,.5]}),$.jsx("meshStandardMaterial",{roughness:.3,metalness:.8})]}),$.jsxs("instancedMesh",{ref:i,args:[void 0,void 0,a.length],children:[$.jsx("sphereGeometry",{args:[.5,16,16]}),$.jsx("meshStandardMaterial",{roughness:.2,metalness:.9,emissive:"#333",emissiveIntensity:.2})]})]})}function J0e({progressRef:t,formed:e}){const n=O.useRef(null),i=O.useMemo(()=>{const o=new Tu,l=5,f=1.5,h=.6;for(let p=0;p<l*2;p++){const g=p*Math.PI/l+Math.PI/2,y=p%2===0?f:h,S=Math.cos(g)*y,b=Math.sin(g)*y;p===0?o.moveTo(S,b):o.lineTo(S,b)}o.closePath();const d={depth:.4,bevelEnabled:!0,bevelThickness:.1,bevelSize:.1,bevelSegments:2};return new Vv(o,d)},[]);O.useMemo(()=>i.center(),[i]);const r=O.useMemo(()=>new k(0,Au/2,0),[]),a=O.useMemo(()=>new k(0,30,0),[]),s=o=>o<.5?4*o*o*o:1-Math.pow(-2*o+2,3)/2;return ta(o=>{if(!n.current)return;const l=o.clock.elapsedTime;let f=t.current*2.5;f=fs.clamp(f,0,1);const h=s(f);n.current.position.lerpVectors(a,r,h),n.current.rotation.y=l*.5,n.current.rotation.z=Math.sin(l*2)*.1;const d=1+Math.sin(l*3)*.1,p=h*1+(1-h)*.1;n.current.scale.setScalar(d*p)}),$.jsx("mesh",{ref:n,geometry:i,children:$.jsx("meshStandardMaterial",{color:"#FFD700",emissive:"#FFD700",emissiveIntensity:2,roughness:.1,metalness:1})})}const nP=12;function ege({progressRef:t,formed:e}){const n=O.useMemo(()=>Array.from({length:nP},(l,f)=>`/photos/${f+1}.jpg`),[]),i=Th(G7,n),r=O.useMemo(()=>q0e(nP),[]),a=l=>l<.5?4*l*l*l:1-Math.pow(-2*l+2,3)/2,[s,o]=O.useState(null);return $.jsxs("group",{children:[r.map((l,f)=>$.jsx(tge,{data:l,texture:i[f],progressRef:t,easeInOutCubic:a,isActive:s===f,onSelect:()=>o(s===f?null:f)},f)),s!==null&&$.jsx(_re,{fullscreen:!0,style:{pointerEvents:"none"},children:$.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center pointer-events-auto",onClick:()=>o(null)})})]})}function tge({data:t,texture:e,progressRef:n,easeInOutCubic:i,isActive:r,onSelect:a}){const s=O.useRef(null);O.useRef(new k);const o=O.useRef(new k),l=O.useRef(0),f=(h,d)=>{const p=Math.sin(d),g=Math.cos(d),y=h.x,S=h.z;h.x=g*y+p*S,h.z=-p*y+g*S};return ta((h,d)=>{if(!s.current)return;l.current=fs.lerp(l.current,r?1:0,d*5);const p=l.current,g=h.clock.elapsedTime,y=n.current,{chaosPos:S,targetPos:b}=t,v=(b.y+10)/22,x=fs.clamp(v,0,1);let E=y*2.5-(1.5-x*1.5);E=fs.clamp(E,0,1);const T=i(E),w=new k().lerpVectors(S,b,T),R=(1-T)*10;if(f(w,R),w.y+=Math.sin(g*1.5+t.id)*.2,!r){const z=Math.sin(g*2+t.id)*.08*T;s.current.rotation.z+=z}const N=h.camera.position.clone(),U=new k(0,0,-1).applyQuaternion(h.camera.quaternion),A=N.clone().add(U.multiplyScalar(10)),C=i(p);s.current.position.lerpVectors(w,A,C);const I=new k(0,s.current.position.y,0),X=h.camera.position.clone();o.current.lerpVectors(I,X,C),s.current.lookAt(o.current),s.current.up.set(0,1,0),s.current.rotateY(Math.PI*(1-C));const Z=fs.lerp(1,3,C);s.current.scale.setScalar(Z),r&&(s.current.rotation.z=g*.5,s.current.rotation.y+=Math.sin(g*.5)*.1)}),$.jsxs("group",{ref:s,onClick:h=>{h.stopPropagation(),a()},children:[$.jsxs("group",{position:[0,2.3,0],children:[$.jsxs("mesh",{position:[0,.8,0],rotation:[0,0,0],children:[$.jsx("cylinderGeometry",{args:[.01,.01,1.6]}),$.jsx("meshBasicMaterial",{color:"#FFD700",transparent:!0,opacity:.6})]}),$.jsxs("mesh",{position:[0,1.6,0],children:[$.jsx("sphereGeometry",{args:[.1,8,8]}),$.jsx("meshStandardMaterial",{color:"#D4AF37",metalness:1,roughness:.1})]})]}),$.jsxs("mesh",{position:[0,2.3,0],children:[$.jsx("torusGeometry",{args:[.15,.03,8,16]}),$.jsx("meshStandardMaterial",{color:"#D4AF37",metalness:1,roughness:.2})]}),$.jsxs("mesh",{position:[0,0,0],children:[$.jsx("boxGeometry",{args:[3.6,4.6,.1]}),$.jsx("meshStandardMaterial",{color:"#D4AF37",metalness:.9,roughness:.1})]}),$.jsxs("mesh",{position:[0,0,.06],children:[$.jsx("boxGeometry",{args:[3.2,4.2,.02]}),$.jsx("meshStandardMaterial",{color:"#FFFFFF",roughness:.8})]}),$.jsxs("mesh",{position:[0,0,.08],children:[$.jsx("planeGeometry",{args:[3,4]}),$.jsx("meshBasicMaterial",{map:e,side:zr})]})]})}const BM=400,nge=8,ige=16,rge=2;function age({progressRef:t,formed:e}){const n=O.useRef(null),i=O.useMemo(()=>new xn,[]),r=O.useMemo(()=>Array.from({length:BM},(a,s)=>{const o=s/(BM-1),l=o*nge*Math.PI*2,f=fs.lerp(ige,rge,o),h=fs.lerp(-20,15,o),d=Math.cos(l)*f,p=Math.sin(l)*f,g=new k(d,h,p);return{chaosPos:g.clone().multiplyScalar(3).add(new k((Math.random()-.5)*20,(Math.random()-.5)*20,(Math.random()-.5)*20)),targetPos:g,t:o}}),[]);return ta(a=>{if(!n.current)return;const s=a.clock.elapsedTime,o=t.current,l=(h,d)=>{const p=Math.sin(d),g=Math.cos(d),y=h.x,S=h.z;h.x=g*y+p*S,h.z=-p*y+g*S},f=Math.sin(s*Math.PI)*.15+1;r.forEach((h,d)=>{const{chaosPos:p,targetPos:g,t:y}=h;let S=o*2.5-(1.5-y*1.5);S=fs.clamp(S,0,1);const b=S<.5?4*S*S*S:1-Math.pow(-2*S+2,3)/2,v=(1-b)*15;i.position.lerpVectors(p,g,b),l(i.position,v);const E=(.5+(Math.sin(s*3+d*.2)*.5+.5)*.5)*f*b;i.scale.setScalar(E),i.updateMatrix(),n.current.setMatrixAt(d,i.matrix)}),n.current.instanceMatrix.needsUpdate=!0}),$.jsxs("instancedMesh",{ref:n,args:[void 0,void 0,BM],children:[$.jsx("sphereGeometry",{args:[.15,8,8]}),$.jsx("meshStandardMaterial",{color:"#FFFFFF",emissive:"#FFFFFF",emissiveIntensity:2,toneMapped:!1})]})}function sge({formed:t,onToggle:e,gestureRotation:n=0}){const i=O.useRef(null),r=O.useRef(0),a=O.useRef(!1),s=O.useRef(0);j0e({"Toggle Tree":QL(()=>e()),"Reset Rotation":QL(()=>{i.current&&(i.current.rotation.y=0),r.current=0})});const o=XF(({delta:[l],down:f})=>{a.current=f,r.current+=l*.005});return ta((l,f)=>{const h=t?1:0;s.current=fs.lerp(s.current,h,f*.8),a.current||(n!==0?r.current=n*.05:r.current*=.96),Math.abs(r.current)<1e-4&&(r.current=0),i.current&&(i.current.rotation.y+=r.current,a.current||(t&&s.current<.95?i.current.rotation.y+=.02*(1-s.current):!t&&s.current>.05?i.current.rotation.y-=.02*s.current:Math.abs(r.current)<.001&&(i.current.rotation.y+=.003)))}),$.jsxs("group",{ref:i,...o(),rotation:[0,0,0],children:[$.jsx(K0e,{progressRef:s,formed:t}),$.jsx(Q0e,{progressRef:s,formed:t}),$.jsx(age,{progressRef:s,formed:t}),$.jsx(ege,{progressRef:s,formed:t}),$.jsx(J0e,{progressRef:s,formed:t})]})}const Bf=3e3,iP=80,rP=80;function oge(){const t=O.useRef(null),{positions:e,randoms:n,sizes:i}=O.useMemo(()=>{const a=new Float32Array(Bf*3),s=new Float32Array(Bf*3),o=new Float32Array(Bf);for(let l=0;l<Bf;l++)a[l*3]=(Math.random()-.5)*iP,a[l*3+1]=(Math.random()-.5)*rP+20,a[l*3+2]=(Math.random()-.5)*iP,s[l*3]=Math.random(),s[l*3+1]=Math.random()*.5+.5,s[l*3+2]=Math.random()*Math.PI*2,o[l]=Math.random()*2+1;return{positions:a,randoms:s,sizes:o}},[]),r=O.useMemo(()=>new vi({uniforms:{uTime:{value:0},uColor:{value:new lt("#FFD700")},uHeight:{value:rP}},vertexShader:`
      uniform float uTime;
      uniform float uHeight;
      attribute vec3 aRandom; // x: drift, y: speed, z: offset
      attribute float aSize;
      
      varying float vAlpha;
      
      void main() {
        vec3 pos = position;
        
        // Fall animation
        float fallSpeed = aRandom.y * 5.0 + 2.0;
        float yOffset = mod(uTime * fallSpeed, uHeight);
        pos.y -= yOffset;
        
        // Wrap around
        if (pos.y < -uHeight/2.0) {
            pos.y += uHeight;
        }
        
        // Horizontal drift
        float driftFreq = aRandom.x * 2.0 + 1.0;
        float driftAmp = aRandom.x * 2.0 + 0.5;
        pos.x += sin(uTime * driftFreq + aRandom.z) * driftAmp;
        pos.z += cos(uTime * driftFreq * 0.8 + aRandom.z) * driftAmp;
        
        vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
        gl_Position = projectionMatrix * mvPosition;
        
        // Size attenuation
        gl_PointSize = aSize * (300.0 / -mvPosition.z);
        
        // Soft edges based on depth? Or just random alpha
        vAlpha = 0.6 + 0.4 * sin(uTime + aRandom.z);
      }
    `,fragmentShader:`
      uniform vec3 uColor;
      varying float vAlpha;
      
      void main() {
        // Soft circle
        vec2 xy = gl_PointCoord.xy - vec2(0.5);
        float r = length(xy);
        if (r > 0.5) discard;
        
        // Soft edge
        float alpha = (0.5 - r) * 2.0;
        alpha = pow(alpha, 1.5); // Softer falloff
        
        gl_FragColor = vec4(uColor, alpha * vAlpha * 0.8);
      }
    `,transparent:!0,depthWrite:!1,blending:jg}),[]);return ta(a=>{t.current&&(r.uniforms.uTime.value=a.clock.elapsedTime)}),$.jsx("points",{ref:t,material:r,children:$.jsxs("bufferGeometry",{children:[$.jsx("bufferAttribute",{attach:"attributes-position",count:Bf,array:e,itemSize:3,args:[e,3]}),$.jsx("bufferAttribute",{attach:"attributes-aRandom",count:Bf,array:n,itemSize:3,args:[n,3]}),$.jsx("bufferAttribute",{attach:"attributes-aSize",count:Bf,array:i,itemSize:1,args:[i,1]})]})})}var rm=typeof self<"u"?self:{};function Ff(){throw Error("Invalid UTF8")}function aP(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}let a_,FM;const lge=typeof TextDecoder<"u";let cge;const uge=typeof TextEncoder<"u";function mV(t){if(uge)t=(cge||(cge=new TextEncoder)).encode(t);else{let n=0;const i=new Uint8Array(3*t.length);for(let r=0;r<t.length;r++){var e=t.charCodeAt(r);if(e<128)i[n++]=e;else{if(e<2048)i[n++]=e>>6|192;else{if(e>=55296&&e<=57343){if(e<=56319&&r<t.length){const a=t.charCodeAt(++r);if(a>=56320&&a<=57343){e=1024*(e-55296)+a-56320+65536,i[n++]=e>>18|240,i[n++]=e>>12&63|128,i[n++]=e>>6&63|128,i[n++]=63&e|128;continue}r--}e=65533}i[n++]=e>>12|224,i[n++]=e>>6&63|128}i[n++]=63&e|128}}t=n===i.length?i:i.subarray(0,n)}return t}var $C,Tb;e:{for(var sP=["CLOSURE_FLAGS"],HM=rm,VM=0;VM<sP.length;VM++)if((HM=HM[sP[VM]])==null){Tb=null;break e}Tb=HM}var mv,oP=Tb&&Tb[610401301];$C=oP!=null&&oP;const lP=rm.navigator;function ZA(t){return!!$C&&!!mv&&mv.brands.some(({brand:e})=>e&&e.indexOf(t)!=-1)}function Qs(t){var e;return(e=rm.navigator)&&(e=e.userAgent)||(e=""),e.indexOf(t)!=-1}function au(){return!!$C&&!!mv&&mv.brands.length>0}function GM(){return au()?ZA("Chromium"):(Qs("Chrome")||Qs("CriOS"))&&!(!au()&&Qs("Edge"))||Qs("Silk")}function Y2(t){return Y2[" "](t),t}mv=lP&&lP.userAgentData||null,Y2[" "]=function(){};var fge=!au()&&(Qs("Trident")||Qs("MSIE"));!Qs("Android")||GM(),GM(),Qs("Safari")&&(GM()||!au()&&Qs("Coast")||!au()&&Qs("Opera")||!au()&&Qs("Edge")||(au()?ZA("Microsoft Edge"):Qs("Edg/"))||au()&&ZA("Opera"));var gV={},$0=null;function hge(t){const e=t.length;let n=3*e/4;n%3?n=Math.floor(n):"=.".indexOf(t[e-1])!=-1&&(n="=.".indexOf(t[e-2])!=-1?n-2:n-1);const i=new Uint8Array(n);let r=0;return function(a,s){function o(f){for(;l<a.length;){const h=a.charAt(l++),d=$0[h];if(d!=null)return d;if(!/^[\s\xa0]*$/.test(h))throw Error("Unknown base64 encoding at char: "+h)}return f}vV();let l=0;for(;;){const f=o(-1),h=o(0),d=o(64),p=o(64);if(p===64&&f===-1)break;s(f<<2|h>>4),d!=64&&(s(h<<4&240|d>>2),p!=64&&s(d<<6&192|p))}}(t,function(a){i[r++]=a}),r!==n?i.subarray(0,r):i}function vV(){if(!$0){$0={};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"];for(let n=0;n<5;n++){const i=t.concat(e[n].split(""));gV[n]=i;for(let r=0;r<i.length;r++){const a=i[r];$0[a]===void 0&&($0[a]=r)}}}}var yV=typeof Uint8Array<"u",_V=!fge&&typeof btoa=="function";function cP(t){if(!_V){var e;e===void 0&&(e=0),vV(),e=gV[e];var n=Array(Math.floor(t.length/3)),i=e[64]||"";let l=0,f=0;for(;l<t.length-2;l+=3){var r=t[l],a=t[l+1],s=t[l+2],o=e[r>>2];r=e[(3&r)<<4|a>>4],a=e[(15&a)<<2|s>>6],s=e[63&s],n[f++]=o+r+a+s}switch(o=0,s=i,t.length-l){case 2:s=e[(15&(o=t[l+1]))<<2]||i;case 1:t=t[l],n[f]=e[t>>2]+e[(3&t)<<4|o>>4]+s+i}return n.join("")}for(e="",n=0,i=t.length-10240;n<i;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}const uP=/[-_.]/g,dge={"-":"+",_:"/",".":"="};function pge(t){return dge[t]||""}function xV(t){if(!_V)return hge(t);uP.test(t)&&(t=t.replace(uP,pge)),t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function Rh(t){return yV&&t!=null&&t instanceof Uint8Array}var am={};function Dh(){return mge||(mge=new lc(null,am))}function KC(t){bV(am);var e=t.g;return(e=e==null||Rh(e)?e:typeof e=="string"?xV(e):null)==null?e:t.g=e}var lc=class{h(){return new Uint8Array(KC(this)||0)}constructor(t,e){if(bV(e),this.g=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}};let mge,gge;function bV(t){if(t!==am)throw Error("illegal external caller")}function SV(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function $A(t){return SV(t=Error(t),"warning"),t}function QC(t){if(t!=null){var e=gge??(gge={}),n=e[t]||0;n>=5||(e[t]=n+1,SV(t=Error(),"incident"),function(i){rm.setTimeout(()=>{throw i},0)}(t))}}var q2=typeof Symbol=="function"&&typeof Symbol()=="symbol";function Um(t,e,n=!1){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?n&&Symbol.for&&t?Symbol.for(t):t!=null?Symbol(t):Symbol():e}var vge=Um("jas",void 0,!0),fP=Um(void 0,"0di"),B0=Um(void 0,"1oa"),sm=Um(void 0,Symbol()),yge=Um(void 0,"0actk"),EV=Um(void 0,"8utk");const It=q2?vge:"Ea",MV={Ea:{value:0,configurable:!0,writable:!0,enumerable:!1}},TV=Object.defineProperties;function Z2(t,e){q2||It in t||TV(t,MV),t[It]|=e}function sr(t,e){q2||It in t||TV(t,MV),t[It]=e}function Lm(t){return Z2(t,34),t}function _ge(t,e){sr(e,-15615&(0|t))}function KA(t,e){sr(e,-15581&(34|t))}function $2(){return typeof BigInt=="function"}function za(t){return Array.prototype.slice.call(t)}var JC,r1={};function K2(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}function eR(t,e){if(t!=null){if(typeof t=="string")t=t?new lc(t,am):Dh();else if(t.constructor!==lc)if(Rh(t))t=t.length?new lc(new Uint8Array(t),am):Dh();else{if(!e)throw Error();t=void 0}}return t}const hP=[];function tf(t){if(2&t)throw Error()}sr(hP,55),JC=Object.freeze(hP);class dP{constructor(e,n,i){this.g=e,this.h=n,this.l=i}next(){const e=this.g.next();return e.done||(e.value=this.h.call(this.l,e.value)),e}[Symbol.iterator](){return this}}function tR(t){return sm?t[sm]:void 0}var xge=Object.freeze({});function Q2(t){return t.Na=!0,t}var bge=Q2(t=>typeof t=="number"),pP=Q2(t=>typeof t=="string"),Sge=Q2(t=>typeof t=="boolean"),J2=typeof rm.BigInt=="function"&&typeof rm.BigInt(0)=="bigint";function wu(t){var e=t;if(pP(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(bge(e)&&!Number.isSafeInteger(e))throw Error(String(e));return J2?BigInt(t):t=Sge(t)?t?"1":"0":pP(t)?t.trim()||"0":String(t)}var QA=Q2(t=>J2?t>=Mge&&t<=Age:t[0]==="-"?mP(t,Ege):mP(t,Tge));const Ege=Number.MIN_SAFE_INTEGER.toString(),Mge=J2?BigInt(Number.MIN_SAFE_INTEGER):void 0,Tge=Number.MAX_SAFE_INTEGER.toString(),Age=J2?BigInt(Number.MAX_SAFE_INTEGER):void 0;function mP(t,e){if(t.length>e.length)return!1;if(t.length<e.length||t===e)return!0;for(let n=0;n<t.length;n++){const i=t[n],r=e[n];if(i>r)return!1;if(i<r)return!0}}const wge=typeof Uint8Array.prototype.slice=="function";let AV,Kn=0,Bi=0;function gP(t){const e=t>>>0;Kn=e,Bi=(t-e)/4294967296>>>0}function Oh(t){if(t<0){gP(-t);const[e,n]=aR(Kn,Bi);Kn=e>>>0,Bi=n>>>0}else gP(t)}function nR(t){const e=AV||(AV=new DataView(new ArrayBuffer(8)));e.setFloat32(0,+t,!0),Bi=0,Kn=e.getUint32(0,!0)}function iR(t,e){const n=4294967296*e+(t>>>0);return Number.isSafeInteger(n)?n:gv(t,e)}function rR(t,e){const n=2147483648&e;return n&&(e=~e>>>0,(t=1+~t>>>0)==0&&(e=e+1>>>0)),typeof(t=iR(t,e))=="number"?n?-t:t:n?"-"+t:t}function gv(t,e){if(t>>>=0,(e>>>=0)<=2097151)var n=""+(4294967296*e+t);else $2()?n=""+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(n=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,t>=1e7&&(n+=t/1e7>>>0,t%=1e7),n>=1e7&&(e+=n/1e7>>>0,n%=1e7),n=e+vP(n)+vP(t));return n}function vP(t){return t=String(t),"0000000".slice(t.length)+t}function wV(){var t=Kn,e=Bi;if(2147483648&e)if($2())t=""+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[n,i]=aR(t,e);t="-"+gv(n,i)}else t=gv(t,e);return t}function eS(t){if(t.length<16)Oh(Number(t));else if($2())t=BigInt(t),Kn=Number(t&BigInt(4294967295))>>>0,Bi=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+(t[0]==="-");Bi=Kn=0;const n=t.length;for(let i=e,r=(n-e)%6+e;r<=n;i=r,r+=6){const a=Number(t.slice(i,r));Bi*=1e6,Kn=1e6*Kn+a,Kn>=4294967296&&(Bi+=Math.trunc(Kn/4294967296),Bi>>>=0,Kn>>>=0)}if(e){const[i,r]=aR(Kn,Bi);Kn=i,Bi=r}}}function aR(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}const vv=typeof BigInt=="function"?BigInt.asIntN:void 0,Cge=typeof BigInt=="function"?BigInt.asUintN:void 0,Cu=Number.isSafeInteger,tS=Number.isFinite,om=Math.trunc,Rge=wu(0);function nf(t){return t==null||typeof t=="number"?t:t==="NaN"||t==="Infinity"||t==="-Infinity"?Number(t):void 0}function CV(t){return t==null||typeof t=="boolean"?t:typeof t=="number"?!!t:void 0}const Dge=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function yv(t){switch(typeof t){case"bigint":return!0;case"number":return tS(t);case"string":return Dge.test(t);default:return!1}}function Pm(t){if(t==null)return t;if(typeof t=="string"&&t)t=+t;else if(typeof t!="number")return;return tS(t)?0|t:void 0}function RV(t){if(t==null)return t;if(typeof t=="string"&&t)t=+t;else if(typeof t!="number")return;return tS(t)?t>>>0:void 0}function yP(t){if(t[0]==="-")return!1;const e=t.length;return e<20||e===20&&Number(t.substring(0,6))<184467}function DV(t){const e=t.length;return t[0]==="-"?e<20||e===20&&Number(t.substring(0,7))>-922337:e<19||e===19&&Number(t.substring(0,6))<922337}function OV(t){return DV(t)?t:(eS(t),wV())}function sR(t){return t=om(t),Cu(t)||(Oh(t),t=rR(Kn,Bi)),t}function NV(t){var e=om(Number(t));return Cu(e)?String(e):((e=t.indexOf("."))!==-1&&(t=t.substring(0,e)),OV(t))}function _P(t){var e=om(Number(t));return Cu(e)?wu(e):((e=t.indexOf("."))!==-1&&(t=t.substring(0,e)),$2()?wu(vv(64,BigInt(t))):wu(OV(t)))}function xP(t){if(Cu(t))t=wu(sR(t));else{if(t=om(t),Cu(t))t=String(t);else{const e=String(t);DV(e)?t=e:(Oh(t),t=wV())}t=wu(t)}return t}function JA(t){return t==null?t:typeof t=="bigint"?(QA(t)?t=Number(t):(t=vv(64,t),t=QA(t)?Number(t):String(t)),t):yv(t)?typeof t=="number"?sR(t):NV(t):void 0}function Oge(t){if(t==null)return t;var e=typeof t;if(e==="bigint")return String(Cge(64,t));if(yv(t)){if(e==="string")return e=om(Number(t)),Cu(e)&&e>=0?t=String(e):((e=t.indexOf("."))!==-1&&(t=t.substring(0,e)),yP(t)||(eS(t),t=gv(Kn,Bi))),t;if(e==="number")return(t=om(t))>=0&&Cu(t)?t:function(n){if(n<0){Oh(n);var i=gv(Kn,Bi);return n=Number(i),Cu(n)?n:i}return yP(i=String(n))?i:(Oh(n),iR(Kn,Bi))}(t)}}function UV(t){if(typeof t!="string")throw Error();return t}function Im(t){if(t!=null&&typeof t!="string")throw Error();return t}function lm(t){return t==null||typeof t=="string"?t:void 0}function oR(t,e,n,i){if(t!=null&&typeof t=="object"&&t.W===r1)return t;if(!Array.isArray(t))return n?2&i?((t=e[fP])||(Lm((t=new e).u),t=e[fP]=t),e=t):e=new e:e=void 0,e;let r=n=0|t[It];return r===0&&(r|=32&i),r|=2&i,r!==n&&sr(t,r),new e(t)}function Nge(t,e,n){if(e)e:{if(!yv(e=t))throw $A("int64");switch(typeof e){case"string":e=_P(e);break e;case"bigint":e=wu(vv(64,e));break e;default:e=xP(e)}}else t=typeof(e=t),e=e==null?e:t==="bigint"?wu(vv(64,e)):yv(e)?t==="string"?_P(e):xP(e):void 0;return(t=e)==null?n?Rge:void 0:t}function Uge(t){return t}const Lge={};let Pge=function(){try{return Y2(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class kM{constructor(){this.g=new Map}get(e){return this.g.get(e)}set(e,n){return this.g.set(e,n),this.size=this.g.size,this}delete(e){return e=this.g.delete(e),this.size=this.g.size,e}clear(){this.g.clear(),this.size=this.g.size}has(e){return this.g.has(e)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(e,n){return this.g.forEach(e,n)}[Symbol.iterator](){return this.entries()}}const Ige=Pge?(Object.setPrototypeOf(kM.prototype,Map.prototype),Object.defineProperties(kM.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),kM):class extends Map{constructor(){super()}};function bP(t){return t}function jM(t){if(2&t.M)throw Error("Cannot mutate an immutable Map")}var dl=class extends Ige{constructor(t,e,n=bP,i=bP){super();let r=0|t[It];r|=64,sr(t,r),this.M=r,this.I=e,this.S=n,this.X=this.I?zge:i;for(let a=0;a<t.length;a++){const s=t[a],o=n(s[0],!1,!0);let l=s[1];e?l===void 0&&(l=null):l=i(s[1],!1,!0,void 0,void 0,r),super.set(o,l)}}La(){var t=Gge;if(this.size!==0)return Array.from(super.entries(),e=>(e[0]=t(e[0]),e[1]=t(e[1]),e))}da(t=Bge){const e=[],n=super.entries();for(var i;!(i=n.next()).done;)(i=i.value)[0]=t(i[0]),i[1]=t(i[1]),e.push(i);return e}clear(){jM(this),super.clear()}delete(t){return jM(this),super.delete(this.S(t,!0,!1))}entries(){if(this.I){var t=super.keys();t=new dP(t,Fge,this)}else t=super.entries();return t}values(){if(this.I){var t=super.keys();t=new dP(t,dl.prototype.get,this)}else t=super.values();return t}forEach(t,e){this.I?super.forEach((n,i,r)=>{t.call(e,r.get(i),i,r)}):super.forEach(t,e)}set(t,e){return jM(this),(t=this.S(t,!0,!1))==null?this:e==null?(super.delete(t),this):super.set(t,this.X(e,!0,!0,this.I,!1,this.M))}Ja(t){const e=this.S(t[0],!1,!0);t=t[1],t=this.I?t===void 0?null:t:this.X(t,!1,!0,void 0,!1,this.M),super.set(e,t)}has(t){return super.has(this.S(t,!1,!1))}get(t){t=this.S(t,!1,!1);const e=super.get(t);if(e!==void 0){var n=this.I;return n?((n=this.X(e,!1,!0,n,this.pa,this.M))!==e&&super.set(t,n),n):e}}[Symbol.iterator](){return this.entries()}};function zge(t,e,n,i,r,a){return t=oR(t,i,n,a),r&&(t=rS(t)),t}function Bge(t){return t}function Fge(t){return[t,this.get(t)]}let Hge,LV,PV,Vge;function SP(){return Hge||(Hge=new dl(Lm([]),void 0,void 0,void 0,Lge))}function ew(t,e,n,i,r){if(t!=null){if(Array.isArray(t)){const a=0|t[It];return t.length===0&&1&a?void 0:r&&2&a?t:nS(t,e,n,i!==void 0,r)}return e(t,i)}}function nS(t,e,n,i,r){const a=i||n?0|t[It]:0,s=i?!!(32&a):void 0;let o=0;const l=(i=za(t)).length;for(let y=0;y<l;y++){var f=i[y];if(y===l-1&&K2(f)){var h=e,d=n,p=s,g=r;let S;for(let b in f){const v=ew(f[b],h,d,p,g);v!=null&&((S??(S={}))[b]=v)}f=S}else f=ew(i[y],e,n,s,r);i[y]=f,f!=null&&(o=y+1)}return o<l&&(i.length=o),n&&((t=tR(t))&&(i[sm]=za(t)),n(a,i)),i}function Gge(t){return ew(t,lR,void 0,void 0,!1)}function lR(t){switch(typeof t){case"number":return Number.isFinite(t)?t:""+t;case"bigint":return QA(t)?Number(t):""+t;case"boolean":return t?1:0;case"object":if(Rh(t))return Rh(t)&&QC(EV),cP(t);if(t.W===r1)return IV(t);if(t instanceof lc){const e=t.g;return e==null?"":typeof e=="string"?e:t.g=cP(e)}return t instanceof dl?t.La():void 0}return t}function IV(t){var e=t.u;t=nS(e,lR,void 0,void 0,!1);var n=0|e[It];if((e=t.length)&&!(512&n)){var i=t[e-1],r=!1;K2(i)?(e--,r=!0):i=void 0;var a=e-(n=512&n?0:-1),s=(LV??Uge)(a,n,t,i);if(i&&(t[e]=void 0),a<s&&i){for(var o in a=!0,i){const l=+o;l<=s?(t[r=l+n]=i[o],e=Math.max(r+1,e),r=!1,delete i[o]):a=!1}a&&(i=void 0)}for(a=e-1;e>0;a=e-1)if((o=t[a])==null)e--,r=!0;else{if(!((a-=n)>=s))break;(i??(i={}))[a]=o,e--,r=!0}r&&(t.length=e),i&&t.push(i)}return t}function Ru(t,e,n){return t=zV(t,e[0],e[1],n?1:2),e!==PV&&n&&Z2(t,8192),t}function zV(t,e,n,i){if(t==null){var r=96;n?(t=[n],r|=512):t=[],e&&(r=-16760833&r|(1023&e)<<14)}else{if(!Array.isArray(t))throw Error("narr");if(8192&(r=0|t[It])||!(64&r)||2&r||QC(yge),1024&r)throw Error("farr");if(64&r)return t;if(i===1||i===2||(r|=64),n&&(r|=512,n!==t[0]))throw Error("mid");e:{var a=(n=t).length;if(a){var s=a-1;if(K2(i=n[s])){if((s-=e=512&(r|=256)?0:-1)>=1024)throw Error("pvtlmt");for(var o in i)(a=+o)<s&&(n[a+e]=i[o],delete i[o]);r=-16760833&r|(1023&s)<<14;break e}}if(e){if((o=Math.max(e,a-(512&r?0:-1)))>1024)throw Error("spvt");r=-16760833&r|(1023&o)<<14}}}return sr(t,r),t}function tw(t,e,n=KA){if(t!=null){if(yV&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var i=0|t[It];return 2&i?t:(e&&(e=i===0||!!(32&i)&&!(64&i||!(16&i))),e?(sr(t,34|i),4&i&&Object.freeze(t),t):nS(t,tw,4&i?KA:n,!0,!0))}return t.W===r1?t=2&(i=0|(n=t.u)[It])?t:new t.constructor(iS(n,i,!0)):t instanceof dl&&!(2&t.M)&&(n=Lm(t.da(tw)),t=new dl(n,t.I,t.S,t.X)),t}}function iS(t,e,n){const i=n||2&e?KA:_ge,r=!!(32&e);return t=function(a,s,o){const l=za(a);var f=l.length;const h=256&s?l[f-1]:void 0;for(f+=h?-1:0,s=512&s?1:0;s<f;s++)l[s]=o(l[s]);if(h){s=l[s]={};for(const d in h)s[d]=o(h[d])}return(a=tR(a))&&(l[sm]=za(a)),l}(t,e,a=>tw(a,r,i)),Z2(t,32|(n?2:0)),t}function rS(t){const e=t.u,n=0|e[It];return 2&n?new t.constructor(iS(e,n,!1)):t}function cm(t,e){return Mc(t=t.u,0|t[It],e)}function Mc(t,e,n){if(n===-1)return null;const i=n+(512&e?0:-1),r=t.length-1;return i>=r&&256&e?t[r][n]:i<=r?t[i]:void 0}function ii(t,e,n){const i=t.u;let r=0|i[It];return tf(r),Di(i,r,e,n),t}function Di(t,e,n,i){const r=512&e?0:-1,a=n+r;var s=t.length-1;return a>=s&&256&e?(t[s][n]=i,e):a<=s?(t[a]=i,e):(i!==void 0&&(n>=(s=e>>14&1023||536870912)?i!=null&&(t[s+r]={[n]:i},sr(t,e|=256)):t[a]=i),e)}function U_(t,e){let n=0|(t=t.u)[It];const i=Mc(t,n,e),r=nf(i);return r!=null&&r!==i&&Di(t,n,e,r),r}function BV(t){let e=0|(t=t.u)[It];const n=Mc(t,e,1),i=eR(n,!0);return i!=null&&i!==n&&Di(t,e,1,i),i}function nh(){return xge===void 0?2:4}function ih(t,e,n,i,r){const a=t.u,s=2&(t=0|a[It])?1:i;r=!!r;let o=0|(i=cR(a,t,e))[It];if(!(4&o)){4&o&&(i=za(i),o=cc(o,t),t=Di(a,t,e,i));let l=0,f=0;for(;l<i.length;l++){const h=n(i[l]);h!=null&&(i[f++]=h)}f<l&&(i.length=f),o=uR(o,t),n=-2049&(20|o),o=n&=-4097,sr(i,o),2&o&&Object.freeze(i)}return s===1||s===4&&32&o?nc(o)||(r=o,o|=2,o!==r&&sr(i,o),Object.freeze(i)):(s===2&&nc(o)&&(i=za(i),o=cc(o,t),o=Du(o,t,r),sr(i,o),t=Di(a,t,e,i)),nc(o)||(e=o,o=Du(o,t,r),o!==e&&sr(i,o))),i}function cR(t,e,n){return t=Mc(t,e,n),Array.isArray(t)?t:JC}function uR(t,e){return t===0&&(t=cc(t,e)),1|t}function nc(t){return!!(2&t)&&!!(4&t)||!!(1024&t)}function FV(t){t=za(t);for(let e=0;e<t.length;e++){const n=t[e]=za(t[e]);Array.isArray(n[1])&&(n[1]=Lm(n[1]))}return t}function nw(t,e,n,i){let r=0|(t=t.u)[It];tf(r),Di(t,r,e,(i==="0"?Number(n)===0:n===i)?void 0:n)}function zm(t,e,n,i){tf(e);let r=cR(t,e,n);const a=r!==JC;if(64&e||!(8192&e)||!a){const s=a?0|r[It]:0;let o=s;(!a||2&o||nc(o)||4&o&&!(32&o))&&(r=za(r),o=cc(o,e),e=Di(t,e,n,r)),o=-13&uR(o,e),o=Du(i?-17&o:16|o,e,!0),o!==s&&sr(r,o)}return r}function XM(t,e){var n=wG;return hR(fR(t=t.u),t,0|t[It],n)===e?e:-1}function fR(t){if(q2)return t[B0]??(t[B0]=new Map);if(B0 in t)return t[B0];const e=new Map;return Object.defineProperty(t,B0,{value:e}),e}function HV(t,e,n,i){const r=fR(t),a=hR(r,t,e,n);return a!==i&&(a&&(e=Di(t,e,a)),r.set(n,i)),e}function hR(t,e,n,i){let r=t.get(i);if(r!=null)return r;r=0;for(let a=0;a<i.length;a++){const s=i[a];Mc(e,n,s)!=null&&(r!==0&&(n=Di(e,n,r)),r=s)}return t.set(i,r),r}function dR(t,e,n){let i=0|t[It];const r=Mc(t,i,n);let a;if(r!=null&&r.W===r1)return(e=rS(r))!==r&&Di(t,i,n,e),e.u;if(Array.isArray(r)){const s=0|r[It];a=2&s?Ru(iS(r,s,!1),e,!0):64&s?r:Ru(a,e,!0)}else a=Ru(void 0,e,!0);return a!==r&&Di(t,i,n,a),a}function VV(t,e,n){let i=0|(t=t.u)[It];const r=Mc(t,i,n);return(e=oR(r,e,!1,i))!==r&&e!=null&&Di(t,i,n,e),e}function Mn(t,e,n){if((e=VV(t,e,n))==null)return e;let i=0|(t=t.u)[It];if(!(2&i)){const r=rS(e);r!==e&&Di(t,i,n,e=r)}return e}function GV(t,e,n,i,r,a,s){t=t.u;var o=!!(2&e);const l=o?1:r;a=!!a,s&&(s=!o);var f=0|(r=cR(t,e,i))[It];if(!(o=!!(4&f))){var h=r,d=e;const p=!!(2&(f=uR(f,e)));p&&(d|=2);let g=!p,y=!0,S=0,b=0;for(;S<h.length;S++){const v=oR(h[S],n,!1,d);if(v instanceof n){if(!p){const x=!!(2&(0|v.u[It]));g&&(g=!x),y&&(y=x)}h[b++]=v}}b<S&&(h.length=b),f|=4,f=y?16|f:-17&f,sr(h,f=g?8|f:-9&f),p&&Object.freeze(h)}if(s&&!(8&f||!r.length&&(l===1||l===4&&32&f))){for(nc(f)&&(r=za(r),f=cc(f,e),e=Di(t,e,i,r)),n=r,s=f,h=0;h<n.length;h++)(f=n[h])!==(d=rS(f))&&(n[h]=d);s|=8,sr(n,s=n.length?-17&s:16|s),f=s}return l===1||l===4&&32&f?nc(f)||(e=f,(f|=!r.length||16&f&&(!o||32&f)?2:1024)!==e&&sr(r,f),Object.freeze(r)):(l===2&&nc(f)&&(sr(r=za(r),f=Du(f=cc(f,e),e,a)),e=Di(t,e,i,r)),nc(f)||(i=f,(f=Du(f,e,a))!==i&&sr(r,f))),r}function yc(t,e,n){const i=0|t.u[It];return GV(t,i,e,n,nh(),!1,!(2&i))}function Bt(t,e,n,i){return i==null&&(i=void 0),ii(t,n,i)}function wg(t,e,n,i){i==null&&(i=void 0);e:{let r=0|(t=t.u)[It];if(tf(r),i==null){const a=fR(t);if(hR(a,t,r,n)!==e)break e;a.set(n,0)}else r=HV(t,r,n,e);Di(t,r,e,i)}}function cc(t,e){return-1025&(t=32|(2&e?2|t:-3&t))}function Du(t,e,n){return 32&e&&n||(t&=-33),t}function aS(t,e,n){tf(0|t.u[It]),ih(t,e,lm,2,!0).push(UV(n))}function Ab(t,e,n,i){const r=0|t.u[It];tf(r),t=GV(t,r,n,e,2,!0),i=i??new n,t.push(i),t[It]=2&(0|i.u[It])?-9&t[It]:-17&t[It]}function ro(t,e){return Pm(cm(t,e))}function co(t,e){return lm(cm(t,e))}function Yi(t,e){return U_(t,e)??0}function _v(t,e,n){if(n!=null&&typeof n!="boolean")throw t=typeof n,Error(`Expected boolean but got ${t!="object"?t:n?Array.isArray(n)?"array":t:"null"}: ${n}`);ii(t,e,n)}function pl(t,e,n){if(n!=null){if(typeof n!="number"||!tS(n))throw $A("int32");n|=0}ii(t,e,n)}function Ot(t,e,n){if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);ii(t,e,n)}function wb(t,e,n){{const s=t.u;let o=0|s[It];if(tf(o),n==null)Di(s,o,e);else{var i=t=0|n[It],r=nc(t),a=r||Object.isFrozen(n);for(r||(t=0),a||(n=za(n),i=0,t=Du(t=cc(t,o),o,!0),a=!1),t|=21,r=0;r<n.length;r++){const l=n[r],f=UV(l);Object.is(l,f)||(a&&(n=za(n),i=0,t=Du(t=cc(t,o),o,!0),a=!1),n[r]=f)}t!==i&&(a&&(n=za(n),t=Du(t=cc(t,o),o,!0)),sr(n,t)),Di(s,o,e,n)}}}function kV(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function pR(){return Error("Failed to read varint, encoding is invalid.")}function jV(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function mR(t){if(typeof t=="string")return{buffer:xV(t),O:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),O:!1};if(t.constructor===Uint8Array)return{buffer:t,O:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),O:!1};if(t.constructor===lc)return{buffer:KC(t)||new Uint8Array(0),O:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),O:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function gR(t,e){let n,i=0,r=0,a=0;const s=t.h;let o=t.g;do n=s[o++],i|=(127&n)<<a,a+=7;while(a<32&&128&n);for(a>32&&(r|=(127&n)>>4),a=3;a<32&&128&n;a+=7)n=s[o++],r|=(127&n)<<a;if(dh(t,o),n<128)return e(i>>>0,r>>>0);throw pR()}function vR(t){let e=0,n=t.g;const i=n+10,r=t.h;for(;n<i;){const a=r[n++];if(e|=a,(128&a)==0)return dh(t,n),!!(127&e)}throw pR()}function ju(t){const e=t.h;let n=t.g,i=e[n++],r=127&i;if(128&i&&(i=e[n++],r|=(127&i)<<7,128&i&&(i=e[n++],r|=(127&i)<<14,128&i&&(i=e[n++],r|=(127&i)<<21,128&i&&(i=e[n++],r|=i<<28,128&i&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw pR();return dh(t,n),r}function _c(t){return ju(t)>>>0}function iw(t){var e=t.h;const n=t.g,i=e[n],r=e[n+1],a=e[n+2];return e=e[n+3],dh(t,t.g+4),(i<<0|r<<8|a<<16|e<<24)>>>0}function rw(t){var e=iw(t);t=2*(e>>31)+1;const n=e>>>23&255;return e&=8388607,n==255?e?NaN:t*(1/0):n==0?1401298464324817e-60*t*e:t*Math.pow(2,n-150)*(e+8388608)}function kge(t){return ju(t)}function WM(t,e,{aa:n=!1}={}){t.aa=n,e&&(e=mR(e),t.h=e.buffer,t.m=e.O,t.j=0,t.l=t.h.length,t.g=t.j)}function dh(t,e){if(t.g=e,e>t.l)throw jV(t.l,e)}function XV(t,e){if(e<0)throw Error(`Tried to read a negative byte length: ${e}`);const n=t.g,i=n+e;if(i>t.l)throw jV(e,t.l-n);return t.g=i,n}function WV(t,e){if(e==0)return Dh();var n=XV(t,e);return t.aa&&t.m?n=t.h.subarray(n,n+e):(t=t.h,n=n===(e=n+e)?new Uint8Array(0):wge?t.slice(n,e):new Uint8Array(t.subarray(n,e))),n.length==0?Dh():new lc(n,am)}dl.prototype.toJSON=void 0;var EP=[];function YV(t){var e=t.g;if(e.g==e.l)return!1;t.l=t.g.g;var n=_c(t.g);if(e=n>>>3,!((n&=7)>=0&&n<=5))throw kV(n,t.l);if(e<1)throw Error(`Invalid field number: ${e} (at position ${t.l})`);return t.m=e,t.h=n,!0}function L_(t){switch(t.h){case 0:t.h!=0?L_(t):vR(t.g);break;case 1:dh(t=t.g,t.g+8);break;case 2:if(t.h!=2)L_(t);else{var e=_c(t.g);dh(t=t.g,t.g+e)}break;case 5:dh(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!YV(t))throw Error("Unmatched start-group tag: stream EOF");if(t.h==4){if(t.m!=e)throw Error("Unmatched end-group tag");break}L_(t)}break;default:throw kV(t.h,t.l)}}function a1(t,e,n){const i=t.g.l,r=_c(t.g),a=t.g.g+r;let s=a-i;if(s<=0&&(t.g.l=a,n(e,t,void 0,void 0,void 0),s=a-t.g.g),s)throw Error(`Message parsing ended unexpectedly. Expected to read ${r} bytes, instead read ${r-s} bytes, either the data ended unexpectedly or the message misreported its own length`);return t.g.g=a,t.g.l=i,e}function yR(t){var e=_c(t.g),n=XV(t=t.g,e);if(t=t.h,lge){var i,r=t;(i=FM)||(i=FM=new TextDecoder("utf-8",{fatal:!0})),e=n+e,r=n===0&&e===r.length?r:r.subarray(n,e);try{var a=i.decode(r)}catch(o){if(a_===void 0){try{i.decode(new Uint8Array([128]))}catch{}try{i.decode(new Uint8Array([97])),a_=!0}catch{a_=!1}}throw!a_&&(FM=void 0),o}}else{e=(a=n)+e,n=[];let o,l=null;for(;a<e;){var s=t[a++];s<128?n.push(s):s<224?a>=e?Ff():(o=t[a++],s<194||(192&o)!=128?(a--,Ff()):n.push((31&s)<<6|63&o)):s<240?a>=e-1?Ff():(o=t[a++],(192&o)!=128||s===224&&o<160||s===237&&o>=160||(192&(i=t[a++]))!=128?(a--,Ff()):n.push((15&s)<<12|(63&o)<<6|63&i)):s<=244?a>=e-2?Ff():(o=t[a++],(192&o)!=128||o-144+(s<<28)>>30||(192&(i=t[a++]))!=128||(192&(r=t[a++]))!=128?(a--,Ff()):(s=(7&s)<<18|(63&o)<<12|(63&i)<<6|63&r,s-=65536,n.push(55296+(s>>10&1023),56320+(1023&s)))):Ff(),n.length>=8192&&(l=aP(l,n),n.length=0)}a=aP(l,n)}return a}function qV(t){const e=_c(t.g);return WV(t.g,e)}function sS(t,e,n){var i=_c(t.g);for(i=t.g.g+i;t.g.g<i;)n.push(e(t.g))}var s_=[];function Bo(t,e,n){e.g?e.m(t,e.g,e.h,n):e.m(t,e.h,n)}var Rt=class{constructor(t,e){this.u=zV(t,e)}toJSON(){try{var t=IV(this)}finally{LV=void 0}return t}l(){var t=Tve;return t.g?t.l(this,t.g,t.h):t.l(this,t.h,t.defaultValue)}clone(){const t=this.u;return new this.constructor(iS(t,0|t[It],!1))}O(){return!!(2&(0|this.u[It]))}};function MP(t){return t?/^\d+$/.test(t)?(eS(t),new aw(Kn,Bi)):null:jge||(jge=new aw(0,0))}Rt.prototype.W=r1,Rt.prototype.toString=function(){return this.u.toString()};var aw=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let jge;function TP(t){return t?/^-?\d+$/.test(t)?(eS(t),new sw(Kn,Bi)):null:Xge||(Xge=new sw(0,0))}var sw=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let Xge;function Rp(t,e,n){for(;n>0||e>127;)t.g.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.g.push(e)}function Bm(t,e){for(;e>127;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function oS(t,e){if(e>=0)Bm(t,e);else{for(let n=0;n<9;n++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function xv(t,e){t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function um(t,e){e.length!==0&&(t.l.push(e),t.h+=e.length)}function Cs(t,e,n){Bm(t.g,8*e+n)}function _R(t,e){return Cs(t,e,2),e=t.g.end(),um(t,e),e.push(t.h),e}function xR(t,e){var n=e.pop();for(n=t.h+t.g.length()-n;n>127;)e.push(127&n|128),n>>>=7,t.h++;e.push(n),t.h++}function lS(t,e,n){Cs(t,e,2),Bm(t.g,n.length),um(t,t.g.end()),um(t,n)}function Cb(t,e,n,i){n!=null&&(e=_R(t,e),i(n,t),xR(t,e))}function Fo(){const t=class{constructor(){throw Error()}};return Object.setPrototypeOf(t,t.prototype),t}var bR=Fo(),ZV=Fo(),SR=Fo(),ER=Fo(),$V=Fo(),KV=Fo(),MR=Fo(),QV=Fo(),JV=Fo(),Fm=class{constructor(t,e,n){this.g=t,this.h=e,t=bR,this.l=!!t&&n===t||!1}};function cS(t,e){return new Fm(t,e,bR)}function eG(t,e,n,i,r){Cb(t,n,rG(e,i),r)}const Wge=cS(function(t,e,n,i,r){return t.h===2&&(a1(t,dR(e,i,n),r),!0)},eG),Yge=cS(function(t,e,n,i,r){return t.h===2&&(a1(t,dR(e,i,n),r),!0)},eG);var uS=Symbol(),TR=Symbol(),AP=Symbol(),wP=Symbol();let tG,nG;function Xh(t,e,n,i){var r=i[t];if(r)return r;(r={}).Ma=i,r.T=function(d){switch(typeof d){case"boolean":return PV||(PV=[0,void 0,!0]);case"number":return d>0?void 0:d===0?Vge||(Vge=[0,void 0]):[-d,void 0];case"string":return[0,d];case"object":return d}}(i[0]);var a=i[1];let s=1;a&&a.constructor===Object&&(r.ga=a,typeof(a=i[++s])=="function"&&(r.la=!0,tG??(tG=a),nG??(nG=i[s+1]),a=i[s+=2]));const o={};for(;a&&Array.isArray(a)&&a.length&&typeof a[0]=="number"&&a[0]>0;){for(var l=0;l<a.length;l++)o[a[l]]=a;a=i[++s]}for(l=1;a!==void 0;){let d;typeof a=="number"&&(l+=a,a=i[++s]);var f=void 0;if(a instanceof Fm?d=a:(d=Wge,s--),d==null?void 0:d.l){a=i[++s],f=i;var h=s;typeof a=="function"&&(a=a(),f[h]=a),f=a}for(h=l+1,typeof(a=i[++s])=="number"&&a<0&&(h-=a,a=i[++s]);l<h;l++){const p=o[l];f?n(r,l,d,f,p):e(r,l,d,p)}}return i[t]=r}function iG(t){return Array.isArray(t)?t[0]instanceof Fm?t:[Yge,t]:[t,void 0]}function rG(t,e){return t instanceof Rt?t.u:Array.isArray(t)?Ru(t,e,!1):void 0}function AR(t,e,n,i){const r=n.g;t[e]=i?(a,s,o)=>r(a,s,o,i):r}function wR(t,e,n,i,r){const a=n.g;let s,o;t[e]=(l,f,h)=>a(l,f,h,o||(o=Xh(TR,AR,wR,i).T),s||(s=CR(i)),r)}function CR(t){let e=t[AP];if(e!=null)return e;const n=Xh(TR,AR,wR,t);return e=n.la?(i,r)=>tG(i,r,n):(i,r)=>{const a=0|i[It];for(;YV(r)&&r.h!=4;){var s=r.m,o=n[s];if(o==null){var l=n.ga;l&&(l=l[s])&&(l=qge(l))!=null&&(o=n[s]=l)}o!=null&&o(r,i,s)||(s=(o=r).l,L_(o),o.fa?o=void 0:(l=o.g.g-s,o.g.g=s,o=WV(o.g,l)),s=i,o&&((l=s[sm])?l.push(o):s[sm]=[o]))}return 8192&a&&Lm(i),!0},t[AP]=e}function qge(t){const e=(t=iG(t))[0].g;if(t=t[1]){const n=CR(t),i=Xh(TR,AR,wR,t).T;return(r,a,s)=>e(r,a,s,i,n)}return e}function fS(t,e,n){t[e]=n.h}function hS(t,e,n,i){let r,a;const s=n.h;t[e]=(o,l,f)=>s(o,l,f,a||(a=Xh(uS,fS,hS,i).T),r||(r=aG(i)))}function aG(t){let e=t[wP];if(!e){const n=Xh(uS,fS,hS,t);e=(i,r)=>sG(i,r,n),t[wP]=e}return e}function sG(t,e,n){(function(i,r,a){const s=512&r?0:-1,o=i.length,l=o+((r=64&r?256&r:!!o&&K2(i[o-1]))?-1:0);for(let f=0;f<l;f++)a(f-s,i[f]);if(r){i=i[o-1];for(const f in i)!isNaN(f)&&a(+f,i[f])}})(t,0|t[It]|(n.T[1]?512:0),(i,r)=>{if(r!=null){var a=function(s,o){var l=s[o];if(l)return l;if((l=s.ga)&&(l=l[o])){var f=(l=iG(l))[0].h;if(l=l[1]){const h=aG(l),d=Xh(uS,fS,hS,l).T;l=s.la?nG(d,h):(p,g,y)=>f(p,g,y,d,h)}else l=f;return s[o]=l}}(n,i);a&&a(e,r,i)}}),(t=tR(t))&&function(i,r){um(i,i.g.end());for(let a=0;a<r.length;a++)um(i,KC(r[a])||new Uint8Array(0))}(e,t)}function Hm(t,e){if(Array.isArray(e)){var n=0|e[It];if(4&n)return e;for(var i=0,r=0;i<e.length;i++){const a=t(e[i]);a!=null&&(e[r++]=a)}return r<i&&(e.length=r),sr(e,-6145&(5|n)),2&n&&Object.freeze(e),e}}function Sa(t,e,n){return new Fm(t,e,n)}function Vm(t,e,n){return new Fm(t,e,n)}function Ea(t,e,n){Di(t,0|t[It],e,n)}var Zge=cS(function(t,e,n,i,r){return t.h===2&&(t=a1(t,Ru([void 0,void 0],i,!0),r),tf(i=0|e[It]),(r=Mc(e,i,n))instanceof dl?2&r.M?((r=r.da()).push(t),Di(e,i,n,r)):r.Ja(t):Array.isArray(r)?(2&(0|r[It])&&Di(e,i,n,r=FV(r)),r.push(t)):Di(e,i,n,[t]),!0)},function(t,e,n,i,r){if(e instanceof dl)e.forEach((a,s)=>{Cb(t,n,Ru([s,a],i,!1),r)});else if(Array.isArray(e))for(let a=0;a<e.length;a++){const s=e[a];Array.isArray(s)&&Cb(t,n,Ru(s,i,!1),r)}});function oG(t,e,n){if(e=function(i){if(i==null)return i;const r=typeof i;if(r==="bigint")return String(vv(64,i));if(yv(i)){if(r==="string")return NV(i);if(r==="number")return sR(i)}}(e),e!=null&&(typeof e=="string"&&TP(e),e!=null))switch(Cs(t,n,0),typeof e){case"number":t=t.g,Oh(e),Rp(t,Kn,Bi);break;case"bigint":n=BigInt.asUintN(64,e),n=new sw(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Rp(t.g,n.h,n.g);break;default:n=TP(e),Rp(t.g,n.h,n.g)}}function lG(t,e,n){(e=Pm(e))!=null&&e!=null&&(Cs(t,n,0),oS(t.g,e))}function cG(t,e,n){(e=CV(e))!=null&&(Cs(t,n,0),t.g.g.push(e?1:0))}function uG(t,e,n){(e=lm(e))!=null&&lS(t,n,mV(e))}function fG(t,e,n,i,r){Cb(t,n,rG(e,i),r)}function hG(t,e,n){e==null||typeof e=="string"||e instanceof lc||(Rh(e)?Rh(e)&&QC(EV):e=void 0),e!=null&&lS(t,n,mR(e).buffer)}function dG(t,e,n){return(t.h===5||t.h===2)&&(e=zm(e,0|e[It],n,!1),t.h==2?sS(t,rw,e):e.push(rw(t.g)),!0)}var Yl=Sa(function(t,e,n){if(t.h!==1)return!1;var i=t.g;t=iw(i);const r=iw(i);i=2*(r>>31)+1;const a=r>>>20&2047;return t=4294967296*(1048575&r)+t,Ea(e,n,a==2047?t?NaN:i*(1/0):a==0?5e-324*i*t:i*Math.pow(2,a-1075)*(t+4503599627370496)),!0},function(t,e,n){(e=nf(e))!=null&&(Cs(t,n,1),t=t.g,(n=AV||(AV=new DataView(new ArrayBuffer(8)))).setFloat64(0,+e,!0),Kn=n.getUint32(0,!0),Bi=n.getUint32(4,!0),xv(t,Kn),xv(t,Bi))},Fo()),cr=Sa(function(t,e,n){return t.h===5&&(Ea(e,n,rw(t.g)),!0)},function(t,e,n){(e=nf(e))!=null&&(Cs(t,n,5),t=t.g,nR(e),xv(t,Kn))},MR),$ge=Vm(dG,function(t,e,n){if((e=Hm(nf,e))!=null)for(let s=0;s<e.length;s++){var i=t,r=n,a=e[s];a!=null&&(Cs(i,r,5),i=i.g,nR(a),xv(i,Kn))}},MR),RR=Vm(dG,function(t,e,n){if((e=Hm(nf,e))!=null&&e.length){Cs(t,n,2),Bm(t.g,4*e.length);for(let i=0;i<e.length;i++)n=t.g,nR(e[i]),xv(n,Kn)}},MR),Xu=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,gR(t.g,rR)),!0)},oG,KV),YM=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,(t=gR(t.g,rR))===0?void 0:t),!0)},oG,KV),Kge=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,gR(t.g,iR)),!0)},function(t,e,n){if((e=Oge(e))!=null&&(typeof e=="string"&&MP(e),e!=null))switch(Cs(t,n,0),typeof e){case"number":t=t.g,Oh(e),Rp(t,Kn,Bi);break;case"bigint":n=BigInt.asUintN(64,e),n=new aw(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Rp(t.g,n.h,n.g);break;default:n=MP(e),Rp(t.g,n.h,n.g)}},Fo()),Vi=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,ju(t.g)),!0)},lG,ER),dS=Vm(function(t,e,n){return(t.h===0||t.h===2)&&(e=zm(e,0|e[It],n,!1),t.h==2?sS(t,ju,e):e.push(ju(t.g)),!0)},function(t,e,n){if((e=Hm(Pm,e))!=null&&e.length){n=_R(t,n);for(let i=0;i<e.length;i++)oS(t.g,e[i]);xR(t,n)}},ER),mp=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,(t=ju(t.g))===0?void 0:t),!0)},lG,ER),Si=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,vR(t.g)),!0)},cG,ZV),Dp=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,(t=vR(t.g))===!1?void 0:t),!0)},cG,ZV),$r=Vm(function(t,e,n){return t.h===2&&(t=yR(t),zm(e,0|e[It],n,!1).push(t),!0)},function(t,e,n){if((e=Hm(lm,e))!=null)for(let s=0;s<e.length;s++){var i=t,r=n,a=e[s];a!=null&&lS(i,r,mV(a))}},SR),su=Sa(function(t,e,n){return t.h===2&&(Ea(e,n,(t=yR(t))===""?void 0:t),!0)},uG,SR),In=Sa(function(t,e,n){return t.h===2&&(Ea(e,n,yR(t)),!0)},uG,SR),mr=function(t,e,n=bR){return new Fm(t,e,n)}(function(t,e,n,i,r){return t.h===2&&(i=Ru(void 0,i,!0),zm(e,0|e[It],n,!0).push(i),a1(t,i,r),!0)},function(t,e,n,i,r){if(Array.isArray(e))for(let a=0;a<e.length;a++)fG(t,e[a],n,i,r)}),Pn=cS(function(t,e,n,i,r,a){return t.h===2&&(HV(e,0|e[It],a,n),a1(t,e=dR(e,i,n),r),!0)},fG),pG=Sa(function(t,e,n){return t.h===2&&(Ea(e,n,qV(t)),!0)},hG,QV),Qge=Vm(function(t,e,n){return(t.h===0||t.h===2)&&(e=zm(e,0|e[It],n,!1),t.h==2?sS(t,_c,e):e.push(_c(t.g)),!0)},function(t,e,n){if((e=Hm(RV,e))!=null)for(let s=0;s<e.length;s++){var i=t,r=n,a=e[s];a!=null&&(Cs(i,r,0),Bm(i.g,a))}},$V),Jge=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,(t=_c(t.g))===0?void 0:t),!0)},function(t,e,n){(e=RV(e))!=null&&e!=null&&(Cs(t,n,0),Bm(t.g,e))},$V),bs=Sa(function(t,e,n){return t.h===0&&(Ea(e,n,ju(t.g)),!0)},function(t,e,n){(e=Pm(e))!=null&&(e=parseInt(e,10),Cs(t,n,0),oS(t.g,e))},JV);class eve{constructor(e,n){this.h=e,this.g=n,this.l=Mn,this.m=Bt,this.defaultValue=void 0}register(){Y2(this)}}function Ho(t,e){return new eve(t,e)}function rf(t,e){return(n,i)=>{if(s_.length){const a=s_.pop();a.o(i),WM(a.g,n,i),n=a}else n=new class{constructor(a,s){if(EP.length){const o=EP.pop();WM(o,a,s),a=o}else a=new class{constructor(o,l){this.h=null,this.m=!1,this.g=this.l=this.j=0,WM(this,o,l)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.aa=!1}}(a,s);this.g=a,this.l=this.g.g,this.h=this.m=-1,this.o(s)}o({fa:a=!1}={}){this.fa=a}}(n,i);try{const a=new t,s=a.u;CR(e)(s,n);var r=a}finally{n.g.clear(),n.m=-1,n.h=-1,s_.length<100&&s_.push(n)}return r}}function pS(t){return function(){const e=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const s=this.g;return this.g=[],s}}}};sG(this.u,e,Xh(uS,fS,hS,t)),um(e,e.g.end());const n=new Uint8Array(e.h),i=e.l,r=i.length;let a=0;for(let s=0;s<r;s++){const o=i[s];n.set(o,a),a+=o.length}return e.l=[n],n}}var CP=class extends Rt{constructor(t){super(t)}},RP=[0,su,Sa(function(t,e,n){return t.h===2&&(Ea(e,n,(t=qV(t))===Dh()?void 0:t),!0)},function(t,e,n){if(e!=null){if(e instanceof Rt){const i=e.Oa;return void(i&&(e=i(e),e!=null&&lS(t,n,mR(e).buffer)))}if(Array.isArray(e))return}hG(t,e,n)},QV)];let qM,DP=globalThis.trustedTypes;function OP(t){qM===void 0&&(qM=function(){let n=null;if(!DP)return n;try{const i=r=>r;n=DP.createPolicy("goog#html",{createHTML:i,createScript:i,createScriptURL:i})}catch{}return n}());var e=qM;return new class{constructor(n){this.g=n}toString(){return this.g+""}}(e?e.createScriptURL(t):t)}function tve(t,...e){if(e.length===0)return OP(t[0]);let n=t[0];for(let i=0;i<e.length;i++)n+=encodeURIComponent(e[i])+t[i+1];return OP(n)}var mG=[0,Vi,bs,Si,-1,dS,bs,-1],nve=class extends Rt{constructor(t){super(t)}},gG=[0,Si,In,Si,bs,-1,Vm(function(t,e,n){return(t.h===0||t.h===2)&&(e=zm(e,0|e[It],n,!1),t.h==2?sS(t,kge,e):e.push(ju(t.g)),!0)},function(t,e,n){if((e=Hm(Pm,e))!=null&&e.length){n=_R(t,n);for(let i=0;i<e.length;i++)oS(t.g,e[i]);xR(t,n)}},JV),In,-1,[0,Si,-1],bs,Si,-1],vG=[0,In,-2],NP=class extends Rt{constructor(t){super(t)}},yG=[0],_G=[0,Vi,Si,1,Si,-3],As=class extends Rt{constructor(t){super(t,2)}},ur={};ur[336783863]=[0,In,Si,-1,Vi,[0,[1,2,3,4,5,6,7,8,9],Pn,yG,Pn,gG,Pn,vG,Pn,_G,Pn,mG,Pn,[0,In,-2],Pn,[0,In,bs],Pn,[0,bs,In,-1],Pn,[0,bs,-1]],[0,In],Si,[0,[1,3],[2,4],Pn,[0,dS],-1,Pn,[0,$r],-1,mr,[0,In,-1]],In];var UP=[0,YM,-1,Dp,-3,YM,dS,su,mp,YM,-1,Dp,mp,Dp,-2,su];function Rs(t,e){nw(t,2,Im(e),"")}function oi(t,e){aS(t,3,e)}function yn(t,e){aS(t,4,e)}var ya=class extends Rt{constructor(t){super(t,500)}o(t){return Bt(this,0,7,t)}},Cg=[-1,{}],LP=[0,In,1,Cg],PP=[0,In,$r,Cg];function Ds(t,e){Ab(t,1,ya,e)}function mi(t,e){aS(t,10,e)}function Rn(t,e){aS(t,15,e)}var ka=class extends Rt{constructor(t){super(t,500)}o(t){return Bt(this,0,1001,t)}},xG=[-500,mr,[-500,su,-1,$r,-3,[-2,ur,Si],mr,RP,mp,-1,LP,PP,mr,[0,su,Dp],su,UP,mp,$r,987,$r],4,mr,[-500,In,-1,[-1,{}],998,In],mr,[-500,In,$r,-1,[-2,{},Si],997,$r,-1],mp,mr,[-500,In,$r,Cg,998,$r],$r,mp,LP,PP,mr,[0,su,-1,Cg],$r,-2,UP,su,-1,Dp,[0,Dp,Jge],978,Cg,mr,RP];ka.prototype.g=pS(xG);var ive=rf(ka,xG),rve=class extends Rt{constructor(t){super(t)}},bG=class extends Rt{constructor(t){super(t)}g(){return yc(this,rve,1)}},SG=[0,mr,[0,Vi,cr,In,-1]],mS=rf(bG,SG),ave=class extends Rt{constructor(t){super(t)}},sve=class extends Rt{constructor(t){super(t)}},ZM=class extends Rt{constructor(t){super(t)}h(){return Mn(this,ave,2)}g(){return yc(this,sve,5)}},EG=rf(class extends Rt{constructor(t){super(t)}},[0,$r,dS,RR,[0,bs,[0,Vi,-3],[0,cr,-3],[0,Vi,-1,[0,mr,[0,Vi,-2]]],mr,[0,cr,-1,In,cr]],In,-1,Xu,mr,[0,Vi,cr],$r,Xu]),MG=class extends Rt{constructor(t){super(t)}},Op=rf(class extends Rt{constructor(t){super(t)}},[0,mr,[0,cr,-4]]),TG=class extends Rt{constructor(t){super(t)}},s1=rf(class extends Rt{constructor(t){super(t)}},[0,mr,[0,cr,-4]]),ove=class extends Rt{constructor(t){super(t)}},lve=[0,Vi,-1,RR,bs],AG=class extends Rt{constructor(t){super(t)}};AG.prototype.g=pS([0,cr,-4,Xu]);var cve=class extends Rt{constructor(t){super(t)}},uve=rf(class extends Rt{constructor(t){super(t)}},[0,mr,[0,1,Vi,In,SG],Xu]),IP=class extends Rt{constructor(t){super(t)}},fve=class extends Rt{constructor(t){super(t)}ma(){const t=BV(this);return t??Dh()}},hve=class extends Rt{constructor(t){super(t)}},wG=[1,2],dve=rf(class extends Rt{constructor(t){super(t)}},[0,mr,[0,wG,Pn,[0,RR],Pn,[0,pG],Vi,In],Xu]),DR=class extends Rt{constructor(t){super(t)}},CG=[0,In,Vi,cr,$r,-1],zP=class extends Rt{constructor(t){super(t)}},pve=[0,Si,-1],BP=class extends Rt{constructor(t){super(t)}},P_=[1,2,3,4,5],Rb=class extends Rt{constructor(t){super(t)}g(){return BV(this)!=null}h(){return co(this,2)!=null}},Ti=class extends Rt{constructor(t){super(t)}g(){return CV(cm(this,2))??!1}},RG=[0,pG,In,[0,Vi,Xu,-1],[0,Kge,Xu]],Ki=[0,RG,Si,[0,P_,Pn,_G,Pn,gG,Pn,mG,Pn,yG,Pn,vG],bs],gS=class extends Rt{constructor(t){super(t)}},OR=[0,Ki,cr,-1,Vi],mve=Ho(502141897,gS);ur[502141897]=OR;var gve=rf(class extends Rt{constructor(t){super(t)}},[0,[0,bs,-1,$ge,Qge],lve]),DG=class extends Rt{constructor(t){super(t)}},OG=class extends Rt{constructor(t){super(t)}},NR=[0,Ki,cr,[0,Ki],Si],NG=[0,Ki,OR,NR,cr,[0,[0,RG]]],vve=Ho(508968150,OG);ur[508968150]=NG,ur[508968149]=NR;var UG=class extends Rt{constructor(t){super(t)}},yve=Ho(513916220,UG);ur[513916220]=[0,Ki,NG,Vi];var Yd=class extends Rt{constructor(t){super(t)}h(){return Mn(this,DR,2)}g(){ii(this,2)}},LG=[0,Ki,CG];ur[478825465]=LG;var _ve=class extends Rt{constructor(t){super(t)}},PG=class extends Rt{constructor(t){super(t)}},UR=class extends Rt{constructor(t){super(t)}},LR=class extends Rt{constructor(t){super(t)}},IG=class extends Rt{constructor(t){super(t)}},FP=[0,Ki,[0,Ki],LG,-1],zG=[0,Ki,cr,Vi],PR=[0,Ki,cr],BG=[0,Ki,zG,PR,cr],xve=Ho(479097054,IG);ur[479097054]=[0,Ki,BG,FP],ur[463370452]=FP,ur[464864288]=zG;var bve=Ho(462713202,LR);ur[462713202]=BG,ur[474472470]=PR;var Sve=class extends Rt{constructor(t){super(t)}},FG=class extends Rt{constructor(t){super(t)}},HG=class extends Rt{constructor(t){super(t)}},VG=class extends Rt{constructor(t){super(t)}},IR=[0,Ki,cr,-1,Vi],ow=[0,Ki,cr,Si];VG.prototype.g=pS([0,Ki,PR,[0,Ki],OR,NR,IR,ow]);var GG=class extends Rt{constructor(t){super(t)}},Eve=Ho(456383383,GG);ur[456383383]=[0,Ki,CG];var kG=class extends Rt{constructor(t){super(t)}},Mve=Ho(476348187,kG);ur[476348187]=[0,Ki,pve];var jG=class extends Rt{constructor(t){super(t)}},HP=class extends Rt{constructor(t){super(t)}},XG=[0,bs,-1],Tve=Ho(458105876,class extends Rt{constructor(t){super(t)}g(){var t=this.u;const e=0|t[It],n=2&e;return t=function(i,r,a){var s=HP;const o=2&r;let l=!1;if(a==null){if(o)return SP();a=[]}else if(a.constructor===dl){if(!(2&a.M)||o)return a;a=a.da()}else Array.isArray(a)?l=!!(2&(0|a[It])):a=[];if(o){if(!a.length)return SP();l||(l=!0,Lm(a))}else l&&(l=!1,a=FV(a));return l||(64&(0|a[It])?a[It]&=-33:32&r&&Z2(a,32)),Di(i,r,2,s=new dl(a,s,Nge,void 0)),s}(t,e,Mc(t,e,2)),!n&&HP&&(t.pa=!0),t}});ur[458105876]=[0,XG,Zge,[!0,Xu,[0,In,-1,$r]]];var zR=class extends Rt{constructor(t){super(t)}},WG=Ho(458105758,zR);ur[458105758]=[0,Ki,In,XG];var YG=class extends Rt{constructor(t){super(t)}},Ave=Ho(443442058,YG);ur[443442058]=[0,Ki,In,Vi,cr,$r,-1,Si,cr],ur[514774813]=IR;var qG=class extends Rt{constructor(t){super(t)}},wve=Ho(516587230,qG);function lw(t,e){return e=e?e.clone():new DR,t.displayNamesLocale!==void 0?ii(e,1,Im(t.displayNamesLocale)):t.displayNamesLocale===void 0&&ii(e,1),t.maxResults!==void 0?pl(e,2,t.maxResults):"maxResults"in t&&ii(e,2),t.scoreThreshold!==void 0?Ot(e,3,t.scoreThreshold):"scoreThreshold"in t&&ii(e,3),t.categoryAllowlist!==void 0?wb(e,4,t.categoryAllowlist):"categoryAllowlist"in t&&ii(e,4),t.categoryDenylist!==void 0?wb(e,5,t.categoryDenylist):"categoryDenylist"in t&&ii(e,5),e}function BR(t,e=-1,n=""){return{categories:t.map(i=>({index:ro(i,1)??0??-1,score:Yi(i,2)??0,categoryName:co(i,3)??""??"",displayName:co(i,4)??""??""})),headIndex:e,headName:n}}function ZG(t){var s,o;var e=ih(t,3,nf,nh()),n=ih(t,2,Pm,nh()),i=ih(t,1,lm,nh()),r=ih(t,9,lm,nh());const a={categories:[],keypoints:[]};for(let l=0;l<e.length;l++)a.categories.push({score:e[l],index:n[l]??-1,categoryName:i[l]??"",displayName:r[l]??""});if((e=(s=Mn(t,ZM,4))==null?void 0:s.h())&&(a.boundingBox={originX:ro(e,1)??0,originY:ro(e,2)??0,width:ro(e,3)??0,height:ro(e,4)??0,angle:0}),(o=Mn(t,ZM,4))==null?void 0:o.g().length)for(const l of Mn(t,ZM,4).g())a.keypoints.push({x:U_(l,1)??0,y:U_(l,2)??0,score:U_(l,4)??0,label:co(l,3)??""});return a}function vS(t){const e=[];for(const n of yc(t,TG,1))e.push({x:Yi(n,1)??0,y:Yi(n,2)??0,z:Yi(n,3)??0,visibility:Yi(n,4)??0});return e}function Rg(t){const e=[];for(const n of yc(t,MG,1))e.push({x:Yi(n,1)??0,y:Yi(n,2)??0,z:Yi(n,3)??0,visibility:Yi(n,4)??0});return e}function VP(t){return Array.from(t,e=>e>127?e-256:e)}function GP(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let n=0,i=0,r=0;for(let a=0;a<t.length;a++)n+=t[a]*e[a],i+=t[a]*t[a],r+=e[a]*e[a];if(i<=0||r<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(i*r)}let o_;ur[516587230]=[0,Ki,IR,ow,cr],ur[518928384]=ow;const Cve=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function $G(){if(o_===void 0)try{await WebAssembly.instantiate(Cve),o_=!0}catch{o_=!1}return o_}async function F0(t,e=tve``){const n=await $G()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${n}.js`,wasmBinaryPath:`${e}/${t}_${n}.wasm`}}var Yf=class{};function KG(){var t=navigator;return typeof OffscreenCanvas<"u"&&(!function(e=navigator){return(e=e.userAgent).includes("Safari")&&!e.includes("Chrome")}(t)||!!((t=t.userAgent.match(/Version\/([\d]+).*Safari/))&&t.length>=1&&Number(t[1])>=17))}async function kP(t){if(typeof importScripts!="function"){const e=document.createElement("script");return e.src=t.toString(),e.crossOrigin="anonymous",new Promise((n,i)=>{e.addEventListener("load",()=>{n()},!1),e.addEventListener("error",r=>{i(r)},!1),document.body.appendChild(e)})}importScripts(t.toString())}function QG(t){return t.videoWidth!==void 0?[t.videoWidth,t.videoHeight]:t.naturalWidth!==void 0?[t.naturalWidth,t.naturalHeight]:t.displayWidth!==void 0?[t.displayWidth,t.displayHeight]:[t.width,t.height]}function Pt(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(e=t.i.stringToNewUTF8(e)),t.i._free(e)}function jP(t,e,n){if(!t.i.canvas)throw Error("No OpenGL canvas configured.");if(n?t.i._bindTextureToStream(n):t.i._bindTextureToCanvas(),!(n=t.i.canvas.getContext("webgl2")||t.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[i,r]=QG(e);return!t.l||i===t.i.canvas.width&&r===t.i.canvas.height||(t.i.canvas.width=i,t.i.canvas.height=r),[i,r]}function XP(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const i=new Uint32Array(e.length);for(let r=0;r<e.length;r++)i[r]=t.i.stringToNewUTF8(e[r]);e=t.i._malloc(4*i.length),t.i.HEAPU32.set(i,e>>2),n(e);for(const r of i)t.i._free(r);t.i._free(e)}function $o(t,e,n){t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=n}function Kc(t,e,n){let i=[];t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=(r,a,s)=>{a?(n(i,s),i=[]):i.push(r)}}Yf.forVisionTasks=function(t){return F0("vision",t)},Yf.forTextTasks=function(t){return F0("text",t)},Yf.forGenAiExperimentalTasks=function(t){return F0("genai_experimental",t)},Yf.forGenAiTasks=function(t){return F0("genai",t)},Yf.forAudioTasks=function(t){return F0("audio",t)},Yf.isSimdSupported=function(){return $G()};async function Rve(t,e,n,i){return t=await(async(r,a,s,o,l)=>{if(a&&await kP(a),!self.ModuleFactory||s&&(await kP(s),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&l&&((a=self.Module).locateFile=l.locateFile,l.mainScriptUrlOrBlob&&(a.mainScriptUrlOrBlob=l.mainScriptUrlOrBlob)),l=await self.ModuleFactory(self.Module||l),self.ModuleFactory=self.Module=void 0,new r(l,o)})(t,n.wasmLoaderPath,n.assetLoaderPath,e,{locateFile:r=>r.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&r.endsWith(".data")?n.assetBinaryPath.toString():r}),await t.o(i),t}function $M(t,e){const n=Mn(t.baseOptions,Rb,1)||new Rb;typeof e=="string"?(ii(n,2,Im(e)),ii(n,1)):e instanceof Uint8Array&&(ii(n,1,eR(e,!1)),ii(n,2)),Bt(t.baseOptions,0,1,n)}function WP(t){try{const e=t.G.length;if(e===1)throw Error(t.G[0].message);if(e>1)throw Error("Encountered multiple errors: "+t.G.map(n=>n.message).join(", "))}finally{t.G=[]}}function St(t,e){t.B=Math.max(t.B,e)}function yS(t,e){t.A=new ya,Rs(t.A,"PassThroughCalculator"),oi(t.A,"free_memory"),yn(t.A,"free_memory_unused_out"),mi(e,"free_memory"),Ds(e,t.A)}function fm(t,e){oi(t.A,e),yn(t.A,e+"_unused_out")}function _S(t){t.g.addBoolToStream(!0,"free_memory",t.B)}var cw=class{constructor(t){this.g=t,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(t,e=!0){var n,i,r,a,s,o;if(e){const l=t.baseOptions||{};if((n=t.baseOptions)!=null&&n.modelAssetBuffer&&((i=t.baseOptions)!=null&&i.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((r=Mn(this.baseOptions,Rb,1))!=null&&r.g()||(a=Mn(this.baseOptions,Rb,1))!=null&&a.h()||(s=t.baseOptions)!=null&&s.modelAssetBuffer||(o=t.baseOptions)!=null&&o.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(f,h){let d=Mn(f.baseOptions,BP,3);if(!d){var p=d=new BP,g=new NP;wg(p,4,P_,g)}"delegate"in h&&(h.delegate==="GPU"?(h=d,p=new nve,wg(h,2,P_,p)):(h=d,p=new NP,wg(h,4,P_,p))),Bt(f.baseOptions,0,3,d)}(this,l),l.modelAssetPath)return fetch(l.modelAssetPath.toString()).then(f=>{if(f.ok)return f.arrayBuffer();throw Error(`Failed to fetch model: ${l.modelAssetPath} (${f.status})`)}).then(f=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(f),!0,!1,!1),$M(this,"/model.dat"),this.m(),this.J()});if(l.modelAssetBuffer instanceof Uint8Array)$M(this,l.modelAssetBuffer);else if(l.modelAssetBuffer)return async function(f){const h=[];for(var d=0;;){const{done:p,value:g}=await f.read();if(p)break;h.push(g),d+=g.length}if(h.length===0)return new Uint8Array(0);if(h.length===1)return h[0];f=new Uint8Array(d),d=0;for(const p of h)f.set(p,d),d+=p.length;return f}(l.modelAssetBuffer).then(f=>{$M(this,f),this.m(),this.J()})}return this.m(),this.J(),Promise.resolve()}J(){}ca(){let t;if(this.g.ca(e=>{t=ive(e)}),!t)throw Error("Failed to retrieve CalculatorGraphConfig");return t}setGraph(t,e){this.g.attachErrorListener((n,i)=>{this.G.push(Error(i))}),this.g.Ha(),this.g.setGraph(t,e),this.A=void 0,WP(this)}finishProcessing(){this.g.finishProcessing(),WP(this)}close(){this.A=void 0,this.g.closeGraph()}};function va(t,e){if(!t)throw Error(`Unable to obtain required WebGL resource: ${e}`);return t}cw.prototype.close=cw.prototype.close;class Dve{constructor(e,n,i,r){this.g=e,this.h=n,this.m=i,this.l=r}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function YP(t,e,n){const i=t.g;if(n=va(i.createShader(n),"Failed to create WebGL shader"),i.shaderSource(n,e),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${i.getShaderInfoLog(n)}`);return i.attachShader(t.h,n),n}function qP(t,e){const n=t.g,i=va(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(i);const r=va(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,r),n.enableVertexAttribArray(t.P),n.vertexAttribPointer(t.P,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const a=va(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,a),n.enableVertexAttribArray(t.J),n.vertexAttribPointer(t.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new Dve(n,i,r,a)}function FR(t,e){if(t.g){if(e!==t.g)throw Error("Cannot change GL context once initialized")}else t.g=e}function o1(t,e,n,i){return FR(t,e),t.h||(t.m(),t.C()),n?(t.s||(t.s=qP(t,!0)),n=t.s):(t.v||(t.v=qP(t,!1)),n=t.v),e.useProgram(t.h),n.bind(),t.l(),t=i(),n.g.bindVertexArray(null),t}function Wu(t,e,n){return FR(t,e),t=va(e.createTexture(),"Failed to create texture"),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n??e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n??e.LINEAR),e.bindTexture(e.TEXTURE_2D,null),t}function xS(t,e,n){FR(t,e),t.A||(t.A=va(e.createFramebuffer(),"Failed to create framebuffe.")),e.bindFramebuffer(e.FRAMEBUFFER,t.A),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}function HR(t){var e;(e=t.g)==null||e.bindFramebuffer(t.g.FRAMEBUFFER,null)}var Gm=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const t=this.g;if(this.h=va(t.createProgram(),"Failed to create WebGL program"),this.Z=YP(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,t.VERTEX_SHADER),this.Y=YP(this,this.G(),t.FRAGMENT_SHADER),t.linkProgram(this.h),!t.getProgramParameter(this.h,t.LINK_STATUS))throw Error(`Error during program linking: ${t.getProgramInfoLog(this.h)}`);this.P=t.getAttribLocation(this.h,"aVertex"),this.J=t.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const t=this.g;t.deleteProgram(this.h),t.deleteShader(this.Z),t.deleteShader(this.Y)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}},Ove=class extends Gm{G(){return`
  precision mediump float;
  uniform sampler2D backgroundTexture;
  uniform sampler2D maskTexture;
  uniform sampler2D colorMappingTexture;
  varying vec2 vTex;
  void main() {
    vec4 backgroundColor = texture2D(backgroundTexture, vTex);
    float category = texture2D(maskTexture, vTex).r;
    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));
    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);
  }
 `}C(){const t=this.g;t.activeTexture(t.TEXTURE1),this.B=Wu(this,t,t.LINEAR),t.activeTexture(t.TEXTURE2),this.j=Wu(this,t,t.NEAREST)}m(){super.m();const t=this.g;this.L=va(t.getUniformLocation(this.h,"backgroundTexture"),"Uniform location"),this.U=va(t.getUniformLocation(this.h,"colorMappingTexture"),"Uniform location"),this.K=va(t.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();const t=this.g;t.uniform1i(this.K,0),t.uniform1i(this.L,1),t.uniform1i(this.U,2)}close(){this.B&&this.g.deleteTexture(this.B),this.j&&this.g.deleteTexture(this.j),super.close()}},Nve=class extends Gm{G(){return`
  precision mediump float;
  uniform sampler2D maskTexture;
  uniform sampler2D defaultTexture;
  uniform sampler2D overlayTexture;
  varying vec2 vTex;
  void main() {
    float confidence = texture2D(maskTexture, vTex).r;
    vec4 defaultColor = texture2D(defaultTexture, vTex);
    vec4 overlayColor = texture2D(overlayTexture, vTex);
    // Apply the alpha from the overlay and merge in the default color
    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);
    gl_FragColor = mix(defaultColor, overlayColor, confidence);
  }
 `}C(){const t=this.g;t.activeTexture(t.TEXTURE1),this.j=Wu(this,t),t.activeTexture(t.TEXTURE2),this.B=Wu(this,t)}m(){super.m();const t=this.g;this.K=va(t.getUniformLocation(this.h,"defaultTexture"),"Uniform location"),this.L=va(t.getUniformLocation(this.h,"overlayTexture"),"Uniform location"),this.H=va(t.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();const t=this.g;t.uniform1i(this.H,0),t.uniform1i(this.K,1),t.uniform1i(this.L,2)}close(){this.j&&this.g.deleteTexture(this.j),this.B&&this.g.deleteTexture(this.B),super.close()}};function Kl(t,e){switch(e){case 0:return t.g.find(n=>n instanceof Uint8Array);case 1:return t.g.find(n=>n instanceof Float32Array);case 2:return t.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${e}`)}}function uw(t){var e=Kl(t,1);if(!e){if(e=Kl(t,0))e=new Float32Array(e).map(i=>i/255);else{e=new Float32Array(t.width*t.height);const i=hm(t);var n=VR(t);if(xS(n,i,JG(t)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){n=new Float32Array(t.width*t.height*4),i.readPixels(0,0,t.width,t.height,i.RGBA,i.FLOAT,n);for(let r=0,a=0;r<e.length;++r,a+=4)e[r]=n[a]}else i.readPixels(0,0,t.width,t.height,i.RED,i.FLOAT,e)}t.g.push(e)}return e}function JG(t){let e=Kl(t,2);if(!e){const n=hm(t);e=tk(t);const i=uw(t),r=ek(t);n.texImage2D(n.TEXTURE_2D,0,r,t.width,t.height,0,n.RED,n.FLOAT,i),fw(t)}return e}function hm(t){if(!t.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return t.h||(t.h=va(t.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),t.h}function ek(t){if(t=hm(t),!l_)if(t.getExtension("EXT_color_buffer_float")&&t.getExtension("OES_texture_float_linear")&&t.getExtension("EXT_float_blend"))l_=t.R32F;else{if(!t.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");l_=t.R16F}return l_}function VR(t){return t.l||(t.l=new Gm),t.l}function tk(t){const e=hm(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=Kl(t,2);return n||(n=Wu(VR(t),e,t.m?e.LINEAR:e.NEAREST),t.g.push(n),t.j=!0),e.bindTexture(e.TEXTURE_2D,n),n}function fw(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}var l_,pr=class{constructor(t,e,n,i,r,a,s){this.g=t,this.m=e,this.j=n,this.canvas=i,this.l=r,this.width=a,this.height=s,this.j&&--ZP===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Da(){return!!Kl(this,0)}ja(){return!!Kl(this,1)}R(){return!!Kl(this,2)}ia(){return(e=Kl(t=this,0))||(e=uw(t),e=new Uint8Array(e.map(n=>255*n)),t.g.push(e)),e;var t,e}ha(){return uw(this)}N(){return JG(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof Uint8Array)n=new Uint8Array(e);else if(e instanceof Float32Array)n=new Float32Array(e);else{if(!(e instanceof WebGLTexture))throw Error(`Type is not supported: ${e}`);{const i=hm(this),r=VR(this);i.activeTexture(i.TEXTURE1),n=Wu(r,i,this.m?i.LINEAR:i.NEAREST),i.bindTexture(i.TEXTURE_2D,n);const a=ek(this);i.texImage2D(i.TEXTURE_2D,0,a,this.width,this.height,0,i.RED,i.FLOAT,null),i.bindTexture(i.TEXTURE_2D,null),xS(r,i,n),o1(r,i,!1,()=>{tk(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),fw(this)}),HR(r),fw(this)}}t.push(n)}return new pr(t,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&hm(this).deleteTexture(Kl(this,2)),ZP=-1}};pr.prototype.close=pr.prototype.close,pr.prototype.clone=pr.prototype.clone,pr.prototype.getAsWebGLTexture=pr.prototype.N,pr.prototype.getAsFloat32Array=pr.prototype.ha,pr.prototype.getAsUint8Array=pr.prototype.ia,pr.prototype.hasWebGLTexture=pr.prototype.R,pr.prototype.hasFloat32Array=pr.prototype.ja,pr.prototype.hasUint8Array=pr.prototype.Da;var ZP=250;const Uve={color:"white",lineWidth:4,radius:6};function KM(t){return{...Uve,fillColor:(t=t||{}).color,...t}}function Gl(t,e){return t instanceof Function?t(e):t}function $P(t,e,n){return Math.max(Math.min(e,n),Math.min(Math.max(e,n),t))}function H0(t){if(!t.l)throw Error("CPU rendering requested but CanvasRenderingContext2D not provided.");return t.l}function bv(t){if(!t.j)throw Error("GPU rendering requested but WebGL2RenderingContext not provided.");return t.j}function KP(t,e,n){if(e.R())n(e.N());else{const i=e.ja()?e.ha():e.ia();t.m=t.m??new Gm;const r=bv(t);n((t=new pr([i],e.m,!1,r.canvas,t.m,e.width,e.height)).N()),t.close()}}function QP(t,e,n,i){const r=function(o){return o.g||(o.g=new Ove),o.g}(t),a=bv(t),s=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n;o1(r,a,!0,()=>{(function(l,f,h,d){const p=l.g;if(p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,f),p.activeTexture(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,l.B),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,h),l.H&&function(g,y){if(g!==y)return!1;g=g.entries(),y=y.entries();for(const[b,v]of g){g=b;const x=v;var S=y.next();if(S.done)return!1;const[E,T]=S.value;if(S=T,g!==E||x[0]!==S[0]||x[1]!==S[1]||x[2]!==S[2]||x[3]!==S[3])return!1}return!!y.next().done}(l.H,d))p.activeTexture(p.TEXTURE2),p.bindTexture(p.TEXTURE_2D,l.j);else{l.H=d;const g=Array(1024).fill(0);d.forEach((y,S)=>{if(y.length!==4)throw Error(`Color at index ${S} is not a four-channel value.`);g[4*S]=y[0],g[4*S+1]=y[1],g[4*S+2]=y[2],g[4*S+3]=y[3]}),p.activeTexture(p.TEXTURE2),p.bindTexture(p.TEXTURE_2D,l.j),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,256,1,0,p.RGBA,p.UNSIGNED_BYTE,new Uint8Array(g))}})(r,e,s,i),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.drawArrays(a.TRIANGLE_FAN,0,4);const o=r.g;o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,null)})}function JP(t,e,n,i){const r=bv(t),a=function(l){return l.h||(l.h=new Nve),l.h}(t),s=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n,o=Array.isArray(i)?new ImageData(new Uint8ClampedArray(i),1,1):i;o1(a,r,!0,()=>{var l=a.g;l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,e),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,a.j),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,s),l.activeTexture(l.TEXTURE2),l.bindTexture(l.TEXTURE_2D,a.B),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,o),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),r.bindTexture(r.TEXTURE_2D,null),(l=a.g).activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,null),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,null),l.activeTexture(l.TEXTURE2),l.bindTexture(l.TEXTURE_2D,null)})}var la=class{constructor(t,e){typeof CanvasRenderingContext2D<"u"&&t instanceof CanvasRenderingContext2D||t instanceof OffscreenCanvasRenderingContext2D?(this.l=t,this.j=e):this.j=t}wa(t,e){if(t){var n=H0(this);e=KM(e),n.save();var i=n.canvas,r=0;for(const a of t)n.fillStyle=Gl(e.fillColor,{index:r,from:a}),n.strokeStyle=Gl(e.color,{index:r,from:a}),n.lineWidth=Gl(e.lineWidth,{index:r,from:a}),(t=new Path2D).arc(a.x*i.width,a.y*i.height,Gl(e.radius,{index:r,from:a}),0,2*Math.PI),n.fill(t),n.stroke(t),++r;n.restore()}}va(t,e,n){if(t&&e){var i=H0(this);n=KM(n),i.save();var r=i.canvas,a=0;for(const s of e){i.beginPath(),e=t[s.start];const o=t[s.end];e&&o&&(i.strokeStyle=Gl(n.color,{index:a,from:e,to:o}),i.lineWidth=Gl(n.lineWidth,{index:a,from:e,to:o}),i.moveTo(e.x*r.width,e.y*r.height),i.lineTo(o.x*r.width,o.y*r.height)),++a,i.stroke()}i.restore()}}sa(t,e){const n=H0(this);e=KM(e),n.save(),n.beginPath(),n.lineWidth=Gl(e.lineWidth,{}),n.strokeStyle=Gl(e.color,{}),n.fillStyle=Gl(e.fillColor,{}),n.moveTo(t.originX,t.originY),n.lineTo(t.originX+t.width,t.originY),n.lineTo(t.originX+t.width,t.originY+t.height),n.lineTo(t.originX,t.originY+t.height),n.lineTo(t.originX,t.originY),n.stroke(),n.fill(),n.restore()}ta(t,e,n=[0,0,0,255]){this.l?function(i,r,a,s){const o=bv(i);KP(i,r,l=>{QP(i,l,a,s),(l=H0(i)).drawImage(o.canvas,0,0,l.canvas.width,l.canvas.height)})}(this,t,n,e):QP(this,t.N(),n,e)}ua(t,e,n){this.l?function(i,r,a,s){const o=bv(i);KP(i,r,l=>{JP(i,l,a,s),(l=H0(i)).drawImage(o.canvas,0,0,l.canvas.width,l.canvas.height)})}(this,t,e,n):JP(this,t.N(),e,n)}close(){var t,e,n;(t=this.g)==null||t.close(),this.g=void 0,(e=this.h)==null||e.close(),this.h=void 0,(n=this.m)==null||n.close(),this.m=void 0}};function Jo(t,e){switch(e){case 0:return t.g.find(n=>n instanceof ImageData);case 1:return t.g.find(n=>typeof ImageBitmap<"u"&&n instanceof ImageBitmap);case 2:return t.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${e}`)}}function nk(t){var e=Jo(t,0);if(!e){e=dm(t);const n=bS(t),i=new Uint8Array(t.width*t.height*4);xS(n,e,I_(t)),e.readPixels(0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,i),HR(n),e=new ImageData(new Uint8ClampedArray(i.buffer),t.width,t.height),t.g.push(e)}return e}function I_(t){let e=Jo(t,2);if(!e){const n=dm(t);e=z_(t);const i=Jo(t,1)||nk(t);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i),K0(t)}return e}function dm(t){if(!t.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return t.h||(t.h=va(t.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),t.h}function bS(t){return t.l||(t.l=new Gm),t.l}function z_(t){const e=dm(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=Jo(t,2);return n||(n=Wu(bS(t),e),t.g.push(n),t.m=!0),e.bindTexture(e.TEXTURE_2D,n),n}function K0(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}function e8(t){const e=dm(t);return o1(bS(t),e,!0,()=>function(n,i){const r=n.canvas;if(r.width===n.width&&r.height===n.height)return i();const a=r.width,s=r.height;return r.width=n.width,r.height=n.height,n=i(),r.width=a,r.height=s,n}(t,()=>{if(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),!(t.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return t.canvas.transferToImageBitmap()}))}la.prototype.close=la.prototype.close,la.prototype.drawConfidenceMask=la.prototype.ua,la.prototype.drawCategoryMask=la.prototype.ta,la.prototype.drawBoundingBox=la.prototype.sa,la.prototype.drawConnectors=la.prototype.va,la.prototype.drawLandmarks=la.prototype.wa,la.lerp=function(t,e,n,i,r){return $P(i*(1-(t-e)/(n-e))+r*(1-(n-t)/(n-e)),i,r)},la.clamp=$P;var Mr=class{constructor(t,e,n,i,r,a,s){this.g=t,this.j=e,this.m=n,this.canvas=i,this.l=r,this.width=a,this.height=s,(this.j||this.m)&&--t8===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ca(){return!!Jo(this,0)}ka(){return!!Jo(this,1)}R(){return!!Jo(this,2)}Aa(){return nk(this)}za(){var t=Jo(this,1);return t||(I_(this),z_(this),t=e8(this),K0(this),this.g.push(t),this.j=!0),t}N(){return I_(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof ImageData)n=new ImageData(e.data,this.width,this.height);else if(e instanceof WebGLTexture){const i=dm(this),r=bS(this);i.activeTexture(i.TEXTURE1),n=Wu(r,i),i.bindTexture(i.TEXTURE_2D,n),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null),xS(r,i,n),o1(r,i,!1,()=>{z_(this),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),K0(this)}),HR(r),K0(this)}else{if(!(e instanceof ImageBitmap))throw Error(`Type is not supported: ${e}`);I_(this),z_(this),n=e8(this),K0(this)}t.push(n)}return new Mr(t,this.ka(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Jo(this,1).close(),this.m&&dm(this).deleteTexture(Jo(this,2)),t8=-1}};Mr.prototype.close=Mr.prototype.close,Mr.prototype.clone=Mr.prototype.clone,Mr.prototype.getAsWebGLTexture=Mr.prototype.N,Mr.prototype.getAsImageBitmap=Mr.prototype.za,Mr.prototype.getAsImageData=Mr.prototype.Aa,Mr.prototype.hasWebGLTexture=Mr.prototype.R,Mr.prototype.hasImageBitmap=Mr.prototype.ka,Mr.prototype.hasImageData=Mr.prototype.Ca;var t8=250;function Vo(...t){return t.map(([e,n])=>({start:e,end:n}))}const Lve=function(t){return class extends t{Ha(){this.i._registerModelResourcesGraphService()}}}((n8=class{constructor(t,e){this.l=!0,this.i=t,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",e!==void 0?this.i.canvas=e:KG()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(".pbtxt")||t.endsWith(".textproto")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph(new TextEncoder().encode(t),!1)}setGraph(t,e){const n=t.length,i=this.i._malloc(n);this.i.HEAPU8.set(t,i),e?this.i._changeBinaryGraph(n,i):this.i._changeTextGraph(n,i),this.i._free(i)}configureAudio(t,e,n,i,r){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Pt(this,i||"input_audio",a=>{Pt(this,r=r||"audio_header",s=>{this.i._configureAudio(a,s,t,e??0,n)})})}setAutoResizeCanvas(t){this.l=t}setAutoRenderToScreen(t){this.i._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.i.gpuOriginForWebTexturesIsBottomLeft=t}ca(t){$o(this,"__graph_config__",e=>{t(e)}),Pt(this,"__graph_config__",e=>{this.i._getGraphConfig(e,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(t){this.i.errorListener=t}attachEmptyPacketListener(t,e){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[t]=e}addAudioToStream(t,e,n){this.addAudioToStreamWithShape(t,0,0,e,n)}addAudioToStreamWithShape(t,e,n,i,r){const a=4*t.length;this.h!==a&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(a),this.h=a),this.i.HEAPF32.set(t,this.g/4),Pt(this,i,s=>{this.i._addAudioToInputStream(this.g,e,n,s,r)})}addGpuBufferToStream(t,e,n){Pt(this,e,i=>{const[r,a]=jP(this,t,i);this.i._addBoundTextureToStream(i,r,a,n)})}addBoolToStream(t,e,n){Pt(this,e,i=>{this.i._addBoolToInputStream(t,i,n)})}addDoubleToStream(t,e,n){Pt(this,e,i=>{this.i._addDoubleToInputStream(t,i,n)})}addFloatToStream(t,e,n){Pt(this,e,i=>{this.i._addFloatToInputStream(t,i,n)})}addIntToStream(t,e,n){Pt(this,e,i=>{this.i._addIntToInputStream(t,i,n)})}addUintToStream(t,e,n){Pt(this,e,i=>{this.i._addUintToInputStream(t,i,n)})}addStringToStream(t,e,n){Pt(this,e,i=>{Pt(this,t,r=>{this.i._addStringToInputStream(r,i,n)})})}addStringRecordToStream(t,e,n){Pt(this,e,i=>{XP(this,Object.keys(t),r=>{XP(this,Object.values(t),a=>{this.i._addFlatHashMapToInputStream(r,a,Object.keys(t).length,i,n)})})})}addProtoToStream(t,e,n,i){Pt(this,n,r=>{Pt(this,e,a=>{const s=this.i._malloc(t.length);this.i.HEAPU8.set(t,s),this.i._addProtoToInputStream(s,t.length,a,r,i),this.i._free(s)})})}addEmptyPacketToStream(t,e){Pt(this,t,n=>{this.i._addEmptyPacketToInputStream(n,e)})}addBoolVectorToStream(t,e,n){Pt(this,e,i=>{const r=this.i._allocateBoolVector(t.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const a of t)this.i._addBoolVectorEntry(r,a);this.i._addBoolVectorToInputStream(r,i,n)})}addDoubleVectorToStream(t,e,n){Pt(this,e,i=>{const r=this.i._allocateDoubleVector(t.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const a of t)this.i._addDoubleVectorEntry(r,a);this.i._addDoubleVectorToInputStream(r,i,n)})}addFloatVectorToStream(t,e,n){Pt(this,e,i=>{const r=this.i._allocateFloatVector(t.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const a of t)this.i._addFloatVectorEntry(r,a);this.i._addFloatVectorToInputStream(r,i,n)})}addIntVectorToStream(t,e,n){Pt(this,e,i=>{const r=this.i._allocateIntVector(t.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const a of t)this.i._addIntVectorEntry(r,a);this.i._addIntVectorToInputStream(r,i,n)})}addUintVectorToStream(t,e,n){Pt(this,e,i=>{const r=this.i._allocateUintVector(t.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const a of t)this.i._addUintVectorEntry(r,a);this.i._addUintVectorToInputStream(r,i,n)})}addStringVectorToStream(t,e,n){Pt(this,e,i=>{const r=this.i._allocateStringVector(t.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const a of t)Pt(this,a,s=>{this.i._addStringVectorEntry(r,s)});this.i._addStringVectorToInputStream(r,i,n)})}addBoolToInputSidePacket(t,e){Pt(this,e,n=>{this.i._addBoolToInputSidePacket(t,n)})}addDoubleToInputSidePacket(t,e){Pt(this,e,n=>{this.i._addDoubleToInputSidePacket(t,n)})}addFloatToInputSidePacket(t,e){Pt(this,e,n=>{this.i._addFloatToInputSidePacket(t,n)})}addIntToInputSidePacket(t,e){Pt(this,e,n=>{this.i._addIntToInputSidePacket(t,n)})}addUintToInputSidePacket(t,e){Pt(this,e,n=>{this.i._addUintToInputSidePacket(t,n)})}addStringToInputSidePacket(t,e){Pt(this,e,n=>{Pt(this,t,i=>{this.i._addStringToInputSidePacket(i,n)})})}addProtoToInputSidePacket(t,e,n){Pt(this,n,i=>{Pt(this,e,r=>{const a=this.i._malloc(t.length);this.i.HEAPU8.set(t,a),this.i._addProtoToInputSidePacket(a,t.length,r,i),this.i._free(a)})})}addBoolVectorToInputSidePacket(t,e){Pt(this,e,n=>{const i=this.i._allocateBoolVector(t.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const r of t)this.i._addBoolVectorEntry(i,r);this.i._addBoolVectorToInputSidePacket(i,n)})}addDoubleVectorToInputSidePacket(t,e){Pt(this,e,n=>{const i=this.i._allocateDoubleVector(t.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const r of t)this.i._addDoubleVectorEntry(i,r);this.i._addDoubleVectorToInputSidePacket(i,n)})}addFloatVectorToInputSidePacket(t,e){Pt(this,e,n=>{const i=this.i._allocateFloatVector(t.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const r of t)this.i._addFloatVectorEntry(i,r);this.i._addFloatVectorToInputSidePacket(i,n)})}addIntVectorToInputSidePacket(t,e){Pt(this,e,n=>{const i=this.i._allocateIntVector(t.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const r of t)this.i._addIntVectorEntry(i,r);this.i._addIntVectorToInputSidePacket(i,n)})}addUintVectorToInputSidePacket(t,e){Pt(this,e,n=>{const i=this.i._allocateUintVector(t.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const r of t)this.i._addUintVectorEntry(i,r);this.i._addUintVectorToInputSidePacket(i,n)})}addStringVectorToInputSidePacket(t,e){Pt(this,e,n=>{const i=this.i._allocateStringVector(t.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const r of t)Pt(this,r,a=>{this.i._addStringVectorEntry(i,a)});this.i._addStringVectorToInputSidePacket(i,n)})}attachBoolListener(t,e){$o(this,t,e),Pt(this,t,n=>{this.i._attachBoolListener(n)})}attachBoolVectorListener(t,e){Kc(this,t,e),Pt(this,t,n=>{this.i._attachBoolVectorListener(n)})}attachIntListener(t,e){$o(this,t,e),Pt(this,t,n=>{this.i._attachIntListener(n)})}attachIntVectorListener(t,e){Kc(this,t,e),Pt(this,t,n=>{this.i._attachIntVectorListener(n)})}attachUintListener(t,e){$o(this,t,e),Pt(this,t,n=>{this.i._attachUintListener(n)})}attachUintVectorListener(t,e){Kc(this,t,e),Pt(this,t,n=>{this.i._attachUintVectorListener(n)})}attachDoubleListener(t,e){$o(this,t,e),Pt(this,t,n=>{this.i._attachDoubleListener(n)})}attachDoubleVectorListener(t,e){Kc(this,t,e),Pt(this,t,n=>{this.i._attachDoubleVectorListener(n)})}attachFloatListener(t,e){$o(this,t,e),Pt(this,t,n=>{this.i._attachFloatListener(n)})}attachFloatVectorListener(t,e){Kc(this,t,e),Pt(this,t,n=>{this.i._attachFloatVectorListener(n)})}attachStringListener(t,e){$o(this,t,e),Pt(this,t,n=>{this.i._attachStringListener(n)})}attachStringVectorListener(t,e){Kc(this,t,e),Pt(this,t,n=>{this.i._attachStringVectorListener(n)})}attachProtoListener(t,e,n){$o(this,t,e),Pt(this,t,i=>{this.i._attachProtoListener(i,n||!1)})}attachProtoVectorListener(t,e,n){Kc(this,t,e),Pt(this,t,i=>{this.i._attachProtoVectorListener(i,n||!1)})}attachAudioListener(t,e,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),$o(this,t,(i,r)=>{i=new Float32Array(i.buffer,i.byteOffset,i.length/4),e(i,r)}),Pt(this,t,i=>{this.i._attachAudioListener(i,n||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends n8{get ea(){return this.i}oa(t,e,n){Pt(this,e,i=>{const[r,a]=jP(this,t,i);this.ea._addBoundTextureAsImageToStream(i,r,a,n)})}V(t,e){$o(this,t,e),Pt(this,t,n=>{this.ea._attachImageListener(n)})}ba(t,e){Kc(this,t,e),Pt(this,t,n=>{this.ea._attachImageVectorListener(n)})}}));var n8,ho=class extends Lve{};async function vn(t,e,n){return async function(i,r,a,s){return Rve(i,r,a,s)}(t,n.canvas??(KG()?void 0:document.createElement("canvas")),e,n)}function ik(t,e,n,i){if(t.U){const a=new AG;if(n!=null&&n.regionOfInterest){if(!t.na)throw Error("This task doesn't support region-of-interest.");var r=n.regionOfInterest;if(r.left>=r.right||r.top>=r.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(r.left<0||r.top<0||r.right>1||r.bottom>1)throw Error("Expected RectF values to be in [0,1].");Ot(a,1,(r.left+r.right)/2),Ot(a,2,(r.top+r.bottom)/2),Ot(a,4,r.right-r.left),Ot(a,3,r.bottom-r.top)}else Ot(a,1,.5),Ot(a,2,.5),Ot(a,4,1),Ot(a,3,1);if(n!=null&&n.rotationDegrees){if((n==null?void 0:n.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(Ot(a,5,-Math.PI*n.rotationDegrees/180),(n==null?void 0:n.rotationDegrees)%180!=0){const[s,o]=QG(e);n=Yi(a,3)*o/s,r=Yi(a,4)*s/o,Ot(a,4,n),Ot(a,3,r)}}t.g.addProtoToStream(a.g(),"mediapipe.NormalizedRect",t.U,i)}t.g.oa(e,t.Z,i??performance.now()),t.finishProcessing()}function po(t,e,n){var i;if((i=t.baseOptions)!=null&&i.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");ik(t,e,n,t.B+1)}function _l(t,e,n,i){var r;if(!((r=t.baseOptions)!=null&&r.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");ik(t,e,n,i)}function pm(t,e,n,i){var r=e.data;const a=e.width,s=a*(e=e.height);if((r instanceof Uint8Array||r instanceof Float32Array)&&r.length!==s)throw Error("Unsupported channel count: "+r.length/s);return t=new pr([r],n,!1,t.g.i.canvas,t.P,a,e),i?t.clone():t}var Ha=class extends cw{constructor(t,e,n,i){super(t),this.g=t,this.Z=e,this.U=n,this.na=i,this.P=new Gm}l(t,e=!0){if("runningMode"in t&&_v(this.baseOptions,2,!!t.runningMode&&t.runningMode!=="IMAGE"),t.canvas!==void 0&&this.g.i.canvas!==t.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(t,e)}close(){this.P.close(),super.close()}};Ha.prototype.close=Ha.prototype.close;var js=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect_in",!1),this.j={detections:[]},Bt(t=this.h=new gS,0,1,e=new Ti),Ot(this.h,2,.5),Ot(this.h,3,.3)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){return"minDetectionConfidence"in t&&Ot(this.h,2,t.minDetectionConfidence??.5),"minSuppressionThreshold"in t&&Ot(this.h,3,t.minSuppressionThreshold??.3),this.l(t)}D(t,e){return this.j={detections:[]},po(this,t,e),this.j}F(t,e,n){return this.j={detections:[]},_l(this,t,n,e),this.j}m(){var t=new ka;mi(t,"image_in"),mi(t,"norm_rect_in"),Rn(t,"detections");const e=new As;Bo(e,mve,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),oi(n,"IMAGE:image_in"),oi(n,"NORM_RECT:norm_rect_in"),yn(n,"DETECTIONS:detections"),n.o(e),Ds(t,n),this.g.attachProtoVectorListener("detections",(i,r)=>{for(const a of i)i=EG(a),this.j.detections.push(ZG(i));St(this,r)}),this.g.attachEmptyPacketListener("detections",i=>{St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};js.prototype.detectForVideo=js.prototype.F,js.prototype.detect=js.prototype.D,js.prototype.setOptions=js.prototype.o,js.createFromModelPath=async function(t,e){return vn(js,t,{baseOptions:{modelAssetPath:e}})},js.createFromModelBuffer=function(t,e){return vn(js,t,{baseOptions:{modelAssetBuffer:e}})},js.createFromOptions=function(t,e){return vn(js,t,e)};var GR=Vo([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),kR=Vo([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),jR=Vo([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),rk=Vo([474,475],[475,476],[476,477],[477,474]),XR=Vo([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),WR=Vo([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),ak=Vo([469,470],[470,471],[471,472],[472,469]),YR=Vo([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),sk=[...GR,...kR,...jR,...XR,...WR,...YR],ok=Vo([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function i8(t){t.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var Ii=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,Bt(t=this.h=new OG,0,1,e=new Ti),this.v=new DG,Bt(this.h,0,3,this.v),this.s=new gS,Bt(this.h,0,2,this.s),pl(this.s,4,1),Ot(this.s,2,.5),Ot(this.v,2,.5),Ot(this.h,4,.5)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){return"numFaces"in t&&pl(this.s,4,t.numFaces??1),"minFaceDetectionConfidence"in t&&Ot(this.s,2,t.minFaceDetectionConfidence??.5),"minTrackingConfidence"in t&&Ot(this.h,4,t.minTrackingConfidence??.5),"minFacePresenceConfidence"in t&&Ot(this.v,2,t.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in t&&(this.outputFacialTransformationMatrixes=!!t.outputFacialTransformationMatrixes),this.l(t)}D(t,e){return i8(this),po(this,t,e),this.j}F(t,e,n){return i8(this),_l(this,t,n,e),this.j}m(){var t=new ka;mi(t,"image_in"),mi(t,"norm_rect"),Rn(t,"face_landmarks");const e=new As;Bo(e,vve,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),oi(n,"IMAGE:image_in"),oi(n,"NORM_RECT:norm_rect"),yn(n,"NORM_LANDMARKS:face_landmarks"),n.o(e),Ds(t,n),this.g.attachProtoVectorListener("face_landmarks",(i,r)=>{for(const a of i)i=s1(a),this.j.faceLandmarks.push(vS(i));St(this,r)}),this.g.attachEmptyPacketListener("face_landmarks",i=>{St(this,i)}),this.outputFaceBlendshapes&&(Rn(t,"blendshapes"),yn(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(i,r)=>{if(this.outputFaceBlendshapes)for(const a of i)i=mS(a),this.j.faceBlendshapes.push(BR(i.g()??[]));St(this,r)}),this.g.attachEmptyPacketListener("blendshapes",i=>{St(this,i)})),this.outputFacialTransformationMatrixes&&(Rn(t,"face_geometry"),yn(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(i,r)=>{if(this.outputFacialTransformationMatrixes)for(const a of i)(i=Mn(gve(a),ove,2))&&this.j.facialTransformationMatrixes.push({rows:ro(i,1)??0??0,columns:ro(i,2)??0??0,data:ih(i,3,nf,nh()).slice()??[]});St(this,r)}),this.g.attachEmptyPacketListener("face_geometry",i=>{St(this,i)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ii.prototype.detectForVideo=Ii.prototype.F,Ii.prototype.detect=Ii.prototype.D,Ii.prototype.setOptions=Ii.prototype.o,Ii.createFromModelPath=function(t,e){return vn(Ii,t,{baseOptions:{modelAssetPath:e}})},Ii.createFromModelBuffer=function(t,e){return vn(Ii,t,{baseOptions:{modelAssetBuffer:e}})},Ii.createFromOptions=function(t,e){return vn(Ii,t,e)},Ii.FACE_LANDMARKS_LIPS=GR,Ii.FACE_LANDMARKS_LEFT_EYE=kR,Ii.FACE_LANDMARKS_LEFT_EYEBROW=jR,Ii.FACE_LANDMARKS_LEFT_IRIS=rk,Ii.FACE_LANDMARKS_RIGHT_EYE=XR,Ii.FACE_LANDMARKS_RIGHT_EYEBROW=WR,Ii.FACE_LANDMARKS_RIGHT_IRIS=ak,Ii.FACE_LANDMARKS_FACE_OVAL=YR,Ii.FACE_LANDMARKS_CONTOURS=sk,Ii.FACE_LANDMARKS_TESSELATION=ok;var Ko=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect",!0),Bt(t=this.j=new UG,0,1,e=new Ti)}get baseOptions(){return Mn(this.j,Ti,1)}set baseOptions(t){Bt(this.j,0,1,t)}o(t){return super.l(t)}Ka(t,e,n){const i=typeof e!="function"?e:{};if(this.h=typeof e=="function"?e:n,po(this,t,i??{}),!this.h)return this.s}m(){var t=new ka;mi(t,"image_in"),mi(t,"norm_rect"),Rn(t,"stylized_image");const e=new As;Bo(e,yve,this.j);const n=new ya;Rs(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),oi(n,"IMAGE:image_in"),oi(n,"NORM_RECT:norm_rect"),yn(n,"STYLIZED_IMAGE:stylized_image"),n.o(e),Ds(t,n),this.g.V("stylized_image",(i,r)=>{var a=!this.h,s=i.data,o=i.width;const l=o*(i=i.height);if(s instanceof Uint8Array)if(s.length===3*l){const f=new Uint8ClampedArray(4*l);for(let h=0;h<l;++h)f[4*h]=s[3*h],f[4*h+1]=s[3*h+1],f[4*h+2]=s[3*h+2],f[4*h+3]=255;s=new ImageData(f,o,i)}else{if(s.length!==4*l)throw Error("Unsupported channel count: "+s.length/l);s=new ImageData(new Uint8ClampedArray(s.buffer,s.byteOffset,s.length),o,i)}else if(!(s instanceof WebGLTexture))throw Error(`Unsupported format: ${s.constructor.name}`);o=new Mr([s],!1,!1,this.g.i.canvas,this.P,o,i),this.s=a=a?o.clone():o,this.h&&this.h(a),St(this,r)}),this.g.attachEmptyPacketListener("stylized_image",i=>{this.s=null,this.h&&this.h(null),St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ko.prototype.stylize=Ko.prototype.Ka,Ko.prototype.setOptions=Ko.prototype.o,Ko.createFromModelPath=function(t,e){return vn(Ko,t,{baseOptions:{modelAssetPath:e}})},Ko.createFromModelBuffer=function(t,e){return vn(Ko,t,{baseOptions:{modelAssetBuffer:e}})},Ko.createFromOptions=function(t,e){return vn(Ko,t,e)};var qR=Vo([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function r8(t){t.gestures=[],t.landmarks=[],t.worldLandmarks=[],t.handedness=[]}function a8(t){return t.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:t.gestures,landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handedness:t.handedness,handednesses:t.handedness}}function s8(t,e=!0){const n=[];for(const r of t){var i=mS(r);t=[];for(const a of i.g())i=e&&ro(a,1)!=null?ro(a,1)??0:-1,t.push({score:Yi(a,2)??0,index:i,categoryName:co(a,3)??""??"",displayName:co(a,4)??""??""});n.push(t)}return n}var ua=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Bt(t=this.j=new IG,0,1,e=new Ti),this.s=new LR,Bt(this.j,0,2,this.s),this.C=new UR,Bt(this.s,0,3,this.C),this.v=new PG,Bt(this.s,0,2,this.v),this.h=new _ve,Bt(this.j,0,3,this.h),Ot(this.v,2,.5),Ot(this.s,4,.5),Ot(this.C,2,.5)}get baseOptions(){return Mn(this.j,Ti,1)}set baseOptions(t){Bt(this.j,0,1,t)}o(t){var r,a,s,o;if(pl(this.v,3,t.numHands??1),"minHandDetectionConfidence"in t&&Ot(this.v,2,t.minHandDetectionConfidence??.5),"minTrackingConfidence"in t&&Ot(this.s,4,t.minTrackingConfidence??.5),"minHandPresenceConfidence"in t&&Ot(this.C,2,t.minHandPresenceConfidence??.5),t.cannedGesturesClassifierOptions){var e=new Yd,n=e,i=lw(t.cannedGesturesClassifierOptions,(r=Mn(this.h,Yd,3))==null?void 0:r.h());Bt(n,0,2,i),Bt(this.h,0,3,e)}else t.cannedGesturesClassifierOptions===void 0&&((a=Mn(this.h,Yd,3))==null||a.g());return t.customGesturesClassifierOptions?(Bt(n=e=new Yd,0,2,i=lw(t.customGesturesClassifierOptions,(s=Mn(this.h,Yd,4))==null?void 0:s.h())),Bt(this.h,0,4,e)):t.customGesturesClassifierOptions===void 0&&((o=Mn(this.h,Yd,4))==null||o.g()),this.l(t)}Fa(t,e){return r8(this),po(this,t,e),a8(this)}Ga(t,e,n){return r8(this),_l(this,t,n,e),a8(this)}m(){var t=new ka;mi(t,"image_in"),mi(t,"norm_rect"),Rn(t,"hand_gestures"),Rn(t,"hand_landmarks"),Rn(t,"world_hand_landmarks"),Rn(t,"handedness");const e=new As;Bo(e,xve,this.j);const n=new ya;Rs(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),oi(n,"IMAGE:image_in"),oi(n,"NORM_RECT:norm_rect"),yn(n,"HAND_GESTURES:hand_gestures"),yn(n,"LANDMARKS:hand_landmarks"),yn(n,"WORLD_LANDMARKS:world_hand_landmarks"),yn(n,"HANDEDNESS:handedness"),n.o(e),Ds(t,n),this.g.attachProtoVectorListener("hand_landmarks",(i,r)=>{for(const a of i){i=s1(a);const s=[];for(const o of yc(i,TG,1))s.push({x:Yi(o,1)??0,y:Yi(o,2)??0,z:Yi(o,3)??0,visibility:Yi(o,4)??0});this.landmarks.push(s)}St(this,r)}),this.g.attachEmptyPacketListener("hand_landmarks",i=>{St(this,i)}),this.g.attachProtoVectorListener("world_hand_landmarks",(i,r)=>{for(const a of i){i=Op(a);const s=[];for(const o of yc(i,MG,1))s.push({x:Yi(o,1)??0,y:Yi(o,2)??0,z:Yi(o,3)??0,visibility:Yi(o,4)??0});this.worldLandmarks.push(s)}St(this,r)}),this.g.attachEmptyPacketListener("world_hand_landmarks",i=>{St(this,i)}),this.g.attachProtoVectorListener("hand_gestures",(i,r)=>{this.gestures.push(...s8(i,!1)),St(this,r)}),this.g.attachEmptyPacketListener("hand_gestures",i=>{St(this,i)}),this.g.attachProtoVectorListener("handedness",(i,r)=>{this.handedness.push(...s8(i)),St(this,r)}),this.g.attachEmptyPacketListener("handedness",i=>{St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};function o8(t){return{landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handednesses:t.handedness,handedness:t.handedness}}ua.prototype.recognizeForVideo=ua.prototype.Ga,ua.prototype.recognize=ua.prototype.Fa,ua.prototype.setOptions=ua.prototype.o,ua.createFromModelPath=function(t,e){return vn(ua,t,{baseOptions:{modelAssetPath:e}})},ua.createFromModelBuffer=function(t,e){return vn(ua,t,{baseOptions:{modelAssetBuffer:e}})},ua.createFromOptions=function(t,e){return vn(ua,t,e)},ua.HAND_CONNECTIONS=qR;var ns=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Bt(t=this.h=new LR,0,1,e=new Ti),this.s=new UR,Bt(this.h,0,3,this.s),this.j=new PG,Bt(this.h,0,2,this.j),pl(this.j,3,1),Ot(this.j,2,.5),Ot(this.s,2,.5),Ot(this.h,4,.5)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){return"numHands"in t&&pl(this.j,3,t.numHands??1),"minHandDetectionConfidence"in t&&Ot(this.j,2,t.minHandDetectionConfidence??.5),"minTrackingConfidence"in t&&Ot(this.h,4,t.minTrackingConfidence??.5),"minHandPresenceConfidence"in t&&Ot(this.s,2,t.minHandPresenceConfidence??.5),this.l(t)}D(t,e){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],po(this,t,e),o8(this)}F(t,e,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],_l(this,t,n,e),o8(this)}m(){var t=new ka;mi(t,"image_in"),mi(t,"norm_rect"),Rn(t,"hand_landmarks"),Rn(t,"world_hand_landmarks"),Rn(t,"handedness");const e=new As;Bo(e,bve,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),oi(n,"IMAGE:image_in"),oi(n,"NORM_RECT:norm_rect"),yn(n,"LANDMARKS:hand_landmarks"),yn(n,"WORLD_LANDMARKS:world_hand_landmarks"),yn(n,"HANDEDNESS:handedness"),n.o(e),Ds(t,n),this.g.attachProtoVectorListener("hand_landmarks",(i,r)=>{for(const a of i)i=s1(a),this.landmarks.push(vS(i));St(this,r)}),this.g.attachEmptyPacketListener("hand_landmarks",i=>{St(this,i)}),this.g.attachProtoVectorListener("world_hand_landmarks",(i,r)=>{for(const a of i)i=Op(a),this.worldLandmarks.push(Rg(i));St(this,r)}),this.g.attachEmptyPacketListener("world_hand_landmarks",i=>{St(this,i)}),this.g.attachProtoVectorListener("handedness",(i,r)=>{var a=this.handedness,s=a.push;const o=[];for(const l of i){i=mS(l);const f=[];for(const h of i.g())f.push({score:Yi(h,2)??0,index:ro(h,1)??0??-1,categoryName:co(h,3)??""??"",displayName:co(h,4)??""??""});o.push(f)}s.call(a,...o),St(this,r)}),this.g.attachEmptyPacketListener("handedness",i=>{St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};ns.prototype.detectForVideo=ns.prototype.F,ns.prototype.detect=ns.prototype.D,ns.prototype.setOptions=ns.prototype.o,ns.createFromModelPath=function(t,e){return vn(ns,t,{baseOptions:{modelAssetPath:e}})},ns.createFromModelBuffer=function(t,e){return vn(ns,t,{baseOptions:{modelAssetBuffer:e}})},ns.createFromOptions=function(t,e){return vn(ns,t,e)},ns.HAND_CONNECTIONS=qR;var lk=Vo([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function l8(t){t.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function c8(t){try{if(!t.C)return t.h;t.C(t.h)}finally{_S(t)}}function c_(t,e){t=s1(t),e.push(vS(t))}var yi=class extends Ha{constructor(t,e){super(new ho(t,e),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,Bt(t=this.j=new VG,0,1,e=new Ti),this.K=new UR,Bt(this.j,0,2,this.K),this.Y=new Sve,Bt(this.j,0,3,this.Y),this.s=new gS,Bt(this.j,0,4,this.s),this.H=new DG,Bt(this.j,0,5,this.H),this.v=new FG,Bt(this.j,0,6,this.v),this.L=new HG,Bt(this.j,0,7,this.L),Ot(this.s,2,.5),Ot(this.s,3,.3),Ot(this.H,2,.5),Ot(this.v,2,.5),Ot(this.v,3,.3),Ot(this.L,2,.5),Ot(this.K,2,.5)}get baseOptions(){return Mn(this.j,Ti,1)}set baseOptions(t){Bt(this.j,0,1,t)}o(t){return"minFaceDetectionConfidence"in t&&Ot(this.s,2,t.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in t&&Ot(this.s,3,t.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in t&&Ot(this.H,2,t.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),"minPoseDetectionConfidence"in t&&Ot(this.v,2,t.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in t&&Ot(this.v,3,t.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in t&&Ot(this.L,2,t.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in t&&(this.outputPoseSegmentationMasks=!!t.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in t&&Ot(this.K,2,t.minHandLandmarksConfidence??.5),this.l(t)}D(t,e,n){const i=typeof e!="function"?e:{};return this.C=typeof e=="function"?e:n,l8(this),po(this,t,i),c8(this)}F(t,e,n,i){const r=typeof n!="function"?n:{};return this.C=typeof n=="function"?n:i,l8(this),_l(this,t,r,e),c8(this)}m(){var t=new ka;mi(t,"input_frames_image"),Rn(t,"pose_landmarks"),Rn(t,"pose_world_landmarks"),Rn(t,"face_landmarks"),Rn(t,"left_hand_landmarks"),Rn(t,"left_hand_world_landmarks"),Rn(t,"right_hand_landmarks"),Rn(t,"right_hand_world_landmarks");const e=new As,n=new CP;nw(n,1,Im("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(r,a){if(a!=null)if(Array.isArray(a))ii(r,2,nS(a,lR,void 0,void 0,!1));else{if(!(typeof a=="string"||a instanceof lc||Rh(a)))throw Error("invalid value in Any.value field: "+a+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");nw(r,2,eR(a,!1),Dh())}}(n,this.j.g());const i=new ya;Rs(i,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),Ab(i,8,CP,n),oi(i,"IMAGE:input_frames_image"),yn(i,"POSE_LANDMARKS:pose_landmarks"),yn(i,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),yn(i,"FACE_LANDMARKS:face_landmarks"),yn(i,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),yn(i,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),yn(i,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),yn(i,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),i.o(e),Ds(t,i),yS(this,t),this.g.attachProtoListener("pose_landmarks",(r,a)=>{c_(r,this.h.poseLandmarks),St(this,a)}),this.g.attachEmptyPacketListener("pose_landmarks",r=>{St(this,r)}),this.g.attachProtoListener("pose_world_landmarks",(r,a)=>{var s=this.h.poseWorldLandmarks;r=Op(r),s.push(Rg(r)),St(this,a)}),this.g.attachEmptyPacketListener("pose_world_landmarks",r=>{St(this,r)}),this.outputPoseSegmentationMasks&&(yn(i,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),fm(this,"pose_segmentation_mask"),this.g.V("pose_segmentation_mask",(r,a)=>{this.h.poseSegmentationMasks=[pm(this,r,!0,!this.C)],St(this,a)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",r=>{this.h.poseSegmentationMasks=[],St(this,r)})),this.g.attachProtoListener("face_landmarks",(r,a)=>{c_(r,this.h.faceLandmarks),St(this,a)}),this.g.attachEmptyPacketListener("face_landmarks",r=>{St(this,r)}),this.outputFaceBlendshapes&&(Rn(t,"extra_blendshapes"),yn(i,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(r,a)=>{var s=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(r=mS(r),s.push(BR(r.g()??[]))),St(this,a)}),this.g.attachEmptyPacketListener("extra_blendshapes",r=>{St(this,r)})),this.g.attachProtoListener("left_hand_landmarks",(r,a)=>{c_(r,this.h.leftHandLandmarks),St(this,a)}),this.g.attachEmptyPacketListener("left_hand_landmarks",r=>{St(this,r)}),this.g.attachProtoListener("left_hand_world_landmarks",(r,a)=>{var s=this.h.leftHandWorldLandmarks;r=Op(r),s.push(Rg(r)),St(this,a)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",r=>{St(this,r)}),this.g.attachProtoListener("right_hand_landmarks",(r,a)=>{c_(r,this.h.rightHandLandmarks),St(this,a)}),this.g.attachEmptyPacketListener("right_hand_landmarks",r=>{St(this,r)}),this.g.attachProtoListener("right_hand_world_landmarks",(r,a)=>{var s=this.h.rightHandWorldLandmarks;r=Op(r),s.push(Rg(r)),St(this,a)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",r=>{St(this,r)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};yi.prototype.detectForVideo=yi.prototype.F,yi.prototype.detect=yi.prototype.D,yi.prototype.setOptions=yi.prototype.o,yi.createFromModelPath=function(t,e){return vn(yi,t,{baseOptions:{modelAssetPath:e}})},yi.createFromModelBuffer=function(t,e){return vn(yi,t,{baseOptions:{modelAssetBuffer:e}})},yi.createFromOptions=function(t,e){return vn(yi,t,e)},yi.HAND_CONNECTIONS=qR,yi.POSE_CONNECTIONS=lk,yi.FACE_LANDMARKS_LIPS=GR,yi.FACE_LANDMARKS_LEFT_EYE=kR,yi.FACE_LANDMARKS_LEFT_EYEBROW=jR,yi.FACE_LANDMARKS_LEFT_IRIS=rk,yi.FACE_LANDMARKS_RIGHT_EYE=XR,yi.FACE_LANDMARKS_RIGHT_EYEBROW=WR,yi.FACE_LANDMARKS_RIGHT_IRIS=ak,yi.FACE_LANDMARKS_FACE_OVAL=YR,yi.FACE_LANDMARKS_CONTOURS=sk,yi.FACE_LANDMARKS_TESSELATION=ok;var Xs=class extends Ha{constructor(t,e){super(new ho(t,e),"input_image","norm_rect",!0),this.j={classifications:[]},Bt(t=this.h=new GG,0,1,e=new Ti)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){return Bt(this.h,0,2,lw(t,Mn(this.h,DR,2))),this.l(t)}qa(t,e){return this.j={classifications:[]},po(this,t,e),this.j}ra(t,e,n){return this.j={classifications:[]},_l(this,t,n,e),this.j}m(){var t=new ka;mi(t,"input_image"),mi(t,"norm_rect"),Rn(t,"classifications");const e=new As;Bo(e,Eve,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),oi(n,"IMAGE:input_image"),oi(n,"NORM_RECT:norm_rect"),yn(n,"CLASSIFICATIONS:classifications"),n.o(e),Ds(t,n),this.g.attachProtoListener("classifications",(i,r)=>{this.j=function(a){const s={classifications:yc(a,cve,1).map(o=>{var l;return BR(((l=Mn(o,bG,4))==null?void 0:l.g())??[],ro(o,2)??0,co(o,3)??"")})};return JA(cm(a,2))!=null&&(s.timestampMs=JA(cm(a,2))??0),s}(uve(i)),St(this,r)}),this.g.attachEmptyPacketListener("classifications",i=>{St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Xs.prototype.classifyForVideo=Xs.prototype.ra,Xs.prototype.classify=Xs.prototype.qa,Xs.prototype.setOptions=Xs.prototype.o,Xs.createFromModelPath=function(t,e){return vn(Xs,t,{baseOptions:{modelAssetPath:e}})},Xs.createFromModelBuffer=function(t,e){return vn(Xs,t,{baseOptions:{modelAssetBuffer:e}})},Xs.createFromOptions=function(t,e){return vn(Xs,t,e)};var is=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect",!0),this.h=new kG,this.embeddings={embeddings:[]},Bt(t=this.h,0,1,e=new Ti)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){var e=this.h,n=Mn(this.h,zP,2);return n=n?n.clone():new zP,t.l2Normalize!==void 0?_v(n,1,t.l2Normalize):"l2Normalize"in t&&ii(n,1),t.quantize!==void 0?_v(n,2,t.quantize):"quantize"in t&&ii(n,2),Bt(e,0,2,n),this.l(t)}xa(t,e){return po(this,t,e),this.embeddings}ya(t,e,n){return _l(this,t,n,e),this.embeddings}m(){var t=new ka;mi(t,"image_in"),mi(t,"norm_rect"),Rn(t,"embeddings_out");const e=new As;Bo(e,Mve,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),oi(n,"IMAGE:image_in"),oi(n,"NORM_RECT:norm_rect"),yn(n,"EMBEDDINGS:embeddings_out"),n.o(e),Ds(t,n),this.g.attachProtoListener("embeddings_out",(i,r)=>{i=dve(i),this.embeddings=function(a){return{embeddings:yc(a,hve,1).map(s=>{var l,f;const o={headIndex:ro(s,3)??0??-1,headName:co(s,4)??""??""};if(VV(s,IP,XM(s,1))!==void 0)s=ih(s=Mn(s,IP,XM(s,1)),1,nf,nh()),o.floatEmbedding=s.slice();else{const h=new Uint8Array(0);o.quantizedEmbedding=((f=(l=Mn(s,fve,XM(s,2)))==null?void 0:l.ma())==null?void 0:f.h())??h}return o}),timestampMs:JA(cm(a,2))??0}}(i),St(this,r)}),this.g.attachEmptyPacketListener("embeddings_out",i=>{St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};is.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=GP(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");t=GP(VP(t.quantizedEmbedding),VP(e.quantizedEmbedding))}return t},is.prototype.embedForVideo=is.prototype.ya,is.prototype.embed=is.prototype.xa,is.prototype.setOptions=is.prototype.o,is.createFromModelPath=function(t,e){return vn(is,t,{baseOptions:{modelAssetPath:e}})},is.createFromModelBuffer=function(t,e){return vn(is,t,{baseOptions:{modelAssetBuffer:e}})},is.createFromOptions=function(t,e){return vn(is,t,e)};var hw=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){var t,e;(t=this.confidenceMasks)==null||t.forEach(n=>{n.close()}),(e=this.categoryMask)==null||e.close()}};function u8(t){t.categoryMask=void 0,t.confidenceMasks=void 0,t.qualityScores=void 0}function f8(t){try{const e=new hw(t.confidenceMasks,t.categoryMask,t.qualityScores);if(!t.j)return e;t.j(e)}finally{_S(t)}}hw.prototype.close=hw.prototype.close;var Ra=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new zR,this.v=new jG,Bt(this.h,0,3,this.v),Bt(t=this.h,0,1,e=new Ti)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){return t.displayNamesLocale!==void 0?ii(this.h,2,Im(t.displayNamesLocale)):"displayNamesLocale"in t&&ii(this.h,2),"outputCategoryMask"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),"outputConfidenceMasks"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}J(){(function(t){var n,i;const e=yc(t.ca(),ya,1).filter(r=>(co(r,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(t.s=[],e.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");e.length===1&&(((i=(n=Mn(e[0],As,7))==null?void 0:n.l())==null?void 0:i.g())??new Map).forEach((r,a)=>{t.s[Number(a)]=co(r,1)??""})})(this)}segment(t,e,n){const i=typeof e!="function"?e:{};return this.j=typeof e=="function"?e:n,u8(this),po(this,t,i),f8(this)}Ia(t,e,n,i){const r=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:i,u8(this),_l(this,t,r,e),f8(this)}Ba(){return this.s}m(){var t=new ka;mi(t,"image_in"),mi(t,"norm_rect");const e=new As;Bo(e,WG,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),oi(n,"IMAGE:image_in"),oi(n,"NORM_RECT:norm_rect"),n.o(e),Ds(t,n),yS(this,t),this.outputConfidenceMasks&&(Rn(t,"confidence_masks"),yn(n,"CONFIDENCE_MASKS:confidence_masks"),fm(this,"confidence_masks"),this.g.ba("confidence_masks",(i,r)=>{this.confidenceMasks=i.map(a=>pm(this,a,!0,!this.j)),St(this,r)}),this.g.attachEmptyPacketListener("confidence_masks",i=>{this.confidenceMasks=[],St(this,i)})),this.outputCategoryMask&&(Rn(t,"category_mask"),yn(n,"CATEGORY_MASK:category_mask"),fm(this,"category_mask"),this.g.V("category_mask",(i,r)=>{this.categoryMask=pm(this,i,!1,!this.j),St(this,r)}),this.g.attachEmptyPacketListener("category_mask",i=>{this.categoryMask=void 0,St(this,i)})),Rn(t,"quality_scores"),yn(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(i,r)=>{this.qualityScores=i,St(this,r)}),this.g.attachEmptyPacketListener("quality_scores",i=>{this.categoryMask=void 0,St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ra.prototype.getLabels=Ra.prototype.Ba,Ra.prototype.segmentForVideo=Ra.prototype.Ia,Ra.prototype.segment=Ra.prototype.segment,Ra.prototype.setOptions=Ra.prototype.o,Ra.createFromModelPath=function(t,e){return vn(Ra,t,{baseOptions:{modelAssetPath:e}})},Ra.createFromModelBuffer=function(t,e){return vn(Ra,t,{baseOptions:{modelAssetBuffer:e}})},Ra.createFromOptions=function(t,e){return vn(Ra,t,e)};var dw=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){var t,e;(t=this.confidenceMasks)==null||t.forEach(n=>{n.close()}),(e=this.categoryMask)==null||e.close()}};dw.prototype.close=dw.prototype.close;var Pve=class extends Rt{constructor(t){super(t)}},qd=[0,Vi,-2],Db=[0,Yl,-3,Si,Yl,-1],h8=[0,Db],d8=[0,Db,Vi,-1],QM=class extends Rt{constructor(t){super(t)}},p8=[0,Yl,-1,Si],Ive=class extends Rt{constructor(t){super(t)}},m8=class extends Rt{constructor(t){super(t)}},pw=[1,2,3,4,5,6,7,8,9,10,14,15],ck=class extends Rt{constructor(t){super(t)}};ck.prototype.g=pS([0,mr,[0,pw,Pn,Db,Pn,[0,Db,qd],Pn,h8,Pn,[0,h8,qd],Pn,p8,Pn,[0,Yl,-3,Si,bs],Pn,[0,Yl,-3,Si],Pn,[0,In,Yl,-2,Si,Vi,Si,-1,2,Yl,qd],Pn,d8,Pn,[0,d8,qd],Yl,qd,In,Pn,[0,Yl,-3,Si,qd,-1],Pn,[0,mr,p8]],In,[0,In,Vi,-1,Si]]);var Qo=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new zR,this.s=new jG,Bt(this.h,0,3,this.s),Bt(t=this.h,0,1,e=new Ti)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){return"outputCategoryMask"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),"outputConfidenceMasks"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}segment(t,e,n,i){const r=typeof n!="function"?n:{};this.j=typeof n=="function"?n:i,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,i=new ck;const a=new m8;var s=new Pve;if(pl(s,1,255),Bt(a,0,12,s),e.keypoint&&e.scribble)throw Error("Cannot provide both keypoint and scribble.");if(e.keypoint){var o=new QM;_v(o,3,!0),Ot(o,1,e.keypoint.x),Ot(o,2,e.keypoint.y),wg(a,5,pw,o)}else{if(!e.scribble)throw Error("Must provide either a keypoint or a scribble.");for(o of(s=new Ive,e.scribble))_v(e=new QM,3,!0),Ot(e,1,o.x),Ot(e,2,o.y),Ab(s,1,QM,e);wg(a,15,pw,s)}Ab(i,1,m8,a),this.g.addProtoToStream(i.g(),"drishti.RenderData","roi_in",n),po(this,t,r);e:{try{const f=new dw(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var l=f;break e}this.j(f)}finally{_S(this)}l=void 0}return l}m(){var t=new ka;mi(t,"image_in"),mi(t,"roi_in"),mi(t,"norm_rect_in");const e=new As;Bo(e,WG,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),oi(n,"IMAGE:image_in"),oi(n,"ROI:roi_in"),oi(n,"NORM_RECT:norm_rect_in"),n.o(e),Ds(t,n),yS(this,t),this.outputConfidenceMasks&&(Rn(t,"confidence_masks"),yn(n,"CONFIDENCE_MASKS:confidence_masks"),fm(this,"confidence_masks"),this.g.ba("confidence_masks",(i,r)=>{this.confidenceMasks=i.map(a=>pm(this,a,!0,!this.j)),St(this,r)}),this.g.attachEmptyPacketListener("confidence_masks",i=>{this.confidenceMasks=[],St(this,i)})),this.outputCategoryMask&&(Rn(t,"category_mask"),yn(n,"CATEGORY_MASK:category_mask"),fm(this,"category_mask"),this.g.V("category_mask",(i,r)=>{this.categoryMask=pm(this,i,!1,!this.j),St(this,r)}),this.g.attachEmptyPacketListener("category_mask",i=>{this.categoryMask=void 0,St(this,i)})),Rn(t,"quality_scores"),yn(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(i,r)=>{this.qualityScores=i,St(this,r)}),this.g.attachEmptyPacketListener("quality_scores",i=>{this.categoryMask=void 0,St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Qo.prototype.segment=Qo.prototype.segment,Qo.prototype.setOptions=Qo.prototype.o,Qo.createFromModelPath=function(t,e){return vn(Qo,t,{baseOptions:{modelAssetPath:e}})},Qo.createFromModelBuffer=function(t,e){return vn(Qo,t,{baseOptions:{modelAssetBuffer:e}})},Qo.createFromOptions=function(t,e){return vn(Qo,t,e)};var Ws=class extends Ha{constructor(t,e){super(new ho(t,e),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},Bt(t=this.h=new YG,0,1,e=new Ti)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){return t.displayNamesLocale!==void 0?ii(this.h,2,Im(t.displayNamesLocale)):"displayNamesLocale"in t&&ii(this.h,2),t.maxResults!==void 0?pl(this.h,3,t.maxResults):"maxResults"in t&&ii(this.h,3),t.scoreThreshold!==void 0?Ot(this.h,4,t.scoreThreshold):"scoreThreshold"in t&&ii(this.h,4),t.categoryAllowlist!==void 0?wb(this.h,5,t.categoryAllowlist):"categoryAllowlist"in t&&ii(this.h,5),t.categoryDenylist!==void 0?wb(this.h,6,t.categoryDenylist):"categoryDenylist"in t&&ii(this.h,6),this.l(t)}D(t,e){return this.j={detections:[]},po(this,t,e),this.j}F(t,e,n){return this.j={detections:[]},_l(this,t,n,e),this.j}m(){var t=new ka;mi(t,"input_frame_gpu"),mi(t,"norm_rect"),Rn(t,"detections");const e=new As;Bo(e,Ave,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),oi(n,"IMAGE:input_frame_gpu"),oi(n,"NORM_RECT:norm_rect"),yn(n,"DETECTIONS:detections"),n.o(e),Ds(t,n),this.g.attachProtoVectorListener("detections",(i,r)=>{for(const a of i)i=EG(a),this.j.detections.push(ZG(i));St(this,r)}),this.g.attachEmptyPacketListener("detections",i=>{St(this,i)}),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ws.prototype.detectForVideo=Ws.prototype.F,Ws.prototype.detect=Ws.prototype.D,Ws.prototype.setOptions=Ws.prototype.o,Ws.createFromModelPath=async function(t,e){return vn(Ws,t,{baseOptions:{modelAssetPath:e}})},Ws.createFromModelBuffer=function(t,e){return vn(Ws,t,{baseOptions:{modelAssetBuffer:e}})},Ws.createFromOptions=function(t,e){return vn(Ws,t,e)};var mw=class{constructor(t,e,n){this.landmarks=t,this.worldLandmarks=e,this.segmentationMasks=n}close(){var t;(t=this.segmentationMasks)==null||t.forEach(e=>{e.close()})}};function g8(t){t.landmarks=[],t.worldLandmarks=[],t.segmentationMasks=void 0}function v8(t){try{const e=new mw(t.landmarks,t.worldLandmarks,t.segmentationMasks);if(!t.s)return e;t.s(e)}finally{_S(t)}}mw.prototype.close=mw.prototype.close;var rs=class extends Ha{constructor(t,e){super(new ho(t,e),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,Bt(t=this.h=new qG,0,1,e=new Ti),this.v=new HG,Bt(this.h,0,3,this.v),this.j=new FG,Bt(this.h,0,2,this.j),pl(this.j,4,1),Ot(this.j,2,.5),Ot(this.v,2,.5),Ot(this.h,4,.5)}get baseOptions(){return Mn(this.h,Ti,1)}set baseOptions(t){Bt(this.h,0,1,t)}o(t){return"numPoses"in t&&pl(this.j,4,t.numPoses??1),"minPoseDetectionConfidence"in t&&Ot(this.j,2,t.minPoseDetectionConfidence??.5),"minTrackingConfidence"in t&&Ot(this.h,4,t.minTrackingConfidence??.5),"minPosePresenceConfidence"in t&&Ot(this.v,2,t.minPosePresenceConfidence??.5),"outputSegmentationMasks"in t&&(this.outputSegmentationMasks=t.outputSegmentationMasks??!1),this.l(t)}D(t,e,n){const i=typeof e!="function"?e:{};return this.s=typeof e=="function"?e:n,g8(this),po(this,t,i),v8(this)}F(t,e,n,i){const r=typeof n!="function"?n:{};return this.s=typeof n=="function"?n:i,g8(this),_l(this,t,r,e),v8(this)}m(){var t=new ka;mi(t,"image_in"),mi(t,"norm_rect"),Rn(t,"normalized_landmarks"),Rn(t,"world_landmarks"),Rn(t,"segmentation_masks");const e=new As;Bo(e,wve,this.h);const n=new ya;Rs(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),oi(n,"IMAGE:image_in"),oi(n,"NORM_RECT:norm_rect"),yn(n,"NORM_LANDMARKS:normalized_landmarks"),yn(n,"WORLD_LANDMARKS:world_landmarks"),n.o(e),Ds(t,n),yS(this,t),this.g.attachProtoVectorListener("normalized_landmarks",(i,r)=>{this.landmarks=[];for(const a of i)i=s1(a),this.landmarks.push(vS(i));St(this,r)}),this.g.attachEmptyPacketListener("normalized_landmarks",i=>{this.landmarks=[],St(this,i)}),this.g.attachProtoVectorListener("world_landmarks",(i,r)=>{this.worldLandmarks=[];for(const a of i)i=Op(a),this.worldLandmarks.push(Rg(i));St(this,r)}),this.g.attachEmptyPacketListener("world_landmarks",i=>{this.worldLandmarks=[],St(this,i)}),this.outputSegmentationMasks&&(yn(n,"SEGMENTATION_MASK:segmentation_masks"),fm(this,"segmentation_masks"),this.g.ba("segmentation_masks",(i,r)=>{this.segmentationMasks=i.map(a=>pm(this,a,!0,!this.s)),St(this,r)}),this.g.attachEmptyPacketListener("segmentation_masks",i=>{this.segmentationMasks=[],St(this,i)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};rs.prototype.detectForVideo=rs.prototype.F,rs.prototype.detect=rs.prototype.D,rs.prototype.setOptions=rs.prototype.o,rs.createFromModelPath=function(t,e){return vn(rs,t,{baseOptions:{modelAssetPath:e}})},rs.createFromModelBuffer=function(t,e){return vn(rs,t,{baseOptions:{modelAssetBuffer:e}})},rs.createFromOptions=function(t,e){return vn(rs,t,e)},rs.POSE_CONNECTIONS=lk;function zve({onGesture:t,onRotate:e}){const n=O.useRef(null),i=O.useRef(null),[r,a]=O.useState(null),[s,o]=O.useState(!1),l=O.useRef(0);O.useEffect(()=>{(async()=>{const d=await Yf.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/wasm"),p=await ua.createFromOptions(d,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/gesture_recognizer/gesture_recognizer/float16/1/gesture_recognizer.task",delegate:"GPU"},runningMode:"VIDEO",numHands:2});a(p)})()},[]),O.useEffect(()=>r?((async()=>{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const d=await navigator.mediaDevices.getUserMedia({video:{width:320,height:240}});n.current&&(n.current.srcObject=d,n.current.addEventListener("loadeddata",f),o(!0))}catch(d){console.error("Webcam error:",d)}})(),()=>{n.current&&n.current.srcObject&&n.current.srcObject.getTracks().forEach(p=>p.stop()),cancelAnimationFrame(l.current)}):void 0,[r]);const f=()=>{if(!n.current||!i.current||!r)return;const h=n.current,d=i.current,p=d.getContext("2d");if(h.readyState===4){d.width=h.videoWidth,d.height=h.videoHeight;const g=r.recognizeForVideo(h,Date.now());if(p){if(p.save(),p.clearRect(0,0,d.width,d.height),g.landmarks){const b=new la(p);for(const v of g.landmarks)b.drawConnectors(v,ua.HAND_CONNECTIONS,{color:"#00FF00",lineWidth:2}),b.drawLandmarks(v,{color:"#FF0000",lineWidth:1})}p.restore()}let y=null,S=0;if(g.handedness.length>0)for(let b=0;b<g.handedness.length;b++){const v=g.handedness[b][0],x=g.gestures[b][0],E=g.landmarks[b],T=v.categoryName==="Left",w=v.categoryName==="Right";if(T&&(x.categoryName==="Closed_Fist"?y="Assemble":x.categoryName==="Open_Palm"&&(y="Disperse")),w){const R=E[0],U=E[12].x-R.x;Math.abs(U)>.05&&(S=-(U*3),S=Math.max(-1,Math.min(1,S)))}}t(y),e(S)}l.current=requestAnimationFrame(f)};return $.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col items-end pointer-events-none",children:$.jsxs("div",{className:"bg-black/50 p-2 rounded-lg backdrop-blur-sm border border-gold/30",children:[$.jsx("h3",{className:"text-white text-xs mb-1 font-mono text-center",children:"Gesture Control"}),$.jsxs("div",{className:"relative w-32 h-24 bg-black/80 rounded overflow-hidden",children:[$.jsx("video",{ref:n,className:"absolute top-0 left-0 w-full h-full object-cover opacity-50 -scale-x-100",autoPlay:!0,playsInline:!0,muted:!0}),$.jsx("canvas",{ref:i,className:"absolute top-0 left-0 w-full h-full object-cover -scale-x-100"})]}),$.jsxs("div",{className:"text-[10px] text-gray-300 mt-1 space-y-1",children:[$.jsx("p",{children:"Left Hand (Scale):"}),$.jsxs("p",{className:"pl-2",children:[" Fist: ",$.jsx("span",{className:"text-red-400",children:"Assemble"})]}),$.jsxs("p",{className:"pl-2",children:[" Palm: ",$.jsx("span",{className:"text-emerald-400",children:"Disperse"})]}),$.jsx("div",{className:"h-1"}),$.jsx("p",{children:"Right Hand (Rotate):"}),$.jsxs("p",{className:"pl-2",children:[" Tilt L/R: ",$.jsx("span",{className:"text-blue-400",children:"Spin"})]})]})]})})}function Bve(){const[t,e]=O.useState(!1),[n,i]=O.useState(.5),r=O.useRef(null);return O.useEffect(()=>{r.current&&(t?r.current.play().catch(a=>console.error("Playback failed",a)):r.current.pause())},[t]),O.useEffect(()=>{r.current&&(r.current.volume=n)},[n]),$.jsxs("div",{className:"fixed bottom-8 left-8 z-50 flex items-center gap-4 p-4 rounded-2xl border border-[#D4AF37]/30 bg-black/40 backdrop-blur-xl shadow-[0_0_20px_rgba(0,0,0,0.3)]",children:[$.jsx("audio",{ref:r,src:"/music.mp3",loop:!0,preload:"auto"}),$.jsxs("button",{onClick:()=>e(!t),className:"group relative w-12 h-12 flex items-center justify-center rounded-full border border-[#D4AF37] bg-[#D4AF37]/10 text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black transition-all duration-300",children:[t?$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:$.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}):$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 ml-1",children:$.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})}),$.jsx("div",{className:"absolute inset-0 rounded-full ring-1 ring-[#D4AF37] opacity-50 group-hover:scale-110 transition-transform duration-500"})]}),$.jsxs("div",{className:"flex flex-col gap-1 w-24",children:[$.jsx("span",{className:"text-[10px] text-[#D4AF37] font-serif tracking-widest uppercase opacity-80",children:"Volume"}),$.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:n,onChange:a=>i(parseFloat(a.target.value)),className:"w-full h-1 bg-[#D4AF37]/30 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[#D4AF37] hover:[&::-webkit-slider-thumb]:scale-125 transition-all"})]})]})}function Fve(){const t=O.useRef(null),e=O.useRef(null);return ta(n=>{if(!t.current)return;const i=n.clock.elapsedTime,r=28,a=.6,s=Math.sin(i*a)*r,o=Math.cos(i*a)*r,l=10+Math.sin(i*.5)*15;t.current.position.set(s,l,o);const f=i+.1,h=Math.sin(f*a)*r,d=Math.cos(f*a)*r,p=10+Math.sin(f*.5)*15;t.current.lookAt(h,p,d)}),$.jsxs($.Fragment,{children:[$.jsxs("group",{ref:t,children:[$.jsxs("mesh",{position:[0,0,0],castShadow:!0,children:[$.jsx("boxGeometry",{args:[2,1,3]}),$.jsx("meshStandardMaterial",{color:"#8B0000"})," "]}),$.jsxs("mesh",{position:[.8,-.5,0],children:[$.jsx("boxGeometry",{args:[.1,.1,3.5]}),$.jsx("meshStandardMaterial",{color:"#D4AF37",metalness:.8,roughness:.2})]}),$.jsxs("mesh",{position:[-.8,-.5,0],children:[$.jsx("boxGeometry",{args:[.1,.1,3.5]}),$.jsx("meshStandardMaterial",{color:"#D4AF37",metalness:.8,roughness:.2})]}),$.jsxs("mesh",{position:[0,.8,-.5],children:[$.jsx("sphereGeometry",{args:[.6,16,16]}),$.jsx("meshStandardMaterial",{color:"#FF0000"})]}),$.jsxs("mesh",{position:[0,1.4,-.5],children:[$.jsx("sphereGeometry",{args:[.3,16,16]}),$.jsx("meshStandardMaterial",{color:"#FFCC99"})," "]}),$.jsxs("mesh",{position:[0,1.3,-.2],children:[$.jsx("sphereGeometry",{args:[.2,16,16]}),$.jsx("meshStandardMaterial",{color:"#FFFFFF"})]}),$.jsxs("mesh",{position:[0,1.6,-.5],children:[$.jsx("coneGeometry",{args:[.3,.6,16]}),$.jsx("meshStandardMaterial",{color:"#FF0000"})]}),$.jsxs("group",{position:[0,0,4],children:[$.jsx(u_,{position:[-.8,0,0]}),$.jsx(u_,{position:[.8,0,0]}),$.jsx(u_,{position:[-.8,0,2.5]}),$.jsx(u_,{position:[.8,0,2.5]}),$.jsxs("mesh",{position:[0,.5,-1],rotation:[Math.PI/2,0,0],children:[$.jsx("cylinderGeometry",{args:[.02,.02,4]}),$.jsx("meshBasicMaterial",{color:"#5C4033"})]})]}),"// Magic Trail Particles",$.jsx("pointLight",{color:"#FFD700",intensity:1,distance:10,decay:2}),$.jsx("group",{ref:e,position:[0,.5,-2.5]}),$.jsxs("mesh",{position:[0,.5,-2],rotation:[Math.PI/2,0,0],children:[$.jsx("cylinderGeometry",{args:[.01,.01,1.5]}),$.jsx("meshBasicMaterial",{color:"#C0C0C0",transparent:!0,opacity:.5})]})]}),$.jsx(Hve,{attachmentRef:e})]})}function Hve({attachmentRef:t}){const e=O.useRef(null),n=Gve(),i=kve(),r=10,a=6,s=.4,o=O.useMemo(()=>{const h=r*a,d=new Float32Array(h*3),p=new Float32Array(h*3),g=new Float32Array(h);for(let y=0;y<a;y++)for(let S=0;S<r;S++){const b=y*r+S,v=S*s,x=-y*s,E=0;d[b*3]=v,d[b*3+1]=x,d[b*3+2]=E,p[b*3]=v,p[b*3+1]=x,p[b*3+2]=E,g[b]=S===0?0:1}return{pos:d,oldPos:p,mass:g}},[]),l=O.useMemo(()=>{const h=[];for(let d=0;d<a;d++)for(let p=0;p<r;p++){const g=d*r+p;p<r-1&&h.push([g,g+1,s]),d<a-1&&h.push([g,g+r,s])}return h},[]);new k;const f=new k;return ta((h,d)=>{if(!e.current||!t.current)return;const{pos:p,oldPos:g,mass:y}=o,S=Math.min(d,.03),b=.98,v=-9.8;t.current.getWorldPosition(f);for(let T=0;T<a;T++){const w=T*r+0,R=1-T*s;p[w*3]=f.x,p[w*3+1]=f.y+R,p[w*3+2]=f.z}for(let T=0;T<p.length/3;T++){if(y[T]===0)continue;const w=T*3,R=p[w],N=p[w+1],U=p[w+2],A=(R-g[w])*b,C=(N-g[w+1])*b,I=(U-g[w+2])*b;g[w]=R,g[w+1]=N,g[w+2]=U;let X=v*.3*S*S;const j=Math.sin(R*.5+U*.5+h.clock.elapsedTime*5)*.1,Y=j*.05,Z=j*.05;p[w]=R+A+Y,p[w+1]=N+C+X,p[w+2]=U+I+Z}const x=3;for(let T=0;T<x;T++)for(let w=0;w<l.length;w++){const[R,N,U]=l[w],A=R*3,C=N*3,I=p[A],X=p[A+1],j=p[A+2],Y=p[C],Z=p[C+1],z=p[C+2],G=Y-I,q=Z-X,se=z-j,le=Math.sqrt(G*G+q*q+se*se),me=(le-U)/le,Ae=y[R],Le=y[N];if(Ae+Le===0)continue;const yt=G*me*.5,he=q*me*.5,Te=se*me*.5;Ae!==0&&(p[A]+=yt,p[A+1]+=he,p[A+2]+=Te),Le!==0&&(p[C]-=yt,p[C+1]-=he,p[C+2]-=Te)}const E=e.current.geometry;E.attributes.position.array.set(p),E.attributes.position.needsUpdate=!0,E.computeVertexNormals()}),$.jsxs("group",{children:[$.jsxs("mesh",{ref:e,castShadow:!0,receiveShadow:!0,frustumCulled:!1,children:[$.jsx("planeGeometry",{args:[1,1,r-1,a-1]}),$.jsx("meshStandardMaterial",{map:n,side:Oo,roughness:.4,metalness:.1,alphaTest:.5})]}),$.jsx(Vve,{meshRef:e,texture:i})]})}function Vve({meshRef:t,texture:e}){const n=O.useRef(null);return ta(()=>{if(t.current&&n.current){const i=t.current.geometry,r=n.current.geometry;i.attributes.position.count===r.attributes.position.count&&(r.attributes.position.array.set(i.attributes.position.array),r.attributes.position.needsUpdate=!0,r.computeVertexNormals())}}),$.jsxs("mesh",{ref:n,frustumCulled:!1,children:[$.jsx("planeGeometry",{args:[1,1,9,5]}),$.jsx("meshStandardMaterial",{map:e,side:lr,roughness:.4,metalness:.1,alphaTest:.5})]})}function Gve(){return O.useMemo(()=>{const t=document.createElement("canvas");t.width=512,t.height=128;const e=t.getContext("2d");e.fillStyle="#8B0000",e.fillRect(0,0,512,128),e.strokeStyle="#FFD700",e.lineWidth=15,e.strokeRect(0,0,512,128),e.fillStyle="#FFFFFF",e.font="bold 80px serif",e.textAlign="center",e.textBaseline="middle",e.fillText("LOVE YOU",256,64);const n=new F4(t);return n.anisotropy=16,n},[])}function kve(){return O.useMemo(()=>{const t=document.createElement("canvas");t.width=512,t.height=128;const e=t.getContext("2d");e.fillStyle="#8B0000",e.fillRect(0,0,512,128),e.strokeStyle="#FFD700",e.lineWidth=15,e.strokeRect(0,0,512,128),e.fillStyle="#FFFFFF",e.font="bold 80px serif",e.textAlign="center",e.textBaseline="middle",e.save(),e.translate(512,0),e.scale(-1,1),e.fillText("LOVE YOU",256,64),e.restore();const n=new F4(t);return n.anisotropy=16,n},[])}function u_({position:t}){const e=O.useRef(null);return ta(n=>{if(!e.current)return;const i=n.clock.elapsedTime;e.current.position.y=t[1]+Math.sin(i*10+t[2])*.2,e.current.rotation.x=Math.sin(i*10+t[2])*.1}),$.jsxs("group",{ref:e,position:t,children:[$.jsxs("mesh",{position:[0,0,0],children:[$.jsx("boxGeometry",{args:[.5,.5,1.2]}),$.jsx("meshStandardMaterial",{color:"#8B4513"})," "]}),$.jsxs("mesh",{position:[0,.4,.5],rotation:[-.5,0,0],children:[$.jsx("boxGeometry",{args:[.3,.6,.3]}),$.jsx("meshStandardMaterial",{color:"#8B4513"})]}),$.jsxs("mesh",{position:[0,.8,.7],children:[$.jsx("boxGeometry",{args:[.35,.35,.5]}),$.jsx("meshStandardMaterial",{color:"#8B4513"})]}),t[2]>2&&t[0]>0&&$.jsxs("mesh",{position:[0,.8,1],children:[$.jsx("sphereGeometry",{args:[.08,8,8]}),$.jsx("meshStandardMaterial",{color:"#FF0000",emissive:"#FF0000",emissiveIntensity:2})]}),$.jsxs("mesh",{position:[-.2,-.6,.4],children:[$.jsx("boxGeometry",{args:[.1,.8,.1]}),$.jsx("meshStandardMaterial",{color:"#8B4513"})]}),$.jsxs("mesh",{position:[.2,-.6,.4],children:[$.jsx("boxGeometry",{args:[.1,.8,.1]}),$.jsx("meshStandardMaterial",{color:"#8B4513"})]}),$.jsxs("mesh",{position:[-.2,-.6,-.4],children:[$.jsx("boxGeometry",{args:[.1,.8,.1]}),$.jsx("meshStandardMaterial",{color:"#8B4513"})]}),$.jsxs("mesh",{position:[.2,-.6,-.4],children:[$.jsx("boxGeometry",{args:[.1,.8,.1]}),$.jsx("meshStandardMaterial",{color:"#8B4513"})]}),$.jsxs("mesh",{position:[0,1.1,.6],children:[$.jsx("cylinderGeometry",{args:[.4,.1,.4]}),$.jsx("meshStandardMaterial",{color:"#D2B48C"})," "]})]})}function jve(){const[t,e]=O.useState(0);return O.useEffect(()=>{const n=()=>{const r=new Date,s=new Date("2026-01-01T00:00:00").getTime()-r.getTime(),o=Math.ceil(s/(1e3*60*60*24));e(Math.max(0,o))};n();const i=setInterval(n,6e4);return()=>clearInterval(i)},[]),$.jsx("div",{className:"mt-4",children:$.jsxs("p",{className:"text-2xl text-white/90 font-serif tracking-wide drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]",children:[$.jsx("span",{className:"text-[#D4AF37] font-bold text-3xl mr-2",children:t}),"Days Until We Meet"]})})}function Xve(){const[t,e]=O.useState(!1),[n,i]=O.useState(0);O.useEffect(()=>{const s=setTimeout(()=>e(!0),1e3);return()=>clearTimeout(s)},[]);const r=s=>{s==="Assemble"?e(!0):s==="Disperse"&&e(!1)},a=s=>{i(s)};return $.jsxs($.Fragment,{children:[$.jsx(hV,{hidden:!0}),$.jsx(zve,{onGesture:r,onRotate:a}),$.jsx(Bve,{}),$.jsx(cre,{dpr:[1,2],children:$.jsxs(O.Suspense,{fallback:null,children:[$.jsx(Yae,{makeDefault:!0,position:[0,4,60],fov:50}),$.jsx("ambientLight",{intensity:.5}),$.jsx(fse,{preset:"lobby"}),$.jsx(Fve,{}),$.jsx(oge,{}),$.jsx(sge,{formed:t,onToggle:()=>e(s=>!s),gestureRotation:n}),$.jsx(Uoe,{children:$.jsx(Ioe,{luminanceThreshold:.8,mipmapBlur:!0,intensity:1.2,radius:.4})}),$.jsx(qae,{enableRotate:!1,enableZoom:!0,enablePan:!1})]})}),$.jsxs("div",{className:"absolute top-0 left-0 w-full p-8 pointer-events-none text-white font-serif z-10 flex justify-between items-start",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-4xl font-bold text-[#D4AF37] drop-shadow-[0_0_10px_rgba(212,175,55,0.8)]",children:"MERRY CHRISTMAS"}),$.jsx(jve,{})]}),$.jsxs("button",{className:"pointer-events-auto group relative px-8 py-3 rounded-full border border-[#D4AF37]/50 bg-black/40 backdrop-blur-xl text-[#D4AF37] font-serif text-lg tracking-widest uppercase hover:bg-[#D4AF37]/10 hover:border-[#D4AF37] hover:shadow-[0_0_20px_rgba(212,175,55,0.3)] transition-all duration-500 overflow-hidden",onClick:()=>e(s=>!s),children:[$.jsx("span",{className:"relative z-10",children:t?"Disperse Tree":"Assemble Tree"}),$.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-[#D4AF37]/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 ease-in-out"})]})]})]})}cq.createRoot(document.getElementById("root")).render($.jsx(J.StrictMode,{children:$.jsx(Xve,{})}));
